import { defineComponent as Lr, computed as Mo, ref as Un, toRefs as WC, shallowRef as jp, onMounted as qx, onBeforeUnmount as Z3, watch as si, reactive as Kx, isProxy as Hd, toRaw as Of, openBlock as fe, createElementBlock as Ke, Fragment as Hr, renderList as Wi, normalizeClass as je, createElementVNode as we, toDisplayString as Qe, createCommentVNode as xr, createTextVNode as _n, resolveComponent as qe, createBlock as mt, withCtx as $t, createVNode as He, mergeProps as jx, resolveDynamicComponent as Q3, render as zd, renderSlot as Zx, unref as ra, isRef as Qx, h as kC, nextTick as J3, pushScopeId as e5, popScopeId as t5 } from "vue";
import { Menu as zf, Dropdown as r5, Pagination as n5, Spin as i5, Button as o5, Input as a5, Empty as l5, MenuItem as s5, Checkbox as u5, Switch as f5, RadioGroup as c5, Radio as h5, RadioButton as d5 } from "ant-design-vue";
import v5 from "vuedraggable";
var Zp = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  get Base() {
    return Qn;
  },
  get Circle() {
    return P9;
  },
  get Ellipse() {
    return H9;
  },
  get Image() {
    return f0;
  },
  get Line() {
    return k9;
  },
  get Marker() {
    return Y9;
  },
  get Path() {
    return c0;
  },
  get Polygon() {
    return eD;
  },
  get Polyline() {
    return rD;
  },
  get Rect() {
    return aD;
  },
  get Text() {
    return sD;
  }
}), xv = function(e, r) {
  return xv = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, n) {
    t.__proto__ = n;
  } || function(t, n) {
    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
  }, xv(e, r);
};
function te(e, r) {
  if (typeof r != "function" && r !== null)
    throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
  xv(e, r);
  function t() {
    this.constructor = e;
  }
  e.prototype = r === null ? Object.create(r) : (t.prototype = r.prototype, new t());
}
var M = function() {
  return M = Object.assign || function(r) {
    for (var t, n = 1, i = arguments.length; n < i; n++) {
      t = arguments[n];
      for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (r[o] = t[o]);
    }
    return r;
  }, M.apply(this, arguments);
};
function xc(e, r) {
  var t = {};
  for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && r.indexOf(n) < 0 && (t[n] = e[n]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, n = Object.getOwnPropertySymbols(e); i < n.length; i++)
      r.indexOf(n[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[i]) && (t[n[i]] = e[n[i]]);
  return t;
}
function br(e) {
  var r = typeof Symbol == "function" && Symbol.iterator, t = r && e[r], n = 0;
  if (t) return t.call(e);
  if (e && typeof e.length == "number") return {
    next: function() {
      return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
    }
  };
  throw new TypeError(r ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function W(e, r) {
  var t = typeof Symbol == "function" && e[Symbol.iterator];
  if (!t) return e;
  var n = t.call(e), i, o = [], a;
  try {
    for (; (r === void 0 || r-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (l) {
    a = { error: l };
  } finally {
    try {
      i && !i.done && (t = n.return) && t.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}
function p5() {
  for (var e = 0, r = 0, t = arguments.length; r < t; r++) e += arguments[r].length;
  for (var n = Array(e), i = 0, r = 0; r < t; r++)
    for (var o = arguments[r], a = 0, l = o.length; a < l; a++, i++)
      n[i] = o[a];
  return n;
}
function j(e, r, t) {
  if (arguments.length === 2) for (var n = 0, i = r.length, o; n < i; n++)
    (o || !(n in r)) && (o || (o = Array.prototype.slice.call(r, 0, n)), o[n] = r[n]);
  return e.concat(o || Array.prototype.slice.call(r));
}
var GC = function(e) {
  return e !== null && typeof e != "function" && isFinite(e.length);
}, g5 = {}.toString, Sc = function(e, r) {
  return g5.call(e) === "[object " + r + "]";
}, va = function(e) {
  return Sc(e, "Function");
}, Gt = function(e) {
  return e == null;
}, En = function(e) {
  return Array.isArray ? Array.isArray(e) : Sc(e, "Array");
}, fs = function(e) {
  var r = typeof e;
  return e !== null && r === "object" || r === "function";
};
function Je(e, r) {
  if (e) {
    var t;
    if (En(e))
      for (var n = 0, i = e.length; n < i && (t = r(e[n], n), t !== !1); n++)
        ;
    else if (fs(e)) {
      for (var o in e)
        if (e.hasOwnProperty(o) && (t = r(e[o], o), t === !1))
          break;
    }
  }
}
var UC = function(e) {
  return typeof e == "object" && e !== null;
}, To = function(e) {
  if (En(e))
    return e.reduce(function(r, t) {
      return Math.max(r, t);
    }, e[0]);
}, Eo = function(e) {
  if (En(e))
    return e.reduce(function(r, t) {
      return Math.min(r, t);
    }, e[0]);
}, qn = function(e) {
  return Sc(e, "String");
}, Sv = function(e) {
  return Sc(e, "Number");
}, y5 = 1e-5;
function C5(e, r, t) {
  return t === void 0 && (t = y5), Math.abs(e - r) < t;
}
var Jx = function(e, r) {
  return (e % r + r) % r;
}, m5 = Math.PI / 180, eS = function(e) {
  return m5 * e;
}, _5 = Object.values ? function(e) {
  return Object.values(e);
} : function(e) {
  var r = [];
  return Je(e, function(t, n) {
    va(e) && n === "prototype" || r.push(t);
  }), r;
}, w5 = function(e) {
  return Gt(e) ? "" : e.toString();
}, tS = function(e) {
  var r = w5(e);
  return r.charAt(0).toUpperCase() + r.substring(1);
};
function x5(e) {
  var r = window.requestAnimationFrame || window.webkitRequestAnimationFrame || // @ts-ignore
  window.mozRequestAnimationFrame || // @ts-ignore
  window.msRequestAnimationFrame || function(t) {
    return setTimeout(t, 16);
  };
  return r(e);
}
function S5(e) {
  var r = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || // @ts-ignore
  window.mozCancelAnimationFrame || // @ts-ignore
  window.msCancelAnimationFrame || clearTimeout;
  r(e);
}
function b5(e, r) {
  for (var t in r)
    r.hasOwnProperty(t) && t !== "constructor" && r[t] !== void 0 && (e[t] = r[t]);
}
function rS(e, r, t, n) {
  return r && b5(e, r), e;
}
var T5 = function(e, r) {
  if (!va(e))
    throw new TypeError("Expected a function");
  var t = function() {
    for (var n = [], i = 0; i < arguments.length; i++)
      n[i] = arguments[i];
    var o = r ? r.apply(this, n) : n[0], a = t.cache;
    if (a.has(o))
      return a.get(o);
    var l = e.apply(this, n);
    return a.set(o, l), l;
  };
  return t.cache = /* @__PURE__ */ new Map(), t;
}, Wf = function(e, r) {
  if (e === r)
    return !0;
  if (!e || !r || qn(e) || qn(r))
    return !1;
  if (GC(e) || GC(r)) {
    if (e.length !== r.length)
      return !1;
    for (var t = !0, n = 0; n < e.length && (t = Wf(e[n], r[n]), !!t); n++)
      ;
    return t;
  }
  if (UC(e) || UC(r)) {
    var i = Object.keys(e), o = Object.keys(r);
    if (i.length !== o.length)
      return !1;
    for (var t = !0, n = 0; n < i.length && (t = Wf(e[i[n]], r[i[n]]), !!t); n++)
      ;
    return t;
  }
  return !1;
}, lf = {}, E5 = function(e) {
  return e = e || "g", lf[e] ? lf[e] += 1 : lf[e] = 1, e + lf[e];
}, sf = function() {
}, uf;
T5(function(e, r) {
  r === void 0 && (r = {});
  var t = r.fontSize, n = r.fontFamily, i = r.fontWeight, o = r.fontStyle, a = r.fontVariant;
  return uf || (uf = document.createElement("canvas").getContext("2d")), uf.font = [o, a, i, t + "px", n].join(" "), uf.measureText(qn(e) ? e : "").width;
}, function(e, r) {
  return r === void 0 && (r = {}), p5([e], _5(r)).join("");
});
var cs = `	
\v\f\r   ᠎             　\u2028\u2029`, L5 = new RegExp("([a-z])[" + cs + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + cs + "]*,?[" + cs + "]*)+)", "ig"), A5 = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + cs + "]*,?[" + cs + "]*", "ig"), el = function(e) {
  if (!e)
    return null;
  if (En(e))
    return e;
  var r = {
    a: 7,
    c: 6,
    o: 2,
    h: 1,
    l: 2,
    m: 2,
    r: 4,
    q: 4,
    s: 4,
    t: 2,
    v: 1,
    u: 3,
    z: 0
  }, t = [];
  return String(e).replace(L5, function(n, i, o) {
    var a = [], l = i.toLowerCase();
    if (o.replace(A5, function(s, f) {
      f && a.push(+f);
    }), l === "m" && a.length > 2 && (t.push([i].concat(a.splice(0, 2))), l = "l", i = i === "m" ? "l" : "L"), l === "o" && a.length === 1 && t.push([i, a[0]]), l === "r")
      t.push([i].concat(a));
    else
      for (; a.length >= r[l] && (t.push([i].concat(a.splice(0, r[l]))), !!r[l]); )
        ;
    return e;
  }), t;
}, bv = function(e, r) {
  for (var t = [], n = 0, i = e.length; i - 2 * !r > n; n += 2) {
    var o = [
      {
        x: +e[n - 2],
        y: +e[n - 1]
      },
      {
        x: +e[n],
        y: +e[n + 1]
      },
      {
        x: +e[n + 2],
        y: +e[n + 3]
      },
      {
        x: +e[n + 4],
        y: +e[n + 5]
      }
    ];
    r ? n ? i - 4 === n ? o[3] = {
      x: +e[0],
      y: +e[1]
    } : i - 2 === n && (o[2] = {
      x: +e[0],
      y: +e[1]
    }, o[3] = {
      x: +e[2],
      y: +e[3]
    }) : o[0] = {
      x: +e[i - 2],
      y: +e[i - 1]
    } : i - 4 === n ? o[3] = o[2] : n || (o[0] = {
      x: +e[n],
      y: +e[n + 1]
    }), t.push([
      "C",
      (-o[0].x + 6 * o[1].x + o[2].x) / 6,
      (-o[0].y + 6 * o[1].y + o[2].y) / 6,
      (o[1].x + 6 * o[2].x - o[3].x) / 6,
      (o[1].y + 6 * o[2].y - o[3].y) / 6,
      o[2].x,
      o[2].y
    ]);
  }
  return t;
}, ff = function(e, r, t, n, i) {
  var o = [];
  if (i === null && n === null && (n = t), e = +e, r = +r, t = +t, n = +n, i !== null) {
    var a = Math.PI / 180, l = e + t * Math.cos(-n * a), s = e + t * Math.cos(-i * a), f = r + t * Math.sin(-n * a), h = r + t * Math.sin(-i * a);
    o = [
      ["M", l, f],
      ["A", t, t, 0, +(i - n > 180), 0, s, h]
    ];
  } else
    o = [["M", e, r], ["m", 0, -n], ["a", t, n, 0, 1, 1, 0, 2 * n], ["a", t, n, 0, 1, 1, 0, -2 * n], ["z"]];
  return o;
}, Tv = function(e) {
  if (e = el(e), !e || !e.length)
    return [["M", 0, 0]];
  var r = [], t = 0, n = 0, i = 0, o = 0, a = 0, l, s;
  e[0][0] === "M" && (t = +e[0][1], n = +e[0][2], i = t, o = n, a++, r[0] = ["M", t, n]);
  for (var f = e.length === 3 && e[0][0] === "M" && e[1][0].toUpperCase() === "R" && e[2][0].toUpperCase() === "Z", h = void 0, d = void 0, v = a, g = e.length; v < g; v++) {
    if (r.push(h = []), d = e[v], l = d[0], l !== l.toUpperCase())
      switch (h[0] = l.toUpperCase(), h[0]) {
        case "A":
          h[1] = d[1], h[2] = d[2], h[3] = d[3], h[4] = d[4], h[5] = d[5], h[6] = +d[6] + t, h[7] = +d[7] + n;
          break;
        case "V":
          h[1] = +d[1] + n;
          break;
        case "H":
          h[1] = +d[1] + t;
          break;
        case "R":
          s = [t, n].concat(d.slice(1));
          for (var y = 2, C = s.length; y < C; y++)
            s[y] = +s[y] + t, s[++y] = +s[y] + n;
          r.pop(), r = r.concat(bv(s, f));
          break;
        case "O":
          r.pop(), s = ff(t, n, d[1], d[2]), s.push(s[0]), r = r.concat(s);
          break;
        case "U":
          r.pop(), r = r.concat(ff(t, n, d[1], d[2], d[3])), h = ["U"].concat(r[r.length - 1].slice(-2));
          break;
        case "M":
          i = +d[1] + t, o = +d[2] + n;
          break;
        default:
          for (var y = 1, C = d.length; y < C; y++)
            h[y] = +d[y] + (y % 2 ? t : n);
      }
    else if (l === "R")
      s = [t, n].concat(d.slice(1)), r.pop(), r = r.concat(bv(s, f)), h = ["R"].concat(d.slice(-2));
    else if (l === "O")
      r.pop(), s = ff(t, n, d[1], d[2]), s.push(s[0]), r = r.concat(s);
    else if (l === "U")
      r.pop(), r = r.concat(ff(t, n, d[1], d[2], d[3])), h = ["U"].concat(r[r.length - 1].slice(-2));
    else
      for (var _ = 0, w = d.length; _ < w; _++)
        h[_] = d[_];
    if (l = l.toUpperCase(), l !== "O")
      switch (h[0]) {
        case "Z":
          t = +i, n = +o;
          break;
        case "H":
          t = h[1];
          break;
        case "V":
          n = h[1];
          break;
        case "M":
          i = h[h.length - 2], o = h[h.length - 1];
          break;
        default:
          t = h[h.length - 2], n = h[h.length - 1];
      }
  }
  return r;
}, cf = function(e, r, t, n) {
  return [e, r, t, n, t, n];
}, YC = function(e, r, t, n, i, o) {
  var a = 0.3333333333333333, l = 2 / 3;
  return [a * e + l * t, a * r + l * n, a * i + l * t, a * o + l * n, i, o];
}, nS = function(e, r, t, n, i, o, a, l, s, f) {
  t === n && (t += 1);
  var h = Math.PI * 120 / 180, d = Math.PI / 180 * (+i || 0), v = [], g, y, C, _, w, x = function(nr, vr, Kt) {
    var io = nr * Math.cos(Kt) - vr * Math.sin(Kt), ri = nr * Math.sin(Kt) + vr * Math.cos(Kt);
    return {
      x: io,
      y: ri
    };
  };
  if (f)
    y = f[0], C = f[1], _ = f[2], w = f[3];
  else {
    g = x(e, r, -d), e = g.x, r = g.y, g = x(l, s, -d), l = g.x, s = g.y, e === l && r === s && (l += 1, s += 1);
    var S = (e - l) / 2, T = (r - s) / 2, R = S * S / (t * t) + T * T / (n * n);
    R > 1 && (R = Math.sqrt(R), t = R * t, n = R * n);
    var B = t * t, $ = n * n, N = (o === a ? -1 : 1) * Math.sqrt(Math.abs((B * $ - B * T * T - $ * S * S) / (B * T * T + $ * S * S)));
    _ = N * t * T / n + (e + l) / 2, w = N * -n * S / t + (r + s) / 2, y = Math.asin(((r - w) / n).toFixed(9)), C = Math.asin(((s - w) / n).toFixed(9)), y = e < _ ? Math.PI - y : y, C = l < _ ? Math.PI - C : C, y < 0 && (y = Math.PI * 2 + y), C < 0 && (C = Math.PI * 2 + C), a && y > C && (y = y - Math.PI * 2), !a && C > y && (C = C - Math.PI * 2);
  }
  var z = C - y;
  if (Math.abs(z) > h) {
    var V = C, X = l, Z = s;
    C = y + h * (a && C > y ? 1 : -1), l = _ + t * Math.cos(C), s = w + n * Math.sin(C), v = nS(l, s, t, n, i, 0, a, X, Z, [C, V, _, w]);
  }
  z = C - y;
  var ne = Math.cos(y), se = Math.sin(y), q = Math.cos(C), ee = Math.sin(C), Oe = Math.tan(z / 4), me = 4 / 3 * t * Oe, _e = 4 / 3 * n * Oe, ke = [e, r], Ee = [e + me * se, r - _e * ne], Ze = [l + me * ee, s - _e * q], ft = [l, s];
  if (Ee[0] = 2 * ke[0] - Ee[0], Ee[1] = 2 * ke[1] - Ee[1], f)
    return [Ee, Ze, ft].concat(v);
  v = [Ee, Ze, ft].concat(v).join().split(",");
  for (var Fe = [], Ge = 0, ot = v.length; Ge < ot; Ge++)
    Fe[Ge] = Ge % 2 ? x(v[Ge - 1], v[Ge], d).y : x(v[Ge], v[Ge + 1], d).x;
  return Fe;
}, Ev = function(e, r) {
  var t = Tv(e), n = r && Tv(r), i = {
    x: 0,
    y: 0,
    bx: 0,
    by: 0,
    X: 0,
    Y: 0,
    qx: null,
    qy: null
  }, o = {
    x: 0,
    y: 0,
    bx: 0,
    by: 0,
    X: 0,
    Y: 0,
    qx: null,
    qy: null
  }, a = [], l = [], s = "", f = "", h, d = function(S, T, R) {
    var B, $;
    if (!S)
      return ["C", T.x, T.y, T.x, T.y, T.x, T.y];
    switch (!(S[0] in {
      T: 1,
      Q: 1
    }) && (T.qx = T.qy = null), S[0]) {
      case "M":
        T.X = S[1], T.Y = S[2];
        break;
      case "A":
        S = ["C"].concat(nS.apply(0, [T.x, T.y].concat(S.slice(1))));
        break;
      case "S":
        R === "C" || R === "S" ? (B = T.x * 2 - T.bx, $ = T.y * 2 - T.by) : (B = T.x, $ = T.y), S = ["C", B, $].concat(S.slice(1));
        break;
      case "T":
        R === "Q" || R === "T" ? (T.qx = T.x * 2 - T.qx, T.qy = T.y * 2 - T.qy) : (T.qx = T.x, T.qy = T.y), S = ["C"].concat(YC(T.x, T.y, T.qx, T.qy, S[1], S[2]));
        break;
      case "Q":
        T.qx = S[1], T.qy = S[2], S = ["C"].concat(YC(T.x, T.y, S[1], S[2], S[3], S[4]));
        break;
      case "L":
        S = ["C"].concat(cf(T.x, T.y, S[1], S[2]));
        break;
      case "H":
        S = ["C"].concat(cf(T.x, T.y, S[1], T.y));
        break;
      case "V":
        S = ["C"].concat(cf(T.x, T.y, T.x, S[1]));
        break;
      case "Z":
        S = ["C"].concat(cf(T.x, T.y, T.X, T.Y));
        break;
    }
    return S;
  }, v = function(S, T) {
    if (S[T].length > 7) {
      S[T].shift();
      for (var R = S[T]; R.length; )
        a[T] = "A", n && (l[T] = "A"), S.splice(T++, 0, ["C"].concat(R.splice(0, 6)));
      S.splice(T, 1), h = Math.max(t.length, n && n.length || 0);
    }
  }, g = function(S, T, R, B, $) {
    S && T && S[$][0] === "M" && T[$][0] !== "M" && (T.splice($, 0, ["M", B.x, B.y]), R.bx = 0, R.by = 0, R.x = S[$][1], R.y = S[$][2], h = Math.max(t.length, n && n.length || 0));
  };
  h = Math.max(t.length, n && n.length || 0);
  for (var y = 0; y < h; y++) {
    t[y] && (s = t[y][0]), s !== "C" && (a[y] = s, y && (f = a[y - 1])), t[y] = d(t[y], i, f), a[y] !== "A" && s === "C" && (a[y] = "C"), v(t, y), n && (n[y] && (s = n[y][0]), s !== "C" && (l[y] = s, y && (f = l[y - 1])), n[y] = d(n[y], o, f), l[y] !== "A" && s === "C" && (l[y] = "C"), v(n, y)), g(t, n, i, o, y), g(n, t, o, i, y);
    var C = t[y], _ = n && n[y], w = C.length, x = n && _.length;
    i.x = C[w - 2], i.y = C[w - 1], i.bx = parseFloat(C[w - 4]) || i.x, i.by = parseFloat(C[w - 3]) || i.y, o.bx = n && (parseFloat(_[x - 4]) || o.x), o.by = n && (parseFloat(_[x - 3]) || o.y), o.x = n && _[x - 2], o.y = n && _[x - 1];
  }
  return n ? [t, n] : t;
}, R5 = /,?([a-z]),?/gi, iS = function(e) {
  return e.join(",").replace(R5, "$1");
}, XC = function(e, r, t, n, i) {
  var o = -3 * r + 9 * t - 9 * n + 3 * i, a = e * o + 6 * r - 12 * t + 6 * n;
  return e * a - 3 * r + 3 * t;
}, VC = function(e, r, t, n, i, o, a, l, s) {
  s === null && (s = 1), s = s > 1 ? 1 : s < 0 ? 0 : s;
  for (var f = s / 2, h = 12, d = [
    -0.1252,
    0.1252,
    -0.3678,
    0.3678,
    -0.5873,
    0.5873,
    -0.7699,
    0.7699,
    -0.9041,
    0.9041,
    -0.9816,
    0.9816
  ], v = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472], g = 0, y = 0; y < h; y++) {
    var C = f * d[y] + f, _ = XC(C, e, t, i, a), w = XC(C, r, n, o, l), x = _ * _ + w * w;
    g += v[y] * Math.sqrt(x);
  }
  return f * g;
}, O5 = function(e, r, t, n, i, o, a, l) {
  for (var s = [], f = [[], []], h, d, v, g, y = 0; y < 2; ++y) {
    if (y === 0 ? (d = 6 * e - 12 * t + 6 * i, h = -3 * e + 9 * t - 9 * i + 3 * a, v = 3 * t - 3 * e) : (d = 6 * r - 12 * n + 6 * o, h = -3 * r + 9 * n - 9 * o + 3 * l, v = 3 * n - 3 * r), Math.abs(h) < 1e-12) {
      if (Math.abs(d) < 1e-12)
        continue;
      g = -v / d, g > 0 && g < 1 && s.push(g);
      continue;
    }
    var C = d * d - 4 * v * h, _ = Math.sqrt(C);
    if (!(C < 0)) {
      var w = (-d + _) / (2 * h);
      w > 0 && w < 1 && s.push(w);
      var x = (-d - _) / (2 * h);
      x > 0 && x < 1 && s.push(x);
    }
  }
  for (var S = s.length, T = S, R; S--; )
    g = s[S], R = 1 - g, f[0][S] = R * R * R * e + 3 * R * R * g * t + 3 * R * g * g * i + g * g * g * a, f[1][S] = R * R * R * r + 3 * R * R * g * n + 3 * R * g * g * o + g * g * g * l;
  return f[0][T] = e, f[1][T] = r, f[0][T + 1] = a, f[1][T + 1] = l, f[0].length = f[1].length = T + 2, {
    min: {
      x: Math.min.apply(0, f[0]),
      y: Math.min.apply(0, f[1])
    },
    max: {
      x: Math.max.apply(0, f[0]),
      y: Math.max.apply(0, f[1])
    }
  };
}, I5 = function(e, r, t, n, i, o, a, l) {
  if (!(Math.max(e, t) < Math.min(i, a) || Math.min(e, t) > Math.max(i, a) || Math.max(r, n) < Math.min(o, l) || Math.min(r, n) > Math.max(o, l))) {
    var s = (e * n - r * t) * (i - a) - (e - t) * (i * l - o * a), f = (e * n - r * t) * (o - l) - (r - n) * (i * l - o * a), h = (e - t) * (o - l) - (r - n) * (i - a);
    if (h) {
      var d = s / h, v = f / h, g = +d.toFixed(2), y = +v.toFixed(2);
      if (!(g < +Math.min(e, t).toFixed(2) || g > +Math.max(e, t).toFixed(2) || g < +Math.min(i, a).toFixed(2) || g > +Math.max(i, a).toFixed(2) || y < +Math.min(r, n).toFixed(2) || y > +Math.max(r, n).toFixed(2) || y < +Math.min(o, l).toFixed(2) || y > +Math.max(o, l).toFixed(2)))
        return {
          x: d,
          y: v
        };
    }
  }
}, go = function(e, r, t) {
  return r >= e.x && r <= e.x + e.width && t >= e.y && t <= e.y + e.height;
}, oS = function(e, r, t, n, i) {
  if (i)
    return [
      ["M", +e + +i, r],
      ["l", t - i * 2, 0],
      ["a", i, i, 0, 0, 1, i, i],
      ["l", 0, n - i * 2],
      ["a", i, i, 0, 0, 1, -i, i],
      ["l", i * 2 - t, 0],
      ["a", i, i, 0, 0, 1, -i, -i],
      ["l", 0, i * 2 - n],
      ["a", i, i, 0, 0, 1, i, -i],
      ["z"]
    ];
  var o = [["M", e, r], ["l", t, 0], ["l", 0, n], ["l", -t, 0], ["z"]];
  return o.parsePathArray = iS, o;
}, Lv = function(e, r, t, n) {
  return e === null && (e = r = t = n = 0), r === null && (r = e.y, t = e.width, n = e.height, e = e.x), {
    x: e,
    y: r,
    width: t,
    w: t,
    height: n,
    h: n,
    x2: e + t,
    y2: r + n,
    cx: e + t / 2,
    cy: r + n / 2,
    r1: Math.min(t, n) / 2,
    r2: Math.max(t, n) / 2,
    r0: Math.sqrt(t * t + n * n) / 2,
    path: oS(e, r, t, n),
    vb: [e, r, t, n].join(" ")
  };
}, M5 = function(e, r) {
  return e = Lv(e), r = Lv(r), go(r, e.x, e.y) || go(r, e.x2, e.y) || go(r, e.x, e.y2) || go(r, e.x2, e.y2) || go(e, r.x, r.y) || go(e, r.x2, r.y) || go(e, r.x, r.y2) || go(e, r.x2, r.y2) || (e.x < r.x2 && e.x > r.x || r.x < e.x2 && r.x > e.x) && (e.y < r.y2 && e.y > r.y || r.y < e.y2 && r.y > e.y);
}, qC = function(e, r, t, n, i, o, a, l) {
  En(e) || (e = [e, r, t, n, i, o, a, l]);
  var s = O5.apply(null, e);
  return Lv(s.min.x, s.min.y, s.max.x - s.min.x, s.max.y - s.min.y);
}, KC = function(e, r, t, n, i, o, a, l, s) {
  var f = 1 - s, h = Math.pow(f, 3), d = Math.pow(f, 2), v = s * s, g = v * s, y = h * e + d * 3 * s * t + f * 3 * s * s * i + g * a, C = h * r + d * 3 * s * n + f * 3 * s * s * o + g * l, _ = e + 2 * s * (t - e) + v * (i - 2 * t + e), w = r + 2 * s * (n - r) + v * (o - 2 * n + r), x = t + 2 * s * (i - t) + v * (a - 2 * i + t), S = n + 2 * s * (o - n) + v * (l - 2 * o + n), T = f * e + s * t, R = f * r + s * n, B = f * i + s * a, $ = f * o + s * l, N = 90 - Math.atan2(_ - x, w - S) * 180 / Math.PI;
  return {
    x: y,
    y: C,
    m: {
      x: _,
      y: w
    },
    n: {
      x,
      y: S
    },
    start: {
      x: T,
      y: R
    },
    end: {
      x: B,
      y: $
    },
    alpha: N
  };
}, B5 = function(e, r, t) {
  var n = qC(e), i = qC(r);
  if (!M5(n, i))
    return t ? 0 : [];
  for (var o = VC.apply(0, e), a = VC.apply(0, r), l = ~~(o / 8), s = ~~(a / 8), f = [], h = [], d = {}, v = t ? 0 : [], g = 0; g < l + 1; g++) {
    var y = KC.apply(0, e.concat(g / l));
    f.push({
      x: y.x,
      y: y.y,
      t: g / l
    });
  }
  for (var g = 0; g < s + 1; g++) {
    var y = KC.apply(0, r.concat(g / s));
    h.push({
      x: y.x,
      y: y.y,
      t: g / s
    });
  }
  for (var g = 0; g < l; g++)
    for (var C = 0; C < s; C++) {
      var _ = f[g], w = f[g + 1], x = h[C], S = h[C + 1], T = Math.abs(w.x - _.x) < 1e-3 ? "y" : "x", R = Math.abs(S.x - x.x) < 1e-3 ? "y" : "x", B = I5(_.x, _.y, w.x, w.y, x.x, x.y, S.x, S.y);
      if (B) {
        if (d[B.x.toFixed(4)] === B.y.toFixed(4))
          continue;
        d[B.x.toFixed(4)] = B.y.toFixed(4);
        var $ = _.t + Math.abs((B[T] - _[T]) / (w[T] - _[T])) * (w.t - _.t), N = x.t + Math.abs((B[R] - x[R]) / (S[R] - x[R])) * (S.t - x.t);
        $ >= 0 && $ <= 1 && N >= 0 && N <= 1 && (t ? v += 1 : v.push({
          x: B.x,
          y: B.y,
          t1: $,
          t2: N
        }));
      }
    }
  return v;
}, D5 = function(e, r, t) {
  e = Ev(e), r = Ev(r);
  for (var n, i, o, a, l, s, f, h, d, v, g = t ? 0 : [], y = 0, C = e.length; y < C; y++) {
    var _ = e[y];
    if (_[0] === "M")
      n = l = _[1], i = s = _[2];
    else {
      _[0] === "C" ? (d = [n, i].concat(_.slice(1)), n = d[6], i = d[7]) : (d = [n, i, n, i, l, s, l, s], n = l, i = s);
      for (var w = 0, x = r.length; w < x; w++) {
        var S = r[w];
        if (S[0] === "M")
          o = f = S[1], a = h = S[2];
        else {
          S[0] === "C" ? (v = [o, a].concat(S.slice(1)), o = v[6], a = v[7]) : (v = [o, a, o, a, f, h, f, h], o = f, a = h);
          var T = B5(d, v, t);
          if (t)
            g += T;
          else {
            for (var R = 0, B = T.length; R < B; R++)
              T[R].segment1 = y, T[R].segment2 = w, T[R].bez1 = d, T[R].bez2 = v;
            g = g.concat(T);
          }
        }
      }
    }
  }
  return g;
}, $5 = function(e, r) {
  return D5(e, r);
};
function F5(e, r) {
  var t = [], n = [];
  function i(o, a) {
    if (o.length === 1)
      t.push(o[0]), n.push(o[0]);
    else {
      for (var l = [], s = 0; s < o.length - 1; s++)
        s === 0 && t.push(o[0]), s === o.length - 2 && n.push(o[s + 1]), l[s] = [
          (1 - a) * o[s][0] + a * o[s + 1][0],
          (1 - a) * o[s][1] + a * o[s + 1][1]
        ];
      i(l, a);
    }
  }
  return e.length && i(e, r), { left: t, right: n.reverse() };
}
function P5(e, r, t) {
  var n = [[e[1], e[2]]];
  t = t || 2;
  var i = [];
  r[0] === "A" ? (n.push(r[6]), n.push(r[7])) : r[0] === "C" ? (n.push([r[1], r[2]]), n.push([r[3], r[4]]), n.push([r[5], r[6]])) : r[0] === "S" || r[0] === "Q" ? (n.push([r[1], r[2]]), n.push([r[3], r[4]])) : n.push([r[1], r[2]]);
  for (var o = n, a = 1 / t, l = 0; l < t - 1; l++) {
    var s = a / (1 - a * l), f = F5(o, s);
    i.push(f.left), o = f.right;
  }
  i.push(o);
  var h = i.map(function(d) {
    var v = [];
    return d.length === 4 && (v.push("C"), v = v.concat(d[2])), d.length >= 3 && (d.length === 3 && v.push("Q"), v = v.concat(d[1])), d.length === 2 && v.push("L"), v = v.concat(d[d.length - 1]), v;
  });
  return h;
}
var N5 = function(e, r, t) {
  if (t === 1)
    return [[].concat(e)];
  var n = [];
  if (r[0] === "L" || r[0] === "C" || r[0] === "Q")
    n = n.concat(P5(e, r, t));
  else {
    var i = [].concat(e);
    i[0] === "M" && (i[0] = "L");
    for (var o = 0; o <= t - 1; o++)
      n.push(i);
  }
  return n;
}, H5 = function(e, r) {
  if (e.length === 1)
    return e;
  var t = e.length - 1, n = r.length - 1, i = t / n, o = [];
  if (e.length === 1 && e[0][0] === "M") {
    for (var a = 0; a < n - t; a++)
      e.push(e[0]);
    return e;
  }
  for (var a = 0; a < n; a++) {
    var l = Math.floor(i * a);
    o[l] = (o[l] || 0) + 1;
  }
  var s = o.reduce(function(f, h, d) {
    return d === t ? f.concat(e[t]) : f.concat(N5(e[d], e[d + 1], h));
  }, []);
  return s.unshift(e[0]), (r[n] === "Z" || r[n] === "z") && s.push("Z"), s;
}, z5 = function(e, r) {
  if (e.length !== r.length)
    return !1;
  var t = !0;
  return Je(e, function(n, i) {
    if (n !== r[i])
      return t = !1, !1;
  }), t;
};
function W5(e, r, t) {
  var n = null, i = t;
  return r < i && (i = r, n = "add"), e < i && (i = e, n = "del"), {
    type: n,
    min: i
  };
}
var k5 = function(e, r) {
  var t = e.length, n = r.length, i, o, a = 0;
  if (t === 0 || n === 0)
    return null;
  for (var l = [], s = 0; s <= t; s++)
    l[s] = [], l[s][0] = { min: s };
  for (var f = 0; f <= n; f++)
    l[0][f] = { min: f };
  for (var s = 1; s <= t; s++) {
    i = e[s - 1];
    for (var f = 1; f <= n; f++) {
      o = r[f - 1], z5(i, o) ? a = 0 : a = 1;
      var h = l[s - 1][f].min + 1, d = l[s][f - 1].min + 1, v = l[s - 1][f - 1].min + a;
      l[s][f] = W5(h, d, v);
    }
  }
  return l;
}, aS = function(e, r) {
  var t = k5(e, r), n = e.length, i = r.length, o = [], a = 1, l = 1;
  if (t[n][i].min !== n) {
    for (var s = 1; s <= n; s++) {
      var f = t[s][s].min;
      l = s;
      for (var h = a; h <= i; h++)
        t[s][h].min < f && (f = t[s][h].min, l = h);
      a = l, t[s][a].type && o.push({ index: s - 1, type: t[s][a].type });
    }
    for (var s = o.length - 1; s >= 0; s--)
      a = o[s].index, o[s].type === "add" ? e.splice(a, 0, [].concat(e[a])) : e.splice(a, 1);
  }
  n = e.length;
  var d = i - n;
  if (n < i)
    for (var s = 0; s < d; s++)
      e[n - 1][0] === "z" || e[n - 1][0] === "Z" ? e.splice(n - 2, 0, e[n - 2]) : e.push(e[n - 1]), n += 1;
  return e;
};
function Wd(e, r, t) {
  for (var n = [].concat(e), i, o = 1 / (t + 1), a = lS(r)[0], l = 1; l <= t; l++)
    o *= l, i = Math.floor(e.length * o), i === 0 ? n.unshift([a[0] * o + e[i][0] * (1 - o), a[1] * o + e[i][1] * (1 - o)]) : n.splice(i, 0, [
      a[0] * o + e[i][0] * (1 - o),
      a[1] * o + e[i][1] * (1 - o)
    ]);
  return n;
}
function lS(e) {
  var r = [];
  switch (e[0]) {
    case "M":
      r.push([e[1], e[2]]);
      break;
    case "L":
      r.push([e[1], e[2]]);
      break;
    case "A":
      r.push([e[6], e[7]]);
      break;
    case "Q":
      r.push([e[3], e[4]]), r.push([e[1], e[2]]);
      break;
    case "T":
      r.push([e[1], e[2]]);
      break;
    case "C":
      r.push([e[5], e[6]]), r.push([e[1], e[2]]), r.push([e[3], e[4]]);
      break;
    case "S":
      r.push([e[3], e[4]]), r.push([e[1], e[2]]);
      break;
    case "H":
      r.push([e[1], e[1]]);
      break;
    case "V":
      r.push([e[1], e[1]]);
      break;
  }
  return r;
}
var Av = function(e, r) {
  if (e.length <= 1)
    return e;
  for (var t, n = 0; n < r.length; n++)
    if (e[n][0] !== r[n][0])
      switch (t = lS(e[n]), r[n][0]) {
        case "M":
          e[n] = ["M"].concat(t[0]);
          break;
        case "L":
          e[n] = ["L"].concat(t[0]);
          break;
        case "A":
          e[n] = [].concat(r[n]), e[n][6] = t[0][0], e[n][7] = t[0][1];
          break;
        case "Q":
          if (t.length < 2)
            if (n > 0)
              t = Wd(t, e[n - 1], 1);
            else {
              e[n] = r[n];
              break;
            }
          e[n] = ["Q"].concat(t.reduce(function(i, o) {
            return i.concat(o);
          }, []));
          break;
        case "T":
          e[n] = ["T"].concat(t[0]);
          break;
        case "C":
          if (t.length < 3)
            if (n > 0)
              t = Wd(t, e[n - 1], 2);
            else {
              e[n] = r[n];
              break;
            }
          e[n] = ["C"].concat(t.reduce(function(i, o) {
            return i.concat(o);
          }, []));
          break;
        case "S":
          if (t.length < 2)
            if (n > 0)
              t = Wd(t, e[n - 1], 1);
            else {
              e[n] = r[n];
              break;
            }
          e[n] = ["S"].concat(t.reduce(function(i, o) {
            return i.concat(o);
          }, []));
          break;
        default:
          e[n] = r[n];
      }
  return e;
}, G5 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  catmullRomToBezier: bv,
  fillPath: H5,
  fillPathByDiff: aS,
  formatPath: Av,
  intersection: $5,
  parsePathArray: iS,
  parsePathString: el,
  pathToAbsolute: Tv,
  pathToCurve: Ev,
  rectPath: oS
}), U5 = (
  /** @class */
  function() {
    function e(r, t) {
      this.bubbles = !0, this.target = null, this.currentTarget = null, this.delegateTarget = null, this.delegateObject = null, this.defaultPrevented = !1, this.propagationStopped = !1, this.shape = null, this.fromShape = null, this.toShape = null, this.propagationPath = [], this.type = r, this.name = r, this.originalEvent = t, this.timeStamp = t.timeStamp;
    }
    return e.prototype.preventDefault = function() {
      this.defaultPrevented = !0, this.originalEvent.preventDefault && this.originalEvent.preventDefault();
    }, e.prototype.stopPropagation = function() {
      this.propagationStopped = !0;
    }, e.prototype.toString = function() {
      var r = this.type;
      return "[Event (type=" + r + ")]";
    }, e.prototype.save = function() {
    }, e.prototype.restore = function() {
    }, e;
  }()
), Y5 = "*", bc = (
  /** @class */
  function() {
    function e() {
      this._events = {};
    }
    return e.prototype.on = function(r, t, n) {
      return this._events[r] || (this._events[r] = []), this._events[r].push({
        callback: t,
        once: !!n
      }), this;
    }, e.prototype.once = function(r, t) {
      return this.on(r, t, !0);
    }, e.prototype.emit = function(r) {
      for (var t = this, n = [], i = 1; i < arguments.length; i++)
        n[i - 1] = arguments[i];
      var o = this._events[r] || [], a = this._events[Y5] || [], l = function(s) {
        for (var f = s.length, h = 0; h < f; h++)
          if (s[h]) {
            var d = s[h], v = d.callback, g = d.once;
            g && (s.splice(h, 1), s.length === 0 && delete t._events[r], f--, h--), v.apply(t, n);
          }
      };
      l(o), l(a);
    }, e.prototype.off = function(r, t) {
      if (!r)
        this._events = {};
      else if (!t)
        delete this._events[r];
      else {
        for (var n = this._events[r] || [], i = n.length, o = 0; o < i; o++)
          n[o].callback === t && (n.splice(o, 1), i--, o--);
        n.length === 0 && delete this._events[r];
      }
      return this;
    }, e.prototype.getEvents = function() {
      return this._events;
    }, e;
  }()
);
function sS(e, r) {
  var t = e.indexOf(r);
  t !== -1 && e.splice(t, 1);
}
var jC = typeof window < "u" && typeof window.document < "u";
function uS(e, r) {
  if (e.isCanvas())
    return !0;
  for (var t = r.getParent(), n = !1; t; ) {
    if (t === e) {
      n = !0;
      break;
    }
    t = t.getParent();
  }
  return n;
}
function Rv(e) {
  return e.cfg.visible && e.cfg.capture;
}
var X5 = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this) || this;
      n.destroyed = !1;
      var i = n.getDefaultCfg();
      return n.cfg = rS(i, t), n;
    }
    return r.prototype.getDefaultCfg = function() {
      return {};
    }, r.prototype.get = function(t) {
      return this.cfg[t];
    }, r.prototype.set = function(t, n) {
      this.cfg[t] = n;
    }, r.prototype.destroy = function() {
      this.cfg = {
        destroyed: !0
      }, this.off(), this.destroyed = !0;
    }, r;
  }(bc)
), ZC = function(e, r, t) {
  if (t || arguments.length === 2) for (var n = 0, i = r.length, o; n < i; n++)
    (o || !(n in r)) && (o || (o = Array.prototype.slice.call(r, 0, n)), o[n] = r[n]);
  return e.concat(o || Array.prototype.slice.call(r));
}, V5 = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(r, t, n) {
      this.name = r, this.version = t, this.os = n, this.type = "browser";
    }
    return e;
  }()
), q5 = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(r) {
      this.version = r, this.type = "node", this.name = "node", this.os = process.platform;
    }
    return e;
  }()
), K5 = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(r, t, n, i) {
      this.name = r, this.version = t, this.os = n, this.bot = i, this.type = "bot-device";
    }
    return e;
  }()
), j5 = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.type = "bot", this.bot = !0, this.name = "bot", this.version = null, this.os = null;
    }
    return e;
  }()
), Z5 = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.type = "react-native", this.name = "react-native", this.version = null, this.os = null;
    }
    return e;
  }()
), Q5 = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/, J5 = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/, QC = 3, e4 = [
  ["aol", /AOLShield\/([0-9\._]+)/],
  ["edge", /Edge\/([0-9\._]+)/],
  ["edge-ios", /EdgiOS\/([0-9\._]+)/],
  ["yandexbrowser", /YaBrowser\/([0-9\._]+)/],
  ["kakaotalk", /KAKAOTALK\s([0-9\.]+)/],
  ["samsung", /SamsungBrowser\/([0-9\.]+)/],
  ["silk", /\bSilk\/([0-9._-]+)\b/],
  ["miui", /MiuiBrowser\/([0-9\.]+)$/],
  ["beaker", /BeakerBrowser\/([0-9\.]+)/],
  ["edge-chromium", /EdgA?\/([0-9\.]+)/],
  [
    "chromium-webview",
    /(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/
  ],
  ["chrome", /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],
  ["phantomjs", /PhantomJS\/([0-9\.]+)(:?\s|$)/],
  ["crios", /CriOS\/([0-9\.]+)(:?\s|$)/],
  ["firefox", /Firefox\/([0-9\.]+)(?:\s|$)/],
  ["fxios", /FxiOS\/([0-9\.]+)/],
  ["opera-mini", /Opera Mini.*Version\/([0-9\.]+)/],
  ["opera", /Opera\/([0-9\.]+)(?:\s|$)/],
  ["opera", /OPR\/([0-9\.]+)(:?\s|$)/],
  ["pie", /^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],
  ["pie", /^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],
  ["netfront", /^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],
  ["ie", /Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],
  ["ie", /MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],
  ["ie", /MSIE\s(7\.0)/],
  ["bb10", /BB10;\sTouch.*Version\/([0-9\.]+)/],
  ["android", /Android\s([0-9\.]+)/],
  ["ios", /Version\/([0-9\._]+).*Mobile.*Safari.*/],
  ["safari", /Version\/([0-9\._]+).*Safari/],
  ["facebook", /FB[AS]V\/([0-9\.]+)/],
  ["instagram", /Instagram\s([0-9\.]+)/],
  ["ios-webview", /AppleWebKit\/([0-9\.]+).*Mobile/],
  ["ios-webview", /AppleWebKit\/([0-9\.]+).*Gecko\)$/],
  ["curl", /^curl\/([0-9\.]+)$/],
  ["searchbot", Q5]
], JC = [
  ["iOS", /iP(hone|od|ad)/],
  ["Android OS", /Android/],
  ["BlackBerry OS", /BlackBerry|BB10/],
  ["Windows Mobile", /IEMobile/],
  ["Amazon OS", /Kindle/],
  ["Windows 3.11", /Win16/],
  ["Windows 95", /(Windows 95)|(Win95)|(Windows_95)/],
  ["Windows 98", /(Windows 98)|(Win98)/],
  ["Windows 2000", /(Windows NT 5.0)|(Windows 2000)/],
  ["Windows XP", /(Windows NT 5.1)|(Windows XP)/],
  ["Windows Server 2003", /(Windows NT 5.2)/],
  ["Windows Vista", /(Windows NT 6.0)/],
  ["Windows 7", /(Windows NT 6.1)/],
  ["Windows 8", /(Windows NT 6.2)/],
  ["Windows 8.1", /(Windows NT 6.3)/],
  ["Windows 10", /(Windows NT 10.0)/],
  ["Windows ME", /Windows ME/],
  ["Windows CE", /Windows CE|WinCE|Microsoft Pocket Internet Explorer/],
  ["Open BSD", /OpenBSD/],
  ["Sun OS", /SunOS/],
  ["Chrome OS", /CrOS/],
  ["Linux", /(Linux)|(X11)/],
  ["Mac OS", /(Mac_PowerPC)|(Macintosh)/],
  ["QNX", /QNX/],
  ["BeOS", /BeOS/],
  ["OS/2", /OS\/2/]
];
function t4(e) {
  return typeof document > "u" && typeof navigator < "u" && navigator.product === "ReactNative" ? new Z5() : typeof navigator < "u" ? n4(navigator.userAgent) : o4();
}
function r4(e) {
  return e !== "" && e4.reduce(function(r, t) {
    var n = t[0], i = t[1];
    if (r)
      return r;
    var o = i.exec(e);
    return !!o && [n, o];
  }, !1);
}
function n4(e) {
  var r = r4(e);
  if (!r)
    return null;
  var t = r[0], n = r[1];
  if (t === "searchbot")
    return new j5();
  var i = n[1] && n[1].split(".").join("_").split("_").slice(0, 3);
  i ? i.length < QC && (i = ZC(ZC([], i, !0), a4(QC - i.length), !0)) : i = [];
  var o = i.join("."), a = i4(e), l = J5.exec(e);
  return l && l[1] ? new K5(t, o, a, l[1]) : new V5(t, o, a);
}
function i4(e) {
  for (var r = 0, t = JC.length; r < t; r++) {
    var n = JC[r], i = n[0], o = n[1], a = o.exec(e);
    if (a)
      return i;
  }
  return null;
}
function o4() {
  var e = typeof process < "u" && process.version;
  return e ? new q5(process.version.slice(1)) : null;
}
function a4(e) {
  for (var r = [], t = 0; t < e; t++)
    r.push("0");
  return r;
}
var kf = typeof Float32Array < "u" ? Float32Array : Array;
Math.hypot || (Math.hypot = function() {
  for (var e = 0, r = arguments.length; r--; )
    e += arguments[r] * arguments[r];
  return Math.sqrt(e);
});
function Tc(e, r, t) {
  var n = r[0], i = r[1], o = r[2], a = r[3], l = r[4], s = r[5], f = r[6], h = r[7], d = r[8], v = t[0], g = t[1], y = t[2], C = t[3], _ = t[4], w = t[5], x = t[6], S = t[7], T = t[8];
  return e[0] = v * n + g * a + y * f, e[1] = v * i + g * l + y * h, e[2] = v * o + g * s + y * d, e[3] = C * n + _ * a + w * f, e[4] = C * i + _ * l + w * h, e[5] = C * o + _ * s + w * d, e[6] = x * n + S * a + T * f, e[7] = x * i + S * l + T * h, e[8] = x * o + S * s + T * d, e;
}
function l4(e, r) {
  return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 1, e[5] = 0, e[6] = r[0], e[7] = r[1], e[8] = 1, e;
}
function s4(e, r) {
  var t = Math.sin(r), n = Math.cos(r);
  return e[0] = n, e[1] = t, e[2] = 0, e[3] = -t, e[4] = n, e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 1, e;
}
function u4(e, r) {
  return e[0] = r[0], e[1] = 0, e[2] = 0, e[3] = 0, e[4] = r[1], e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 1, e;
}
function f4() {
  var e = new kf(3);
  return kf != Float32Array && (e[0] = 0, e[1] = 0, e[2] = 0), e;
}
function c4(e, r, t) {
  var n = r[0], i = r[1], o = r[2];
  return e[0] = n * t[0] + i * t[3] + o * t[6], e[1] = n * t[1] + i * t[4] + o * t[7], e[2] = n * t[2] + i * t[5] + o * t[8], e;
}
(function() {
  var e = f4();
  return function(r, t, n, i, o, a) {
    var l, s;
    for (t || (t = 3), n || (n = 0), i ? s = Math.min(i * t + n, r.length) : s = r.length, l = n; l < s; l += t)
      e[0] = r[l], e[1] = r[l + 1], e[2] = r[l + 2], o(e, e, a), r[l] = e[0], r[l + 1] = e[1], r[l + 2] = e[2];
    return r;
  };
})();
function h4() {
  var e = new kf(2);
  return kf != Float32Array && (e[0] = 0, e[1] = 0), e;
}
function d4(e, r) {
  var t = r[0], n = r[1], i = t * t + n * n;
  return i > 0 && (i = 1 / Math.sqrt(i)), e[0] = r[0] * i, e[1] = r[1] * i, e;
}
function v4(e, r) {
  return e[0] * r[0] + e[1] * r[1];
}
function p4(e, r) {
  return e[0] === r[0] && e[1] === r[1];
}
(function() {
  var e = h4();
  return function(r, t, n, i, o, a) {
    var l, s;
    for (t || (t = 2), n || (n = 0), i ? s = Math.min(i * t + n, r.length) : s = r.length, l = n; l < s; l += t)
      e[0] = r[l], e[1] = r[l + 1], o(e, e, a), r[l] = e[0], r[l + 1] = e[1];
    return r;
  };
})();
function g4(e, r, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return l4(n, t), Tc(e, n, r);
}
function y4(e, r, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return s4(n, t), Tc(e, n, r);
}
function C4(e, r, t) {
  var n = [0, 0, 0, 0, 0, 0, 0, 0, 0];
  return u4(n, t), Tc(e, n, r);
}
function m4(e, r, t) {
  return Tc(e, t, r);
}
function fS(e, r) {
  for (var t = e ? [].concat(e) : [1, 0, 0, 0, 1, 0, 0, 0, 1], n = 0, i = r.length; n < i; n++) {
    var o = r[n];
    switch (o[0]) {
      case "t":
        g4(t, t, [o[1], o[2]]);
        break;
      case "s":
        C4(t, t, [o[1], o[2]]);
        break;
      case "r":
        y4(t, t, o[1]);
        break;
      case "m":
        m4(t, t, o[1]);
        break;
    }
  }
  return t;
}
function em(e, r) {
  var t = [], n = e[0], i = e[1], o = e[2], a = e[3], l = e[4], s = e[5], f = e[6], h = e[7], d = e[8], v = r[0], g = r[1], y = r[2], C = r[3], _ = r[4], w = r[5], x = r[6], S = r[7], T = r[8];
  return t[0] = v * n + g * a + y * f, t[1] = v * i + g * l + y * h, t[2] = v * o + g * s + y * d, t[3] = C * n + _ * a + w * f, t[4] = C * i + _ * l + w * h, t[5] = C * o + _ * s + w * d, t[6] = x * n + S * a + T * f, t[7] = x * i + S * l + T * h, t[8] = x * o + S * s + T * d, t;
}
function na(e, r) {
  var t = [], n = r[0], i = r[1];
  return t[0] = e[0] * n + e[3] * i + e[6], t[1] = e[1] * n + e[4] * i + e[7], t;
}
function cS(e) {
  var r = [], t = e[0], n = e[1], i = e[2], o = e[3], a = e[4], l = e[5], s = e[6], f = e[7], h = e[8], d = h * a - l * f, v = -h * o + l * s, g = f * o - a * s, y = t * d + n * v + i * g;
  return y ? (y = 1 / y, r[0] = d * y, r[1] = (-h * n + i * f) * y, r[2] = (l * n - i * a) * y, r[3] = v * y, r[4] = (h * t - i * s) * y, r[5] = (-l * t + i * o) * y, r[6] = g * y, r[7] = (-f * t + n * s) * y, r[8] = (a * t - n * o) * y, r) : null;
}
var Ql = fS, kd = "matrix", _4 = ["zIndex", "capture", "visible", "type"], w4 = ["repeat"], x4 = ":", S4 = "*";
function b4(e) {
  for (var r = [], t = 0; t < e.length; t++)
    En(e[t]) ? r.push([].concat(e[t])) : r.push(e[t]);
  return r;
}
function T4(e, r) {
  var t = {}, n = r.attrs;
  for (var i in e)
    t[i] = n[i];
  return t;
}
function E4(e, r) {
  var t = {}, n = r.attr();
  return Je(e, function(i, o) {
    w4.indexOf(o) === -1 && !Wf(n[o], i) && (t[o] = i);
  }), t;
}
function L4(e, r) {
  if (r.onFrame)
    return e;
  var t = r.startTime, n = r.delay, i = r.duration, o = Object.prototype.hasOwnProperty;
  return Je(e, function(a) {
    t + n < a.startTime + a.delay + a.duration && i > a.delay && Je(r.toAttrs, function(l, s) {
      o.call(a.toAttrs, s) && (delete a.toAttrs[s], delete a.fromAttrs[s]);
    });
  }), e;
}
var hS = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      n.attrs = {};
      var i = n.getDefaultAttrs();
      return rS(i, t.attrs), n.attrs = i, n.initAttrs(i), n.initAnimate(), n;
    }
    return r.prototype.getDefaultCfg = function() {
      return {
        visible: !0,
        capture: !0,
        zIndex: 0
      };
    }, r.prototype.getDefaultAttrs = function() {
      return {
        matrix: this.getDefaultMatrix(),
        opacity: 1
      };
    }, r.prototype.onCanvasChange = function(t) {
    }, r.prototype.initAttrs = function(t) {
    }, r.prototype.initAnimate = function() {
      this.set("animable", !0), this.set("animating", !1);
    }, r.prototype.isGroup = function() {
      return !1;
    }, r.prototype.getParent = function() {
      return this.get("parent");
    }, r.prototype.getCanvas = function() {
      return this.get("canvas");
    }, r.prototype.attr = function() {
      for (var t, n = [], i = 0; i < arguments.length; i++)
        n[i] = arguments[i];
      var o = n[0], a = n[1];
      if (!o)
        return this.attrs;
      if (fs(o)) {
        for (var l in o)
          this.setAttr(l, o[l]);
        return this.afterAttrsChange(o), this;
      }
      return n.length === 2 ? (this.setAttr(o, a), this.afterAttrsChange((t = {}, t[o] = a, t)), this) : this.attrs[o];
    }, r.prototype.isClipped = function(t, n) {
      var i = this.getClip();
      return i && !i.isHit(t, n);
    }, r.prototype.setAttr = function(t, n) {
      var i = this.attrs[t];
      i !== n && (this.attrs[t] = n, this.onAttrChange(t, n, i));
    }, r.prototype.onAttrChange = function(t, n, i) {
      t === "matrix" && this.set("totalMatrix", null);
    }, r.prototype.afterAttrsChange = function(t) {
      if (this.cfg.isClipShape) {
        var n = this.cfg.applyTo;
        n && n.onCanvasChange("clip");
      } else
        this.onCanvasChange("attr");
    }, r.prototype.show = function() {
      return this.set("visible", !0), this.onCanvasChange("show"), this;
    }, r.prototype.hide = function() {
      return this.set("visible", !1), this.onCanvasChange("hide"), this;
    }, r.prototype.setZIndex = function(t) {
      this.set("zIndex", t);
      var n = this.getParent();
      return n && n.sort(), this;
    }, r.prototype.toFront = function() {
      var t = this.getParent();
      if (t) {
        var n = t.getChildren();
        this.get("el");
        var i = n.indexOf(this);
        n.splice(i, 1), n.push(this), this.onCanvasChange("zIndex");
      }
    }, r.prototype.toBack = function() {
      var t = this.getParent();
      if (t) {
        var n = t.getChildren();
        this.get("el");
        var i = n.indexOf(this);
        n.splice(i, 1), n.unshift(this), this.onCanvasChange("zIndex");
      }
    }, r.prototype.remove = function(t) {
      t === void 0 && (t = !0);
      var n = this.getParent();
      n ? (sS(n.getChildren(), this), n.get("clearing") || this.onCanvasChange("remove")) : this.onCanvasChange("remove"), t && this.destroy();
    }, r.prototype.resetMatrix = function() {
      this.attr(kd, this.getDefaultMatrix()), this.onCanvasChange("matrix");
    }, r.prototype.getMatrix = function() {
      return this.attr(kd);
    }, r.prototype.setMatrix = function(t) {
      this.attr(kd, t), this.onCanvasChange("matrix");
    }, r.prototype.getTotalMatrix = function() {
      var t = this.cfg.totalMatrix;
      if (!t) {
        var n = this.attr("matrix"), i = this.cfg.parentMatrix;
        i && n ? t = em(i, n) : t = n || i, this.set("totalMatrix", t);
      }
      return t;
    }, r.prototype.applyMatrix = function(t) {
      var n = this.attr("matrix"), i = null;
      t && n ? i = em(t, n) : i = n || t, this.set("totalMatrix", i), this.set("parentMatrix", t);
    }, r.prototype.getDefaultMatrix = function() {
      return null;
    }, r.prototype.applyToMatrix = function(t) {
      var n = this.attr("matrix");
      return n ? na(n, t) : t;
    }, r.prototype.invertFromMatrix = function(t) {
      var n = this.attr("matrix");
      if (n) {
        var i = cS(n);
        if (i)
          return na(i, t);
      }
      return t;
    }, r.prototype.setClip = function(t) {
      var n = this.getCanvas(), i = null;
      if (t) {
        var o = this.getShapeBase(), a = tS(t.type), l = o[a];
        l && (i = new l({
          type: t.type,
          isClipShape: !0,
          applyTo: this,
          attrs: t.attrs,
          canvas: n
        }));
      }
      return this.set("clipShape", i), this.onCanvasChange("clip"), i;
    }, r.prototype.getClip = function() {
      var t = this.cfg.clipShape;
      return t || null;
    }, r.prototype.clone = function() {
      var t = this, n = this.attrs, i = {};
      Je(n, function(l, s) {
        En(n[s]) ? i[s] = b4(n[s]) : i[s] = n[s];
      });
      var o = this.constructor, a = new o({ attrs: i });
      return Je(_4, function(l) {
        a.set(l, t.get(l));
      }), a;
    }, r.prototype.destroy = function() {
      var t = this.destroyed;
      t || (this.attrs = {}, e.prototype.destroy.call(this));
    }, r.prototype.isAnimatePaused = function() {
      return this.get("_pause").isPaused;
    }, r.prototype.animate = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      if (!(!this.get("timeline") && !this.get("canvas"))) {
        this.set("animating", !0);
        var i = this.get("timeline");
        i || (i = this.get("canvas").get("timeline"), this.set("timeline", i));
        var o = this.get("animations") || [];
        i.timer || i.initTimer();
        var a = t[0], l = t[1], s = t[2], f = s === void 0 ? "easeLinear" : s, h = t[3], d = h === void 0 ? sf : h, v = t[4], g = v === void 0 ? 0 : v, y, C, _, w, x;
        va(a) ? (y = a, a = {}) : fs(a) && a.onFrame && (y = a.onFrame, C = a.repeat), fs(l) ? (x = l, l = x.duration, f = x.easing || "easeLinear", g = x.delay || 0, C = x.repeat || C || !1, d = x.callback || sf, _ = x.pauseCallback || sf, w = x.resumeCallback || sf) : (Sv(d) && (g = d, d = null), va(f) ? (d = f, f = "easeLinear") : f = f || "easeLinear");
        var S = E4(a, this), T = {
          fromAttrs: T4(S, this),
          toAttrs: S,
          duration: l,
          easing: f,
          repeat: C,
          callback: d,
          pauseCallback: _,
          resumeCallback: w,
          delay: g,
          startTime: i.getTime(),
          id: E5(),
          onFrame: y,
          pathFormatted: !1
        };
        o.length > 0 ? o = L4(o, T) : i.addAnimator(this), o.push(T), this.set("animations", o), this.set("_pause", { isPaused: !1 });
      }
    }, r.prototype.stopAnimate = function(t) {
      var n = this;
      t === void 0 && (t = !0);
      var i = this.get("animations");
      Je(i, function(o) {
        t && (o.onFrame ? n.attr(o.onFrame(1)) : n.attr(o.toAttrs)), o.callback && o.callback();
      }), this.set("animating", !1), this.set("animations", []);
    }, r.prototype.pauseAnimate = function() {
      var t = this.get("timeline"), n = this.get("animations"), i = t.getTime();
      return Je(n, function(o) {
        o._paused = !0, o._pauseTime = i, o.pauseCallback && o.pauseCallback();
      }), this.set("_pause", {
        isPaused: !0,
        pauseTime: i
      }), this;
    }, r.prototype.resumeAnimate = function() {
      var t = this.get("timeline"), n = t.getTime(), i = this.get("animations"), o = this.get("_pause").pauseTime;
      return Je(i, function(a) {
        a.startTime = a.startTime + (n - o), a._paused = !1, a._pauseTime = null, a.resumeCallback && a.resumeCallback();
      }), this.set("_pause", {
        isPaused: !1
      }), this.set("animations", i), this;
    }, r.prototype.emitDelegation = function(t, n) {
      var i = this, o = n.propagationPath;
      this.getEvents();
      var a;
      t === "mouseenter" ? a = n.fromShape : t === "mouseleave" && (a = n.toShape);
      for (var l = function(d) {
        var v = o[d], g = v.get("name");
        if (g) {
          if (
            // 只有 element 是 Group 或者 Canvas 的时候，才需要判断 isParent
            (v.isGroup() || v.isCanvas && v.isCanvas()) && a && uS(v, a)
          )
            return "break";
          En(g) ? Je(g, function(y) {
            i.emitDelegateEvent(v, y, n);
          }) : s.emitDelegateEvent(v, g, n);
        }
      }, s = this, f = 0; f < o.length; f++) {
        var h = l(f);
        if (h === "break")
          break;
      }
    }, r.prototype.emitDelegateEvent = function(t, n, i) {
      var o = this.getEvents(), a = n + x4 + i.type;
      (o[a] || o[S4]) && (i.name = a, i.currentTarget = t, i.delegateTarget = this, i.delegateObject = t.get("delegateObject"), this.emit(a, i));
    }, r.prototype.translate = function(t, n) {
      t === void 0 && (t = 0), n === void 0 && (n = 0);
      var i = this.getMatrix(), o = Ql(i, [["t", t, n]]);
      return this.setMatrix(o), this;
    }, r.prototype.move = function(t, n) {
      var i = this.attr("x") || 0, o = this.attr("y") || 0;
      return this.translate(t - i, n - o), this;
    }, r.prototype.moveTo = function(t, n) {
      return this.move(t, n);
    }, r.prototype.scale = function(t, n) {
      var i = this.getMatrix(), o = Ql(i, [["s", t, n || t]]);
      return this.setMatrix(o), this;
    }, r.prototype.rotate = function(t) {
      var n = this.getMatrix(), i = Ql(n, [["r", t]]);
      return this.setMatrix(i), this;
    }, r.prototype.rotateAtStart = function(t) {
      var n = this.attr(), i = n.x, o = n.y, a = this.getMatrix(), l = Ql(a, [
        ["t", -i, -o],
        ["r", t],
        ["t", i, o]
      ]);
      return this.setMatrix(l), this;
    }, r.prototype.rotateAtPoint = function(t, n, i) {
      var o = this.getMatrix(), a = Ql(o, [
        ["t", -t, -n],
        ["r", i],
        ["t", t, n]
      ]);
      return this.setMatrix(a), this;
    }, r;
  }(X5)
), tm = {}, Ov = "_INDEX";
function dS(e, r) {
  if (e.set("canvas", r), e.isGroup()) {
    var t = e.get("children");
    t.length && t.forEach(function(n) {
      dS(n, r);
    });
  }
}
function vS(e, r) {
  if (e.set("timeline", r), e.isGroup()) {
    var t = e.get("children");
    t.length && t.forEach(function(n) {
      vS(n, r);
    });
  }
}
function A4(e, r, t) {
  r.set("parent", null), r.set("canvas", null), sS(e.getChildren(), r);
}
function R4(e) {
  return function(r, t) {
    var n = e(r, t);
    return n === 0 ? r[Ov] - t[Ov] : n;
  };
}
var pS = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.isCanvas = function() {
      return !1;
    }, r.prototype.getBBox = function() {
      var t = 1 / 0, n = -1 / 0, i = 1 / 0, o = -1 / 0, a = this.getChildren().filter(function(s) {
        return s.get("visible") && (!s.isGroup() || s.isGroup() && s.getChildren().length > 0);
      });
      a.length > 0 ? Je(a, function(s) {
        var f = s.getBBox(), h = f.minX, d = f.maxX, v = f.minY, g = f.maxY;
        h < t && (t = h), d > n && (n = d), v < i && (i = v), g > o && (o = g);
      }) : (t = 0, n = 0, i = 0, o = 0);
      var l = {
        x: t,
        y: i,
        minX: t,
        minY: i,
        maxX: n,
        maxY: o,
        width: n - t,
        height: o - i
      };
      return l;
    }, r.prototype.getCanvasBBox = function() {
      var t = 1 / 0, n = -1 / 0, i = 1 / 0, o = -1 / 0, a = this.getChildren().filter(function(s) {
        return s.get("visible") && (!s.isGroup() || s.isGroup() && s.getChildren().length > 0);
      });
      a.length > 0 ? Je(a, function(s) {
        var f = s.getCanvasBBox(), h = f.minX, d = f.maxX, v = f.minY, g = f.maxY;
        h < t && (t = h), d > n && (n = d), v < i && (i = v), g > o && (o = g);
      }) : (t = 0, n = 0, i = 0, o = 0);
      var l = {
        x: t,
        y: i,
        minX: t,
        minY: i,
        maxX: n,
        maxY: o,
        width: n - t,
        height: o - i
      };
      return l;
    }, r.prototype.getDefaultCfg = function() {
      var t = e.prototype.getDefaultCfg.call(this);
      return t.children = [], t;
    }, r.prototype.onAttrChange = function(t, n, i) {
      if (e.prototype.onAttrChange.call(this, t, n, i), t === "matrix") {
        var o = this.getTotalMatrix();
        this._applyChildrenMarix(o);
      }
    }, r.prototype.applyMatrix = function(t) {
      var n = this.getTotalMatrix();
      e.prototype.applyMatrix.call(this, t);
      var i = this.getTotalMatrix();
      i !== n && this._applyChildrenMarix(i);
    }, r.prototype._applyChildrenMarix = function(t) {
      var n = this.getChildren();
      Je(n, function(i) {
        i.applyMatrix(t);
      });
    }, r.prototype.addShape = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      var i = t[0], o = t[1];
      fs(i) ? o = i : o.type = i;
      var a = tm[o.type];
      a || (a = tS(o.type), tm[o.type] = a);
      var l = this.getShapeBase(), s = new l[a](o);
      return this.add(s), s;
    }, r.prototype.addGroup = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      var i = t[0], o = t[1], a;
      if (va(i))
        o ? a = new i(o) : a = new i({
          // canvas,
          parent: this
        });
      else {
        var l = i || {}, s = this.getGroupBase();
        a = new s(l);
      }
      return this.add(a), a;
    }, r.prototype.getCanvas = function() {
      var t;
      return this.isCanvas() ? t = this : t = this.get("canvas"), t;
    }, r.prototype.getShape = function(t, n, i) {
      if (!Rv(this))
        return null;
      var o = this.getChildren(), a;
      if (this.isCanvas())
        a = this._findShape(o, t, n, i);
      else {
        var l = [t, n, 1];
        l = this.invertFromMatrix(l), this.isClipped(l[0], l[1]) || (a = this._findShape(o, l[0], l[1], i));
      }
      return a;
    }, r.prototype._findShape = function(t, n, i, o) {
      for (var a = null, l = t.length - 1; l >= 0; l--) {
        var s = t[l];
        if (Rv(s) && (s.isGroup() ? a = s.getShape(n, i, o) : s.isHit(n, i) && (a = s)), a)
          break;
      }
      return a;
    }, r.prototype.add = function(t) {
      var n = this.getCanvas(), i = this.getChildren(), o = this.get("timeline"), a = t.getParent();
      a && A4(a, t), t.set("parent", this), n && dS(t, n), o && vS(t, o), i.push(t), t.onCanvasChange("add"), this._applyElementMatrix(t);
    }, r.prototype._applyElementMatrix = function(t) {
      var n = this.getTotalMatrix();
      n && t.applyMatrix(n);
    }, r.prototype.getChildren = function() {
      return this.get("children");
    }, r.prototype.sort = function() {
      var t = this.getChildren();
      Je(t, function(n, i) {
        return n[Ov] = i, n;
      }), t.sort(R4(function(n, i) {
        return n.get("zIndex") - i.get("zIndex");
      })), this.onCanvasChange("sort");
    }, r.prototype.clear = function() {
      if (this.set("clearing", !0), !this.destroyed) {
        for (var t = this.getChildren(), n = t.length - 1; n >= 0; n--)
          t[n].destroy();
        this.set("children", []), this.onCanvasChange("clear"), this.set("clearing", !1);
      }
    }, r.prototype.destroy = function() {
      this.get("destroyed") || (this.clear(), e.prototype.destroy.call(this));
    }, r.prototype.getFirst = function() {
      return this.getChildByIndex(0);
    }, r.prototype.getLast = function() {
      var t = this.getChildren();
      return this.getChildByIndex(t.length - 1);
    }, r.prototype.getChildByIndex = function(t) {
      var n = this.getChildren();
      return n[t];
    }, r.prototype.getCount = function() {
      var t = this.getChildren();
      return t.length;
    }, r.prototype.contain = function(t) {
      var n = this.getChildren();
      return n.indexOf(t) > -1;
    }, r.prototype.removeChild = function(t, n) {
      n === void 0 && (n = !0), this.contain(t) && t.remove(n);
    }, r.prototype.findAll = function(t) {
      var n = [], i = this.getChildren();
      return Je(i, function(o) {
        t(o) && n.push(o), o.isGroup() && (n = n.concat(o.findAll(t)));
      }), n;
    }, r.prototype.find = function(t) {
      var n = null, i = this.getChildren();
      return Je(i, function(o) {
        if (t(o) ? n = o : o.isGroup() && (n = o.find(t)), n)
          return !1;
      }), n;
    }, r.prototype.findById = function(t) {
      return this.find(function(n) {
        return n.get("id") === t;
      });
    }, r.prototype.findByClassName = function(t) {
      return this.find(function(n) {
        return n.get("className") === t;
      });
    }, r.prototype.findAllByName = function(t) {
      return this.findAll(function(n) {
        return n.get("name") === t;
      });
    }, r;
  }(hS)
), cl = 0, as = 0, Jl = 0, gS = 1e3, Gf, ls, Uf = 0, pa = 0, Ec = 0, ws = typeof performance == "object" && performance.now ? performance : Date, yS = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(e) {
  setTimeout(e, 17);
};
function CS() {
  return pa || (yS(O4), pa = ws.now() + Ec);
}
function O4() {
  pa = 0;
}
function Iv() {
  this._call = this._time = this._next = null;
}
Iv.prototype = Qp.prototype = {
  constructor: Iv,
  restart: function(e, r, t) {
    if (typeof e != "function") throw new TypeError("callback is not a function");
    t = (t == null ? CS() : +t) + (r == null ? 0 : +r), !this._next && ls !== this && (ls ? ls._next = this : Gf = this, ls = this), this._call = e, this._time = t, Mv();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, Mv());
  }
};
function Qp(e, r, t) {
  var n = new Iv();
  return n.restart(e, r, t), n;
}
function I4() {
  CS(), ++cl;
  for (var e = Gf, r; e; )
    (r = pa - e._time) >= 0 && e._call.call(null, r), e = e._next;
  --cl;
}
function rm() {
  pa = (Uf = ws.now()) + Ec, cl = as = 0;
  try {
    I4();
  } finally {
    cl = 0, B4(), pa = 0;
  }
}
function M4() {
  var e = ws.now(), r = e - Uf;
  r > gS && (Ec -= r, Uf = e);
}
function B4() {
  for (var e, r = Gf, t, n = 1 / 0; r; )
    r._call ? (n > r._time && (n = r._time), e = r, r = r._next) : (t = r._next, r._next = null, r = e ? e._next = t : Gf = t);
  ls = e, Mv(n);
}
function Mv(e) {
  if (!cl) {
    as && (as = clearTimeout(as));
    var r = e - pa;
    r > 24 ? (e < 1 / 0 && (as = setTimeout(rm, e - ws.now() - Ec)), Jl && (Jl = clearInterval(Jl))) : (Jl || (Uf = ws.now(), Jl = setInterval(M4, gS)), cl = 1, yS(rm));
  }
}
function Jp(e, r, t) {
  e.prototype = r.prototype = t, t.constructor = e;
}
function mS(e, r) {
  var t = Object.create(e.prototype);
  for (var n in r) t[n] = r[n];
  return t;
}
function js() {
}
var xs = 0.7, Yf = 1 / xs, il = "\\s*([+-]?\\d+)\\s*", Ss = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", hi = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", D4 = /^#([0-9a-f]{3,8})$/, $4 = new RegExp(`^rgb\\(${il},${il},${il}\\)$`), F4 = new RegExp(`^rgb\\(${hi},${hi},${hi}\\)$`), P4 = new RegExp(`^rgba\\(${il},${il},${il},${Ss}\\)$`), N4 = new RegExp(`^rgba\\(${hi},${hi},${hi},${Ss}\\)$`), H4 = new RegExp(`^hsl\\(${Ss},${hi},${hi}\\)$`), z4 = new RegExp(`^hsla\\(${Ss},${hi},${hi},${Ss}\\)$`), nm = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
Jp(js, bs, {
  copy(e) {
    return Object.assign(new this.constructor(), this, e);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: im,
  // Deprecated! Use color.formatHex.
  formatHex: im,
  formatHex8: W4,
  formatHsl: k4,
  formatRgb: om,
  toString: om
});
function im() {
  return this.rgb().formatHex();
}
function W4() {
  return this.rgb().formatHex8();
}
function k4() {
  return _S(this).formatHsl();
}
function om() {
  return this.rgb().formatRgb();
}
function bs(e) {
  var r, t;
  return e = (e + "").trim().toLowerCase(), (r = D4.exec(e)) ? (t = r[1].length, r = parseInt(r[1], 16), t === 6 ? am(r) : t === 3 ? new Pr(r >> 8 & 15 | r >> 4 & 240, r >> 4 & 15 | r & 240, (r & 15) << 4 | r & 15, 1) : t === 8 ? hf(r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, (r & 255) / 255) : t === 4 ? hf(r >> 12 & 15 | r >> 8 & 240, r >> 8 & 15 | r >> 4 & 240, r >> 4 & 15 | r & 240, ((r & 15) << 4 | r & 15) / 255) : null) : (r = $4.exec(e)) ? new Pr(r[1], r[2], r[3], 1) : (r = F4.exec(e)) ? new Pr(r[1] * 255 / 100, r[2] * 255 / 100, r[3] * 255 / 100, 1) : (r = P4.exec(e)) ? hf(r[1], r[2], r[3], r[4]) : (r = N4.exec(e)) ? hf(r[1] * 255 / 100, r[2] * 255 / 100, r[3] * 255 / 100, r[4]) : (r = H4.exec(e)) ? um(r[1], r[2] / 100, r[3] / 100, 1) : (r = z4.exec(e)) ? um(r[1], r[2] / 100, r[3] / 100, r[4]) : nm.hasOwnProperty(e) ? am(nm[e]) : e === "transparent" ? new Pr(NaN, NaN, NaN, 0) : null;
}
function am(e) {
  return new Pr(e >> 16 & 255, e >> 8 & 255, e & 255, 1);
}
function hf(e, r, t, n) {
  return n <= 0 && (e = r = t = NaN), new Pr(e, r, t, n);
}
function G4(e) {
  return e instanceof js || (e = bs(e)), e ? (e = e.rgb(), new Pr(e.r, e.g, e.b, e.opacity)) : new Pr();
}
function Bv(e, r, t, n) {
  return arguments.length === 1 ? G4(e) : new Pr(e, r, t, n ?? 1);
}
function Pr(e, r, t, n) {
  this.r = +e, this.g = +r, this.b = +t, this.opacity = +n;
}
Jp(Pr, Bv, mS(js, {
  brighter(e) {
    return e = e == null ? Yf : Math.pow(Yf, e), new Pr(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  darker(e) {
    return e = e == null ? xs : Math.pow(xs, e), new Pr(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new Pr(ua(this.r), ua(this.g), ua(this.b), Xf(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: lm,
  // Deprecated! Use color.formatHex.
  formatHex: lm,
  formatHex8: U4,
  formatRgb: sm,
  toString: sm
}));
function lm() {
  return `#${ia(this.r)}${ia(this.g)}${ia(this.b)}`;
}
function U4() {
  return `#${ia(this.r)}${ia(this.g)}${ia(this.b)}${ia((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function sm() {
  const e = Xf(this.opacity);
  return `${e === 1 ? "rgb(" : "rgba("}${ua(this.r)}, ${ua(this.g)}, ${ua(this.b)}${e === 1 ? ")" : `, ${e})`}`;
}
function Xf(e) {
  return isNaN(e) ? 1 : Math.max(0, Math.min(1, e));
}
function ua(e) {
  return Math.max(0, Math.min(255, Math.round(e) || 0));
}
function ia(e) {
  return e = ua(e), (e < 16 ? "0" : "") + e.toString(16);
}
function um(e, r, t, n) {
  return n <= 0 ? e = r = t = NaN : t <= 0 || t >= 1 ? e = r = NaN : r <= 0 && (e = NaN), new Wn(e, r, t, n);
}
function _S(e) {
  if (e instanceof Wn) return new Wn(e.h, e.s, e.l, e.opacity);
  if (e instanceof js || (e = bs(e)), !e) return new Wn();
  if (e instanceof Wn) return e;
  e = e.rgb();
  var r = e.r / 255, t = e.g / 255, n = e.b / 255, i = Math.min(r, t, n), o = Math.max(r, t, n), a = NaN, l = o - i, s = (o + i) / 2;
  return l ? (r === o ? a = (t - n) / l + (t < n) * 6 : t === o ? a = (n - r) / l + 2 : a = (r - t) / l + 4, l /= s < 0.5 ? o + i : 2 - o - i, a *= 60) : l = s > 0 && s < 1 ? 0 : a, new Wn(a, l, s, e.opacity);
}
function Y4(e, r, t, n) {
  return arguments.length === 1 ? _S(e) : new Wn(e, r, t, n ?? 1);
}
function Wn(e, r, t, n) {
  this.h = +e, this.s = +r, this.l = +t, this.opacity = +n;
}
Jp(Wn, Y4, mS(js, {
  brighter(e) {
    return e = e == null ? Yf : Math.pow(Yf, e), new Wn(this.h, this.s, this.l * e, this.opacity);
  },
  darker(e) {
    return e = e == null ? xs : Math.pow(xs, e), new Wn(this.h, this.s, this.l * e, this.opacity);
  },
  rgb() {
    var e = this.h % 360 + (this.h < 0) * 360, r = isNaN(e) || isNaN(this.s) ? 0 : this.s, t = this.l, n = t + (t < 0.5 ? t : 1 - t) * r, i = 2 * t - n;
    return new Pr(
      Gd(e >= 240 ? e - 240 : e + 120, i, n),
      Gd(e, i, n),
      Gd(e < 120 ? e + 240 : e - 120, i, n),
      this.opacity
    );
  },
  clamp() {
    return new Wn(fm(this.h), df(this.s), df(this.l), Xf(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const e = Xf(this.opacity);
    return `${e === 1 ? "hsl(" : "hsla("}${fm(this.h)}, ${df(this.s) * 100}%, ${df(this.l) * 100}%${e === 1 ? ")" : `, ${e})`}`;
  }
}));
function fm(e) {
  return e = (e || 0) % 360, e < 0 ? e + 360 : e;
}
function df(e) {
  return Math.max(0, Math.min(1, e || 0));
}
function Gd(e, r, t) {
  return (e < 60 ? r + (t - r) * e / 60 : e < 180 ? t : e < 240 ? r + (t - r) * (240 - e) / 60 : r) * 255;
}
var e0 = (e) => () => e;
function X4(e, r) {
  return function(t) {
    return e + t * r;
  };
}
function V4(e, r, t) {
  return e = Math.pow(e, t), r = Math.pow(r, t) - e, t = 1 / t, function(n) {
    return Math.pow(e + n * r, t);
  };
}
function q4(e) {
  return (e = +e) == 1 ? wS : function(r, t) {
    return t - r ? V4(r, t, e) : e0(isNaN(r) ? t : r);
  };
}
function wS(e, r) {
  var t = r - e;
  return t ? X4(e, t) : e0(isNaN(e) ? r : e);
}
var cm = function e(r) {
  var t = q4(r);
  function n(i, o) {
    var a = t((i = Bv(i)).r, (o = Bv(o)).r), l = t(i.g, o.g), s = t(i.b, o.b), f = wS(i.opacity, o.opacity);
    return function(h) {
      return i.r = a(h), i.g = l(h), i.b = s(h), i.opacity = f(h), i + "";
    };
  }
  return n.gamma = e, n;
}(1);
function xS(e, r) {
  r || (r = []);
  var t = e ? Math.min(r.length, e.length) : 0, n = r.slice(), i;
  return function(o) {
    for (i = 0; i < t; ++i) n[i] = e[i] * (1 - o) + r[i] * o;
    return n;
  };
}
function SS(e) {
  return ArrayBuffer.isView(e) && !(e instanceof DataView);
}
function K4(e, r) {
  return (SS(r) ? xS : bS)(e, r);
}
function bS(e, r) {
  var t = r ? r.length : 0, n = e ? Math.min(t, e.length) : 0, i = new Array(n), o = new Array(t), a;
  for (a = 0; a < n; ++a) i[a] = Vf(e[a], r[a]);
  for (; a < t; ++a) o[a] = r[a];
  return function(l) {
    for (a = 0; a < n; ++a) o[a] = i[a](l);
    return o;
  };
}
function j4(e, r) {
  var t = /* @__PURE__ */ new Date();
  return e = +e, r = +r, function(n) {
    return t.setTime(e * (1 - n) + r * n), t;
  };
}
function Dv(e, r) {
  return e = +e, r = +r, function(t) {
    return e * (1 - t) + r * t;
  };
}
function Z4(e, r) {
  var t = {}, n = {}, i;
  (e === null || typeof e != "object") && (e = {}), (r === null || typeof r != "object") && (r = {});
  for (i in r)
    i in e ? t[i] = Vf(e[i], r[i]) : n[i] = r[i];
  return function(o) {
    for (i in t) n[i] = t[i](o);
    return n;
  };
}
var $v = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, Ud = new RegExp($v.source, "g");
function Q4(e) {
  return function() {
    return e;
  };
}
function J4(e) {
  return function(r) {
    return e(r) + "";
  };
}
function eB(e, r) {
  var t = $v.lastIndex = Ud.lastIndex = 0, n, i, o, a = -1, l = [], s = [];
  for (e = e + "", r = r + ""; (n = $v.exec(e)) && (i = Ud.exec(r)); )
    (o = i.index) > t && (o = r.slice(t, o), l[a] ? l[a] += o : l[++a] = o), (n = n[0]) === (i = i[0]) ? l[a] ? l[a] += i : l[++a] = i : (l[++a] = null, s.push({ i: a, x: Dv(n, i) })), t = Ud.lastIndex;
  return t < r.length && (o = r.slice(t), l[a] ? l[a] += o : l[++a] = o), l.length < 2 ? s[0] ? J4(s[0].x) : Q4(r) : (r = s.length, function(f) {
    for (var h = 0, d; h < r; ++h) l[(d = s[h]).i] = d.x(f);
    return l.join("");
  });
}
function Vf(e, r) {
  var t = typeof r, n;
  return r == null || t === "boolean" ? e0(r) : (t === "number" ? Dv : t === "string" ? (n = bs(r)) ? (r = n, cm) : eB : r instanceof bs ? cm : r instanceof Date ? j4 : SS(r) ? xS : Array.isArray(r) ? bS : typeof r.valueOf != "function" && typeof r.toString != "function" || isNaN(r) ? Z4 : Dv)(e, r);
}
function tB(e) {
  return +e;
}
function rB(e) {
  return e * e;
}
function nB(e) {
  return e * (2 - e);
}
function hm(e) {
  return ((e *= 2) <= 1 ? e * e : --e * (2 - e) + 1) / 2;
}
function TS(e) {
  return e * e * e;
}
function iB(e) {
  return --e * e * e + 1;
}
function dm(e) {
  return ((e *= 2) <= 1 ? e * e * e : (e -= 2) * e * e + 2) / 2;
}
var t0 = 3, oB = function e(r) {
  r = +r;
  function t(n) {
    return Math.pow(n, r);
  }
  return t.exponent = e, t;
}(t0), aB = function e(r) {
  r = +r;
  function t(n) {
    return 1 - Math.pow(1 - n, r);
  }
  return t.exponent = e, t;
}(t0), vm = function e(r) {
  r = +r;
  function t(n) {
    return ((n *= 2) <= 1 ? Math.pow(n, r) : 2 - Math.pow(2 - n, r)) / 2;
  }
  return t.exponent = e, t;
}(t0), ES = Math.PI, LS = ES / 2;
function lB(e) {
  return +e == 1 ? 1 : 1 - Math.cos(e * LS);
}
function sB(e) {
  return Math.sin(e * LS);
}
function pm(e) {
  return (1 - Math.cos(ES * e)) / 2;
}
function Lo(e) {
  return (Math.pow(2, -10 * e) - 9765625e-10) * 1.0009775171065494;
}
function uB(e) {
  return Lo(1 - +e);
}
function fB(e) {
  return 1 - Lo(e);
}
function gm(e) {
  return ((e *= 2) <= 1 ? Lo(1 - e) : 2 - Lo(e - 1)) / 2;
}
function cB(e) {
  return 1 - Math.sqrt(1 - e * e);
}
function hB(e) {
  return Math.sqrt(1 - --e * e);
}
function ym(e) {
  return ((e *= 2) <= 1 ? 1 - Math.sqrt(1 - e * e) : Math.sqrt(1 - (e -= 2) * e) + 1) / 2;
}
var Fv = 4 / 11, dB = 6 / 11, vB = 8 / 11, pB = 3 / 4, gB = 9 / 11, yB = 10 / 11, CB = 15 / 16, mB = 21 / 22, _B = 63 / 64, vf = 1 / Fv / Fv;
function wB(e) {
  return 1 - Ts(1 - e);
}
function Ts(e) {
  return (e = +e) < Fv ? vf * e * e : e < vB ? vf * (e -= dB) * e + pB : e < yB ? vf * (e -= gB) * e + CB : vf * (e -= mB) * e + _B;
}
function xB(e) {
  return ((e *= 2) <= 1 ? 1 - Ts(1 - e) : Ts(e - 1) + 1) / 2;
}
var r0 = 1.70158, SB = function e(r) {
  r = +r;
  function t(n) {
    return (n = +n) * n * (r * (n - 1) + n);
  }
  return t.overshoot = e, t;
}(r0), bB = function e(r) {
  r = +r;
  function t(n) {
    return --n * n * ((n + 1) * r + n) + 1;
  }
  return t.overshoot = e, t;
}(r0), Cm = function e(r) {
  r = +r;
  function t(n) {
    return ((n *= 2) < 1 ? n * n * ((r + 1) * n - r) : (n -= 2) * n * ((r + 1) * n + r) + 2) / 2;
  }
  return t.overshoot = e, t;
}(r0), hl = 2 * Math.PI, n0 = 1, i0 = 0.3, TB = function e(r, t) {
  var n = Math.asin(1 / (r = Math.max(1, r))) * (t /= hl);
  function i(o) {
    return r * Lo(- --o) * Math.sin((n - o) / t);
  }
  return i.amplitude = function(o) {
    return e(o, t * hl);
  }, i.period = function(o) {
    return e(r, o);
  }, i;
}(n0, i0), mm = function e(r, t) {
  var n = Math.asin(1 / (r = Math.max(1, r))) * (t /= hl);
  function i(o) {
    return 1 - r * Lo(o = +o) * Math.sin((o + n) / t);
  }
  return i.amplitude = function(o) {
    return e(o, t * hl);
  }, i.period = function(o) {
    return e(r, o);
  }, i;
}(n0, i0), EB = function e(r, t) {
  var n = Math.asin(1 / (r = Math.max(1, r))) * (t /= hl);
  function i(o) {
    return ((o = o * 2 - 1) < 0 ? r * Lo(-o) * Math.sin((n - o) / t) : 2 - r * Lo(o) * Math.sin((n + o) / t)) / 2;
  }
  return i.amplitude = function(o) {
    return e(o, t * hl);
  }, i.period = function(o) {
    return e(r, o);
  }, i;
}(n0, i0), LB = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  easeLinear: tB,
  easeQuad: hm,
  easeQuadIn: rB,
  easeQuadOut: nB,
  easeQuadInOut: hm,
  easeCubic: dm,
  easeCubicIn: TS,
  easeCubicOut: iB,
  easeCubicInOut: dm,
  easePoly: vm,
  easePolyIn: oB,
  easePolyOut: aB,
  easePolyInOut: vm,
  easeSin: pm,
  easeSinIn: lB,
  easeSinOut: sB,
  easeSinInOut: pm,
  easeExp: gm,
  easeExpIn: uB,
  easeExpOut: fB,
  easeExpInOut: gm,
  easeCircle: ym,
  easeCircleIn: cB,
  easeCircleOut: hB,
  easeCircleInOut: ym,
  easeBounce: Ts,
  easeBounceIn: wB,
  easeBounceOut: Ts,
  easeBounceInOut: xB,
  easeBack: Cm,
  easeBackIn: SB,
  easeBackOut: bB,
  easeBackInOut: Cm,
  easeElastic: mm,
  easeElasticIn: TB,
  easeElasticOut: mm,
  easeElasticInOut: EB
}), AB = {};
function RB(e) {
  return AB[e.toLowerCase()] || LB[e];
}
var OB = function(e) {
  return ["fill", "stroke", "fillStyle", "strokeStyle"].includes(e);
}, IB = function(e) {
  return /^[r,R,L,l]{1}[\s]*\(/.test(e);
}, _m = [1, 0, 0, 0, 1, 0, 0, 0, 1];
function MB(e, r, t) {
  var n = {}, i = r.fromAttrs, o = r.toAttrs;
  if (!e.destroyed) {
    var a;
    for (var l in o)
      if (!Wf(i[l], o[l]))
        if (l === "path") {
          var s = o[l], f = i[l];
          s.length > f.length ? (s = el(o[l]), f = el(i[l]), f = aS(f, s), f = Av(f, s), r.fromAttrs.path = f, r.toAttrs.path = s) : r.pathFormatted || (s = el(o[l]), f = el(i[l]), f = Av(f, s), r.fromAttrs.path = f, r.toAttrs.path = s, r.pathFormatted = !0), n[l] = [];
          for (var h = 0; h < s.length; h++) {
            for (var d = s[h], v = f[h], g = [], y = 0; y < d.length; y++)
              Sv(d[y]) && v && Sv(v[y]) ? (a = Vf(v[y], d[y]), g.push(a(t))) : g.push(d[y]);
            n[l].push(g);
          }
        } else if (l === "matrix") {
          var C = K4(i[l] || _m, o[l] || _m), _ = C(t);
          n[l] = _;
        } else OB(l) && IB(o[l]) ? n[l] = o[l] : va(o[l]) || (a = Vf(i[l], o[l]), n[l] = a(t));
    e.attr(n);
  }
}
function BB(e, r, t) {
  var n = r.startTime, i = r.delay;
  if (t < n + i || r._paused)
    return !1;
  var o, a = r.duration, l = r.easing, s = RB(l);
  if (t = t - n - r.delay, r.repeat)
    o = t % a / a, o = s(o);
  else if (o = t / a, o < 1)
    o = s(o);
  else
    return r.onFrame ? e.attr(r.onFrame(1)) : e.attr(r.toAttrs), !0;
  if (r.onFrame) {
    var f = r.onFrame(o);
    e.attr(f);
  } else
    MB(e, r, o);
  return !1;
}
var DB = (
  /** @class */
  function() {
    function e(r) {
      this.animators = [], this.current = 0, this.timer = null, this.canvas = r;
    }
    return e.prototype.initTimer = function() {
      var r = this, t = !1, n, i, o;
      this.timer = Qp(function(a) {
        if (r.current = a, r.animators.length > 0) {
          for (var l = r.animators.length - 1; l >= 0; l--) {
            if (n = r.animators[l], n.destroyed) {
              r.removeAnimator(l);
              continue;
            }
            if (!n.isAnimatePaused()) {
              i = n.get("animations");
              for (var s = i.length - 1; s >= 0; s--)
                o = i[s], t = BB(n, o, a), t && (i.splice(s, 1), t = !1, o.callback && o.callback());
            }
            i.length === 0 && r.removeAnimator(l);
          }
          var f = r.canvas.get("autoDraw");
          f || r.canvas.draw();
        }
      });
    }, e.prototype.addAnimator = function(r) {
      this.animators.push(r);
    }, e.prototype.removeAnimator = function(r) {
      this.animators.splice(r, 1);
    }, e.prototype.isAnimating = function() {
      return !!this.animators.length;
    }, e.prototype.stop = function() {
      this.timer && this.timer.stop();
    }, e.prototype.stopAllAnimations = function(r) {
      r === void 0 && (r = !0), this.animators.forEach(function(t) {
        t.stopAnimate(r);
      }), this.animators = [], this.canvas.draw();
    }, e.prototype.getTime = function() {
      return this.current;
    }, e;
  }()
), $B = 40, wm = 0, xm = [
  "mousedown",
  "mouseup",
  "dblclick",
  "mouseout",
  "mouseover",
  "mousemove",
  "mouseleave",
  "mouseenter",
  "touchstart",
  "touchmove",
  "touchend",
  "dragenter",
  "dragover",
  "dragleave",
  "drop",
  "contextmenu",
  "mousewheel"
];
function Sm(e, r, t) {
  t.name = r, t.target = e, t.currentTarget = e, t.delegateTarget = e, e.emit(r, t);
}
function FB(e, r, t) {
  if (t.bubbles) {
    var n = void 0, i = !1;
    if (r === "mouseenter" ? (n = t.fromShape, i = !0) : r === "mouseleave" && (i = !0, n = t.toShape), e.isCanvas() && i)
      return;
    if (n && uS(e, n)) {
      t.bubbles = !1;
      return;
    }
    t.name = r, t.currentTarget = e, t.delegateTarget = e, e.emit(r, t);
  }
}
var PB = (
  /** @class */
  function() {
    function e(r) {
      var t = this;
      this.draggingShape = null, this.dragging = !1, this.currentShape = null, this.mousedownShape = null, this.mousedownPoint = null, this._eventCallback = function(n) {
        var i = n.type;
        t._triggerEvent(i, n);
      }, this._onDocumentMove = function(n) {
        var i = t.canvas, o = i.get("el");
        if (o !== n.target && (t.dragging || t.currentShape)) {
          var a = t._getPointInfo(n);
          t.dragging && t._emitEvent("drag", n, a, t.draggingShape);
        }
      }, this._onDocumentMouseUp = function(n) {
        var i = t.canvas, o = i.get("el");
        if (o !== n.target && t.dragging) {
          var a = t._getPointInfo(n);
          t.draggingShape && t._emitEvent("drop", n, a, null), t._emitEvent("dragend", n, a, t.draggingShape), t._afterDrag(t.draggingShape, a, n);
        }
      }, this.canvas = r.canvas;
    }
    return e.prototype.init = function() {
      this._bindEvents();
    }, e.prototype._bindEvents = function() {
      var r = this, t = this.canvas.get("el");
      Je(xm, function(n) {
        t.addEventListener(n, r._eventCallback);
      }), document && (document.addEventListener("mousemove", this._onDocumentMove), document.addEventListener("mouseup", this._onDocumentMouseUp));
    }, e.prototype._clearEvents = function() {
      var r = this, t = this.canvas.get("el");
      Je(xm, function(n) {
        t.removeEventListener(n, r._eventCallback);
      }), document && (document.removeEventListener("mousemove", this._onDocumentMove), document.removeEventListener("mouseup", this._onDocumentMouseUp));
    }, e.prototype._getEventObj = function(r, t, n, i, o, a) {
      var l = new U5(r, t);
      return l.fromShape = o, l.toShape = a, l.x = n.x, l.y = n.y, l.clientX = n.clientX, l.clientY = n.clientY, l.propagationPath.push(i), l;
    }, e.prototype._getShape = function(r, t) {
      return this.canvas.getShape(r.x, r.y, t);
    }, e.prototype._getPointInfo = function(r) {
      var t = this.canvas, n = t.getClientByEvent(r), i = t.getPointByEvent(r);
      return {
        x: i.x,
        y: i.y,
        clientX: n.x,
        clientY: n.y
      };
    }, e.prototype._triggerEvent = function(r, t) {
      var n = this._getPointInfo(t), i = this._getShape(n, t), o = this["_on" + r], a = !1;
      if (o)
        o.call(this, n, i, t);
      else {
        var l = this.currentShape;
        r === "mouseenter" || r === "dragenter" || r === "mouseover" ? (this._emitEvent(r, t, n, null, null, i), i && this._emitEvent(r, t, n, i, null, i), r === "mouseenter" && this.draggingShape && this._emitEvent("dragenter", t, n, null)) : r === "mouseleave" || r === "dragleave" || r === "mouseout" ? (a = !0, l && this._emitEvent(r, t, n, l, l, null), this._emitEvent(r, t, n, null, l, null), r === "mouseleave" && this.draggingShape && this._emitEvent("dragleave", t, n, null)) : this._emitEvent(r, t, n, i, null, null);
      }
      if (a || (this.currentShape = i), i && !i.get("destroyed")) {
        var s = this.canvas, f = s.get("el");
        f.style.cursor = i.attr("cursor") || s.get("cursor");
      }
    }, e.prototype._onmousedown = function(r, t, n) {
      n.button === wm && (this.mousedownShape = t, this.mousedownPoint = r, this.mousedownTimeStamp = n.timeStamp), this._emitEvent("mousedown", n, r, t, null, null);
    }, e.prototype._emitMouseoverEvents = function(r, t, n, i) {
      var o = this.canvas.get("el");
      n !== i && (n && (this._emitEvent("mouseout", r, t, n, n, i), this._emitEvent("mouseleave", r, t, n, n, i), (!i || i.get("destroyed")) && (o.style.cursor = this.canvas.get("cursor"))), i && (this._emitEvent("mouseover", r, t, i, n, i), this._emitEvent("mouseenter", r, t, i, n, i)));
    }, e.prototype._emitDragoverEvents = function(r, t, n, i, o) {
      i ? (i !== n && (n && this._emitEvent("dragleave", r, t, n, n, i), this._emitEvent("dragenter", r, t, i, n, i)), o || this._emitEvent("dragover", r, t, i)) : n && this._emitEvent("dragleave", r, t, n, n, i), o && this._emitEvent("dragover", r, t, i);
    }, e.prototype._afterDrag = function(r, t, n) {
      r && (r.set("capture", !0), this.draggingShape = null), this.dragging = !1;
      var i = this._getShape(t, n);
      i !== r && this._emitMouseoverEvents(n, t, r, i), this.currentShape = i;
    }, e.prototype._onmouseup = function(r, t, n) {
      if (n.button === wm) {
        var i = this.draggingShape;
        this.dragging ? (i && this._emitEvent("drop", n, r, t), this._emitEvent("dragend", n, r, i), this._afterDrag(i, r, n)) : (this._emitEvent("mouseup", n, r, t), t === this.mousedownShape && this._emitEvent("click", n, r, t), this.mousedownShape = null, this.mousedownPoint = null);
      }
    }, e.prototype._ondragover = function(r, t, n) {
      n.preventDefault();
      var i = this.currentShape;
      this._emitDragoverEvents(n, r, i, t, !0);
    }, e.prototype._onmousemove = function(r, t, n) {
      var i = this.canvas, o = this.currentShape, a = this.draggingShape;
      if (this.dragging)
        a && this._emitDragoverEvents(n, r, o, t, !1), this._emitEvent("drag", n, r, a);
      else {
        var l = this.mousedownPoint;
        if (l) {
          var s = this.mousedownShape, f = n.timeStamp, h = f - this.mousedownTimeStamp, d = l.clientX - r.clientX, v = l.clientY - r.clientY, g = d * d + v * v;
          h > 120 || g > $B ? s && s.get("draggable") ? (a = this.mousedownShape, a.set("capture", !1), this.draggingShape = a, this.dragging = !0, this._emitEvent("dragstart", n, r, a), this.mousedownShape = null, this.mousedownPoint = null) : !s && i.get("draggable") ? (this.dragging = !0, this._emitEvent("dragstart", n, r, null), this.mousedownShape = null, this.mousedownPoint = null) : (this._emitMouseoverEvents(n, r, o, t), this._emitEvent("mousemove", n, r, t)) : (this._emitMouseoverEvents(n, r, o, t), this._emitEvent("mousemove", n, r, t));
        } else
          this._emitMouseoverEvents(n, r, o, t), this._emitEvent("mousemove", n, r, t);
      }
    }, e.prototype._emitEvent = function(r, t, n, i, o, a) {
      var l = this._getEventObj(r, t, n, i, o, a);
      if (i) {
        l.shape = i, Sm(i, r, l);
        for (var s = i.getParent(); s; )
          s.emitDelegation(r, l), l.propagationStopped || FB(s, r, l), l.propagationPath.push(s), s = s.getParent();
      } else {
        var f = this.canvas;
        Sm(f, r, l);
      }
    }, e.prototype.destroy = function() {
      this._clearEvents(), this.canvas = null, this.currentShape = null, this.draggingShape = null, this.mousedownPoint = null, this.mousedownShape = null, this.mousedownTimeStamp = null;
    }, e;
  }()
), bm = "px", Tm = t4(), NB = Tm && Tm.name === "firefox", HB = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      return n.initContainer(), n.initDom(), n.initEvents(), n.initTimeline(), n;
    }
    return r.prototype.getDefaultCfg = function() {
      var t = e.prototype.getDefaultCfg.call(this);
      return t.cursor = "default", t.supportCSSTransform = !1, t;
    }, r.prototype.initContainer = function() {
      var t = this.get("container");
      qn(t) && (t = document.getElementById(t), this.set("container", t));
    }, r.prototype.initDom = function() {
      var t = this.createDom();
      this.set("el", t);
      var n = this.get("container");
      n.appendChild(t), this.setDOMSize(this.get("width"), this.get("height"));
    }, r.prototype.initEvents = function() {
      var t = new PB({
        canvas: this
      });
      t.init(), this.set("eventController", t);
    }, r.prototype.initTimeline = function() {
      var t = new DB(this);
      this.set("timeline", t);
    }, r.prototype.setDOMSize = function(t, n) {
      var i = this.get("el");
      jC && (i.style.width = t + bm, i.style.height = n + bm);
    }, r.prototype.changeSize = function(t, n) {
      this.setDOMSize(t, n), this.set("width", t), this.set("height", n), this.onCanvasChange("changeSize");
    }, r.prototype.getRenderer = function() {
      return this.get("renderer");
    }, r.prototype.getCursor = function() {
      return this.get("cursor");
    }, r.prototype.setCursor = function(t) {
      this.set("cursor", t);
      var n = this.get("el");
      jC && n && (n.style.cursor = t);
    }, r.prototype.getPointByEvent = function(t) {
      var n = this.get("supportCSSTransform");
      if (n) {
        if (NB && !Gt(t.layerX) && t.layerX !== t.offsetX)
          return {
            x: t.layerX,
            y: t.layerY
          };
        if (!Gt(t.offsetX))
          return {
            x: t.offsetX,
            y: t.offsetY
          };
      }
      var i = this.getClientByEvent(t), o = i.x, a = i.y;
      return this.getPointByClient(o, a);
    }, r.prototype.getClientByEvent = function(t) {
      var n = t;
      return t.touches && (t.type === "touchend" ? n = t.changedTouches[0] : n = t.touches[0]), {
        x: n.clientX,
        y: n.clientY
      };
    }, r.prototype.getPointByClient = function(t, n) {
      var i = this.get("el"), o = i.getBoundingClientRect();
      return {
        x: t - o.left,
        y: n - o.top
      };
    }, r.prototype.getClientByPoint = function(t, n) {
      var i = this.get("el"), o = i.getBoundingClientRect();
      return {
        x: t + o.left,
        y: n + o.top
      };
    }, r.prototype.draw = function() {
    }, r.prototype.removeDom = function() {
      var t = this.get("el");
      t.parentNode.removeChild(t);
    }, r.prototype.clearEvents = function() {
      var t = this.get("eventController");
      t.destroy();
    }, r.prototype.isCanvas = function() {
      return !0;
    }, r.prototype.getParent = function() {
      return null;
    }, r.prototype.destroy = function() {
      var t = this.get("timeline");
      this.get("destroyed") || (this.clear(), t && t.stop(), this.clearEvents(), this.removeDom(), e.prototype.destroy.call(this));
    }, r;
  }(pS)
), zB = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.isGroup = function() {
      return !0;
    }, r.prototype.isEntityGroup = function() {
      return !1;
    }, r.prototype.clone = function() {
      for (var t = e.prototype.clone.call(this), n = this.getChildren(), i = 0; i < n.length; i++) {
        var o = n[i];
        t.add(o.clone());
      }
      return t;
    }, r;
  }(pS)
), WB = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      return e.call(this, t) || this;
    }
    return r.prototype._isInBBox = function(t, n) {
      var i = this.getBBox();
      return i.minX <= t && i.maxX >= t && i.minY <= n && i.maxY >= n;
    }, r.prototype.afterAttrsChange = function(t) {
      e.prototype.afterAttrsChange.call(this, t), this.clearCacheBBox();
    }, r.prototype.getBBox = function() {
      var t = this.cfg.bbox;
      return t || (t = this.calculateBBox(), this.set("bbox", t)), t;
    }, r.prototype.getCanvasBBox = function() {
      var t = this.cfg.canvasBBox;
      return t || (t = this.calculateCanvasBBox(), this.set("canvasBBox", t)), t;
    }, r.prototype.applyMatrix = function(t) {
      e.prototype.applyMatrix.call(this, t), this.set("canvasBBox", null);
    }, r.prototype.calculateCanvasBBox = function() {
      var t = this.getBBox(), n = this.getTotalMatrix(), i = t.minX, o = t.minY, a = t.maxX, l = t.maxY;
      if (n) {
        var s = na(n, [t.minX, t.minY]), f = na(n, [t.maxX, t.minY]), h = na(n, [t.minX, t.maxY]), d = na(n, [t.maxX, t.maxY]);
        i = Math.min(s[0], f[0], h[0], d[0]), a = Math.max(s[0], f[0], h[0], d[0]), o = Math.min(s[1], f[1], h[1], d[1]), l = Math.max(s[1], f[1], h[1], d[1]);
      }
      var v = this.attrs;
      if (v.shadowColor) {
        var g = v.shadowBlur, y = g === void 0 ? 0 : g, C = v.shadowOffsetX, _ = C === void 0 ? 0 : C, w = v.shadowOffsetY, x = w === void 0 ? 0 : w, S = i - y + _, T = a + y + _, R = o - y + x, B = l + y + x;
        i = Math.min(i, S), a = Math.max(a, T), o = Math.min(o, R), l = Math.max(l, B);
      }
      return {
        x: i,
        y: o,
        minX: i,
        minY: o,
        maxX: a,
        maxY: l,
        width: a - i,
        height: l - o
      };
    }, r.prototype.clearCacheBBox = function() {
      this.set("bbox", null), this.set("canvasBBox", null);
    }, r.prototype.isClipShape = function() {
      return this.get("isClipShape");
    }, r.prototype.isInShape = function(t, n) {
      return !1;
    }, r.prototype.isOnlyHitBox = function() {
      return !1;
    }, r.prototype.isHit = function(t, n) {
      var i = this.get("startArrowShape"), o = this.get("endArrowShape"), a = [t, n, 1];
      a = this.invertFromMatrix(a);
      var l = a[0], s = a[1], f = this._isInBBox(l, s);
      return this.isOnlyHitBox() ? f : !!(f && !this.isClipped(l, s) && (this.isInShape(l, s) || i && i.isHit(l, s) || o && o.isHit(l, s)));
    }, r;
  }(hS)
), AS = /* @__PURE__ */ new Map();
function mi(e, r) {
  AS.set(e, r);
}
function kB(e) {
  return AS.get(e);
}
function RS(e) {
  var r = e.attr(), t = r.x, n = r.y, i = r.width, o = r.height;
  return {
    x: t,
    y: n,
    width: i,
    height: o
  };
}
function OS(e) {
  var r = e.attr(), t = r.x, n = r.y, i = r.r;
  return {
    x: t - i,
    y: n - i,
    width: i * 2,
    height: i * 2
  };
}
function sr(e, r, t, n) {
  var i = e - t, o = r - n;
  return Math.sqrt(i * i + o * o);
}
function If(e, r) {
  return Math.abs(e - r) < 1e-3;
}
function xl(e, r) {
  var t = Eo(e), n = Eo(r), i = To(e), o = To(r);
  return {
    x: t,
    y: n,
    width: i - t,
    height: o - n
  };
}
function Lc(e) {
  return (e + Math.PI * 2) % (Math.PI * 2);
}
var Fr = {
  /**
   * 计算线段的包围盒
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @return {object} 包围盒对象
   */
  box: function(e, r, t, n) {
    return xl([e, t], [r, n]);
  },
  /**
   * 线段的长度
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @return {number} 距离
   */
  length: function(e, r, t, n) {
    return sr(e, r, t, n);
  },
  /**
   * 根据比例获取点
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @param {number} t 指定比例
   * @return {object} 包含 x, y 的点
   */
  pointAt: function(e, r, t, n, i) {
    return {
      x: (1 - i) * e + i * t,
      y: (1 - i) * r + i * n
    };
  },
  /**
   * 点到线段的距离
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @param {number} x  测试点 x
   * @param {number} y  测试点 y
   * @return {number} 距离
   */
  pointDistance: function(e, r, t, n, i, o) {
    var a = (t - e) * (i - e) + (n - r) * (o - r);
    if (a < 0)
      return sr(e, r, i, o);
    var l = (t - e) * (t - e) + (n - r) * (n - r);
    return a > l ? sr(t, n, i, o) : this.pointToLine(e, r, t, n, i, o);
  },
  /**
   * 点到直线的距离，而不是点到线段的距离
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @param {number} x  测试点 x
   * @param {number} y  测试点 y
   * @return {number} 距离
   */
  pointToLine: function(e, r, t, n, i, o) {
    var a = [t - e, n - r];
    if (p4(a, [0, 0]))
      return Math.sqrt((i - e) * (i - e) + (o - r) * (o - r));
    var l = [-a[1], a[0]];
    d4(l, l);
    var s = [i - e, o - r];
    return Math.abs(v4(s, l));
  },
  /**
   * 线段的角度
   * @param {number} x1 起始点 x
   * @param {number} y1 起始点 y
   * @param {number} x2 结束点 x
   * @param {number} y2 结束点 y
   * @return {number} 导数
   */
  tangentAngle: function(e, r, t, n) {
    return Math.atan2(n - r, t - e);
  }
}, GB = 1e-4;
function IS(e, r, t, n, i, o) {
  var a, l = 1 / 0, s = [t, n], f = 20;
  o && o > 200 && (f = o / 10);
  for (var h = 1 / f, d = h / 10, v = 0; v <= f; v++) {
    var g = v * h, y = [i.apply(null, e.concat([g])), i.apply(null, r.concat([g]))], C = sr(s[0], s[1], y[0], y[1]);
    C < l && (a = g, l = C);
  }
  if (a === 0)
    return {
      x: e[0],
      y: r[0]
    };
  if (a === 1) {
    var _ = e.length;
    return {
      x: e[_ - 1],
      y: r[_ - 1]
    };
  }
  l = 1 / 0;
  for (var v = 0; v < 32 && !(d < GB); v++) {
    var w = a - d, x = a + d, y = [i.apply(null, e.concat([w])), i.apply(null, r.concat([w]))], C = sr(s[0], s[1], y[0], y[1]);
    if (w >= 0 && C < l)
      a = w, l = C;
    else {
      var S = [i.apply(null, e.concat([x])), i.apply(null, r.concat([x]))], T = sr(s[0], s[1], S[0], S[1]);
      x <= 1 && T < l ? (a = x, l = T) : d *= 0.5;
    }
  }
  return {
    x: i.apply(null, e.concat([a])),
    y: i.apply(null, r.concat([a]))
  };
}
function UB(e, r) {
  for (var t = 0, n = e.length, i = 0; i < n; i++) {
    var o = e[i], a = r[i], l = e[(i + 1) % n], s = r[(i + 1) % n];
    t += sr(o, a, l, s);
  }
  return t / 2;
}
function yo(e, r, t, n) {
  var i = 1 - n;
  return i * i * e + 2 * n * i * r + n * n * t;
}
function Em(e, r, t) {
  var n = e + t - 2 * r;
  if (If(n, 0))
    return [0.5];
  var i = (e - r) / n;
  return i <= 1 && i >= 0 ? [i] : [];
}
function Lm(e, r, t, n) {
  return 2 * (1 - n) * (r - e) + 2 * n * (t - r);
}
function MS(e, r, t, n, i, o, a) {
  var l = yo(e, t, i, a), s = yo(r, n, o, a), f = Fr.pointAt(e, r, t, n, a), h = Fr.pointAt(t, n, i, o, a);
  return [
    [e, r, f.x, f.y, l, s],
    [l, s, h.x, h.y, i, o]
  ];
}
function Pv(e, r, t, n, i, o, a) {
  if (a === 0)
    return (sr(e, r, t, n) + sr(t, n, i, o) + sr(e, r, i, o)) / 2;
  var l = MS(e, r, t, n, i, o, 0.5), s = l[0], f = l[1];
  return s.push(a - 1), f.push(a - 1), Pv.apply(null, s) + Pv.apply(null, f);
}
var BS = {
  box: function(e, r, t, n, i, o) {
    var a = Em(e, t, i)[0], l = Em(r, n, o)[0], s = [e, i], f = [r, o];
    return a !== void 0 && s.push(yo(e, t, i, a)), l !== void 0 && f.push(yo(r, n, o, l)), xl(s, f);
  },
  length: function(e, r, t, n, i, o) {
    return Pv(e, r, t, n, i, o, 3);
  },
  nearestPoint: function(e, r, t, n, i, o, a, l) {
    return IS([e, t, i], [r, n, o], a, l, yo);
  },
  pointDistance: function(e, r, t, n, i, o, a, l) {
    var s = this.nearestPoint(e, r, t, n, i, o, a, l);
    return sr(s.x, s.y, a, l);
  },
  interpolationAt: yo,
  pointAt: function(e, r, t, n, i, o, a) {
    return {
      x: yo(e, t, i, a),
      y: yo(r, n, o, a)
    };
  },
  divide: function(e, r, t, n, i, o, a) {
    return MS(e, r, t, n, i, o, a);
  },
  tangentAngle: function(e, r, t, n, i, o, a) {
    var l = Lm(e, t, i, a), s = Lm(r, n, o, a), f = Math.atan2(s, l);
    return Lc(f);
  }
};
function Co(e, r, t, n, i) {
  var o = 1 - i;
  return o * o * o * e + 3 * r * i * o * o + 3 * t * i * i * o + n * i * i * i;
}
function Am(e, r, t, n, i) {
  var o = 1 - i;
  return 3 * (o * o * (r - e) + 2 * o * i * (t - r) + i * i * (n - t));
}
function Yd(e, r, t, n) {
  var i = -3 * e + 9 * r - 9 * t + 3 * n, o = 6 * e - 12 * r + 6 * t, a = 3 * r - 3 * e, l = [], s, f, h;
  if (If(i, 0))
    If(o, 0) || (s = -a / o, s >= 0 && s <= 1 && l.push(s));
  else {
    var d = o * o - 4 * i * a;
    If(d, 0) ? l.push(-o / (2 * i)) : d > 0 && (h = Math.sqrt(d), s = (-o + h) / (2 * i), f = (-o - h) / (2 * i), s >= 0 && s <= 1 && l.push(s), f >= 0 && f <= 1 && l.push(f));
  }
  return l;
}
function DS(e, r, t, n, i, o, a, l, s) {
  var f = Co(e, t, i, a, s), h = Co(r, n, o, l, s), d = Fr.pointAt(e, r, t, n, s), v = Fr.pointAt(t, n, i, o, s), g = Fr.pointAt(i, o, a, l, s), y = Fr.pointAt(d.x, d.y, v.x, v.y, s), C = Fr.pointAt(v.x, v.y, g.x, g.y, s);
  return [
    [e, r, d.x, d.y, y.x, y.y, f, h],
    [f, h, C.x, C.y, g.x, g.y, a, l]
  ];
}
function Nv(e, r, t, n, i, o, a, l, s) {
  if (s === 0)
    return UB([e, t, i, a], [r, n, o, l]);
  var f = DS(e, r, t, n, i, o, a, l, 0.5), h = f[0], d = f[1];
  return h.push(s - 1), d.push(s - 1), Nv.apply(null, h) + Nv.apply(null, d);
}
var hs = {
  extrema: Yd,
  box: function(e, r, t, n, i, o, a, l) {
    for (var s = [e, a], f = [r, l], h = Yd(e, t, i, a), d = Yd(r, n, o, l), v = 0; v < h.length; v++)
      s.push(Co(e, t, i, a, h[v]));
    for (var v = 0; v < d.length; v++)
      f.push(Co(r, n, o, l, d[v]));
    return xl(s, f);
  },
  length: function(e, r, t, n, i, o, a, l) {
    return Nv(e, r, t, n, i, o, a, l, 3);
  },
  nearestPoint: function(e, r, t, n, i, o, a, l, s, f, h) {
    return IS([e, t, i, a], [r, n, o, l], s, f, Co, h);
  },
  pointDistance: function(e, r, t, n, i, o, a, l, s, f, h) {
    var d = this.nearestPoint(e, r, t, n, i, o, a, l, s, f, h);
    return sr(d.x, d.y, s, f);
  },
  interpolationAt: Co,
  pointAt: function(e, r, t, n, i, o, a, l, s) {
    return {
      x: Co(e, t, i, a, s),
      y: Co(r, n, o, l, s)
    };
  },
  divide: function(e, r, t, n, i, o, a, l, s) {
    return DS(e, r, t, n, i, o, a, l, s);
  },
  tangentAngle: function(e, r, t, n, i, o, a, l, s) {
    var f = Am(e, t, i, a, s), h = Am(r, n, o, l, s);
    return Lc(Math.atan2(h, f));
  }
};
function Rm(e, r) {
  var t = Math.abs(e);
  return r > 0 ? t : t * -1;
}
var YB = {
  /**
   * 包围盒计算
   * @param {number} x  椭圆中心 x
   * @param {number} y  椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @return {object} 包围盒
   */
  box: function(e, r, t, n) {
    return {
      x: e - t,
      y: r - n,
      width: t * 2,
      height: n * 2
    };
  },
  /**
   * 计算周长，使用近似法
   * @param {number} x  椭圆中心 x
   * @param {number} y  椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @return {number} 椭圆周长
   */
  length: function(e, r, t, n) {
    return Math.PI * (3 * (t + n) - Math.sqrt((3 * t + n) * (t + 3 * n)));
  },
  /**
   * 距离椭圆最近的点
   * @param {number} x  椭圆中心 x
   * @param {number} y  椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @param {number} x0  指定的点 x
   * @param {number} y0  指定的点 y
   * @return {object} 椭圆上距离指定点最近的点
   */
  nearestPoint: function(e, r, t, n, i, o) {
    var a = t, l = n;
    if (a === 0 || l === 0)
      return {
        x: e,
        y: r
      };
    for (var s = i - e, f = o - r, h = Math.abs(s), d = Math.abs(f), v = a * a, g = l * l, y = Math.PI / 4, C, _, w = 0; w < 4; w++) {
      C = a * Math.cos(y), _ = l * Math.sin(y);
      var x = (v - g) * Math.pow(Math.cos(y), 3) / a, S = (g - v) * Math.pow(Math.sin(y), 3) / l, T = C - x, R = _ - S, B = h - x, $ = d - S, N = Math.hypot(R, T), z = Math.hypot($, B), V = N * Math.asin((T * $ - R * B) / (N * z)), X = V / Math.sqrt(v + g - C * C - _ * _);
      y += X, y = Math.min(Math.PI / 2, Math.max(0, y));
    }
    return {
      x: e + Rm(C, s),
      y: r + Rm(_, f)
    };
  },
  /**
   * 点到椭圆最近的距离
   * @param {number} x  椭圆中心 x
   * @param {number} y  椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @param {number} x0  指定的点 x
   * @param {number} y0  指定的点 y
   * @return {number} 点到椭圆的距离
   */
  pointDistance: function(e, r, t, n, i, o) {
    var a = this.nearestPoint(e, r, t, n, i, o);
    return sr(a.x, a.y, i, o);
  },
  /**
   * 根据比例获取点
   * @param {number} x 椭圆中心 x
   * @param {number} y 椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @param {number} t 指定比例，x轴方向为 0
   * @return {object} 点
   */
  pointAt: function(e, r, t, n, i) {
    var o = 2 * Math.PI * i;
    return {
      x: e + t * Math.cos(o),
      y: r + n * Math.sin(o)
    };
  },
  /**
   * 根据比例计算切线角度
   * @param {number} x 椭圆中心 x
   * @param {number} y 椭圆中心 y
   * @param {number} rx 椭圆 x 方向半径
   * @param {number} ry 椭圆 y 方向半径
   * @param {number} t 指定比例 0 - 1 之间，x轴方向为 0。在 0-1 范围之外是循环还是返回 null，还需要调整
   * @return {number} 角度，在 0 - 2PI 之间
   */
  tangentAngle: function(e, r, t, n, i) {
    var o = 2 * Math.PI * i, a = Math.atan2(n * Math.cos(o), -t * Math.sin(o));
    return Lc(a);
  }
};
function XB(e, r, t, n, i, o, a, l) {
  return -1 * t * Math.cos(i) * Math.sin(l) - n * Math.sin(i) * Math.cos(l);
}
function VB(e, r, t, n, i, o, a, l) {
  return -1 * t * Math.sin(i) * Math.sin(l) + n * Math.cos(i) * Math.cos(l);
}
function qB(e, r, t) {
  return Math.atan(-r / e * Math.tan(t));
}
function KB(e, r, t) {
  return Math.atan(r / (e * Math.tan(t)));
}
function Om(e, r, t, n, i, o) {
  return t * Math.cos(i) * Math.cos(o) - n * Math.sin(i) * Math.sin(o) + e;
}
function Im(e, r, t, n, i, o) {
  return t * Math.sin(i) * Math.cos(o) + n * Math.cos(i) * Math.sin(o) + r;
}
function jB(e, r, t, n) {
  var i = Math.atan2(n * e, t * r);
  return (i + Math.PI * 2) % (Math.PI * 2);
}
function Mm(e, r, t) {
  return {
    x: e * Math.cos(t),
    y: r * Math.sin(t)
  };
}
function Bm(e, r, t) {
  var n = Math.cos(t), i = Math.sin(t);
  return [e * n - r * i, e * i + r * n];
}
var ZB = {
  /**
   * 计算包围盒
   * @param {number} cx         圆心 x
   * @param {number} cy         圆心 y
   * @param {number} rx         x 轴方向的半径
   * @param {number} ry         y 轴方向的半径
   * @param {number} xRotation  旋转角度
   * @param {number} startAngle 起始角度
   * @param {number} endAngle   结束角度
   * @return {object} 包围盒对象
   */
  box: function(e, r, t, n, i, o, a) {
    for (var l = qB(t, n, i), s = 1 / 0, f = -1 / 0, h = [o, a], d = -Math.PI * 2; d <= Math.PI * 2; d += Math.PI) {
      var v = l + d;
      o < a ? o < v && v < a && h.push(v) : a < v && v < o && h.push(v);
    }
    for (var d = 0; d < h.length; d++) {
      var g = Om(e, r, t, n, i, h[d]);
      g < s && (s = g), g > f && (f = g);
    }
    for (var y = KB(t, n, i), C = 1 / 0, _ = -1 / 0, w = [o, a], d = -Math.PI * 2; d <= Math.PI * 2; d += Math.PI) {
      var x = y + d;
      o < a ? o < x && x < a && w.push(x) : a < x && x < o && w.push(x);
    }
    for (var d = 0; d < w.length; d++) {
      var S = Im(e, r, t, n, i, w[d]);
      S < C && (C = S), S > _ && (_ = S);
    }
    return {
      x: s,
      y: C,
      width: f - s,
      height: _ - C
    };
  },
  /**
   * 获取圆弧的长度，计算圆弧长度时不考虑旋转角度，
   * 仅跟 rx, ry, startAngle, endAngle 相关
   * @param {number} cx         圆心 x
   * @param {number} cy         圆心 y
   * @param {number} rx         x 轴方向的半径
   * @param {number} ry         y 轴方向的半径
   * @param {number} xRotation  旋转角度
   * @param {number} startAngle 起始角度
   * @param {number} endAngle   结束角度
   */
  length: function(e, r, t, n, i, o, a) {
  },
  /**
   * 获取指定点到圆弧的最近距离的点
   * @param {number} cx         圆心 x
   * @param {number} cy         圆心 y
   * @param {number} rx         x 轴方向的半径
   * @param {number} ry         y 轴方向的半径
   * @param {number} xRotation  旋转角度
   * @param {number} startAngle 起始角度
   * @param {number} endAngle   结束角度
   * @param {number} x0         指定点的 x
   * @param {number} y0         指定点的 y
   * @return {object} 到指定点最近距离的点
   */
  nearestPoint: function(e, r, t, n, i, o, a, l, s) {
    var f = Bm(l - e, s - r, -i), h = f[0], d = f[1], v = YB.nearestPoint(0, 0, t, n, h, d), g = jB(t, n, v.x, v.y);
    g < o ? v = Mm(t, n, o) : g > a && (v = Mm(t, n, a));
    var y = Bm(v.x, v.y, i);
    return {
      x: y[0] + e,
      y: y[1] + r
    };
  },
  pointDistance: function(e, r, t, n, i, o, a, l, s) {
    var f = this.nearestPoint(e, r, t, n, l, s);
    return sr(f.x, f.y, l, s);
  },
  pointAt: function(e, r, t, n, i, o, a, l) {
    var s = (a - o) * l + o;
    return {
      x: Om(e, r, t, n, i, s),
      y: Im(e, r, t, n, i, s)
    };
  },
  tangentAngle: function(e, r, t, n, i, o, a, l) {
    var s = (a - o) * l + o, f = XB(e, r, t, n, i, o, a, s), h = VB(e, r, t, n, i, o, a, s);
    return Lc(Math.atan2(h, f));
  }
};
function $S(e) {
  for (var r = 0, t = [], n = 0; n < e.length - 1; n++) {
    var i = e[n], o = e[n + 1], a = sr(i[0], i[1], o[0], o[1]), l = {
      from: i,
      to: o,
      length: a
    };
    t.push(l), r += a;
  }
  return { segments: t, totalLength: r };
}
function QB(e) {
  if (e.length < 2)
    return 0;
  for (var r = 0, t = 0; t < e.length - 1; t++) {
    var n = e[t], i = e[t + 1];
    r += sr(n[0], n[1], i[0], i[1]);
  }
  return r;
}
function JB(e, r) {
  if (r > 1 || r < 0 || e.length < 2)
    return null;
  var t = $S(e), n = t.segments, i = t.totalLength;
  if (i === 0)
    return {
      x: e[0][0],
      y: e[0][1]
    };
  for (var o = 0, a = null, l = 0; l < n.length; l++) {
    var s = n[l], f = s.from, h = s.to, d = s.length / i;
    if (r >= o && r <= o + d) {
      var v = (r - o) / d;
      a = Fr.pointAt(f[0], f[1], h[0], h[1], v);
      break;
    }
    o += d;
  }
  return a;
}
function e9(e, r) {
  if (r > 1 || r < 0 || e.length < 2)
    return 0;
  for (var t = $S(e), n = t.segments, i = t.totalLength, o = 0, a = 0, l = 0; l < n.length; l++) {
    var s = n[l], f = s.from, h = s.to, d = s.length / i;
    if (r >= o && r <= o + d) {
      a = Math.atan2(h[1] - f[1], h[0] - f[0]);
      break;
    }
    o += d;
  }
  return a;
}
function t9(e, r, t) {
  for (var n = 1 / 0, i = 0; i < e.length - 1; i++) {
    var o = e[i], a = e[i + 1], l = Fr.pointDistance(o[0], o[1], a[0], a[1], r, t);
    l < n && (n = l);
  }
  return n;
}
var r9 = {
  /**
   * 计算多折线的包围盒
   * @param {array} points 点的集合 [x,y] 的形式
   * @return {object} 包围盒
   */
  box: function(e) {
    for (var r = [], t = [], n = 0; n < e.length; n++) {
      var i = e[n];
      r.push(i[0]), t.push(i[1]);
    }
    return xl(r, t);
  },
  /**
   * 计算多折线的长度
   * @param {array} points 点的集合 [x,y] 的形式
   * @return {object} 多条边的长度
   */
  length: function(e) {
    return QB(e);
  },
  /**
   * 根据比例获取多折线的点
   * @param {array} points 点的集合 [x,y] 的形式
   * @param {number} t 在多折线的长度上的比例
   * @return {object} 根据比例值计算出来的点
   */
  pointAt: function(e, r) {
    return JB(e, r);
  },
  /**
   * 指定点到多折线的距离
   * @param {array} points 点的集合 [x,y] 的形式
   * @param {number} x 指定点的 x
   * @param {number} y 指定点的 y
   * @return {number} 点到多折线的距离
   */
  pointDistance: function(e, r, t) {
    return t9(e, r, t);
  },
  /**
   * 根据比例获取多折线的切线角度
   * @param {array} points 点的集合 [x,y] 的形式
   * @param {number} t 在多折线的长度上的比例
   * @return {object} 根据比例值计算出来的角度
   */
  tangentAngle: function(e, r) {
    return e9(e, r);
  }
};
function Dm(e, r) {
  return !e || !r ? e || r : {
    minX: Math.min(e.minX, r.minX),
    minY: Math.min(e.minY, r.minY),
    maxX: Math.max(e.maxX, r.maxX),
    maxY: Math.max(e.maxY, r.maxY)
  };
}
function o0(e, r) {
  var t = e.get("startArrowShape"), n = e.get("endArrowShape"), i = null, o = null;
  return t && (i = t.getCanvasBBox(), r = Dm(r, i)), n && (o = n.getCanvasBBox(), r = Dm(r, o)), r;
}
function n9(e) {
  for (var r = e.attr(), t = r.points, n = [], i = [], o = 0; o < t.length; o++) {
    var a = t[o];
    n.push(a[0]), i.push(a[1]);
  }
  var l = xl(n, i), s = l.x, f = l.y, h = l.width, d = l.height, v = {
    minX: s,
    minY: f,
    maxX: s + h,
    maxY: f + d
  };
  return v = o0(e, v), {
    x: v.minX,
    y: v.minY,
    width: v.maxX - v.minX,
    height: v.maxY - v.minY
  };
}
function i9(e) {
  for (var r = e.attr(), t = r.points, n = [], i = [], o = 0; o < t.length; o++) {
    var a = t[o];
    n.push(a[0]), i.push(a[1]);
  }
  return xl(n, i);
}
var Xd = null;
function FS() {
  if (!Xd) {
    var e = document.createElement("canvas");
    e.width = 1, e.height = 1, Xd = e.getContext("2d");
  }
  return Xd;
}
function PS(e, r, t) {
  var n = 1;
  if (qn(e) && (n = e.split(`
`).length), n > 1) {
    var i = o9(r, t);
    return r * n + i * (n - 1);
  }
  return r;
}
function o9(e, r) {
  return r ? r - e : e * 0.14;
}
function a9(e, r) {
  var t = FS(), n = 0;
  if (Gt(e) || e === "")
    return n;
  if (t.save(), t.font = r, qn(e) && e.includes(`
`)) {
    var i = e.split(`
`);
    Je(i, function(o) {
      var a = t.measureText(o).width;
      n < a && (n = a);
    });
  } else
    n = t.measureText(e).width;
  return t.restore(), n;
}
function NS(e) {
  var r = e.fontSize, t = e.fontFamily, n = e.fontWeight, i = e.fontStyle, o = e.fontVariant;
  return [i, o, n, r + "px", t].join(" ").trim();
}
function l9(e) {
  var r = e.attr(), t = r.x, n = r.y, i = r.text, o = r.fontSize, a = r.lineHeight, l = r.font;
  l || (l = NS(r));
  var s = a9(i, l), f;
  if (!s)
    f = {
      x: t,
      y: n,
      width: 0,
      height: 0
    };
  else {
    var h = r.textAlign, d = r.textBaseline, v = PS(i, o, a), g = {
      x: t,
      y: n - v
    };
    h && (h === "end" || h === "right" ? g.x -= s : h === "center" && (g.x -= s / 2)), d && (d === "top" ? g.y += v : d === "middle" && (g.y += v / 2)), f = {
      x: g.x,
      y: g.y,
      width: s,
      height: v
    };
  }
  return f;
}
var s9 = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig, u9 = /[^\s\,]+/ig;
function f9(e) {
  var r = e || [];
  if (En(r))
    return r;
  if (qn(r))
    return r = r.match(s9), Je(r, function(t, n) {
      if (t = t.match(u9), t[0].length > 1) {
        var i = t[0].charAt(0);
        t.splice(1, 0, t[0].substr(1)), t[0] = i;
      }
      Je(t, function(o, a) {
        isNaN(o) || (t[a] = +o);
      }), r[n] = t;
    }), r;
}
var ds = `	
\v\f\r   ᠎             　\u2028\u2029`, c9 = new RegExp("([a-z])[" + ds + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + ds + "]*,?[" + ds + "]*)+)", "ig"), h9 = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + ds + "]*,?[" + ds + "]*", "ig");
function d9(e) {
  if (!e)
    return null;
  if (En(e))
    return e;
  var r = {
    a: 7,
    c: 6,
    o: 2,
    h: 1,
    l: 2,
    m: 2,
    r: 4,
    q: 4,
    s: 4,
    t: 2,
    v: 1,
    u: 3,
    z: 0
  }, t = [];
  return String(e).replace(c9, function(n, i, o) {
    var a = [], l = i.toLowerCase();
    if (o.replace(h9, function(s, f) {
      f && a.push(+f);
    }), l === "m" && a.length > 2 && (t.push([i].concat(a.splice(0, 2))), l = "l", i = i === "m" ? "l" : "L"), l === "o" && a.length === 1 && t.push([i, a[0]]), l === "r")
      t.push([i].concat(a));
    else
      for (; a.length >= r[l] && (t.push([i].concat(a.splice(0, r[l]))), !!r[l]); )
        ;
    return "";
  }), t;
}
var v9 = /[a-z]/;
function $m(e, r) {
  return [
    r[0] + (r[0] - e[0]),
    r[1] + (r[1] - e[1])
  ];
}
function HS(e) {
  var r = d9(e);
  if (!r || !r.length)
    return [
      ["M", 0, 0]
    ];
  for (var t = !1, n = 0; n < r.length; n++) {
    var i = r[n][0];
    if (v9.test(i) || ["V", "H", "T", "S"].indexOf(i) >= 0) {
      t = !0;
      break;
    }
  }
  if (!t)
    return r;
  var o = [], a = 0, l = 0, s = 0, f = 0, h = 0, d = r[0];
  (d[0] === "M" || d[0] === "m") && (a = +d[1], l = +d[2], s = a, f = l, h++, o[0] = ["M", a, l]);
  for (var n = h, v = r.length; n < v; n++) {
    var g = r[n], y = o[n - 1], C = [], i = g[0], _ = i.toUpperCase();
    if (i !== _)
      switch (C[0] = _, _) {
        case "A":
          C[1] = g[1], C[2] = g[2], C[3] = g[3], C[4] = g[4], C[5] = g[5], C[6] = +g[6] + a, C[7] = +g[7] + l;
          break;
        case "V":
          C[1] = +g[1] + l;
          break;
        case "H":
          C[1] = +g[1] + a;
          break;
        case "M":
          s = +g[1] + a, f = +g[2] + l, C[1] = s, C[2] = f;
          break;
        default:
          for (var w = 1, x = g.length; w < x; w++)
            C[w] = +g[w] + (w % 2 ? a : l);
      }
    else
      C = r[n];
    switch (_) {
      case "Z":
        a = +s, l = +f;
        break;
      case "H":
        a = C[1], C = ["L", a, l];
        break;
      case "V":
        l = C[1], C = ["L", a, l];
        break;
      case "T":
        a = C[1], l = C[2];
        var S = $m([y[1], y[2]], [y[3], y[4]]);
        C = ["Q", S[0], S[1], a, l];
        break;
      case "S":
        a = C[C.length - 2], l = C[C.length - 1];
        var T = y.length, R = $m([y[T - 4], y[T - 3]], [y[T - 2], y[T - 1]]);
        C = ["C", R[0], R[1], C[1], C[2], a, l];
        break;
      case "M":
        s = C[C.length - 2], f = C[C.length - 1];
        break;
      default:
        a = C[C.length - 2], l = C[C.length - 1];
    }
    o.push(C);
  }
  return o;
}
function pf(e) {
  return Math.sqrt(e[0] * e[0] + e[1] * e[1]);
}
function Hv(e, r) {
  return pf(e) * pf(r) ? (e[0] * r[0] + e[1] * r[1]) / (pf(e) * pf(r)) : 1;
}
function Fm(e, r) {
  return (e[0] * r[1] < e[1] * r[0] ? -1 : 1) * Math.acos(Hv(e, r));
}
function zv(e, r) {
  return e[0] === r[0] && e[1] === r[1];
}
function p9(e, r) {
  var t = r[1], n = r[2], i = Jx(eS(r[3]), Math.PI * 2), o = r[4], a = r[5], l = e[0], s = e[1], f = r[6], h = r[7], d = Math.cos(i) * (l - f) / 2 + Math.sin(i) * (s - h) / 2, v = -1 * Math.sin(i) * (l - f) / 2 + Math.cos(i) * (s - h) / 2, g = d * d / (t * t) + v * v / (n * n);
  g > 1 && (t *= Math.sqrt(g), n *= Math.sqrt(g));
  var y = t * t * (v * v) + n * n * (d * d), C = y ? Math.sqrt((t * t * (n * n) - y) / y) : 1;
  o === a && (C *= -1), isNaN(C) && (C = 0);
  var _ = n ? C * t * v / n : 0, w = t ? C * -n * d / t : 0, x = (l + f) / 2 + Math.cos(i) * _ - Math.sin(i) * w, S = (s + h) / 2 + Math.sin(i) * _ + Math.cos(i) * w, T = [(d - _) / t, (v - w) / n], R = [(-1 * d - _) / t, (-1 * v - w) / n], B = Fm([1, 0], T), $ = Fm(T, R);
  return Hv(T, R) <= -1 && ($ = Math.PI), Hv(T, R) >= 1 && ($ = 0), a === 0 && $ > 0 && ($ = $ - 2 * Math.PI), a === 1 && $ < 0 && ($ = $ + 2 * Math.PI), {
    cx: x,
    cy: S,
    // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理
    rx: zv(e, [f, h]) ? 0 : t,
    ry: zv(e, [f, h]) ? 0 : n,
    startAngle: B,
    endAngle: B + $,
    xRotation: i,
    arcFlag: o,
    sweepFlag: a
  };
}
function Pm(e, r) {
  return [r[0] + (r[0] - e[0]), r[1] + (r[1] - e[1])];
}
function zS(e) {
  e = f9(e);
  for (var r = [], t = null, n = null, i = null, o = 0, a = e.length, l = 0; l < a; l++) {
    var s = e[l];
    n = e[l + 1];
    var f = s[0], h = {
      command: f,
      prePoint: t,
      params: s,
      startTangent: null,
      endTangent: null
    };
    switch (f) {
      case "M":
        i = [s[1], s[2]], o = l;
        break;
      case "A":
        var d = p9(t, s);
        h.arcParams = d;
        break;
    }
    if (f === "Z")
      t = i, n = e[o + 1];
    else {
      var v = s.length;
      t = [s[v - 2], s[v - 1]];
    }
    n && n[0] === "Z" && (n = e[o], r[o] && (r[o].prePoint = t)), h.currentPoint = t, r[o] && zv(t, r[o].currentPoint) && (r[o].prePoint = h.prePoint);
    var g = n ? [n[n.length - 2], n[n.length - 1]] : null;
    h.nextPoint = g;
    var y = h.prePoint;
    if (["L", "H", "V"].includes(f))
      h.startTangent = [y[0] - t[0], y[1] - t[1]], h.endTangent = [t[0] - y[0], t[1] - y[1]];
    else if (f === "Q") {
      var C = [s[1], s[2]];
      h.startTangent = [y[0] - C[0], y[1] - C[1]], h.endTangent = [t[0] - C[0], t[1] - C[1]];
    } else if (f === "T") {
      var _ = r[l - 1], C = Pm(_.currentPoint, y);
      _.command === "Q" ? (h.command = "Q", h.startTangent = [y[0] - C[0], y[1] - C[1]], h.endTangent = [t[0] - C[0], t[1] - C[1]]) : (h.command = "TL", h.startTangent = [y[0] - t[0], y[1] - t[1]], h.endTangent = [t[0] - y[0], t[1] - y[1]]);
    } else if (f === "C") {
      var w = [s[1], s[2]], x = [s[3], s[4]];
      h.startTangent = [y[0] - w[0], y[1] - w[1]], h.endTangent = [t[0] - x[0], t[1] - x[1]], h.startTangent[0] === 0 && h.startTangent[1] === 0 && (h.startTangent = [w[0] - x[0], w[1] - x[1]]), h.endTangent[0] === 0 && h.endTangent[1] === 0 && (h.endTangent = [x[0] - w[0], x[1] - w[1]]);
    } else if (f === "S") {
      var _ = r[l - 1], w = Pm(_.currentPoint, y), x = [s[1], s[2]];
      _.command === "C" ? (h.command = "C", h.startTangent = [y[0] - w[0], y[1] - w[1]], h.endTangent = [t[0] - x[0], t[1] - x[1]]) : (h.command = "SQ", h.startTangent = [y[0] - x[0], y[1] - x[1]], h.endTangent = [t[0] - x[0], t[1] - x[1]]);
    } else if (f === "A") {
      var S = 1e-3, T = h.arcParams || {}, R = T.cx, B = R === void 0 ? 0 : R, $ = T.cy, N = $ === void 0 ? 0 : $, z = T.rx, V = z === void 0 ? 0 : z, X = T.ry, Z = X === void 0 ? 0 : X, ne = T.sweepFlag, se = ne === void 0 ? 0 : ne, q = T.startAngle, ee = q === void 0 ? 0 : q, Oe = T.endAngle, me = Oe === void 0 ? 0 : Oe;
      se === 0 && (S *= -1);
      var _e = V * Math.cos(ee - S) + B, ke = Z * Math.sin(ee - S) + N;
      h.startTangent = [_e - i[0], ke - i[1]];
      var Ee = V * Math.cos(ee + me + S) + B, Ze = Z * Math.sin(ee + me - S) + N;
      h.endTangent = [y[0] - Ee, y[1] - Ze];
    }
    r.push(h);
  }
  return r;
}
function g9(e, r) {
  for (var t = [], n = [], i = [], o = 0; o < e.length; o++) {
    var a = e[o], l = a.currentPoint, s = a.params, f = a.prePoint, h = void 0;
    switch (a.command) {
      case "Q":
        h = BS.box(f[0], f[1], s[1], s[2], s[3], s[4]);
        break;
      case "C":
        h = hs.box(f[0], f[1], s[1], s[2], s[3], s[4], s[5], s[6]);
        break;
      case "A":
        var d = a.arcParams;
        h = ZB.box(d.cx, d.cy, d.rx, d.ry, d.xRotation, d.startAngle, d.endAngle);
        break;
      default:
        t.push(l[0]), n.push(l[1]);
        break;
    }
    h && (a.box = h, t.push(h.x, h.x + h.width), n.push(h.y, h.y + h.height)), r && (a.command === "L" || a.command === "M") && a.prePoint && a.nextPoint && i.push(a);
  }
  t = t.filter(function(w) {
    return !Number.isNaN(w) && w !== 1 / 0 && w !== -1 / 0;
  }), n = n.filter(function(w) {
    return !Number.isNaN(w) && w !== 1 / 0 && w !== -1 / 0;
  });
  var v = Eo(t), g = Eo(n), y = To(t), C = To(n);
  if (i.length === 0)
    return {
      x: v,
      y: g,
      width: y - v,
      height: C - g
    };
  for (var o = 0; o < i.length; o++) {
    var a = i[o], l = a.currentPoint, _ = void 0;
    l[0] === v ? (_ = gf(a, r), v = v - _.xExtra) : l[0] === y && (_ = gf(a, r), y = y + _.xExtra), l[1] === g ? (_ = gf(a, r), g = g - _.yExtra) : l[1] === C && (_ = gf(a, r), C = C + _.yExtra);
  }
  return {
    x: v,
    y: g,
    width: y - v,
    height: C - g
  };
}
function gf(e, r) {
  var t = e.prePoint, n = e.currentPoint, i = e.nextPoint, o = Math.pow(n[0] - t[0], 2) + Math.pow(n[1] - t[1], 2), a = Math.pow(n[0] - i[0], 2) + Math.pow(n[1] - i[1], 2), l = Math.pow(t[0] - i[0], 2) + Math.pow(t[1] - i[1], 2), s = Math.acos((o + a - l) / (2 * Math.sqrt(o) * Math.sqrt(a)));
  if (!s || Math.sin(s) === 0 || C5(s, 0))
    return {
      xExtra: 0,
      yExtra: 0
    };
  var f = Math.abs(Math.atan2(i[1] - n[1], i[0] - n[0])), h = Math.abs(Math.atan2(i[0] - n[0], i[1] - n[1]));
  f = f > Math.PI / 2 ? Math.PI - f : f, h = h > Math.PI / 2 ? Math.PI - h : h;
  var d = {
    // 水平方向投影
    xExtra: Math.cos(s / 2 - f) * (r / 2 * (1 / Math.sin(s / 2))) - r / 2 || 0,
    // 垂直方向投影
    yExtra: Math.cos(h - s / 2) * (r / 2 * (1 / Math.sin(s / 2))) - r / 2 || 0
  };
  return d;
}
function y9(e) {
  var r = e.attr(), t = r.path, n = r.stroke, i = n ? r.lineWidth : 0, o = e.get("segments") || zS(t), a = g9(o, i), l = a.x, s = a.y, f = a.width, h = a.height, d = {
    minX: l,
    minY: s,
    maxX: l + f,
    maxY: s + h
  };
  return d = o0(e, d), {
    x: d.minX,
    y: d.minY,
    width: d.maxX - d.minX,
    height: d.maxY - d.minY
  };
}
function C9(e) {
  var r = e.attr(), t = r.x1, n = r.y1, i = r.x2, o = r.y2, a = Math.min(t, i), l = Math.max(t, i), s = Math.min(n, o), f = Math.max(n, o), h = {
    minX: a,
    maxX: l,
    minY: s,
    maxY: f
  };
  return h = o0(e, h), {
    x: h.minX,
    y: h.minY,
    width: h.maxX - h.minX,
    height: h.maxY - h.minY
  };
}
function m9(e) {
  var r = e.attr(), t = r.x, n = r.y, i = r.rx, o = r.ry;
  return {
    x: t - i,
    y: n - o,
    width: i * 2,
    height: o * 2
  };
}
mi("rect", RS);
mi("image", RS);
mi("circle", OS);
mi("marker", OS);
mi("polyline", n9);
mi("polygon", i9);
mi("text", l9);
mi("path", y9);
mi("line", C9);
mi("ellipse", m9);
function _9() {
  return window ? window.devicePixelRatio : 1;
}
function WS(e, r, t, n) {
  var i = e - t, o = r - n;
  return Math.sqrt(i * i + o * o);
}
function oa(e, r, t, n, i, o) {
  return i >= e && i <= e + t && o >= r && o <= r + n;
}
function Es(e, r) {
  return !(r.minX > e.maxX || r.maxX < e.minX || r.minY > e.maxY || r.maxY < e.minY);
}
function w9(e, r) {
  return !e || !r ? e || r : {
    minX: Math.min(e.minX, r.minX),
    minY: Math.min(e.minY, r.minY),
    maxX: Math.max(e.maxX, r.maxX),
    maxY: Math.max(e.maxY, r.maxY)
  };
}
function Nm(e, r) {
  return e[0] === r[0] && e[1] === r[1];
}
var x9 = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i, S9 = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i, b9 = /^p\s*\(\s*([axyn])\s*\)\s*(.*)/i, kS = /[\d.]+:(#[^\s]+|[^\)]+\))/gi;
function GS(e, r) {
  var t = e.match(kS);
  Je(t, function(n) {
    var i = n.split(":");
    r.addColorStop(i[0], i[1]);
  });
}
function T9(e, r, t) {
  var n = x9.exec(t), i = parseFloat(n[1]) % 360 * (Math.PI / 180), o = n[2], a = r.getBBox(), l, s;
  i >= 0 && i < 1 / 2 * Math.PI ? (l = {
    x: a.minX,
    y: a.minY
  }, s = {
    x: a.maxX,
    y: a.maxY
  }) : 1 / 2 * Math.PI <= i && i < Math.PI ? (l = {
    x: a.maxX,
    y: a.minY
  }, s = {
    x: a.minX,
    y: a.maxY
  }) : Math.PI <= i && i < 3 / 2 * Math.PI ? (l = {
    x: a.maxX,
    y: a.maxY
  }, s = {
    x: a.minX,
    y: a.minY
  }) : (l = {
    x: a.minX,
    y: a.maxY
  }, s = {
    x: a.maxX,
    y: a.minY
  });
  var f = Math.tan(i), h = f * f, d = (s.x - l.x + f * (s.y - l.y)) / (h + 1) + l.x, v = f * (s.x - l.x + f * (s.y - l.y)) / (h + 1) + l.y, g = e.createLinearGradient(l.x, l.y, d, v);
  return GS(o, g), g;
}
function E9(e, r, t) {
  var n = S9.exec(t), i = parseFloat(n[1]), o = parseFloat(n[2]), a = parseFloat(n[3]), l = n[4];
  if (a === 0) {
    var s = l.match(kS);
    return s[s.length - 1].split(":")[1];
  }
  var f = r.getBBox(), h = f.maxX - f.minX, d = f.maxY - f.minY, v = Math.sqrt(h * h + d * d) / 2, g = e.createRadialGradient(f.minX + h * i, f.minY + d * o, 0, f.minX + h / 2, f.minY + d / 2, a * v);
  return GS(l, g), g;
}
function L9(e, r, t) {
  if (r.get("patternSource") && r.get("patternSource") === t)
    return r.get("pattern");
  var n, i, o = b9.exec(t), a = o[1], l = o[2];
  function s() {
    n = e.createPattern(i, a), r.set("pattern", n), r.set("patternSource", t);
  }
  switch (a) {
    case "a":
      a = "repeat";
      break;
    case "x":
      a = "repeat-x";
      break;
    case "y":
      a = "repeat-y";
      break;
    case "n":
      a = "no-repeat";
      break;
    default:
      a = "no-repeat";
  }
  return i = new Image(), l.match(/^data:/i) || (i.crossOrigin = "Anonymous"), i.src = l, i.complete ? s() : (i.onload = s, i.src = i.src), n;
}
function A9(e, r, t) {
  var n = r.getBBox();
  if (isNaN(n.x) || isNaN(n.y) || isNaN(n.width) || isNaN(n.height))
    return t;
  if (qn(t)) {
    if (t[1] === "(" || t[2] === "(") {
      if (t[0] === "l")
        return T9(e, r, t);
      if (t[0] === "r")
        return E9(e, r, t);
      if (t[0] === "p")
        return L9(e, r, t);
    }
    return t;
  }
  if (t instanceof CanvasPattern)
    return t;
}
function R9(e) {
  var r = 0, t = 0, n = 0, i = 0;
  return En(e) ? e.length === 1 ? r = t = n = i = e[0] : e.length === 2 ? (r = n = e[0], t = i = e[1]) : e.length === 3 ? (r = e[0], t = i = e[1], n = e[2]) : (r = e[0], t = e[1], n = e[2], i = e[3]) : r = t = n = i = e, [r, t, n, i];
}
function yf(e) {
  return Math.sqrt(e[0] * e[0] + e[1] * e[1]);
}
function Wv(e, r) {
  return yf(e) * yf(r) ? (e[0] * r[0] + e[1] * r[1]) / (yf(e) * yf(r)) : 1;
}
function Hm(e, r) {
  return (e[0] * r[1] < e[1] * r[0] ? -1 : 1) * Math.acos(Wv(e, r));
}
function zm(e, r) {
  var t = r[1], n = r[2], i = Jx(eS(r[3]), Math.PI * 2), o = r[4], a = r[5], l = e[0], s = e[1], f = r[6], h = r[7], d = Math.cos(i) * (l - f) / 2 + Math.sin(i) * (s - h) / 2, v = -1 * Math.sin(i) * (l - f) / 2 + Math.cos(i) * (s - h) / 2, g = d * d / (t * t) + v * v / (n * n);
  g > 1 && (t *= Math.sqrt(g), n *= Math.sqrt(g));
  var y = t * t * (v * v) + n * n * (d * d), C = y ? Math.sqrt((t * t * (n * n) - y) / y) : 1;
  o === a && (C *= -1), isNaN(C) && (C = 0);
  var _ = n ? C * t * v / n : 0, w = t ? C * -n * d / t : 0, x = (l + f) / 2 + Math.cos(i) * _ - Math.sin(i) * w, S = (s + h) / 2 + Math.sin(i) * _ + Math.cos(i) * w, T = [(d - _) / t, (v - w) / n], R = [(-1 * d - _) / t, (-1 * v - w) / n], B = Hm([1, 0], T), $ = Hm(T, R);
  return Wv(T, R) <= -1 && ($ = Math.PI), Wv(T, R) >= 1 && ($ = 0), a === 0 && $ > 0 && ($ = $ - 2 * Math.PI), a === 1 && $ < 0 && ($ = $ + 2 * Math.PI), {
    cx: x,
    cy: S,
    // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理
    rx: Nm(e, [f, h]) ? 0 : t,
    ry: Nm(e, [f, h]) ? 0 : n,
    startAngle: B,
    endAngle: B + $,
    xRotation: i,
    arcFlag: o,
    sweepFlag: a
  };
}
var qf = Math.sin, Kf = Math.cos, a0 = Math.atan2, Cf = Math.PI;
function US(e, r, t, n, i, o, a) {
  var l = r.stroke, s = r.lineWidth, f = t - i, h = n - o, d = a0(h, f), v = new c0({
    type: "path",
    canvas: e.get("canvas"),
    isArrowShape: !0,
    attrs: {
      // 默认箭头的边长为 10，夹角为 60 度
      path: "M" + 10 * Kf(Cf / 6) + "," + 10 * qf(Cf / 6) + " L0,0 L" + 10 * Kf(Cf / 6) + ",-" + 10 * qf(Cf / 6),
      // 使用 shape stroke 值
      stroke: l,
      lineWidth: s
    }
  });
  v.translate(i, o), v.rotateAtPoint(i, o, d), e.set(a ? "startArrowShape" : "endArrowShape", v);
}
function YS(e, r, t, n, i, o, a) {
  var l = r.startArrow, s = r.endArrow, f = r.stroke, h = r.lineWidth, d = a ? l : s, v = d.d, g = d.fill, y = d.stroke, C = d.lineWidth, _ = xc(d, ["d", "fill", "stroke", "lineWidth"]), w = t - i, x = n - o, S = a0(x, w);
  v && (i = i - Kf(S) * v, o = o - qf(S) * v);
  var T = new c0({
    type: "path",
    canvas: e.get("canvas"),
    isArrowShape: !0,
    attrs: M(M({}, _), {
      // 支持单独设置箭头的 stroke 和 lineWidth，若为空则使用 shape 的值
      stroke: y || f,
      lineWidth: C || h,
      // 箭头是否填充需要手动设置，不会继承自 shape 的值
      fill: g
    })
  });
  T.translate(i, o), T.rotateAtPoint(i, o, S), e.set(a ? "startArrowShape" : "endArrowShape", T);
}
function fa(e, r, t, n, i) {
  var o = a0(n - r, t - e);
  return {
    dx: Kf(o) * i,
    dy: qf(o) * i
  };
}
function l0(e, r, t, n, i, o) {
  typeof r.startArrow == "object" ? YS(e, r, t, n, i, o, !0) : r.startArrow ? US(e, r, t, n, i, o, !0) : e.set("startArrowShape", null);
}
function s0(e, r, t, n, i, o) {
  typeof r.endArrow == "object" ? YS(e, r, t, n, i, o, !1) : r.endArrow ? US(e, r, t, n, i, o, !1) : e.set("startArrowShape", null);
}
var Wm = {
  fill: "fillStyle",
  stroke: "strokeStyle",
  opacity: "globalAlpha"
};
function dl(e, r) {
  var t = r.attr();
  for (var n in t) {
    var i = t[n], o = Wm[n] ? Wm[n] : n;
    o === "matrix" && i ? e.transform(i[0], i[1], i[3], i[4], i[6], i[7]) : o === "lineDash" && e.setLineDash ? En(i) && e.setLineDash(i) : (o === "strokeStyle" || o === "fillStyle" ? i = A9(e, r, i) : o === "globalAlpha" && (i = i * e.globalAlpha), e[o] = i);
  }
}
function kv(e, r, t) {
  for (var n = 0; n < r.length; n++) {
    var i = r[n];
    i.cfg.visible ? i.draw(e, t) : i.skipDraw();
  }
}
function O9(e, r, t) {
  var n = e.get("refreshElements");
  Je(n, function(i) {
    if (i !== e)
      for (var o = i.cfg.parent; o && o !== e && !o.cfg.refresh; )
        o.cfg.refresh = !0, o = o.cfg.parent;
  }), n[0] === e ? u0(r) : Gv(r, t);
}
function Gv(e, r) {
  for (var t = 0; t < e.length; t++) {
    var n = e[t];
    if (n.cfg.visible)
      if (n.cfg.hasChanged)
        n.cfg.refresh = !0, n.isGroup() && u0(n.cfg.children);
      else if (n.cfg.refresh)
        n.isGroup() && Gv(n.cfg.children, r);
      else {
        var i = I9(n, r);
        n.cfg.refresh = i, i && n.isGroup() && Gv(n.cfg.children, r);
      }
  }
}
function XS(e) {
  for (var r = 0; r < e.length; r++) {
    var t = e[r];
    t.cfg.hasChanged = !1, t.isGroup() && !t.destroyed && XS(t.cfg.children);
  }
}
function u0(e, r) {
  for (var t = 0; t < e.length; t++) {
    var n = e[t];
    n.cfg.visible && (n.cfg.refresh = !0, n.isGroup() && u0(n.get("children")));
  }
}
function I9(e, r) {
  var t = e.cfg.cacheCanvasBBox, n = e.cfg.isInView && t && Es(t, r);
  return n;
}
function VS(e, r, t, n) {
  var i = t.path, o = t.startArrow, a = t.endArrow;
  if (i) {
    var l = [0, 0], s = [0, 0], f = {
      dx: 0,
      dy: 0
    };
    r.beginPath();
    for (var h = 0; h < i.length; h++) {
      var d = i[h], v = d[0];
      if (h === 0 && o && o.d) {
        var g = e.getStartTangent();
        f = fa(g[0][0], g[0][1], g[1][0], g[1][1], o.d);
      } else if (h === i.length - 2 && i[h + 1][0] === "Z" && a && a.d) {
        var y = i[h + 1];
        if (y[0] === "Z") {
          var g = e.getEndTangent();
          f = fa(g[0][0], g[0][1], g[1][0], g[1][1], a.d);
        }
      } else if (h === i.length - 1 && a && a.d && i[0] !== "Z") {
        var g = e.getEndTangent();
        f = fa(g[0][0], g[0][1], g[1][0], g[1][1], a.d);
      }
      var C = f.dx, _ = f.dy;
      switch (v) {
        case "M":
          r.moveTo(d[1] - C, d[2] - _), s = [d[1], d[2]];
          break;
        case "L":
          r.lineTo(d[1] - C, d[2] - _);
          break;
        case "Q":
          r.quadraticCurveTo(d[1], d[2], d[3] - C, d[4] - _);
          break;
        case "C":
          r.bezierCurveTo(d[1], d[2], d[3], d[4], d[5] - C, d[6] - _);
          break;
        case "A": {
          var w = void 0;
          n ? (w = n[h], w || (w = zm(l, d), n[h] = w)) : w = zm(l, d);
          var x = w.cx, S = w.cy, T = w.rx, R = w.ry, B = w.startAngle, $ = w.endAngle, N = w.xRotation, z = w.sweepFlag;
          if (r.ellipse)
            r.ellipse(x, S, T, R, N, B, $, 1 - z);
          else {
            var V = T > R ? T : R, X = T > R ? 1 : T / R, Z = T > R ? R / T : 1;
            r.translate(x, S), r.rotate(N), r.scale(X, Z), r.arc(0, 0, V, B, $, 1 - z), r.scale(1 / X, 1 / Z), r.rotate(-N), r.translate(-x, -S);
          }
          break;
        }
        case "Z":
          r.closePath();
          break;
      }
      if (v === "Z")
        l = s;
      else {
        var ne = d.length;
        l = [d[ne - 2], d[ne - 1]];
      }
    }
  }
}
function qS(e, r) {
  var t = e.get("canvas");
  t && (r === "remove" && (e._cacheCanvasBBox = e.get("cacheCanvasBBox")), e.get("hasChanged") || (e.set("hasChanged", !0), e.cfg.parent && e.cfg.parent.get("hasChanged") || (t.refreshElement(e, r, t), t.get("autoDraw") && t.draw())));
}
function M9(e) {
  var r;
  if (e.destroyed)
    r = e._cacheCanvasBBox;
  else {
    var t = e.get("cacheCanvasBBox"), n = t && !!(t.width && t.height), i = e.getCanvasBBox(), o = i && !!(i.width && i.height);
    n && o ? r = w9(t, i) : n ? r = t : o && (r = i);
  }
  return r;
}
function B9(e) {
  if (!e.length)
    return null;
  var r = [], t = [], n = [], i = [];
  return Je(e, function(o) {
    var a = M9(o);
    a && (r.push(a.minX), t.push(a.minY), n.push(a.maxX), i.push(a.maxY));
  }), {
    minX: Eo(r),
    minY: Eo(t),
    maxX: To(n),
    maxY: To(i)
  };
}
function D9(e, r) {
  return !e || !r || !Es(e, r) ? null : {
    minX: Math.max(e.minX, r.minX),
    minY: Math.max(e.minY, r.minY),
    maxX: Math.min(e.maxX, r.maxX),
    maxY: Math.min(e.maxY, r.maxY)
  };
}
var _i = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.onCanvasChange = function(t) {
      qS(this, t);
    }, r.prototype.getShapeBase = function() {
      return Zp;
    }, r.prototype.getGroupBase = function() {
      return r;
    }, r.prototype._applyClip = function(t, n) {
      n && (t.save(), dl(t, n), n.createPath(t), t.restore(), t.clip(), n._afterDraw());
    }, r.prototype.cacheCanvasBBox = function() {
      var t = this.cfg.children, n = [], i = [];
      Je(t, function(v) {
        var g = v.cfg.cacheCanvasBBox;
        g && v.cfg.isInView && (n.push(g.minX, g.maxX), i.push(g.minY, g.maxY));
      });
      var o = null;
      if (n.length) {
        var a = Eo(n), l = To(n), s = Eo(i), f = To(i);
        o = {
          minX: a,
          minY: s,
          x: a,
          y: s,
          maxX: l,
          maxY: f,
          width: l - a,
          height: f - s
        };
        var h = this.cfg.canvas;
        if (h) {
          var d = h.getViewRange();
          this.set("isInView", Es(o, d));
        }
      } else
        this.set("isInView", !1);
      this.set("cacheCanvasBBox", o);
    }, r.prototype.draw = function(t, n) {
      var i = this.cfg.children, o = n ? this.cfg.refresh : !0;
      i.length && o && (t.save(), dl(t, this), this._applyClip(t, this.getClip()), kv(t, i, n), t.restore(), this.cacheCanvasBBox()), this.cfg.refresh = null, this.set("hasChanged", !1);
    }, r.prototype.skipDraw = function() {
      this.set("cacheCanvasBBox", null), this.set("hasChanged", !1);
    }, r;
  }(zB)
), $9 = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultAttrs = function() {
      var t = e.prototype.getDefaultAttrs.call(this);
      return M(M({}, t), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 });
    }, r.prototype.getShapeBase = function() {
      return Zp;
    }, r.prototype.getGroupBase = function() {
      return _i;
    }, r.prototype.onCanvasChange = function(t) {
      qS(this, t);
    }, r.prototype.calculateBBox = function() {
      var t = this.get("type"), n = this.getHitLineWidth(), i = kB(t), o = i(this), a = n / 2, l = o.x - a, s = o.y - a, f = o.x + o.width + a, h = o.y + o.height + a;
      return {
        x: l,
        minX: l,
        y: s,
        minY: s,
        width: o.width + n,
        height: o.height + n,
        maxX: f,
        maxY: h
      };
    }, r.prototype.isFill = function() {
      return !!this.attrs.fill || this.isClipShape();
    }, r.prototype.isStroke = function() {
      return !!this.attrs.stroke;
    }, r.prototype._applyClip = function(t, n) {
      n && (t.save(), dl(t, n), n.createPath(t), t.restore(), t.clip(), n._afterDraw());
    }, r.prototype.draw = function(t, n) {
      var i = this.cfg.clipShape;
      if (n) {
        if (this.cfg.refresh === !1) {
          this.set("hasChanged", !1);
          return;
        }
        var o = this.getCanvasBBox();
        if (!Es(n, o)) {
          this.set("hasChanged", !1), this.cfg.isInView && this._afterDraw();
          return;
        }
      }
      t.save(), dl(t, this), this._applyClip(t, i), this.drawPath(t), t.restore(), this._afterDraw();
    }, r.prototype.getCanvasViewBox = function() {
      var t = this.cfg.canvas;
      return t ? t.getViewRange() : null;
    }, r.prototype.cacheCanvasBBox = function() {
      var t = this.getCanvasViewBox();
      if (t) {
        var n = this.getCanvasBBox(), i = Es(n, t);
        this.set("isInView", i), i ? this.set("cacheCanvasBBox", n) : this.set("cacheCanvasBBox", null);
      }
    }, r.prototype._afterDraw = function() {
      this.cacheCanvasBBox(), this.set("hasChanged", !1), this.set("refresh", null);
    }, r.prototype.skipDraw = function() {
      this.set("cacheCanvasBBox", null), this.set("isInView", null), this.set("hasChanged", !1);
    }, r.prototype.drawPath = function(t) {
      this.createPath(t), this.strokeAndFill(t), this.afterDrawPath(t);
    }, r.prototype.fill = function(t) {
      t.fill();
    }, r.prototype.stroke = function(t) {
      t.stroke();
    }, r.prototype.strokeAndFill = function(t) {
      var n = this.attrs, i = n.lineWidth, o = n.opacity, a = n.strokeOpacity, l = n.fillOpacity;
      this.isFill() && (!Gt(l) && l !== 1 ? (t.globalAlpha = l, this.fill(t), t.globalAlpha = o) : this.fill(t)), this.isStroke() && i > 0 && (!Gt(a) && a !== 1 && (t.globalAlpha = a), this.stroke(t)), this.afterDrawPath(t);
    }, r.prototype.createPath = function(t) {
    }, r.prototype.afterDrawPath = function(t) {
    }, r.prototype.isInShape = function(t, n) {
      var i = this.isStroke(), o = this.isFill(), a = this.getHitLineWidth();
      return this.isInStrokeOrPath(t, n, i, o, a);
    }, r.prototype.isInStrokeOrPath = function(t, n, i, o, a) {
      return !1;
    }, r.prototype.getHitLineWidth = function() {
      if (!this.isStroke())
        return 0;
      var t = this.attrs;
      return t.lineWidth + t.lineAppendWidth;
    }, r;
  }(WB)
), Qn = $9, F9 = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultAttrs = function() {
      var t = e.prototype.getDefaultAttrs.call(this);
      return M(M({}, t), { x: 0, y: 0, r: 0 });
    }, r.prototype.isInStrokeOrPath = function(t, n, i, o, a) {
      var l = this.attr(), s = l.x, f = l.y, h = l.r, d = a / 2, v = WS(s, f, t, n);
      return o && i ? v <= h + d : o ? v <= h : i ? v >= h - d && v <= h + d : !1;
    }, r.prototype.createPath = function(t) {
      var n = this.attr(), i = n.x, o = n.y, a = n.r;
      t.beginPath(), t.arc(i, o, a, 0, Math.PI * 2, !1), t.closePath();
    }, r;
  }(Qn)
), P9 = F9;
function mf(e, r, t, n) {
  return e / (t * t) + r / (n * n);
}
var N9 = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultAttrs = function() {
      var t = e.prototype.getDefaultAttrs.call(this);
      return M(M({}, t), { x: 0, y: 0, rx: 0, ry: 0 });
    }, r.prototype.isInStrokeOrPath = function(t, n, i, o, a) {
      var l = this.attr(), s = a / 2, f = l.x, h = l.y, d = l.rx, v = l.ry, g = (t - f) * (t - f), y = (n - h) * (n - h);
      return o && i ? mf(g, y, d + s, v + s) <= 1 : o ? mf(g, y, d, v) <= 1 : i ? mf(g, y, d - s, v - s) >= 1 && mf(g, y, d + s, v + s) <= 1 : !1;
    }, r.prototype.createPath = function(t) {
      var n = this.attr(), i = n.x, o = n.y, a = n.rx, l = n.ry;
      if (t.beginPath(), t.ellipse)
        t.ellipse(i, o, a, l, 0, 0, Math.PI * 2, !1);
      else {
        var s = a > l ? a : l, f = a > l ? 1 : a / l, h = a > l ? l / a : 1;
        t.save(), t.translate(i, o), t.scale(f, h), t.arc(0, 0, s, 0, Math.PI * 2), t.restore(), t.closePath();
      }
    }, r;
  }(Qn)
), H9 = N9;
function km(e) {
  return e instanceof HTMLElement && qn(e.nodeName) && e.nodeName.toUpperCase() === "CANVAS";
}
var z9 = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultAttrs = function() {
      var t = e.prototype.getDefaultAttrs.call(this);
      return M(M({}, t), { x: 0, y: 0, width: 0, height: 0 });
    }, r.prototype.initAttrs = function(t) {
      this._setImage(t.img);
    }, r.prototype.isStroke = function() {
      return !1;
    }, r.prototype.isOnlyHitBox = function() {
      return !0;
    }, r.prototype._afterLoading = function() {
      if (this.get("toDraw") === !0) {
        var t = this.get("canvas");
        t ? t.draw() : this.createPath(this.get("context"));
      }
    }, r.prototype._setImage = function(t) {
      var n = this, i = this.attrs;
      if (qn(t)) {
        var o = new Image();
        o.onload = function() {
          if (n.destroyed)
            return !1;
          n.attr("img", o), n.set("loading", !1), n._afterLoading();
          var a = n.get("callback");
          a && a.call(n);
        }, o.crossOrigin = "Anonymous", o.src = t, this.set("loading", !0);
      } else t instanceof Image ? (i.width || (i.width = t.width), i.height || (i.height = t.height)) : km(t) && (i.width || (i.width = Number(t.getAttribute("width"))), i.height || (i.height, Number(t.getAttribute("height"))));
    }, r.prototype.onAttrChange = function(t, n, i) {
      e.prototype.onAttrChange.call(this, t, n, i), t === "img" && this._setImage(n);
    }, r.prototype.createPath = function(t) {
      if (this.get("loading")) {
        this.set("toDraw", !0), this.set("context", t);
        return;
      }
      var n = this.attr(), i = n.x, o = n.y, a = n.width, l = n.height, s = n.sx, f = n.sy, h = n.swidth, d = n.sheight, v = n.img;
      (v instanceof Image || km(v)) && (!Gt(s) && !Gt(f) && !Gt(h) && !Gt(d) ? t.drawImage(v, s, f, h, d, i, o, a, l) : t.drawImage(v, i, o, a, l));
    }, r;
  }(Qn)
), f0 = z9;
function _o(e, r, t, n, i, o, a) {
  var l = Math.min(e, t), s = Math.max(e, t), f = Math.min(r, n), h = Math.max(r, n), d = i / 2;
  return o >= l - d && o <= s + d && a >= f - d && a <= h + d ? Fr.pointToLine(e, r, t, n, o, a) <= i / 2 : !1;
}
var W9 = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultAttrs = function() {
      var t = e.prototype.getDefaultAttrs.call(this);
      return M(M({}, t), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: !1, endArrow: !1 });
    }, r.prototype.initAttrs = function(t) {
      this.setArrow();
    }, r.prototype.onAttrChange = function(t, n, i) {
      e.prototype.onAttrChange.call(this, t, n, i), this.setArrow();
    }, r.prototype.setArrow = function() {
      var t = this.attr(), n = t.x1, i = t.y1, o = t.x2, a = t.y2, l = t.startArrow, s = t.endArrow;
      l && l0(this, t, o, a, n, i), s && s0(this, t, n, i, o, a);
    }, r.prototype.isInStrokeOrPath = function(t, n, i, o, a) {
      if (!i || !a)
        return !1;
      var l = this.attr(), s = l.x1, f = l.y1, h = l.x2, d = l.y2;
      return _o(s, f, h, d, a, t, n);
    }, r.prototype.createPath = function(t) {
      var n = this.attr(), i = n.x1, o = n.y1, a = n.x2, l = n.y2, s = n.startArrow, f = n.endArrow, h = {
        dx: 0,
        dy: 0
      }, d = {
        dx: 0,
        dy: 0
      };
      s && s.d && (h = fa(i, o, a, l, n.startArrow.d)), f && f.d && (d = fa(i, o, a, l, n.endArrow.d)), t.beginPath(), t.moveTo(i + h.dx, o + h.dy), t.lineTo(a - d.dx, l - d.dy);
    }, r.prototype.afterDrawPath = function(t) {
      var n = this.get("startArrowShape"), i = this.get("endArrowShape");
      n && n.draw(t), i && i.draw(t);
    }, r.prototype.getTotalLength = function() {
      var t = this.attr(), n = t.x1, i = t.y1, o = t.x2, a = t.y2;
      return Fr.length(n, i, o, a);
    }, r.prototype.getPoint = function(t) {
      var n = this.attr(), i = n.x1, o = n.y1, a = n.x2, l = n.y2;
      return Fr.pointAt(i, o, a, l, t);
    }, r;
  }(Qn)
), k9 = W9, G9 = {
  // 圆
  circle: function(e, r, t) {
    return [
      ["M", e - t, r],
      ["A", t, t, 0, 1, 0, e + t, r],
      ["A", t, t, 0, 1, 0, e - t, r]
    ];
  },
  // 正方形
  square: function(e, r, t) {
    return [["M", e - t, r - t], ["L", e + t, r - t], ["L", e + t, r + t], ["L", e - t, r + t], ["Z"]];
  },
  // 菱形
  diamond: function(e, r, t) {
    return [["M", e - t, r], ["L", e, r - t], ["L", e + t, r], ["L", e, r + t], ["Z"]];
  },
  // 三角形
  triangle: function(e, r, t) {
    var n = t * Math.sin(0.3333333333333333 * Math.PI);
    return [["M", e - t, r + n], ["L", e, r - n], ["L", e + t, r + n], ["Z"]];
  },
  // 倒三角形
  "triangle-down": function(e, r, t) {
    var n = t * Math.sin(0.3333333333333333 * Math.PI);
    return [["M", e - t, r - n], ["L", e + t, r - n], ["L", e, r + n], ["Z"]];
  }
}, U9 = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.initAttrs = function(t) {
      this._resetParamsCache();
    }, r.prototype._resetParamsCache = function() {
      this.set("paramsCache", {});
    }, r.prototype.onAttrChange = function(t, n, i) {
      e.prototype.onAttrChange.call(this, t, n, i), ["symbol", "x", "y", "r", "radius"].indexOf(t) !== -1 && this._resetParamsCache();
    }, r.prototype.isOnlyHitBox = function() {
      return !0;
    }, r.prototype._getR = function(t) {
      return Gt(t.r) ? t.radius : t.r;
    }, r.prototype._getPath = function() {
      var t = this.attr(), n = t.x, i = t.y, o = t.symbol || "circle", a = this._getR(t), l, s;
      if (va(o))
        l = o, s = l(n, i, a), s = HS(s);
      else {
        if (l = r.Symbols[o], !l)
          return console.warn(o + " marker is not supported."), null;
        s = l(n, i, a);
      }
      return s;
    }, r.prototype.createPath = function(t) {
      var n = this._getPath(), i = this.get("paramsCache");
      VS(this, t, { path: n }, i);
    }, r.Symbols = G9, r;
  }(Qn)
), Y9 = U9;
function KS(e, r, t) {
  var n = FS();
  return e.createPath(n), n.isPointInPath(r, t);
}
var X9 = 1e-6;
function Vd(e) {
  return Math.abs(e) < X9 ? 0 : e < 0 ? -1 : 1;
}
function V9(e, r, t) {
  return (t[0] - e[0]) * (r[1] - e[1]) === (r[0] - e[0]) * (t[1] - e[1]) && Math.min(e[0], r[0]) <= t[0] && t[0] <= Math.max(e[0], r[0]) && Math.min(e[1], r[1]) <= t[1] && t[1] <= Math.max(e[1], r[1]);
}
function jS(e, r, t) {
  var n = !1, i = e.length;
  if (i <= 2)
    return !1;
  for (var o = 0; o < i; o++) {
    var a = e[o], l = e[(o + 1) % i];
    if (V9(a, l, [r, t]))
      return !0;
    Vd(a[1] - t) > 0 != Vd(l[1] - t) > 0 && Vd(r - (t - a[1]) * (a[0] - l[0]) / (a[1] - l[1]) - a[0]) < 0 && (n = !n);
  }
  return n;
}
function ss(e, r, t, n, i, o, a, l) {
  var s = (Math.atan2(l - r, a - e) + Math.PI * 2) % (Math.PI * 2);
  if (s < n || s > i)
    return !1;
  var f = {
    x: e + t * Math.cos(s),
    y: r + t * Math.sin(s)
  };
  return WS(f.x, f.y, a, l) <= o / 2;
}
var q9 = fS;
function K9(e) {
  for (var r = !1, t = e.length, n = 0; n < t; n++) {
    var i = e[n], o = i[0];
    if (o === "C" || o === "A" || o === "Q") {
      r = !0;
      break;
    }
  }
  return r;
}
function j9(e, r, t, n, i) {
  for (var o = !1, a = r / 2, l = 0; l < e.length; l++) {
    var s = e[l], f = s.currentPoint, h = s.params, d = s.prePoint, v = s.box;
    if (!(v && !oa(v.x - a, v.y - a, v.width + r, v.height + r, t, n))) {
      switch (s.command) {
        case "L":
        case "Z":
          o = _o(d[0], d[1], f[0], f[1], r, t, n);
          break;
        case "Q":
          var g = BS.pointDistance(d[0], d[1], h[1], h[2], h[3], h[4], t, n);
          o = g <= r / 2;
          break;
        case "C":
          var y = hs.pointDistance(
            d[0],
            // 上一段结束位置, 即 C 的起始点
            d[1],
            h[1],
            // 'C' 的参数，1、2 为第一个控制点，3、4 为第二个控制点，5、6 为结束点
            h[2],
            h[3],
            h[4],
            h[5],
            h[6],
            t,
            n,
            i
          );
          o = y <= r / 2;
          break;
        case "A":
          var C = s.arcParams, _ = C.cx, w = C.cy, x = C.rx, S = C.ry, T = C.startAngle, R = C.endAngle, B = C.xRotation, $ = [t, n, 1], N = x > S ? x : S, z = x > S ? 1 : x / S, V = x > S ? S / x : 1, X = q9(null, [
            ["t", -_, -w],
            ["r", -B],
            ["s", 1 / z, 1 / V]
          ]);
          c4($, $, X), o = ss(0, 0, N, T, R, r, $[0], $[1]);
          break;
      }
      if (o)
        break;
    }
  }
  return o;
}
function Z9(e) {
  for (var r = e.length, t = [], n = [], i = [], o = 0; o < r; o++) {
    var a = e[o], l = a[0];
    l === "M" ? (i.length && (n.push(i), i = []), i.push([a[1], a[2]])) : l === "Z" ? i.length && (t.push(i), i = []) : i.push([a[1], a[2]]);
  }
  return i.length > 0 && n.push(i), {
    polygons: t,
    polylines: n
  };
}
var _f = M({
  hasArc: K9,
  extractPolygons: Z9,
  isPointInStroke: j9
}, G5);
function Gm(e, r, t) {
  for (var n = !1, i = 0; i < e.length; i++) {
    var o = e[i];
    if (n = jS(o, r, t), n)
      break;
  }
  return n;
}
var Q9 = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultAttrs = function() {
      var t = e.prototype.getDefaultAttrs.call(this);
      return M(M({}, t), { startArrow: !1, endArrow: !1 });
    }, r.prototype.initAttrs = function(t) {
      this._setPathArr(t.path), this.setArrow();
    }, r.prototype.onAttrChange = function(t, n, i) {
      e.prototype.onAttrChange.call(this, t, n, i), t === "path" && this._setPathArr(n), this.setArrow();
    }, r.prototype._setPathArr = function(t) {
      this.attrs.path = HS(t);
      var n = _f.hasArc(t);
      this.set("hasArc", n), this.set("paramsCache", {}), this.set("segments", null), this.set("curve", null), this.set("tCache", null), this.set("totalLength", null);
    }, r.prototype.getSegments = function() {
      var t = this.get("segements");
      return t || (t = zS(this.attr("path")), this.set("segments", t)), t;
    }, r.prototype.setArrow = function() {
      var t = this.attr(), n = t.startArrow, i = t.endArrow;
      if (n) {
        var o = this.getStartTangent();
        l0(this, t, o[0][0], o[0][1], o[1][0], o[1][1]);
      }
      if (i) {
        var o = this.getEndTangent();
        s0(this, t, o[0][0], o[0][1], o[1][0], o[1][1]);
      }
    }, r.prototype.isInStrokeOrPath = function(t, n, i, o, a) {
      var l = this.getSegments(), s = this.get("hasArc"), f = !1;
      if (i) {
        var h = this.getTotalLength();
        f = _f.isPointInStroke(l, a, t, n, h);
      }
      if (!f && o)
        if (s)
          f = KS(this, t, n);
        else {
          var d = this.attr("path"), v = _f.extractPolygons(d);
          f = Gm(v.polygons, t, n) || Gm(v.polylines, t, n);
        }
      return f;
    }, r.prototype.createPath = function(t) {
      var n = this.attr(), i = this.get("paramsCache");
      VS(this, t, n, i);
    }, r.prototype.afterDrawPath = function(t) {
      var n = this.get("startArrowShape"), i = this.get("endArrowShape");
      n && n.draw(t), i && i.draw(t);
    }, r.prototype.getTotalLength = function() {
      var t = this.get("totalLength");
      return Gt(t) ? (this._calculateCurve(), this._setTcache(), this.get("totalLength")) : t;
    }, r.prototype.getPoint = function(t) {
      var n = this.get("tCache");
      n || (this._calculateCurve(), this._setTcache(), n = this.get("tCache"));
      var i, o, a = this.get("curve");
      if (!n || n.length === 0)
        return a ? {
          x: a[0][1],
          y: a[0][2]
        } : null;
      Je(n, function(h, d) {
        t >= h[0] && t <= h[1] && (i = (t - h[0]) / (h[1] - h[0]), o = d);
      });
      var l = a[o];
      if (Gt(l) || Gt(o))
        return null;
      var s = l.length, f = a[o + 1];
      return hs.pointAt(l[s - 2], l[s - 1], f[1], f[2], f[3], f[4], f[5], f[6], i);
    }, r.prototype._calculateCurve = function() {
      var t = this.attr().path;
      this.set("curve", _f.pathToCurve(t));
    }, r.prototype._setTcache = function() {
      var t = 0, n = 0, i = [], o, a, l, s, f = this.get("curve");
      if (f) {
        if (Je(f, function(h, d) {
          l = f[d + 1], s = h.length, l && (t += hs.length(h[s - 2], h[s - 1], l[1], l[2], l[3], l[4], l[5], l[6]) || 0);
        }), this.set("totalLength", t), t === 0) {
          this.set("tCache", []);
          return;
        }
        Je(f, function(h, d) {
          l = f[d + 1], s = h.length, l && (o = [], o[0] = n / t, a = hs.length(h[s - 2], h[s - 1], l[1], l[2], l[3], l[4], l[5], l[6]), n += a || 0, o[1] = n / t, i.push(o));
        }), this.set("tCache", i);
      }
    }, r.prototype.getStartTangent = function() {
      var t = this.getSegments(), n;
      if (t.length > 1) {
        var i = t[0].currentPoint, o = t[1].currentPoint, a = t[1].startTangent;
        n = [], a ? (n.push([i[0] - a[0], i[1] - a[1]]), n.push([i[0], i[1]])) : (n.push([o[0], o[1]]), n.push([i[0], i[1]]));
      }
      return n;
    }, r.prototype.getEndTangent = function() {
      var t = this.getSegments(), n = t.length, i;
      if (n > 1) {
        var o = t[n - 2].currentPoint, a = t[n - 1].currentPoint, l = t[n - 1].endTangent;
        i = [], l ? (i.push([a[0] - l[0], a[1] - l[1]]), i.push([a[0], a[1]])) : (i.push([o[0], o[1]]), i.push([a[0], a[1]]));
      }
      return i;
    }, r;
  }(Qn)
), c0 = Q9;
function ZS(e, r, t, n, i) {
  var o = e.length;
  if (o < 2)
    return !1;
  for (var a = 0; a < o - 1; a++) {
    var l = e[a][0], s = e[a][1], f = e[a + 1][0], h = e[a + 1][1];
    if (_o(l, s, f, h, r, t, n))
      return !0;
  }
  if (i) {
    var d = e[0], v = e[o - 1];
    if (_o(d[0], d[1], v[0], v[1], r, t, n))
      return !0;
  }
  return !1;
}
var J9 = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.isInStrokeOrPath = function(t, n, i, o, a) {
      var l = this.attr().points, s = !1;
      return i && (s = ZS(l, a, t, n, !0)), !s && o && (s = jS(l, t, n)), s;
    }, r.prototype.createPath = function(t) {
      var n = this.attr(), i = n.points;
      if (!(i.length < 2)) {
        t.beginPath();
        for (var o = 0; o < i.length; o++) {
          var a = i[o];
          o === 0 ? t.moveTo(a[0], a[1]) : t.lineTo(a[0], a[1]);
        }
        t.closePath();
      }
    }, r;
  }(Qn)
), eD = J9, tD = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultAttrs = function() {
      var t = e.prototype.getDefaultAttrs.call(this);
      return M(M({}, t), { startArrow: !1, endArrow: !1 });
    }, r.prototype.initAttrs = function(t) {
      this.setArrow();
    }, r.prototype.onAttrChange = function(t, n, i) {
      e.prototype.onAttrChange.call(this, t, n, i), this.setArrow(), ["points"].indexOf(t) !== -1 && this._resetCache();
    }, r.prototype._resetCache = function() {
      this.set("totalLength", null), this.set("tCache", null);
    }, r.prototype.setArrow = function() {
      var t = this.attr(), n = this.attrs, i = n.points, o = n.startArrow, a = n.endArrow, l = i.length, s = i[0][0], f = i[0][1], h = i[l - 1][0], d = i[l - 1][1];
      o && l0(this, t, i[1][0], i[1][1], s, f), a && s0(this, t, i[l - 2][0], i[l - 2][1], h, d);
    }, r.prototype.isFill = function() {
      return !1;
    }, r.prototype.isInStrokeOrPath = function(t, n, i, o, a) {
      if (!i || !a)
        return !1;
      var l = this.attr().points;
      return ZS(l, a, t, n, !1);
    }, r.prototype.isStroke = function() {
      return !0;
    }, r.prototype.createPath = function(t) {
      var n = this.attr(), i = n.points, o = n.startArrow, a = n.endArrow, l = i.length;
      if (!(i.length < 2)) {
        var s = i[0][0], f = i[0][1], h = i[l - 1][0], d = i[l - 1][1];
        if (o && o.d) {
          var v = fa(s, f, i[1][0], i[1][1], o.d);
          s += v.dx, f += v.dy;
        }
        if (a && a.d) {
          var v = fa(i[l - 2][0], i[l - 2][1], h, d, a.d);
          h -= v.dx, d -= v.dy;
        }
        t.beginPath(), t.moveTo(s, f);
        for (var g = 0; g < l - 1; g++) {
          var y = i[g];
          t.lineTo(y[0], y[1]);
        }
        t.lineTo(h, d);
      }
    }, r.prototype.afterDrawPath = function(t) {
      var n = this.get("startArrowShape"), i = this.get("endArrowShape");
      n && n.draw(t), i && i.draw(t);
    }, r.prototype.getTotalLength = function() {
      var t = this.attr().points, n = this.get("totalLength");
      return Gt(n) ? (this.set("totalLength", r9.length(t)), this.get("totalLength")) : n;
    }, r.prototype.getPoint = function(t) {
      var n = this.attr().points, i = this.get("tCache");
      i || (this._setTcache(), i = this.get("tCache"));
      var o, a;
      return Je(i, function(l, s) {
        t >= l[0] && t <= l[1] && (o = (t - l[0]) / (l[1] - l[0]), a = s);
      }), Fr.pointAt(n[a][0], n[a][1], n[a + 1][0], n[a + 1][1], o);
    }, r.prototype._setTcache = function() {
      var t = this.attr().points;
      if (!(!t || t.length === 0)) {
        var n = this.getTotalLength();
        if (!(n <= 0)) {
          var i = 0, o = [], a, l;
          Je(t, function(s, f) {
            t[f + 1] && (a = [], a[0] = i / n, l = Fr.length(s[0], s[1], t[f + 1][0], t[f + 1][1]), i += l, a[1] = i / n, o.push(a));
          }), this.set("tCache", o);
        }
      }
    }, r.prototype.getStartTangent = function() {
      var t = this.attr().points, n = [];
      return n.push([t[1][0], t[1][1]]), n.push([t[0][0], t[0][1]]), n;
    }, r.prototype.getEndTangent = function() {
      var t = this.attr().points, n = t.length - 1, i = [];
      return i.push([t[n - 1][0], t[n - 1][1]]), i.push([t[n][0], t[n][1]]), i;
    }, r;
  }(Qn)
), rD = tD;
function nD(e, r, t, n, i, o, a) {
  var l = i / 2;
  return oa(e - l, r - l, t, i, o, a) || // 上边
  oa(e + t - l, r - l, i, n, o, a) || // 右边
  oa(e + l, r + n - l, t, i, o, a) || // 下边
  oa(e - l, r + l, i, n, o, a);
}
function iD(e, r, t, n, i, o, a, l) {
  return _o(e + i, r, e + t - i, r, o, a, l) || _o(e + t, r + i, e + t, r + n - i, o, a, l) || _o(e + t - i, r + n, e + i, r + n, o, a, l) || _o(e, r + n - i, e, r + i, o, a, l) || ss(e + t - i, r + i, i, 1.5 * Math.PI, 2 * Math.PI, o, a, l) || ss(e + t - i, r + n - i, i, 0, 0.5 * Math.PI, o, a, l) || ss(e + i, r + n - i, i, 0.5 * Math.PI, Math.PI, o, a, l) || ss(e + i, r + i, i, Math.PI, 1.5 * Math.PI, o, a, l);
}
var oD = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultAttrs = function() {
      var t = e.prototype.getDefaultAttrs.call(this);
      return M(M({}, t), { x: 0, y: 0, width: 0, height: 0, radius: 0 });
    }, r.prototype.isInStrokeOrPath = function(t, n, i, o, a) {
      var l = this.attr(), s = l.x, f = l.y, h = l.width, d = l.height, v = l.radius;
      if (v) {
        var y = !1;
        return i && (y = iD(s, f, h, d, v, a, t, n)), !y && o && (y = KS(this, t, n)), y;
      } else {
        var g = a / 2;
        if (o && i)
          return oa(s - g, f - g, h + g, d + g, t, n);
        if (o)
          return oa(s, f, h, d, t, n);
        if (i)
          return nD(s, f, h, d, a, t, n);
      }
    }, r.prototype.createPath = function(t) {
      var n = this.attr(), i = n.x, o = n.y, a = n.width, l = n.height, s = n.radius;
      if (t.beginPath(), s === 0)
        t.rect(i, o, a, l);
      else {
        var f = R9(s), h = f[0], d = f[1], v = f[2], g = f[3];
        t.moveTo(i + h, o), t.lineTo(i + a - d, o), d !== 0 && t.arc(i + a - d, o + d, d, -Math.PI / 2, 0), t.lineTo(i + a, o + l - v), v !== 0 && t.arc(i + a - v, o + l - v, v, 0, Math.PI / 2), t.lineTo(i + g, o + l), g !== 0 && t.arc(i + g, o + l - g, g, Math.PI / 2, Math.PI), t.lineTo(i, o + h), h !== 0 && t.arc(i + h, o + h, h, Math.PI, Math.PI * 1.5), t.closePath();
      }
    }, r;
  }(Qn)
), aD = oD, lD = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultAttrs = function() {
      var t = e.prototype.getDefaultAttrs.call(this);
      return M(M({}, t), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: "sans-serif", fontStyle: "normal", fontWeight: "normal", fontVariant: "normal", textAlign: "start", textBaseline: "bottom" });
    }, r.prototype.isOnlyHitBox = function() {
      return !0;
    }, r.prototype.initAttrs = function(t) {
      this._assembleFont(), t.text && this._setText(t.text);
    }, r.prototype._assembleFont = function() {
      var t = this.attrs;
      t.font = NS(t);
    }, r.prototype._setText = function(t) {
      var n = null;
      qn(t) && t.indexOf(`
`) !== -1 && (n = t.split(`
`)), this.set("textArr", n);
    }, r.prototype.onAttrChange = function(t, n, i) {
      e.prototype.onAttrChange.call(this, t, n, i), t.startsWith("font") && this._assembleFont(), t === "text" && this._setText(n);
    }, r.prototype._getSpaceingY = function() {
      var t = this.attrs, n = t.lineHeight, i = t.fontSize * 1;
      return n ? n - i : i * 0.14;
    }, r.prototype._drawTextArr = function(t, n, i) {
      var o = this.attrs, a = o.textBaseline, l = o.x, s = o.y, f = o.fontSize * 1, h = this._getSpaceingY(), d = PS(o.text, o.fontSize, o.lineHeight), v;
      Je(n, function(g, y) {
        v = s + y * (h + f) - d + f, a === "middle" && (v += d - f - (d - f) / 2), a === "top" && (v += d - f), Gt(g) || (i ? t.fillText(g, l, v) : t.strokeText(g, l, v));
      });
    }, r.prototype._drawText = function(t, n) {
      var i = this.attr(), o = i.x, a = i.y, l = this.get("textArr");
      if (l)
        this._drawTextArr(t, l, n);
      else {
        var s = i.text;
        Gt(s) || (n ? t.fillText(s, o, a) : t.strokeText(s, o, a));
      }
    }, r.prototype.strokeAndFill = function(t) {
      var n = this.attrs, i = n.lineWidth, o = n.opacity, a = n.strokeOpacity, l = n.fillOpacity;
      this.isStroke() && i > 0 && (!Gt(a) && a !== 1 && (t.globalAlpha = o), this.stroke(t)), this.isFill() && (!Gt(l) && l !== 1 ? (t.globalAlpha = l, this.fill(t), t.globalAlpha = o) : this.fill(t)), this.afterDrawPath(t);
    }, r.prototype.fill = function(t) {
      this._drawText(t, !0);
    }, r.prototype.stroke = function(t) {
      this._drawText(t, !1);
    }, r;
  }(Qn)
), sD = lD;
function uD(e, r) {
  if (r) {
    var t = cS(r);
    return na(t, e);
  }
  return e;
}
function QS(e, r, t) {
  var n = e.getTotalMatrix();
  if (n) {
    var i = uD([r, t, 1], n), o = i[0], a = i[1];
    return [o, a];
  }
  return [r, t];
}
function Um(e, r, t) {
  if (e.isCanvas && e.isCanvas())
    return !0;
  if (!Rv(e) || e.cfg.isInView === !1)
    return !1;
  if (e.cfg.clipShape) {
    var n = QS(e, r, t), i = n[0], o = n[1];
    if (e.isClipped(i, o))
      return !1;
  }
  var a = e.cfg.cacheCanvasBBox || e.getCanvasBBox();
  return r >= a.minX && r <= a.maxX && t >= a.minY && t <= a.maxY;
}
function JS(e, r, t) {
  if (!Um(e, r, t))
    return null;
  for (var n = null, i = e.getChildren(), o = i.length, a = o - 1; a >= 0; a--) {
    var l = i[a];
    if (l.isGroup())
      n = JS(l, r, t);
    else if (Um(l, r, t)) {
      var s = l, f = QS(l, r, t), h = f[0], d = f[1];
      s.isInShape(h, d) && (n = l);
    }
    if (n)
      break;
  }
  return n;
}
var Ym = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDefaultCfg = function() {
      var t = e.prototype.getDefaultCfg.call(this);
      return t.renderer = "canvas", t.autoDraw = !0, t.localRefresh = !0, t.refreshElements = [], t.clipView = !0, t.quickHit = !1, t;
    }, r.prototype.onCanvasChange = function(t) {
      (t === "attr" || t === "sort" || t === "changeSize") && (this.set("refreshElements", [this]), this.draw());
    }, r.prototype.getShapeBase = function() {
      return Zp;
    }, r.prototype.getGroupBase = function() {
      return _i;
    }, r.prototype.getPixelRatio = function() {
      var t = this.get("pixelRatio") || _9();
      return t >= 1 ? Math.ceil(t) : 1;
    }, r.prototype.getViewRange = function() {
      return {
        minX: 0,
        minY: 0,
        maxX: this.cfg.width,
        maxY: this.cfg.height
      };
    }, r.prototype.createDom = function() {
      var t = document.createElement("canvas"), n = t.getContext("2d");
      return this.set("context", n), t;
    }, r.prototype.setDOMSize = function(t, n) {
      e.prototype.setDOMSize.call(this, t, n);
      var i = this.get("context"), o = this.get("el"), a = this.getPixelRatio();
      o.width = a * t, o.height = a * n, a > 1 && i.scale(a, a);
    }, r.prototype.clear = function() {
      e.prototype.clear.call(this), this._clearFrame();
      var t = this.get("context"), n = this.get("el");
      t.clearRect(0, 0, n.width, n.height);
    }, r.prototype.getShape = function(t, n) {
      var i;
      return this.get("quickHit") ? i = JS(this, t, n) : i = e.prototype.getShape.call(this, t, n, null), i;
    }, r.prototype._getRefreshRegion = function() {
      var t = this.get("refreshElements"), n = this.getViewRange(), i;
      if (t.length && t[0] === this)
        i = n;
      else if (i = B9(t), i) {
        i.minX = Math.floor(i.minX), i.minY = Math.floor(i.minY), i.maxX = Math.ceil(i.maxX), i.maxY = Math.ceil(i.maxY), i.maxY += 1;
        var o = this.get("clipView");
        o && (i = D9(i, n));
      }
      return i;
    }, r.prototype.refreshElement = function(t) {
      var n = this.get("refreshElements");
      n.push(t);
    }, r.prototype._clearFrame = function() {
      var t = this.get("drawFrame");
      t && (S5(t), this.set("drawFrame", null), this.set("refreshElements", []));
    }, r.prototype.draw = function() {
      var t = this.get("drawFrame");
      this.get("autoDraw") && t || this._startDraw();
    }, r.prototype._drawAll = function() {
      var t = this.get("context"), n = this.get("el"), i = this.getChildren();
      t.clearRect(0, 0, n.width, n.height), dl(t, this), kv(t, i), this.set("refreshElements", []);
    }, r.prototype._drawRegion = function() {
      var t = this.get("context"), n = this.get("refreshElements"), i = this.getChildren(), o = this._getRefreshRegion();
      o ? (t.clearRect(o.minX, o.minY, o.maxX - o.minX, o.maxY - o.minY), t.save(), t.beginPath(), t.rect(o.minX, o.minY, o.maxX - o.minX, o.maxY - o.minY), t.clip(), dl(t, this), O9(this, i, o), kv(t, i, o), t.restore()) : n.length && XS(n), Je(n, function(a) {
        a.get("hasChanged") && a.set("hasChanged", !1);
      }), this.set("refreshElements", []);
    }, r.prototype._startDraw = function() {
      var t = this, n = this.get("drawFrame");
      n || (n = x5(function() {
        t.get("localRefresh") ? t._drawRegion() : t._drawAll(), t.set("drawFrame", null);
      }), this.set("drawFrame", n));
    }, r.prototype.skipDraw = function() {
    }, r.prototype.removeDom = function() {
      var t = this.get("el");
      t.width = 0, t.height = 0, t.parentNode.removeChild(t);
    }, r;
  }(HB)
), Nr = "$$value$$", Ae = "$$extra$$", h0 = "$$origin$$", fD = "$$extra_column$$", gi = "$$total$$", Mf = "$$multi$$", ga = "$$series_number$$", La = "$$empty_field_value$$", d0 = "$$empty_extra_placeholder$$", Xm;
(function(e) {
  e.DATA_CELL_CLICK_EVENT = "interaction:data-cell-click", e.MERGED_CELLS_CLICK_EVENT = "interaction:merged-cells-click", e.CORNER_TEXT_CLICK_EVENT = "interaction:corner-cell-text-click", e.ROW_COLUMN_CLICK_EVENT = "interaction:row-column-click", e.ROW_TEXT_CLICK_EVENT = "interaction:row-text-click", e.HOVER_EVENT = "interaction:hover", e.TREND_ICON_CLICK = "interaction:trend-icon-click";
})(Xm || (Xm = {}));
var mr;
(function(e) {
  e.MOUSE_DOWN = "mousedown", e.MOUSE_MOVE = "mousemove", e.MOUSE_OUT = "mouseout", e.MOUSE_LEAVE = "mouseleave", e.MOUSE_UP = "mouseup", e.KEY_DOWN = "keydown", e.KEY_UP = "keyup", e.CLICK = "click", e.HOVER = "hover", e.DOUBLE_CLICK = "dblclick", e.CONTEXT_MENU = "contextmenu";
})(mr || (mr = {}));
var I;
(function(e) {
  e.ROW_CELL_HOVER = "row-cell:hover", e.ROW_CELL_CLICK = "row-cell:click", e.ROW_CELL_DOUBLE_CLICK = "row-cell:double-click", e.ROW_CELL_CONTEXT_MENU = "row-cell:context-menu", e.ROW_CELL_MOUSE_DOWN = "row-cell:mouse-down", e.ROW_CELL_MOUSE_UP = "row-cell:mouse-up", e.ROW_CELL_MOUSE_MOVE = "row-cell:mouse-move", e.ROW_CELL_COLLAPSE_TREE_ROWS = "row-cell:collapsed-tree-rows", e.ROW_CELL_SCROLL = "row-cell:scroll", e.ROW_CELL_BRUSH_SELECTION = "row-cell:brush-selection", e.COL_CELL_HOVER = "col-cell:hover", e.COL_CELL_CLICK = "col-cell:click", e.COL_CELL_DOUBLE_CLICK = "col-cell:double-click", e.COL_CELL_CONTEXT_MENU = "col-cell:context-menu", e.COL_CELL_MOUSE_DOWN = "col-cell:mouse-down", e.COL_CELL_MOUSE_UP = "col-cell:mouse-up", e.COL_CELL_MOUSE_MOVE = "col-cell:mouse-move", e.COL_CELL_BRUSH_SELECTION = "col-cell:brush-selection", e.DATA_CELL_HOVER = "data-cell:hover", e.DATA_CELL_CLICK = "data-cell:click", e.DATA_CELL_DOUBLE_CLICK = "data-cell:double-click", e.DATA_CELL_CONTEXT_MENU = "data-cell:context-menu", e.DATA_CELL_MOUSE_UP = "data-cell:mouse-up", e.DATA_CELL_MOUSE_DOWN = "data-cell:mouse-down", e.DATA_CELL_MOUSE_MOVE = "data-cell:mouse-move", e.DATA_CELL_TREND_ICON_CLICK = "data-cell:trend-icon-click", e.DATA_CELL_BRUSH_SELECTION = "data-cell:brush-selection", e.DATA_CELL_SELECT_MOVE = "data-cell:select-move", e.CORNER_CELL_HOVER = "corner-cell:hover", e.CORNER_CELL_CLICK = "corner-cell:click", e.CORNER_CELL_DOUBLE_CLICK = "corner-cell:double-click", e.CORNER_CELL_CONTEXT_MENU = "corner-cell:context-menu", e.CORNER_CELL_MOUSE_DOWN = "corner-cell:mouse-down", e.CORNER_CELL_MOUSE_UP = "corner-cell:mouse-up", e.CORNER_CELL_MOUSE_MOVE = "corner-cell:mouse-move", e.MERGED_CELLS_HOVER = "merged-cells:hover", e.MERGED_CELLS_CLICK = "merged-cells:click", e.MERGED_CELLS_DOUBLE_CLICK = "merged-cells:double-click", e.MERGED_CELLS_CONTEXT_MENU = "merged-cell:context-menu", e.MERGED_CELLS_MOUSE_DOWN = "merged-cells:mouse-down", e.MERGED_CELLS_MOUSE_UP = "merged-cells:mouse-up", e.MERGED_CELLS_MOUSE_MOVE = "merged-cells:mouse-move", e.RANGE_SORT = "sort:range-sort", e.RANGE_SORTED = "sort:range-sorted", e.RANGE_FILTER = "filter:range-filter", e.RANGE_FILTERED = "filter:range-filtered", e.LAYOUT_AFTER_HEADER_LAYOUT = "layout:after-header-layout", e.LAYOUT_CELL_SCROLL = "layout:cell-scroll", e.LAYOUT_PAGINATION = "layout:pagination", e.LAYOUT_COLLAPSE_ROWS = "layout:collapsed-rows", e.LAYOUT_AFTER_COLLAPSE_ROWS = "layout:after-collapsed-rows", e.LAYOUT_AFTER_REAL_DATA_CELL_RENDER = "layout:after-real-data-cell-render", e.LAYOUT_TREE_ROWS_COLLAPSE_ALL = "layout:toggle-collapse-all", e.LAYOUT_COLS_EXPANDED = "layout:table-col-expanded", e.LAYOUT_COLS_HIDDEN = "layout:table-col-hidden", e.LAYOUT_AFTER_RENDER = "layout:after-render", e.LAYOUT_BEFORE_RENDER = "layout:before-render", e.LAYOUT_DESTROY = "layout:destroy", e.LAYOUT_RESIZE = "layout:resize", e.LAYOUT_RESIZE_SERIES_WIDTH = "layout:resize-series-width", e.LAYOUT_RESIZE_ROW_WIDTH = "layout:resize-row-width", e.LAYOUT_RESIZE_ROW_HEIGHT = "layout:resize-row-height", e.LAYOUT_RESIZE_COL_WIDTH = "layout:resize-column-width", e.LAYOUT_RESIZE_COL_HEIGHT = "layout:resize-column-height", e.LAYOUT_RESIZE_TREE_WIDTH = "layout:resize-tree-width", e.LAYOUT_RESIZE_MOUSE_DOWN = "layout:resize:mouse-down", e.LAYOUT_RESIZE_MOUSE_MOVE = "layout:resize:mouse-move", e.LAYOUT_RESIZE_MOUSE_UP = "layout:resize-mouse-up", e.GLOBAL_KEYBOARD_DOWN = "global:keyboard-down", e.GLOBAL_KEYBOARD_UP = "global:keyboard-up", e.GLOBAL_COPIED = "global:copied", e.GLOBAL_MOUSE_UP = "global:mouse-up", e.GLOBAL_MOUSE_MOVE = "global:mouse-move", e.GLOBAL_ACTION_ICON_CLICK = "global:action-icon-click", e.GLOBAL_ACTION_ICON_HOVER = "global:action-icon-hover", e.GLOBAL_ACTION_ICON_HOVER_OFF = "global:action-icon-hover-off", e.GLOBAL_CONTEXT_MENU = "global:context-menu", e.GLOBAL_CLICK = "global:click", e.GLOBAL_DOUBLE_CLICK = "global:double-click", e.GLOBAL_SELECTED = "global:selected", e.GLOBAL_HOVER = "global:hover", e.GLOBAL_RESET = "global:reset", e.GLOBAL_LINK_FIELD_JUMP = "global:link-field-jump", e.GLOBAL_SCROLL = "global:scroll";
})(I || (I = {}));
var cD = 0, hD = 3, e2 = 3, Ls = 4, dD = 5, vD = 5, pD = 1, gD = 1, t2 = 2, yD = "backGroundGroup", CD = "foreGroundGroup", mD = "panelGroup", _D = "panelScrollGroup", Vm = "mergedCellsGroup", r2 = "frozenRowGroup", n2 = "frozenColGroup", wD = "frozenTrailingRowGroup", xD = "frozenTrailingColGroup", SD = "frozenTopGroup", bD = "frozenBottomGroup", vl = "rowResizeAreaGroup", i2 = "rowFrozenResizeAreaGroup", jf = "frozenSplitLine", qm = "rowIndexResizeAreaGroup", Uv = "cornerResizeAreaGroup", o2 = "colResizeAreaGroup", a2 = "colFrozenResizeAreaGroup", TD = "colScrollGroup", ED = "colFrozenGroup", LD = "colFrozenTrailingGroup", Km = "gridGroup", AD = "rowScrollGroup", RD = "rowHeaderFrozenGroup", OD = "series-number-node", l2 = "horizontal-resize-area-", v0 = "root", ur = "[&]", Yv = "-", Ac = "-", jm = 28, Zm = 16, s2 = 16, ID = /^root\[&\]*/, MD = 0.5, qd = 50, pl;
(function(e) {
  e.Line = "line", e.Bar = "bar", e.Bullet = "bullet";
})(pl || (pl = {}));
var Qm = "square", ol = "...", p0 = "antv-s2", Zf = "valueRanges", g0 = {}, u2 = "#000000", Xv = "#FFFFFF", BD = {
  data: [],
  totalData: [],
  fields: {
    rows: [],
    columns: [],
    values: [],
    customTreeItems: [],
    valueInCols: !0
  },
  meta: [],
  sortParams: [],
  filterParams: []
}, $i, Pt;
(function(e) {
  e.ROW = "row", e.COL = "col", e.TRAILING_ROW = "trailingRow", e.TRAILING_COL = "trailingCol", e.SCROLL = "scroll", e.TOP = "top", e.BOTTOM = "bottom";
})(Pt || (Pt = {}));
var mn;
(function(e) {
  e.FROZEN_COL = "frozenCol", e.FROZEN_ROW = "frozenRow", e.FROZEN_TRAILING_COL = "frozenTrailingCol", e.FROZEN_TRAILING_ROW = "frozenTrailingRow";
})(mn || (mn = {}));
var f2 = ($i = {}, $i[Pt.ROW] = "frozenRowGroup", $i[Pt.COL] = "frozenColGroup", $i[Pt.TRAILING_COL] = "frozenTrailingColGroup", $i[Pt.TRAILING_ROW] = "frozenTrailingRowGroup", $i[Pt.SCROLL] = "panelScrollGroup", $i[Pt.TOP] = "frozenTopGroup", $i[Pt.BOTTOM] = "frozenBottomGroup", $i), Cr;
(function(e) {
  e.CORNER_CELL_CLICK = "cornerCellClick", e.DATA_CELL_CLICK = "dataCellClick", e.MERGED_CELLS_CLICK = "mergedCellsClick", e.ROW_COLUMN_CLICK = "rowColumnClick", e.ROW_TEXT_CLICK = "rowTextClick", e.HOVER = "hover", e.BRUSH_SELECTION = "brushSelection", e.ROW_BRUSH_SELECTION = "rowBrushSelection", e.COL_BRUSH_SELECTION = "colBrushSelection", e.COL_ROW_RESIZE = "rowColResize", e.DATA_CELL_MULTI_SELECTION = "dataCellMultiSelection", e.RANGE_SELECTION = "rangeSelection", e.SELECTED_CELL_MOVE = "selectedCellMove";
})(Cr || (Cr = {}));
var ae;
(function(e) {
  e.ALL_SELECTED = "allSelected", e.SELECTED = "selected", e.BRUSH_SELECTED = "brushSelected", e.UNSELECTED = "unselected", e.HOVER = "hover", e.HOVER_FOCUS = "hoverFocus", e.HIGHLIGHT = "highlight", e.SEARCH_RESULT = "searchResult", e.PREPARE_SELECT = "prepareSelect";
})(ae || (ae = {}));
var J;
(function(e) {
  e.DATA_CELL = "dataCell", e.HEADER_CELL = "headerCell", e.ROW_CELL = "rowCell", e.COL_CELL = "colCell", e.CORNER_CELL = "cornerCell", e.MERGED_CELL = "mergedCell";
})(J || (J = {}));
var Vv = 800, tn = {
  textOpacity: "fillOpacity",
  backgroundOpacity: "fillOpacity",
  backgroundColor: "fill",
  borderOpacity: "strokeOpacity",
  borderColor: "stroke",
  borderWidth: "lineWidth",
  opacity: "opacity"
}, DD = {
  textShape: ["textOpacity"],
  textShapes: ["textOpacity"],
  linkFieldShape: ["opacity"],
  interactiveBgShape: ["backgroundColor", "backgroundOpacity"],
  interactiveBorderShape: ["borderColor", "borderOpacity", "borderWidth"]
}, qv = "interactionStateInfo", ar;
(function(e) {
  e.CLICK = "click", e.UN_DRAGGED = "unDragged", e.DRAGGED = "dragged";
})(ar || (ar = {}));
var lr;
(function(e) {
  e.SHIFT = "Shift", e.COPY = "c", e.ESC = "Escape", e.META = "Meta", e.CONTROL = "Control", e.ARROW_UP = "ArrowUp", e.ARROW_DOWN = "ArrowDown", e.ARROW_LEFT = "ArrowLeft", e.ARROW_RIGHT = "ArrowRight";
})(lr || (lr = {}));
var Jm;
(function(e) {
  e.ASC = "ASC", e.DESC = "DESC";
})(Jm || (Jm = {}));
var Le;
(function(e) {
  e.HOVER = "hover", e.CLICK = "click", e.BRUSH_SELECTION = "brushSelection", e.ROW_BRUSH_SELECTION = "rowBrushSelection", e.COL_BRUSH_SELECTION = "colBrushSelection", e.MULTI_SELECTION = "multiSelection", e.RESIZE = "resize";
})(Le || (Le = {}));
var e_ = {
  x: {
    value: 0,
    scroll: !1
  },
  y: {
    value: 0,
    scroll: !1
  }
}, Qf;
(function(e) {
  e.CONTENT = "content", e.CANVAS = "canvas";
})(Qf || (Qf = {}));
var Yt;
(function(e) {
  e.SCROLL_UP = "scrollUp", e.SCROLL_DOWN = "scrollDown";
})(Yt || (Yt = {}));
var Jf;
(function(e) {
  e[e.SCROLL_UP = -1] = "SCROLL_UP", e[e.SCROLL_DOWN = 1] = "SCROLL_DOWN";
})(Jf || (Jf = {}));
var $D = "RESIZE_START_GUIDE_LINE", FD = "RESIZE_END_GUIDE_LINE", PD = "RESIZE_MASK", Sn;
(function(e) {
  e.Horizontal = "col", e.Vertical = "row";
})(Sn || (Sn = {}));
var _r;
(function(e) {
  e.Field = "field", e.Cell = "cell", e.Tree = "tree", e.Series = "series";
})(_r || (_r = {}));
var ec;
(function(e) {
  e.ALL = "all", e.CURRENT = "current";
})(ec || (ec = {}));
var c2 = 1, ya;
(function(e) {
  e.Adaptive = "adaptive", e.ColAdaptive = "colAdaptive", e.Compact = "compact";
})(ya || (ya = {}));
var t_ = 120, ND = {
  layoutWidthType: ya.Adaptive,
  showTreeLeafNodeAlignDot: !1,
  collapsedRows: {},
  collapsedCols: {},
  cellCfg: {
    width: 96,
    height: 30
  },
  rowCfg: {
    width: null,
    widthByField: {},
    heightByField: {}
  },
  colCfg: {
    height: 30,
    widthByFieldValue: {},
    heightByField: {}
  },
  device: "pc"
}, h2 = {
  width: 600,
  height: 480,
  debug: !1,
  hierarchyType: "grid",
  conditions: {},
  totals: {},
  tooltip: {
    showTooltip: !1,
    autoAdjustBoundary: "body",
    operation: {
      hiddenColumns: !1,
      trend: !1,
      sort: !1,
      menus: []
    }
  },
  interaction: {
    linkFields: [],
    hiddenColumnFields: [],
    selectedCellsSpotlight: !1,
    hoverHighlight: !0,
    hoverFocus: { duration: Vv },
    scrollSpeedRatio: {
      horizontal: 1,
      vertical: 1
    },
    autoResetSheetStyle: !0,
    brushSelection: {
      data: !0,
      row: !1,
      col: !1
    },
    multiSelection: !0,
    rangeSelection: !0,
    scrollbarPosition: Qf.CONTENT,
    resize: {
      rowCellVertical: !0,
      cornerCellHorizontal: !0,
      colCellHorizontal: !0,
      colCellVertical: !0,
      rowResizeType: ec.ALL
    },
    eventListenerOptions: !1,
    selectedCellHighlight: !1,
    overscrollBehavior: "auto"
  },
  showSeriesNumber: !1,
  customSVGIcons: [],
  showDefaultHeaderActionIcon: !1,
  headerActionIcons: [],
  style: ND,
  frozenRowHeader: !0,
  frozenRowCount: 0,
  frozenColCount: 0,
  frozenTrailingRowCount: 0,
  frozenTrailingColCount: 0,
  hdAdapter: !0,
  cornerText: "",
  cornerExtraFieldText: "",
  placeholder: Ac,
  supportCSSTransform: !1,
  devicePixelRatio: window.devicePixelRatio
}, HD = typeof global == "object" && global && global.Object === Object && global, d2 = HD, zD = typeof self == "object" && self && self.Object === Object && self, WD = d2 || zD || Function("return this")(), qt = WD, kD = qt.Symbol, fr = kD, v2 = Object.prototype, GD = v2.hasOwnProperty, UD = v2.toString, es = fr ? fr.toStringTag : void 0;
function YD(e) {
  var r = GD.call(e, es), t = e[es];
  try {
    e[es] = void 0;
    var n = !0;
  } catch {
  }
  var i = UD.call(e);
  return n && (r ? e[es] = t : delete e[es]), i;
}
var XD = Object.prototype, VD = XD.toString;
function qD(e) {
  return VD.call(e);
}
var KD = "[object Null]", jD = "[object Undefined]", r_ = fr ? fr.toStringTag : void 0;
function Ar(e) {
  return e == null ? e === void 0 ? jD : KD : r_ && r_ in Object(e) ? YD(e) : qD(e);
}
function It(e) {
  return e != null && typeof e == "object";
}
var ZD = "[object Symbol]";
function an(e) {
  return typeof e == "symbol" || It(e) && Ar(e) == ZD;
}
var QD = NaN;
function n_(e) {
  return typeof e == "number" ? e : an(e) ? QD : +e;
}
function Tt(e, r) {
  for (var t = -1, n = e == null ? 0 : e.length, i = Array(n); ++t < n; )
    i[t] = r(e[t], t, e);
  return i;
}
var JD = Array.isArray, le = JD, e$ = 1 / 0, i_ = fr ? fr.prototype : void 0, o_ = i_ ? i_.toString : void 0;
function ln(e) {
  if (typeof e == "string")
    return e;
  if (le(e))
    return Tt(e, ln) + "";
  if (an(e))
    return o_ ? o_.call(e) : "";
  var r = e + "";
  return r == "0" && 1 / e == -e$ ? "-0" : r;
}
function Rc(e, r) {
  return function(t, n) {
    var i;
    if (t === void 0 && n === void 0)
      return r;
    if (t !== void 0 && (i = t), n !== void 0) {
      if (i === void 0)
        return n;
      typeof t == "string" || typeof n == "string" ? (t = ln(t), n = ln(n)) : (t = n_(t), n = n_(n)), i = e(t, n);
    }
    return i;
  };
}
var t$ = Rc(function(e, r) {
  return e + r;
}, 0), r$ = t$, n$ = /\s/;
function p2(e) {
  for (var r = e.length; r-- && n$.test(e.charAt(r)); )
    ;
  return r;
}
var i$ = /^\s+/;
function g2(e) {
  return e && e.slice(0, p2(e) + 1).replace(i$, "");
}
function rt(e) {
  var r = typeof e;
  return e != null && (r == "object" || r == "function");
}
var a_ = NaN, o$ = /^[-+]0x[0-9a-f]+$/i, a$ = /^0b[01]+$/i, l$ = /^0o[0-7]+$/i, s$ = parseInt;
function nn(e) {
  if (typeof e == "number")
    return e;
  if (an(e))
    return a_;
  if (rt(e)) {
    var r = typeof e.valueOf == "function" ? e.valueOf() : e;
    e = rt(r) ? r + "" : r;
  }
  if (typeof e != "string")
    return e === 0 ? e : +e;
  e = g2(e);
  var t = a$.test(e);
  return t || l$.test(e) ? s$(e.slice(2), t ? 2 : 8) : o$.test(e) ? a_ : +e;
}
var l_ = 1 / 0, u$ = 17976931348623157e292;
function ki(e) {
  if (!e)
    return e === 0 ? e : 0;
  if (e = nn(e), e === l_ || e === -l_) {
    var r = e < 0 ? -1 : 1;
    return r * u$;
  }
  return e === e ? e : 0;
}
function Be(e) {
  var r = ki(e), t = r % 1;
  return r === r ? t ? r - t : r : 0;
}
var f$ = "Expected a function";
function c$(e, r) {
  if (typeof r != "function")
    throw new TypeError(f$);
  return e = Be(e), function() {
    if (--e < 1)
      return r.apply(this, arguments);
  };
}
function dr(e) {
  return e;
}
var h$ = "[object AsyncFunction]", d$ = "[object Function]", v$ = "[object GeneratorFunction]", p$ = "[object Proxy]";
function Vt(e) {
  if (!rt(e))
    return !1;
  var r = Ar(e);
  return r == d$ || r == v$ || r == h$ || r == p$;
}
var g$ = qt["__core-js_shared__"], Bf = g$, s_ = function() {
  var e = /[^.]+$/.exec(Bf && Bf.keys && Bf.keys.IE_PROTO || "");
  return e ? "Symbol(src)_1." + e : "";
}();
function y$(e) {
  return !!s_ && s_ in e;
}
var C$ = Function.prototype, m$ = C$.toString;
function Aa(e) {
  if (e != null) {
    try {
      return m$.call(e);
    } catch {
    }
    try {
      return e + "";
    } catch {
    }
  }
  return "";
}
var _$ = /[\\^$.*+?()[\]{}|]/g, w$ = /^\[object .+?Constructor\]$/, x$ = Function.prototype, S$ = Object.prototype, b$ = x$.toString, T$ = S$.hasOwnProperty, E$ = RegExp(
  "^" + b$.call(T$).replace(_$, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function y2(e) {
  if (!rt(e) || y$(e))
    return !1;
  var r = Vt(e) ? E$ : w$;
  return r.test(Aa(e));
}
function L$(e, r) {
  return e == null ? void 0 : e[r];
}
function Ra(e, r) {
  var t = L$(e, r);
  return y2(t) ? t : void 0;
}
var A$ = Ra(qt, "WeakMap"), As = A$, R$ = As && new As(), tc = R$, O$ = tc ? function(e, r) {
  return tc.set(e, r), e;
} : dr, C2 = O$, u_ = Object.create, I$ = /* @__PURE__ */ function() {
  function e() {
  }
  return function(r) {
    if (!rt(r))
      return {};
    if (u_)
      return u_(r);
    e.prototype = r;
    var t = new e();
    return e.prototype = void 0, t;
  };
}(), Sl = I$;
function Rs(e) {
  return function() {
    var r = arguments;
    switch (r.length) {
      case 0:
        return new e();
      case 1:
        return new e(r[0]);
      case 2:
        return new e(r[0], r[1]);
      case 3:
        return new e(r[0], r[1], r[2]);
      case 4:
        return new e(r[0], r[1], r[2], r[3]);
      case 5:
        return new e(r[0], r[1], r[2], r[3], r[4]);
      case 6:
        return new e(r[0], r[1], r[2], r[3], r[4], r[5]);
      case 7:
        return new e(r[0], r[1], r[2], r[3], r[4], r[5], r[6]);
    }
    var t = Sl(e.prototype), n = e.apply(t, r);
    return rt(n) ? n : t;
  };
}
var M$ = 1;
function B$(e, r, t) {
  var n = r & M$, i = Rs(e);
  function o() {
    var a = this && this !== qt && this instanceof o ? i : e;
    return a.apply(n ? t : this, arguments);
  }
  return o;
}
function sn(e, r, t) {
  switch (t.length) {
    case 0:
      return e.call(r);
    case 1:
      return e.call(r, t[0]);
    case 2:
      return e.call(r, t[0], t[1]);
    case 3:
      return e.call(r, t[0], t[1], t[2]);
  }
  return e.apply(r, t);
}
var D$ = Math.max;
function m2(e, r, t, n) {
  for (var i = -1, o = e.length, a = t.length, l = -1, s = r.length, f = D$(o - a, 0), h = Array(s + f), d = !n; ++l < s; )
    h[l] = r[l];
  for (; ++i < a; )
    (d || i < o) && (h[t[i]] = e[i]);
  for (; f--; )
    h[l++] = e[i++];
  return h;
}
var $$ = Math.max;
function _2(e, r, t, n) {
  for (var i = -1, o = e.length, a = -1, l = t.length, s = -1, f = r.length, h = $$(o - l, 0), d = Array(h + f), v = !n; ++i < h; )
    d[i] = e[i];
  for (var g = i; ++s < f; )
    d[g + s] = r[s];
  for (; ++a < l; )
    (v || i < o) && (d[g + t[a]] = e[i++]);
  return d;
}
function F$(e, r) {
  for (var t = e.length, n = 0; t--; )
    e[t] === r && ++n;
  return n;
}
function Oc() {
}
var P$ = 4294967295;
function Ye(e) {
  this.__wrapped__ = e, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = P$, this.__views__ = [];
}
Ye.prototype = Sl(Oc.prototype);
Ye.prototype.constructor = Ye;
function Ic() {
}
var N$ = tc ? function(e) {
  return tc.get(e);
} : Ic, y0 = N$, H$ = {}, al = H$, z$ = Object.prototype, W$ = z$.hasOwnProperty;
function Df(e) {
  for (var r = e.name + "", t = al[r], n = W$.call(al, r) ? t.length : 0; n--; ) {
    var i = t[n], o = i.func;
    if (o == null || o == e)
      return i.name;
  }
  return r;
}
function Ln(e, r) {
  this.__wrapped__ = e, this.__actions__ = [], this.__chain__ = !!r, this.__index__ = 0, this.__values__ = void 0;
}
Ln.prototype = Sl(Oc.prototype);
Ln.prototype.constructor = Ln;
function zr(e, r) {
  var t = -1, n = e.length;
  for (r || (r = Array(n)); ++t < n; )
    r[t] = e[t];
  return r;
}
function w2(e) {
  if (e instanceof Ye)
    return e.clone();
  var r = new Ln(e.__wrapped__, e.__chain__);
  return r.__actions__ = zr(e.__actions__), r.__index__ = e.__index__, r.__values__ = e.__values__, r;
}
var k$ = Object.prototype, G$ = k$.hasOwnProperty;
function L(e) {
  if (It(e) && !le(e) && !(e instanceof Ye)) {
    if (e instanceof Ln)
      return e;
    if (G$.call(e, "__wrapped__"))
      return w2(e);
  }
  return new Ln(e);
}
L.prototype = Oc.prototype;
L.prototype.constructor = L;
function Kv(e) {
  var r = Df(e), t = L[r];
  if (typeof t != "function" || !(r in Ye.prototype))
    return !1;
  if (e === t)
    return !0;
  var n = y0(t);
  return !!n && e === n[0];
}
var U$ = 800, Y$ = 16, X$ = Date.now;
function x2(e) {
  var r = 0, t = 0;
  return function() {
    var n = X$(), i = Y$ - (n - t);
    if (t = n, i > 0) {
      if (++r >= U$)
        return arguments[0];
    } else
      r = 0;
    return e.apply(void 0, arguments);
  };
}
var V$ = x2(C2), S2 = V$, q$ = /\{\n\/\* \[wrapped with (.+)\] \*/, K$ = /,? & /;
function j$(e) {
  var r = e.match(q$);
  return r ? r[1].split(K$) : [];
}
var Z$ = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;
function Q$(e, r) {
  var t = r.length;
  if (!t)
    return e;
  var n = t - 1;
  return r[n] = (t > 1 ? "& " : "") + r[n], r = r.join(t > 2 ? ", " : " "), e.replace(Z$, `{
/* [wrapped with ` + r + `] */
`);
}
function ll(e) {
  return function() {
    return e;
  };
}
var J$ = function() {
  try {
    var e = Ra(Object, "defineProperty");
    return e({}, "", {}), e;
  } catch {
  }
}(), rc = J$, eF = rc ? function(e, r) {
  return rc(e, "toString", {
    configurable: !0,
    enumerable: !1,
    value: ll(r),
    writable: !0
  });
} : dr, tF = eF, rF = x2(tF), C0 = rF;
function In(e, r) {
  for (var t = -1, n = e == null ? 0 : e.length; ++t < n && r(e[t], t, e) !== !1; )
    ;
  return e;
}
function Mc(e, r, t, n) {
  for (var i = e.length, o = t + (n ? 1 : -1); n ? o-- : ++o < i; )
    if (r(e[o], o, e))
      return o;
  return -1;
}
function b2(e) {
  return e !== e;
}
function nF(e, r, t) {
  for (var n = t - 1, i = e.length; ++n < i; )
    if (e[n] === r)
      return n;
  return -1;
}
function bl(e, r, t) {
  return r === r ? nF(e, r, t) : Mc(e, b2, t);
}
function Bc(e, r) {
  var t = e == null ? 0 : e.length;
  return !!t && bl(e, r, 0) > -1;
}
var iF = 1, oF = 2, aF = 8, lF = 16, sF = 32, uF = 64, fF = 128, cF = 256, hF = 512, dF = [
  ["ary", fF],
  ["bind", iF],
  ["bindKey", oF],
  ["curry", aF],
  ["curryRight", lF],
  ["flip", hF],
  ["partial", sF],
  ["partialRight", uF],
  ["rearg", cF]
];
function vF(e, r) {
  return In(dF, function(t) {
    var n = "_." + t[0];
    r & t[1] && !Bc(e, n) && e.push(n);
  }), e.sort();
}
function T2(e, r, t) {
  var n = r + "";
  return C0(e, Q$(n, vF(j$(n), t)));
}
var pF = 1, gF = 2, yF = 4, CF = 8, f_ = 32, c_ = 64;
function E2(e, r, t, n, i, o, a, l, s, f) {
  var h = r & CF, d = h ? a : void 0, v = h ? void 0 : a, g = h ? o : void 0, y = h ? void 0 : o;
  r |= h ? f_ : c_, r &= ~(h ? c_ : f_), r & yF || (r &= ~(pF | gF));
  var C = [
    e,
    r,
    i,
    g,
    d,
    y,
    v,
    l,
    s,
    f
  ], _ = t.apply(void 0, C);
  return Kv(e) && S2(_, C), _.placeholder = n, T2(_, e, r);
}
function Tl(e) {
  var r = e;
  return r.placeholder;
}
var mF = 9007199254740991, _F = /^(?:0|[1-9]\d*)$/;
function Xi(e, r) {
  var t = typeof e;
  return r = r ?? mF, !!r && (t == "number" || t != "symbol" && _F.test(e)) && e > -1 && e % 1 == 0 && e < r;
}
var wF = Math.min;
function xF(e, r) {
  for (var t = e.length, n = wF(r.length, t), i = zr(e); n--; ) {
    var o = r[n];
    e[n] = Xi(o, t) ? i[o] : void 0;
  }
  return e;
}
var h_ = "__lodash_placeholder__";
function Ao(e, r) {
  for (var t = -1, n = e.length, i = 0, o = []; ++t < n; ) {
    var a = e[t];
    (a === r || a === h_) && (e[t] = h_, o[i++] = t);
  }
  return o;
}
var SF = 1, bF = 2, TF = 8, EF = 16, LF = 128, AF = 512;
function Dc(e, r, t, n, i, o, a, l, s, f) {
  var h = r & LF, d = r & SF, v = r & bF, g = r & (TF | EF), y = r & AF, C = v ? void 0 : Rs(e);
  function _() {
    for (var w = arguments.length, x = Array(w), S = w; S--; )
      x[S] = arguments[S];
    if (g)
      var T = Tl(_), R = F$(x, T);
    if (n && (x = m2(x, n, i, g)), o && (x = _2(x, o, a, g)), w -= R, g && w < f) {
      var B = Ao(x, T);
      return E2(
        e,
        r,
        Dc,
        _.placeholder,
        t,
        x,
        B,
        l,
        s,
        f - w
      );
    }
    var $ = d ? t : this, N = v ? $[e] : e;
    return w = x.length, l ? x = xF(x, l) : y && w > 1 && x.reverse(), h && s < w && (x.length = s), this && this !== qt && this instanceof _ && (N = C || Rs(N)), N.apply($, x);
  }
  return _;
}
function RF(e, r, t) {
  var n = Rs(e);
  function i() {
    for (var o = arguments.length, a = Array(o), l = o, s = Tl(i); l--; )
      a[l] = arguments[l];
    var f = o < 3 && a[0] !== s && a[o - 1] !== s ? [] : Ao(a, s);
    if (o -= f.length, o < t)
      return E2(
        e,
        r,
        Dc,
        i.placeholder,
        void 0,
        a,
        f,
        void 0,
        void 0,
        t - o
      );
    var h = this && this !== qt && this instanceof i ? n : e;
    return sn(h, this, a);
  }
  return i;
}
var OF = 1;
function IF(e, r, t, n) {
  var i = r & OF, o = Rs(e);
  function a() {
    for (var l = -1, s = arguments.length, f = -1, h = n.length, d = Array(h + s), v = this && this !== qt && this instanceof a ? o : e; ++f < h; )
      d[f] = n[f];
    for (; s--; )
      d[f++] = arguments[++l];
    return sn(v, i ? t : this, d);
  }
  return a;
}
var d_ = "__lodash_placeholder__", Kd = 1, MF = 2, BF = 4, v_ = 8, ts = 128, p_ = 256, DF = Math.min;
function $F(e, r) {
  var t = e[1], n = r[1], i = t | n, o = i < (Kd | MF | ts), a = n == ts && t == v_ || n == ts && t == p_ && e[7].length <= r[8] || n == (ts | p_) && r[7].length <= r[8] && t == v_;
  if (!(o || a))
    return e;
  n & Kd && (e[2] = r[2], i |= t & Kd ? 0 : BF);
  var l = r[3];
  if (l) {
    var s = e[3];
    e[3] = s ? m2(s, l, r[4]) : l, e[4] = s ? Ao(e[3], d_) : r[4];
  }
  return l = r[5], l && (s = e[5], e[5] = s ? _2(s, l, r[6]) : l, e[6] = s ? Ao(e[5], d_) : r[6]), l = r[7], l && (e[7] = l), n & ts && (e[8] = e[8] == null ? r[8] : DF(e[8], r[8])), e[9] == null && (e[9] = r[9]), e[0] = r[0], e[1] = i, e;
}
var FF = "Expected a function", g_ = 1, PF = 2, jd = 8, Zd = 16, Qd = 32, y_ = 64, C_ = Math.max;
function Vi(e, r, t, n, i, o, a, l) {
  var s = r & PF;
  if (!s && typeof e != "function")
    throw new TypeError(FF);
  var f = n ? n.length : 0;
  if (f || (r &= ~(Qd | y_), n = i = void 0), a = a === void 0 ? a : C_(Be(a), 0), l = l === void 0 ? l : Be(l), f -= i ? i.length : 0, r & y_) {
    var h = n, d = i;
    n = i = void 0;
  }
  var v = s ? void 0 : y0(e), g = [
    e,
    r,
    t,
    n,
    i,
    h,
    d,
    o,
    a,
    l
  ];
  if (v && $F(g, v), e = g[0], r = g[1], t = g[2], n = g[3], i = g[4], l = g[9] = g[9] === void 0 ? s ? 0 : e.length : C_(g[9] - f, 0), !l && r & (jd | Zd) && (r &= ~(jd | Zd)), !r || r == g_)
    var y = B$(e, r, t);
  else r == jd || r == Zd ? y = RF(e, r, l) : (r == Qd || r == (g_ | Qd)) && !i.length ? y = IF(e, r, t, n) : y = Dc.apply(void 0, g);
  var C = v ? C2 : S2;
  return T2(C(y, g), e, r);
}
var NF = 128;
function L2(e, r, t) {
  return r = t ? void 0 : r, r = e && r == null ? e.length : r, Vi(e, NF, void 0, void 0, void 0, void 0, r);
}
function qi(e, r, t) {
  r == "__proto__" && rc ? rc(e, r, {
    configurable: !0,
    enumerable: !0,
    value: t,
    writable: !0
  }) : e[r] = t;
}
function Jn(e, r) {
  return e === r || e !== e && r !== r;
}
var HF = Object.prototype, zF = HF.hasOwnProperty;
function Zs(e, r, t) {
  var n = e[r];
  (!(zF.call(e, r) && Jn(n, t)) || t === void 0 && !(r in e)) && qi(e, r, t);
}
function wi(e, r, t, n) {
  var i = !t;
  t || (t = {});
  for (var o = -1, a = r.length; ++o < a; ) {
    var l = r[o], s = n ? n(t[l], e[l], l, t, e) : void 0;
    s === void 0 && (s = e[l]), i ? qi(t, l, s) : Zs(t, l, s);
  }
  return t;
}
var m_ = Math.max;
function A2(e, r, t) {
  return r = m_(r === void 0 ? e.length - 1 : r, 0), function() {
    for (var n = arguments, i = -1, o = m_(n.length - r, 0), a = Array(o); ++i < o; )
      a[i] = n[r + i];
    i = -1;
    for (var l = Array(r + 1); ++i < r; )
      l[i] = n[i];
    return l[r] = t(a), sn(e, this, l);
  };
}
function Ne(e, r) {
  return C0(A2(e, r, dr), e + "");
}
var WF = 9007199254740991;
function $c(e) {
  return typeof e == "number" && e > -1 && e % 1 == 0 && e <= WF;
}
function Gr(e) {
  return e != null && $c(e.length) && !Vt(e);
}
function Tr(e, r, t) {
  if (!rt(t))
    return !1;
  var n = typeof r;
  return (n == "number" ? Gr(t) && Xi(r, t.length) : n == "string" && r in t) ? Jn(t[r], e) : !1;
}
function El(e) {
  return Ne(function(r, t) {
    var n = -1, i = t.length, o = i > 1 ? t[i - 1] : void 0, a = i > 2 ? t[2] : void 0;
    for (o = e.length > 3 && typeof o == "function" ? (i--, o) : void 0, a && Tr(t[0], t[1], a) && (o = i < 3 ? void 0 : o, i = 1), r = Object(r); ++n < i; ) {
      var l = t[n];
      l && e(r, l, n, o);
    }
    return r;
  });
}
var kF = Object.prototype;
function Qs(e) {
  var r = e && e.constructor, t = typeof r == "function" && r.prototype || kF;
  return e === t;
}
function m0(e, r) {
  for (var t = -1, n = Array(e); ++t < e; )
    n[t] = r(t);
  return n;
}
var GF = "[object Arguments]";
function __(e) {
  return It(e) && Ar(e) == GF;
}
var R2 = Object.prototype, UF = R2.hasOwnProperty, YF = R2.propertyIsEnumerable, XF = __(/* @__PURE__ */ function() {
  return arguments;
}()) ? __ : function(e) {
  return It(e) && UF.call(e, "callee") && !YF.call(e, "callee");
}, Ca = XF;
function _0() {
  return !1;
}
var O2 = typeof exports == "object" && exports && !exports.nodeType && exports, w_ = O2 && typeof module == "object" && module && !module.nodeType && module, VF = w_ && w_.exports === O2, x_ = VF ? qt.Buffer : void 0, qF = x_ ? x_.isBuffer : void 0, KF = qF || _0, Ro = KF, jF = "[object Arguments]", ZF = "[object Array]", QF = "[object Boolean]", JF = "[object Date]", eP = "[object Error]", tP = "[object Function]", rP = "[object Map]", nP = "[object Number]", iP = "[object Object]", oP = "[object RegExp]", aP = "[object Set]", lP = "[object String]", sP = "[object WeakMap]", uP = "[object ArrayBuffer]", fP = "[object DataView]", cP = "[object Float32Array]", hP = "[object Float64Array]", dP = "[object Int8Array]", vP = "[object Int16Array]", pP = "[object Int32Array]", gP = "[object Uint8Array]", yP = "[object Uint8ClampedArray]", CP = "[object Uint16Array]", mP = "[object Uint32Array]", wt = {};
wt[cP] = wt[hP] = wt[dP] = wt[vP] = wt[pP] = wt[gP] = wt[yP] = wt[CP] = wt[mP] = !0;
wt[jF] = wt[ZF] = wt[uP] = wt[QF] = wt[fP] = wt[JF] = wt[eP] = wt[tP] = wt[rP] = wt[nP] = wt[iP] = wt[oP] = wt[aP] = wt[lP] = wt[sP] = !1;
function _P(e) {
  return It(e) && $c(e.length) && !!wt[Ar(e)];
}
function un(e) {
  return function(r) {
    return e(r);
  };
}
var I2 = typeof exports == "object" && exports && !exports.nodeType && exports, vs = I2 && typeof module == "object" && module && !module.nodeType && module, wP = vs && vs.exports === I2, Jd = wP && d2.process, xP = function() {
  try {
    var e = vs && vs.require && vs.require("util").types;
    return e || Jd && Jd.binding && Jd.binding("util");
  } catch {
  }
}(), An = xP, S_ = An && An.isTypedArray, SP = S_ ? un(S_) : _P, Ll = SP, bP = Object.prototype, TP = bP.hasOwnProperty;
function M2(e, r) {
  var t = le(e), n = !t && Ca(e), i = !t && !n && Ro(e), o = !t && !n && !i && Ll(e), a = t || n || i || o, l = a ? m0(e.length, String) : [], s = l.length;
  for (var f in e)
    (r || TP.call(e, f)) && !(a && // Safari 9 has enumerable `arguments.length` in strict mode.
    (f == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    i && (f == "offset" || f == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    o && (f == "buffer" || f == "byteLength" || f == "byteOffset") || // Skip index properties.
    Xi(f, s))) && l.push(f);
  return l;
}
function B2(e, r) {
  return function(t) {
    return e(r(t));
  };
}
var EP = B2(Object.keys, Object), LP = EP, AP = Object.prototype, RP = AP.hasOwnProperty;
function w0(e) {
  if (!Qs(e))
    return LP(e);
  var r = [];
  for (var t in Object(e))
    RP.call(e, t) && t != "constructor" && r.push(t);
  return r;
}
function Rt(e) {
  return Gr(e) ? M2(e) : w0(e);
}
var OP = Object.prototype, IP = OP.hasOwnProperty, MP = El(function(e, r) {
  if (Qs(r) || Gr(r)) {
    wi(r, Rt(r), e);
    return;
  }
  for (var t in r)
    IP.call(r, t) && Zs(e, t, r[t]);
}), D2 = MP;
function BP(e) {
  var r = [];
  if (e != null)
    for (var t in Object(e))
      r.push(t);
  return r;
}
var DP = Object.prototype, $P = DP.hasOwnProperty;
function FP(e) {
  if (!rt(e))
    return BP(e);
  var r = Qs(e), t = [];
  for (var n in e)
    n == "constructor" && (r || !$P.call(e, n)) || t.push(n);
  return t;
}
function Ur(e) {
  return Gr(e) ? M2(e, !0) : FP(e);
}
var PP = El(function(e, r) {
  wi(r, Ur(r), e);
}), b_ = PP, NP = El(function(e, r, t, n) {
  wi(r, Ur(r), e, n);
}), nc = NP, HP = El(function(e, r, t, n) {
  wi(r, Rt(r), e, n);
}), zP = HP, WP = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, kP = /^\w*$/;
function x0(e, r) {
  if (le(e))
    return !1;
  var t = typeof e;
  return t == "number" || t == "symbol" || t == "boolean" || e == null || an(e) ? !0 : kP.test(e) || !WP.test(e) || r != null && e in Object(r);
}
var GP = Ra(Object, "create"), Os = GP;
function UP() {
  this.__data__ = Os ? Os(null) : {}, this.size = 0;
}
function YP(e) {
  var r = this.has(e) && delete this.__data__[e];
  return this.size -= r ? 1 : 0, r;
}
var XP = "__lodash_hash_undefined__", VP = Object.prototype, qP = VP.hasOwnProperty;
function KP(e) {
  var r = this.__data__;
  if (Os) {
    var t = r[e];
    return t === XP ? void 0 : t;
  }
  return qP.call(r, e) ? r[e] : void 0;
}
var jP = Object.prototype, ZP = jP.hasOwnProperty;
function QP(e) {
  var r = this.__data__;
  return Os ? r[e] !== void 0 : ZP.call(r, e);
}
var JP = "__lodash_hash_undefined__";
function e7(e, r) {
  var t = this.__data__;
  return this.size += this.has(e) ? 0 : 1, t[e] = Os && r === void 0 ? JP : r, this;
}
function ma(e) {
  var r = -1, t = e == null ? 0 : e.length;
  for (this.clear(); ++r < t; ) {
    var n = e[r];
    this.set(n[0], n[1]);
  }
}
ma.prototype.clear = UP;
ma.prototype.delete = YP;
ma.prototype.get = KP;
ma.prototype.has = QP;
ma.prototype.set = e7;
function t7() {
  this.__data__ = [], this.size = 0;
}
function Fc(e, r) {
  for (var t = e.length; t--; )
    if (Jn(e[t][0], r))
      return t;
  return -1;
}
var r7 = Array.prototype, n7 = r7.splice;
function i7(e) {
  var r = this.__data__, t = Fc(r, e);
  if (t < 0)
    return !1;
  var n = r.length - 1;
  return t == n ? r.pop() : n7.call(r, t, 1), --this.size, !0;
}
function o7(e) {
  var r = this.__data__, t = Fc(r, e);
  return t < 0 ? void 0 : r[t][1];
}
function a7(e) {
  return Fc(this.__data__, e) > -1;
}
function l7(e, r) {
  var t = this.__data__, n = Fc(t, e);
  return n < 0 ? (++this.size, t.push([e, r])) : t[n][1] = r, this;
}
function Ki(e) {
  var r = -1, t = e == null ? 0 : e.length;
  for (this.clear(); ++r < t; ) {
    var n = e[r];
    this.set(n[0], n[1]);
  }
}
Ki.prototype.clear = t7;
Ki.prototype.delete = i7;
Ki.prototype.get = o7;
Ki.prototype.has = a7;
Ki.prototype.set = l7;
var s7 = Ra(qt, "Map"), Is = s7;
function u7() {
  this.size = 0, this.__data__ = {
    hash: new ma(),
    map: new (Is || Ki)(),
    string: new ma()
  };
}
function f7(e) {
  var r = typeof e;
  return r == "string" || r == "number" || r == "symbol" || r == "boolean" ? e !== "__proto__" : e === null;
}
function Pc(e, r) {
  var t = e.__data__;
  return f7(r) ? t[typeof r == "string" ? "string" : "hash"] : t.map;
}
function c7(e) {
  var r = Pc(this, e).delete(e);
  return this.size -= r ? 1 : 0, r;
}
function h7(e) {
  return Pc(this, e).get(e);
}
function d7(e) {
  return Pc(this, e).has(e);
}
function v7(e, r) {
  var t = Pc(this, e), n = t.size;
  return t.set(e, r), this.size += t.size == n ? 0 : 1, this;
}
function ji(e) {
  var r = -1, t = e == null ? 0 : e.length;
  for (this.clear(); ++r < t; ) {
    var n = e[r];
    this.set(n[0], n[1]);
  }
}
ji.prototype.clear = u7;
ji.prototype.delete = c7;
ji.prototype.get = h7;
ji.prototype.has = d7;
ji.prototype.set = v7;
var p7 = "Expected a function";
function Oa(e, r) {
  if (typeof e != "function" || r != null && typeof r != "function")
    throw new TypeError(p7);
  var t = function() {
    var n = arguments, i = r ? r.apply(this, n) : n[0], o = t.cache;
    if (o.has(i))
      return o.get(i);
    var a = e.apply(this, n);
    return t.cache = o.set(i, a) || o, a;
  };
  return t.cache = new (Oa.Cache || ji)(), t;
}
Oa.Cache = ji;
var g7 = 500;
function y7(e) {
  var r = Oa(e, function(n) {
    return t.size === g7 && t.clear(), n;
  }), t = r.cache;
  return r;
}
var C7 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, m7 = /\\(\\)?/g, _7 = y7(function(e) {
  var r = [];
  return e.charCodeAt(0) === 46 && r.push(""), e.replace(C7, function(t, n, i, o) {
    r.push(i ? o.replace(m7, "$1") : n || t);
  }), r;
}), $2 = _7;
function nt(e) {
  return e == null ? "" : ln(e);
}
function Bo(e, r) {
  return le(e) ? e : x0(e, r) ? [e] : $2(nt(e));
}
var w7 = 1 / 0;
function xi(e) {
  if (typeof e == "string" || an(e))
    return e;
  var r = e + "";
  return r == "0" && 1 / e == -w7 ? "-0" : r;
}
function Ia(e, r) {
  r = Bo(r, e);
  for (var t = 0, n = r.length; e != null && t < n; )
    e = e[xi(r[t++])];
  return t && t == n ? e : void 0;
}
function ge(e, r, t) {
  var n = e == null ? void 0 : Ia(e, r);
  return n === void 0 ? t : n;
}
function S0(e, r) {
  for (var t = -1, n = r.length, i = Array(n), o = e == null; ++t < n; )
    i[t] = o ? void 0 : ge(e, r[t]);
  return i;
}
function Do(e, r) {
  for (var t = -1, n = r.length, i = e.length; ++t < n; )
    e[i + t] = r[t];
  return e;
}
var T_ = fr ? fr.isConcatSpreadable : void 0;
function x7(e) {
  return le(e) || Ca(e) || !!(T_ && e && e[T_]);
}
function rr(e, r, t, n, i) {
  var o = -1, a = e.length;
  for (t || (t = x7), i || (i = []); ++o < a; ) {
    var l = e[o];
    r > 0 && t(l) ? r > 1 ? rr(l, r - 1, t, n, i) : Do(i, l) : n || (i[i.length] = l);
  }
  return i;
}
function b0(e) {
  var r = e == null ? 0 : e.length;
  return r ? rr(e, 1) : [];
}
function Zi(e) {
  return C0(A2(e, void 0, b0), e + "");
}
var S7 = Zi(S0), b7 = S7, T7 = B2(Object.getPrototypeOf, Object), Nc = T7, E7 = "[object Object]", L7 = Function.prototype, A7 = Object.prototype, F2 = L7.toString, R7 = A7.hasOwnProperty, O7 = F2.call(Object);
function Js(e) {
  if (!It(e) || Ar(e) != E7)
    return !1;
  var r = Nc(e);
  if (r === null)
    return !0;
  var t = R7.call(r, "constructor") && r.constructor;
  return typeof t == "function" && t instanceof t && F2.call(t) == O7;
}
var I7 = "[object DOMException]", M7 = "[object Error]";
function T0(e) {
  if (!It(e))
    return !1;
  var r = Ar(e);
  return r == M7 || r == I7 || typeof e.message == "string" && typeof e.name == "string" && !Js(e);
}
var B7 = Ne(function(e, r) {
  try {
    return sn(e, void 0, r);
  } catch (t) {
    return T0(t) ? t : new Error(t);
  }
}), P2 = B7, D7 = "Expected a function";
function N2(e, r) {
  var t;
  if (typeof r != "function")
    throw new TypeError(D7);
  return e = Be(e), function() {
    return --e > 0 && (t = r.apply(this, arguments)), e <= 1 && (r = void 0), t;
  };
}
var $7 = 1, F7 = 32, E0 = Ne(function(e, r, t) {
  var n = $7;
  if (t.length) {
    var i = Ao(t, Tl(E0));
    n |= F7;
  }
  return Vi(e, n, r, t, i);
});
E0.placeholder = {};
var H2 = E0, P7 = Zi(function(e, r) {
  return In(r, function(t) {
    t = xi(t), qi(e, t, H2(e[t], e));
  }), e;
}), N7 = P7, H7 = 1, z7 = 2, W7 = 32, L0 = Ne(function(e, r, t) {
  var n = H7 | z7;
  if (t.length) {
    var i = Ao(t, Tl(L0));
    n |= W7;
  }
  return Vi(r, n, e, t, i);
});
L0.placeholder = {};
var k7 = L0;
function Rn(e, r, t) {
  var n = -1, i = e.length;
  r < 0 && (r = -r > i ? 0 : i + r), t = t > i ? i : t, t < 0 && (t += i), i = r > t ? 0 : t - r >>> 0, r >>>= 0;
  for (var o = Array(i); ++n < i; )
    o[n] = e[n + r];
  return o;
}
function $o(e, r, t) {
  var n = e.length;
  return t = t === void 0 ? n : t, !r && t >= n ? e : Rn(e, r, t);
}
var G7 = "\\ud800-\\udfff", U7 = "\\u0300-\\u036f", Y7 = "\\ufe20-\\ufe2f", X7 = "\\u20d0-\\u20ff", V7 = U7 + Y7 + X7, q7 = "\\ufe0e\\ufe0f", K7 = "\\u200d", j7 = RegExp("[" + K7 + G7 + V7 + q7 + "]");
function Al(e) {
  return j7.test(e);
}
function Z7(e) {
  return e.split("");
}
var z2 = "\\ud800-\\udfff", Q7 = "\\u0300-\\u036f", J7 = "\\ufe20-\\ufe2f", eN = "\\u20d0-\\u20ff", tN = Q7 + J7 + eN, rN = "\\ufe0e\\ufe0f", nN = "[" + z2 + "]", jv = "[" + tN + "]", Zv = "\\ud83c[\\udffb-\\udfff]", iN = "(?:" + jv + "|" + Zv + ")", W2 = "[^" + z2 + "]", k2 = "(?:\\ud83c[\\udde6-\\uddff]){2}", G2 = "[\\ud800-\\udbff][\\udc00-\\udfff]", oN = "\\u200d", U2 = iN + "?", Y2 = "[" + rN + "]?", aN = "(?:" + oN + "(?:" + [W2, k2, G2].join("|") + ")" + Y2 + U2 + ")*", lN = Y2 + U2 + aN, sN = "(?:" + [W2 + jv + "?", jv, k2, G2, nN].join("|") + ")", uN = RegExp(Zv + "(?=" + Zv + ")|" + sN + lN, "g");
function fN(e) {
  return e.match(uN) || [];
}
function Kn(e) {
  return Al(e) ? fN(e) : Z7(e);
}
function X2(e) {
  return function(r) {
    r = nt(r);
    var t = Al(r) ? Kn(r) : void 0, n = t ? t[0] : r.charAt(0), i = t ? $o(t, 1).join("") : r.slice(1);
    return n[e]() + i;
  };
}
var cN = X2("toUpperCase"), A0 = cN;
function V2(e) {
  return A0(nt(e).toLowerCase());
}
function R0(e, r, t, n) {
  var i = -1, o = e == null ? 0 : e.length;
  for (n && o && (t = e[++i]); ++i < o; )
    t = r(t, e[i], i, e);
  return t;
}
function O0(e) {
  return function(r) {
    return e == null ? void 0 : e[r];
  };
}
var hN = {
  // Latin-1 Supplement block.
  À: "A",
  Á: "A",
  Â: "A",
  Ã: "A",
  Ä: "A",
  Å: "A",
  à: "a",
  á: "a",
  â: "a",
  ã: "a",
  ä: "a",
  å: "a",
  Ç: "C",
  ç: "c",
  Ð: "D",
  ð: "d",
  È: "E",
  É: "E",
  Ê: "E",
  Ë: "E",
  è: "e",
  é: "e",
  ê: "e",
  ë: "e",
  Ì: "I",
  Í: "I",
  Î: "I",
  Ï: "I",
  ì: "i",
  í: "i",
  î: "i",
  ï: "i",
  Ñ: "N",
  ñ: "n",
  Ò: "O",
  Ó: "O",
  Ô: "O",
  Õ: "O",
  Ö: "O",
  Ø: "O",
  ò: "o",
  ó: "o",
  ô: "o",
  õ: "o",
  ö: "o",
  ø: "o",
  Ù: "U",
  Ú: "U",
  Û: "U",
  Ü: "U",
  ù: "u",
  ú: "u",
  û: "u",
  ü: "u",
  Ý: "Y",
  ý: "y",
  ÿ: "y",
  Æ: "Ae",
  æ: "ae",
  Þ: "Th",
  þ: "th",
  ß: "ss",
  // Latin Extended-A block.
  Ā: "A",
  Ă: "A",
  Ą: "A",
  ā: "a",
  ă: "a",
  ą: "a",
  Ć: "C",
  Ĉ: "C",
  Ċ: "C",
  Č: "C",
  ć: "c",
  ĉ: "c",
  ċ: "c",
  č: "c",
  Ď: "D",
  Đ: "D",
  ď: "d",
  đ: "d",
  Ē: "E",
  Ĕ: "E",
  Ė: "E",
  Ę: "E",
  Ě: "E",
  ē: "e",
  ĕ: "e",
  ė: "e",
  ę: "e",
  ě: "e",
  Ĝ: "G",
  Ğ: "G",
  Ġ: "G",
  Ģ: "G",
  ĝ: "g",
  ğ: "g",
  ġ: "g",
  ģ: "g",
  Ĥ: "H",
  Ħ: "H",
  ĥ: "h",
  ħ: "h",
  Ĩ: "I",
  Ī: "I",
  Ĭ: "I",
  Į: "I",
  İ: "I",
  ĩ: "i",
  ī: "i",
  ĭ: "i",
  į: "i",
  ı: "i",
  Ĵ: "J",
  ĵ: "j",
  Ķ: "K",
  ķ: "k",
  ĸ: "k",
  Ĺ: "L",
  Ļ: "L",
  Ľ: "L",
  Ŀ: "L",
  Ł: "L",
  ĺ: "l",
  ļ: "l",
  ľ: "l",
  ŀ: "l",
  ł: "l",
  Ń: "N",
  Ņ: "N",
  Ň: "N",
  Ŋ: "N",
  ń: "n",
  ņ: "n",
  ň: "n",
  ŋ: "n",
  Ō: "O",
  Ŏ: "O",
  Ő: "O",
  ō: "o",
  ŏ: "o",
  ő: "o",
  Ŕ: "R",
  Ŗ: "R",
  Ř: "R",
  ŕ: "r",
  ŗ: "r",
  ř: "r",
  Ś: "S",
  Ŝ: "S",
  Ş: "S",
  Š: "S",
  ś: "s",
  ŝ: "s",
  ş: "s",
  š: "s",
  Ţ: "T",
  Ť: "T",
  Ŧ: "T",
  ţ: "t",
  ť: "t",
  ŧ: "t",
  Ũ: "U",
  Ū: "U",
  Ŭ: "U",
  Ů: "U",
  Ű: "U",
  Ų: "U",
  ũ: "u",
  ū: "u",
  ŭ: "u",
  ů: "u",
  ű: "u",
  ų: "u",
  Ŵ: "W",
  ŵ: "w",
  Ŷ: "Y",
  ŷ: "y",
  Ÿ: "Y",
  Ź: "Z",
  Ż: "Z",
  Ž: "Z",
  ź: "z",
  ż: "z",
  ž: "z",
  Ĳ: "IJ",
  ĳ: "ij",
  Œ: "Oe",
  œ: "oe",
  ŉ: "'n",
  ſ: "s"
}, dN = O0(hN), vN = dN, pN = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, gN = "\\u0300-\\u036f", yN = "\\ufe20-\\ufe2f", CN = "\\u20d0-\\u20ff", mN = gN + yN + CN, _N = "[" + mN + "]", wN = RegExp(_N, "g");
function q2(e) {
  return e = nt(e), e && e.replace(pN, vN).replace(wN, "");
}
var xN = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
function SN(e) {
  return e.match(xN) || [];
}
var bN = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
function TN(e) {
  return bN.test(e);
}
var K2 = "\\ud800-\\udfff", EN = "\\u0300-\\u036f", LN = "\\ufe20-\\ufe2f", AN = "\\u20d0-\\u20ff", RN = EN + LN + AN, j2 = "\\u2700-\\u27bf", Z2 = "a-z\\xdf-\\xf6\\xf8-\\xff", ON = "\\xac\\xb1\\xd7\\xf7", IN = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", MN = "\\u2000-\\u206f", BN = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", Q2 = "A-Z\\xc0-\\xd6\\xd8-\\xde", DN = "\\ufe0e\\ufe0f", J2 = ON + IN + MN + BN, eb = "['’]", E_ = "[" + J2 + "]", $N = "[" + RN + "]", tb = "\\d+", FN = "[" + j2 + "]", rb = "[" + Z2 + "]", nb = "[^" + K2 + J2 + tb + j2 + Z2 + Q2 + "]", PN = "\\ud83c[\\udffb-\\udfff]", NN = "(?:" + $N + "|" + PN + ")", HN = "[^" + K2 + "]", ib = "(?:\\ud83c[\\udde6-\\uddff]){2}", ob = "[\\ud800-\\udbff][\\udc00-\\udfff]", Ja = "[" + Q2 + "]", zN = "\\u200d", L_ = "(?:" + rb + "|" + nb + ")", WN = "(?:" + Ja + "|" + nb + ")", A_ = "(?:" + eb + "(?:d|ll|m|re|s|t|ve))?", R_ = "(?:" + eb + "(?:D|LL|M|RE|S|T|VE))?", ab = NN + "?", lb = "[" + DN + "]?", kN = "(?:" + zN + "(?:" + [HN, ib, ob].join("|") + ")" + lb + ab + ")*", GN = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", UN = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", YN = lb + ab + kN, XN = "(?:" + [FN, ib, ob].join("|") + ")" + YN, VN = RegExp([
  Ja + "?" + rb + "+" + A_ + "(?=" + [E_, Ja, "$"].join("|") + ")",
  WN + "+" + R_ + "(?=" + [E_, Ja + L_, "$"].join("|") + ")",
  Ja + "?" + L_ + "+" + A_,
  Ja + "+" + R_,
  UN,
  GN,
  tb,
  XN
].join("|"), "g");
function qN(e) {
  return e.match(VN) || [];
}
function sb(e, r, t) {
  return e = nt(e), r = t ? void 0 : r, r === void 0 ? TN(e) ? qN(e) : SN(e) : e.match(r) || [];
}
var KN = "['’]", jN = RegExp(KN, "g");
function Rl(e) {
  return function(r) {
    return R0(sb(q2(r).replace(jN, "")), e, "");
  };
}
var ZN = Rl(function(e, r, t) {
  return r = r.toLowerCase(), e + (t ? V2(r) : r);
}), QN = ZN;
function JN() {
  if (!arguments.length)
    return [];
  var e = arguments[0];
  return le(e) ? e : [e];
}
var eH = qt.isFinite, tH = Math.min;
function I0(e) {
  var r = Math[e];
  return function(t, n) {
    if (t = nn(t), n = n == null ? 0 : tH(Be(n), 292), n && eH(t)) {
      var i = (nt(t) + "e").split("e"), o = r(i[0] + "e" + (+i[1] + n));
      return i = (nt(o) + "e").split("e"), +(i[0] + "e" + (+i[1] - n));
    }
    return r(t);
  };
}
var rH = I0("ceil"), nH = rH;
function ub(e) {
  var r = L(e);
  return r.__chain__ = !0, r;
}
var iH = Math.ceil, oH = Math.max;
function aH(e, r, t) {
  (t ? Tr(e, r, t) : r === void 0) ? r = 1 : r = oH(Be(r), 0);
  var n = e == null ? 0 : e.length;
  if (!n || r < 1)
    return [];
  for (var i = 0, o = 0, a = Array(iH(n / r)); i < n; )
    a[o++] = Rn(e, i, i += r);
  return a;
}
function Ma(e, r, t) {
  return e === e && (t !== void 0 && (e = e <= t ? e : t), r !== void 0 && (e = e >= r ? e : r)), e;
}
function ic(e, r, t) {
  return t === void 0 && (t = r, r = void 0), t !== void 0 && (t = nn(t), t = t === t ? t : 0), r !== void 0 && (r = nn(r), r = r === r ? r : 0), Ma(nn(e), r, t);
}
function lH() {
  this.__data__ = new Ki(), this.size = 0;
}
function sH(e) {
  var r = this.__data__, t = r.delete(e);
  return this.size = r.size, t;
}
function uH(e) {
  return this.__data__.get(e);
}
function fH(e) {
  return this.__data__.has(e);
}
var cH = 200;
function hH(e, r) {
  var t = this.__data__;
  if (t instanceof Ki) {
    var n = t.__data__;
    if (!Is || n.length < cH - 1)
      return n.push([e, r]), this.size = ++t.size, this;
    t = this.__data__ = new ji(n);
  }
  return t.set(e, r), this.size = t.size, this;
}
function Yn(e) {
  var r = this.__data__ = new Ki(e);
  this.size = r.size;
}
Yn.prototype.clear = lH;
Yn.prototype.delete = sH;
Yn.prototype.get = uH;
Yn.prototype.has = fH;
Yn.prototype.set = hH;
function fb(e, r) {
  return e && wi(r, Rt(r), e);
}
function dH(e, r) {
  return e && wi(r, Ur(r), e);
}
var cb = typeof exports == "object" && exports && !exports.nodeType && exports, O_ = cb && typeof module == "object" && module && !module.nodeType && module, vH = O_ && O_.exports === cb, I_ = vH ? qt.Buffer : void 0, M_ = I_ ? I_.allocUnsafe : void 0;
function hb(e, r) {
  if (r)
    return e.slice();
  var t = e.length, n = M_ ? M_(t) : new e.constructor(t);
  return e.copy(n), n;
}
function Fo(e, r) {
  for (var t = -1, n = e == null ? 0 : e.length, i = 0, o = []; ++t < n; ) {
    var a = e[t];
    r(a, t, e) && (o[i++] = a);
  }
  return o;
}
function M0() {
  return [];
}
var pH = Object.prototype, gH = pH.propertyIsEnumerable, B_ = Object.getOwnPropertySymbols, yH = B_ ? function(e) {
  return e == null ? [] : (e = Object(e), Fo(B_(e), function(r) {
    return gH.call(e, r);
  }));
} : M0, B0 = yH;
function CH(e, r) {
  return wi(e, B0(e), r);
}
var mH = Object.getOwnPropertySymbols, _H = mH ? function(e) {
  for (var r = []; e; )
    Do(r, B0(e)), e = Nc(e);
  return r;
} : M0, db = _H;
function wH(e, r) {
  return wi(e, db(e), r);
}
function vb(e, r, t) {
  var n = r(e);
  return le(e) ? n : Do(n, t(e));
}
function Qv(e) {
  return vb(e, Rt, B0);
}
function D0(e) {
  return vb(e, Ur, db);
}
var xH = Ra(qt, "DataView"), Jv = xH, SH = Ra(qt, "Promise"), ep = SH, bH = Ra(qt, "Set"), sl = bH, D_ = "[object Map]", TH = "[object Object]", $_ = "[object Promise]", F_ = "[object Set]", P_ = "[object WeakMap]", N_ = "[object DataView]", EH = Aa(Jv), LH = Aa(Is), AH = Aa(ep), RH = Aa(sl), OH = Aa(As), Qo = Ar;
(Jv && Qo(new Jv(new ArrayBuffer(1))) != N_ || Is && Qo(new Is()) != D_ || ep && Qo(ep.resolve()) != $_ || sl && Qo(new sl()) != F_ || As && Qo(new As()) != P_) && (Qo = function(e) {
  var r = Ar(e), t = r == TH ? e.constructor : void 0, n = t ? Aa(t) : "";
  if (n)
    switch (n) {
      case EH:
        return N_;
      case LH:
        return D_;
      case AH:
        return $_;
      case RH:
        return F_;
      case OH:
        return P_;
    }
  return r;
});
var yi = Qo, IH = Object.prototype, MH = IH.hasOwnProperty;
function BH(e) {
  var r = e.length, t = new e.constructor(r);
  return r && typeof e[0] == "string" && MH.call(e, "index") && (t.index = e.index, t.input = e.input), t;
}
var DH = qt.Uint8Array, oc = DH;
function $0(e) {
  var r = new e.constructor(e.byteLength);
  return new oc(r).set(new oc(e)), r;
}
function $H(e, r) {
  var t = r ? $0(e.buffer) : e.buffer;
  return new e.constructor(t, e.byteOffset, e.byteLength);
}
var FH = /\w*$/;
function PH(e) {
  var r = new e.constructor(e.source, FH.exec(e));
  return r.lastIndex = e.lastIndex, r;
}
var H_ = fr ? fr.prototype : void 0, z_ = H_ ? H_.valueOf : void 0;
function NH(e) {
  return z_ ? Object(z_.call(e)) : {};
}
function pb(e, r) {
  var t = r ? $0(e.buffer) : e.buffer;
  return new e.constructor(t, e.byteOffset, e.length);
}
var HH = "[object Boolean]", zH = "[object Date]", WH = "[object Map]", kH = "[object Number]", GH = "[object RegExp]", UH = "[object Set]", YH = "[object String]", XH = "[object Symbol]", VH = "[object ArrayBuffer]", qH = "[object DataView]", KH = "[object Float32Array]", jH = "[object Float64Array]", ZH = "[object Int8Array]", QH = "[object Int16Array]", JH = "[object Int32Array]", ez = "[object Uint8Array]", tz = "[object Uint8ClampedArray]", rz = "[object Uint16Array]", nz = "[object Uint32Array]";
function iz(e, r, t) {
  var n = e.constructor;
  switch (r) {
    case VH:
      return $0(e);
    case HH:
    case zH:
      return new n(+e);
    case qH:
      return $H(e, t);
    case KH:
    case jH:
    case ZH:
    case QH:
    case JH:
    case ez:
    case tz:
    case rz:
    case nz:
      return pb(e, t);
    case WH:
      return new n();
    case kH:
    case YH:
      return new n(e);
    case GH:
      return PH(e);
    case UH:
      return new n();
    case XH:
      return NH(e);
  }
}
function gb(e) {
  return typeof e.constructor == "function" && !Qs(e) ? Sl(Nc(e)) : {};
}
var oz = "[object Map]";
function az(e) {
  return It(e) && yi(e) == oz;
}
var W_ = An && An.isMap, lz = W_ ? un(W_) : az, yb = lz, sz = "[object Set]";
function uz(e) {
  return It(e) && yi(e) == sz;
}
var k_ = An && An.isSet, fz = k_ ? un(k_) : uz, Cb = fz, cz = 1, hz = 2, dz = 4, mb = "[object Arguments]", vz = "[object Array]", pz = "[object Boolean]", gz = "[object Date]", yz = "[object Error]", _b = "[object Function]", Cz = "[object GeneratorFunction]", mz = "[object Map]", _z = "[object Number]", wb = "[object Object]", wz = "[object RegExp]", xz = "[object Set]", Sz = "[object String]", bz = "[object Symbol]", Tz = "[object WeakMap]", Ez = "[object ArrayBuffer]", Lz = "[object DataView]", Az = "[object Float32Array]", Rz = "[object Float64Array]", Oz = "[object Int8Array]", Iz = "[object Int16Array]", Mz = "[object Int32Array]", Bz = "[object Uint8Array]", Dz = "[object Uint8ClampedArray]", $z = "[object Uint16Array]", Fz = "[object Uint32Array]", yt = {};
yt[mb] = yt[vz] = yt[Ez] = yt[Lz] = yt[pz] = yt[gz] = yt[Az] = yt[Rz] = yt[Oz] = yt[Iz] = yt[Mz] = yt[mz] = yt[_z] = yt[wb] = yt[wz] = yt[xz] = yt[Sz] = yt[bz] = yt[Bz] = yt[Dz] = yt[$z] = yt[Fz] = !0;
yt[yz] = yt[_b] = yt[Tz] = !1;
function bn(e, r, t, n, i, o) {
  var a, l = r & cz, s = r & hz, f = r & dz;
  if (t && (a = i ? t(e, n, i, o) : t(e)), a !== void 0)
    return a;
  if (!rt(e))
    return e;
  var h = le(e);
  if (h) {
    if (a = BH(e), !l)
      return zr(e, a);
  } else {
    var d = yi(e), v = d == _b || d == Cz;
    if (Ro(e))
      return hb(e, l);
    if (d == wb || d == mb || v && !i) {
      if (a = s || v ? {} : gb(e), !l)
        return s ? wH(e, dH(a, e)) : CH(e, fb(a, e));
    } else {
      if (!yt[d])
        return i ? e : {};
      a = iz(e, d, l);
    }
  }
  o || (o = new Yn());
  var g = o.get(e);
  if (g)
    return g;
  o.set(e, a), Cb(e) ? e.forEach(function(_) {
    a.add(bn(_, r, t, _, e, o));
  }) : yb(e) && e.forEach(function(_, w) {
    a.set(w, bn(_, r, t, w, e, o));
  });
  var y = f ? s ? D0 : Qv : s ? Ur : Rt, C = h ? void 0 : y(e);
  return In(C || e, function(_, w) {
    C && (w = _, _ = e[w]), Zs(a, w, bn(_, r, t, w, e, o));
  }), a;
}
var Pz = 4;
function Ol(e) {
  return bn(e, Pz);
}
var Nz = 1, Hz = 4;
function tp(e) {
  return bn(e, Nz | Hz);
}
var zz = 1, Wz = 4;
function kz(e, r) {
  return r = typeof r == "function" ? r : void 0, bn(e, zz | Wz, r);
}
var Gz = 4;
function Uz(e, r) {
  return r = typeof r == "function" ? r : void 0, bn(e, Gz, r);
}
function Yz() {
  return new Ln(this.value(), this.__chain__);
}
function Xn(e) {
  for (var r = -1, t = e == null ? 0 : e.length, n = 0, i = []; ++r < t; ) {
    var o = e[r];
    o && (i[n++] = o);
  }
  return i;
}
function tl() {
  var e = arguments.length;
  if (!e)
    return [];
  for (var r = Array(e - 1), t = arguments[0], n = e; n--; )
    r[n - 1] = arguments[n];
  return Do(le(t) ? zr(t) : [t], rr(r, 1));
}
var Xz = "__lodash_hash_undefined__";
function Vz(e) {
  return this.__data__.set(e, Xz), this;
}
function qz(e) {
  return this.__data__.has(e);
}
function _a(e) {
  var r = -1, t = e == null ? 0 : e.length;
  for (this.__data__ = new ji(); ++r < t; )
    this.add(e[r]);
}
_a.prototype.add = _a.prototype.push = Vz;
_a.prototype.has = qz;
function F0(e, r) {
  for (var t = -1, n = e == null ? 0 : e.length; ++t < n; )
    if (r(e[t], t, e))
      return !0;
  return !1;
}
function Ms(e, r) {
  return e.has(r);
}
var Kz = 1, jz = 2;
function xb(e, r, t, n, i, o) {
  var a = t & Kz, l = e.length, s = r.length;
  if (l != s && !(a && s > l))
    return !1;
  var f = o.get(e), h = o.get(r);
  if (f && h)
    return f == r && h == e;
  var d = -1, v = !0, g = t & jz ? new _a() : void 0;
  for (o.set(e, r), o.set(r, e); ++d < l; ) {
    var y = e[d], C = r[d];
    if (n)
      var _ = a ? n(C, y, d, r, e, o) : n(y, C, d, e, r, o);
    if (_ !== void 0) {
      if (_)
        continue;
      v = !1;
      break;
    }
    if (g) {
      if (!F0(r, function(w, x) {
        if (!Ms(g, x) && (y === w || i(y, w, t, n, o)))
          return g.push(x);
      })) {
        v = !1;
        break;
      }
    } else if (!(y === C || i(y, C, t, n, o))) {
      v = !1;
      break;
    }
  }
  return o.delete(e), o.delete(r), v;
}
function P0(e) {
  var r = -1, t = Array(e.size);
  return e.forEach(function(n, i) {
    t[++r] = [i, n];
  }), t;
}
function Hc(e) {
  var r = -1, t = Array(e.size);
  return e.forEach(function(n) {
    t[++r] = n;
  }), t;
}
var Zz = 1, Qz = 2, Jz = "[object Boolean]", eW = "[object Date]", tW = "[object Error]", rW = "[object Map]", nW = "[object Number]", iW = "[object RegExp]", oW = "[object Set]", aW = "[object String]", lW = "[object Symbol]", sW = "[object ArrayBuffer]", uW = "[object DataView]", G_ = fr ? fr.prototype : void 0, ev = G_ ? G_.valueOf : void 0;
function fW(e, r, t, n, i, o, a) {
  switch (t) {
    case uW:
      if (e.byteLength != r.byteLength || e.byteOffset != r.byteOffset)
        return !1;
      e = e.buffer, r = r.buffer;
    case sW:
      return !(e.byteLength != r.byteLength || !o(new oc(e), new oc(r)));
    case Jz:
    case eW:
    case nW:
      return Jn(+e, +r);
    case tW:
      return e.name == r.name && e.message == r.message;
    case iW:
    case aW:
      return e == r + "";
    case rW:
      var l = P0;
    case oW:
      var s = n & Zz;
      if (l || (l = Hc), e.size != r.size && !s)
        return !1;
      var f = a.get(e);
      if (f)
        return f == r;
      n |= Qz, a.set(e, r);
      var h = xb(l(e), l(r), n, i, o, a);
      return a.delete(e), h;
    case lW:
      if (ev)
        return ev.call(e) == ev.call(r);
  }
  return !1;
}
var cW = 1, hW = Object.prototype, dW = hW.hasOwnProperty;
function vW(e, r, t, n, i, o) {
  var a = t & cW, l = Qv(e), s = l.length, f = Qv(r), h = f.length;
  if (s != h && !a)
    return !1;
  for (var d = s; d--; ) {
    var v = l[d];
    if (!(a ? v in r : dW.call(r, v)))
      return !1;
  }
  var g = o.get(e), y = o.get(r);
  if (g && y)
    return g == r && y == e;
  var C = !0;
  o.set(e, r), o.set(r, e);
  for (var _ = a; ++d < s; ) {
    v = l[d];
    var w = e[v], x = r[v];
    if (n)
      var S = a ? n(x, w, v, r, e, o) : n(w, x, v, e, r, o);
    if (!(S === void 0 ? w === x || i(w, x, t, n, o) : S)) {
      C = !1;
      break;
    }
    _ || (_ = v == "constructor");
  }
  if (C && !_) {
    var T = e.constructor, R = r.constructor;
    T != R && "constructor" in e && "constructor" in r && !(typeof T == "function" && T instanceof T && typeof R == "function" && R instanceof R) && (C = !1);
  }
  return o.delete(e), o.delete(r), C;
}
var pW = 1, U_ = "[object Arguments]", Y_ = "[object Array]", wf = "[object Object]", gW = Object.prototype, X_ = gW.hasOwnProperty;
function yW(e, r, t, n, i, o) {
  var a = le(e), l = le(r), s = a ? Y_ : yi(e), f = l ? Y_ : yi(r);
  s = s == U_ ? wf : s, f = f == U_ ? wf : f;
  var h = s == wf, d = f == wf, v = s == f;
  if (v && Ro(e)) {
    if (!Ro(r))
      return !1;
    a = !0, h = !1;
  }
  if (v && !h)
    return o || (o = new Yn()), a || Ll(e) ? xb(e, r, t, n, i, o) : fW(e, r, s, t, n, i, o);
  if (!(t & pW)) {
    var g = h && X_.call(e, "__wrapped__"), y = d && X_.call(r, "__wrapped__");
    if (g || y) {
      var C = g ? e.value() : e, _ = y ? r.value() : r;
      return o || (o = new Yn()), i(C, _, t, n, o);
    }
  }
  return v ? (o || (o = new Yn()), vW(e, r, t, n, i, o)) : !1;
}
function eu(e, r, t, n, i) {
  return e === r ? !0 : e == null || r == null || !It(e) && !It(r) ? e !== e && r !== r : yW(e, r, t, n, eu, i);
}
var CW = 1, mW = 2;
function N0(e, r, t, n) {
  var i = t.length, o = i, a = !n;
  if (e == null)
    return !o;
  for (e = Object(e); i--; ) {
    var l = t[i];
    if (a && l[2] ? l[1] !== e[l[0]] : !(l[0] in e))
      return !1;
  }
  for (; ++i < o; ) {
    l = t[i];
    var s = l[0], f = e[s], h = l[1];
    if (a && l[2]) {
      if (f === void 0 && !(s in e))
        return !1;
    } else {
      var d = new Yn();
      if (n)
        var v = n(f, h, s, e, r, d);
      if (!(v === void 0 ? eu(h, f, CW | mW, n, d) : v))
        return !1;
    }
  }
  return !0;
}
function Sb(e) {
  return e === e && !rt(e);
}
function H0(e) {
  for (var r = Rt(e), t = r.length; t--; ) {
    var n = r[t], i = e[n];
    r[t] = [n, i, Sb(i)];
  }
  return r;
}
function bb(e, r) {
  return function(t) {
    return t == null ? !1 : t[e] === r && (r !== void 0 || e in Object(t));
  };
}
function Tb(e) {
  var r = H0(e);
  return r.length == 1 && r[0][2] ? bb(r[0][0], r[0][1]) : function(t) {
    return t === e || N0(t, e, r);
  };
}
function _W(e, r) {
  return e != null && r in Object(e);
}
function Eb(e, r, t) {
  r = Bo(r, e);
  for (var n = -1, i = r.length, o = !1; ++n < i; ) {
    var a = xi(r[n]);
    if (!(o = e != null && t(e, a)))
      break;
    e = e[a];
  }
  return o || ++n != i ? o : (i = e == null ? 0 : e.length, !!i && $c(i) && Xi(a, i) && (le(e) || Ca(e)));
}
function wa(e, r) {
  return e != null && Eb(e, r, _W);
}
var wW = 1, xW = 2;
function Lb(e, r) {
  return x0(e) && Sb(r) ? bb(xi(e), r) : function(t) {
    var n = ge(t, e);
    return n === void 0 && n === r ? wa(t, e) : eu(r, n, wW | xW);
  };
}
function z0(e) {
  return function(r) {
    return r == null ? void 0 : r[e];
  };
}
function SW(e) {
  return function(r) {
    return Ia(r, e);
  };
}
function Ab(e) {
  return x0(e) ? z0(xi(e)) : SW(e);
}
function Re(e) {
  return typeof e == "function" ? e : e == null ? dr : typeof e == "object" ? le(e) ? Lb(e[0], e[1]) : Tb(e) : Ab(e);
}
var bW = "Expected a function";
function Rb(e) {
  var r = e == null ? 0 : e.length, t = Re;
  return e = r ? Tt(e, function(n) {
    if (typeof n[1] != "function")
      throw new TypeError(bW);
    return [t(n[0]), n[1]];
  }) : [], Ne(function(n) {
    for (var i = -1; ++i < r; ) {
      var o = e[i];
      if (sn(o[0], this, n))
        return sn(o[1], this, n);
    }
  });
}
function Ob(e, r, t) {
  var n = t.length;
  if (e == null)
    return !n;
  for (e = Object(e); n--; ) {
    var i = t[n], o = r[i], a = e[i];
    if (a === void 0 && !(i in e) || !o(a))
      return !1;
  }
  return !0;
}
function TW(e) {
  var r = Rt(e);
  return function(t) {
    return Ob(t, e, r);
  };
}
var EW = 1;
function LW(e) {
  return TW(bn(e, EW));
}
function AW(e, r) {
  return r == null || Ob(e, r, Rt(r));
}
function RW(e, r, t, n) {
  for (var i = -1, o = e == null ? 0 : e.length; ++i < o; ) {
    var a = e[i];
    r(n, a, t(a), e);
  }
  return n;
}
function Ib(e) {
  return function(r, t, n) {
    for (var i = -1, o = Object(r), a = n(r), l = a.length; l--; ) {
      var s = a[e ? l : ++i];
      if (t(o[s], s, o) === !1)
        break;
    }
    return r;
  };
}
var OW = Ib(), W0 = OW;
function Si(e, r) {
  return e && W0(e, r, Rt);
}
function Mb(e, r) {
  return function(t, n) {
    if (t == null)
      return t;
    if (!Gr(t))
      return e(t, n);
    for (var i = t.length, o = r ? i : -1, a = Object(t); (r ? o-- : ++o < i) && n(a[o], o, a) !== !1; )
      ;
    return t;
  };
}
var IW = Mb(Si), Po = IW;
function MW(e, r, t, n) {
  return Po(e, function(i, o, a) {
    r(n, i, t(i), a);
  }), n;
}
function zc(e, r) {
  return function(t, n) {
    var i = le(t) ? RW : MW, o = r ? r() : {};
    return i(t, e, Re(n), o);
  };
}
var BW = Object.prototype, DW = BW.hasOwnProperty, $W = zc(function(e, r, t) {
  DW.call(e, t) ? ++e[t] : qi(e, t, 1);
}), FW = $W;
function PW(e, r) {
  var t = Sl(e);
  return r == null ? t : fb(t, r);
}
var NW = 8;
function k0(e, r, t) {
  r = t ? void 0 : r;
  var n = Vi(e, NW, void 0, void 0, void 0, void 0, void 0, r);
  return n.placeholder = k0.placeholder, n;
}
k0.placeholder = {};
var HW = 16;
function G0(e, r, t) {
  r = t ? void 0 : r;
  var n = Vi(e, HW, void 0, void 0, void 0, void 0, void 0, r);
  return n.placeholder = G0.placeholder, n;
}
G0.placeholder = {};
var zW = function() {
  return qt.Date.now();
}, $f = zW, WW = "Expected a function", kW = Math.max, GW = Math.min;
function Bs(e, r, t) {
  var n, i, o, a, l, s, f = 0, h = !1, d = !1, v = !0;
  if (typeof e != "function")
    throw new TypeError(WW);
  r = nn(r) || 0, rt(t) && (h = !!t.leading, d = "maxWait" in t, o = d ? kW(nn(t.maxWait) || 0, r) : o, v = "trailing" in t ? !!t.trailing : v);
  function g(B) {
    var $ = n, N = i;
    return n = i = void 0, f = B, a = e.apply(N, $), a;
  }
  function y(B) {
    return f = B, l = setTimeout(w, r), h ? g(B) : a;
  }
  function C(B) {
    var $ = B - s, N = B - f, z = r - $;
    return d ? GW(z, o - N) : z;
  }
  function _(B) {
    var $ = B - s, N = B - f;
    return s === void 0 || $ >= r || $ < 0 || d && N >= o;
  }
  function w() {
    var B = $f();
    if (_(B))
      return x(B);
    l = setTimeout(w, C(B));
  }
  function x(B) {
    return l = void 0, v && n ? g(B) : (n = i = void 0, a);
  }
  function S() {
    l !== void 0 && clearTimeout(l), f = 0, n = s = i = l = void 0;
  }
  function T() {
    return l === void 0 ? a : x($f());
  }
  function R() {
    var B = $f(), $ = _(B);
    if (n = arguments, i = this, s = B, $) {
      if (l === void 0)
        return y(s);
      if (d)
        return clearTimeout(l), l = setTimeout(w, r), g(s);
    }
    return l === void 0 && (l = setTimeout(w, r)), a;
  }
  return R.cancel = S, R.flush = T, R;
}
function UW(e, r) {
  return e == null || e !== e ? r : e;
}
var Bb = Object.prototype, YW = Bb.hasOwnProperty, XW = Ne(function(e, r) {
  e = Object(e);
  var t = -1, n = r.length, i = n > 2 ? r[2] : void 0;
  for (i && Tr(r[0], r[1], i) && (n = 1); ++t < n; )
    for (var o = r[t], a = Ur(o), l = -1, s = a.length; ++l < s; ) {
      var f = a[l], h = e[f];
      (h === void 0 || Jn(h, Bb[f]) && !YW.call(e, f)) && (e[f] = o[f]);
    }
  return e;
}), VW = XW;
function rp(e, r, t) {
  (t !== void 0 && !Jn(e[r], t) || t === void 0 && !(r in e)) && qi(e, r, t);
}
function Ft(e) {
  return It(e) && Gr(e);
}
function np(e, r) {
  if (!(r === "constructor" && typeof e[r] == "function") && r != "__proto__")
    return e[r];
}
function Db(e) {
  return wi(e, Ur(e));
}
function qW(e, r, t, n, i, o, a) {
  var l = np(e, t), s = np(r, t), f = a.get(s);
  if (f) {
    rp(e, t, f);
    return;
  }
  var h = o ? o(l, s, t + "", e, r, a) : void 0, d = h === void 0;
  if (d) {
    var v = le(s), g = !v && Ro(s), y = !v && !g && Ll(s);
    h = s, v || g || y ? le(l) ? h = l : Ft(l) ? h = zr(l) : g ? (d = !1, h = hb(s, !0)) : y ? (d = !1, h = pb(s, !0)) : h = [] : Js(s) || Ca(s) ? (h = l, Ca(l) ? h = Db(l) : (!rt(l) || Vt(l)) && (h = gb(s))) : d = !1;
  }
  d && (a.set(s, h), i(h, s, n, o, a), a.delete(s)), rp(e, t, h);
}
function Wc(e, r, t, n, i) {
  e !== r && W0(r, function(o, a) {
    if (i || (i = new Yn()), rt(o))
      qW(e, r, a, t, Wc, n, i);
    else {
      var l = n ? n(np(e, a), o, a + "", e, r, i) : void 0;
      l === void 0 && (l = o), rp(e, a, l);
    }
  }, Ur);
}
function $b(e, r, t, n, i, o) {
  return rt(e) && rt(r) && (o.set(r, e), Wc(e, r, void 0, $b, o), o.delete(r)), e;
}
var KW = El(function(e, r, t, n) {
  Wc(e, r, t, n);
}), U0 = KW, jW = Ne(function(e) {
  return e.push(void 0, $b), sn(U0, void 0, e);
}), ZW = jW, QW = "Expected a function";
function Fb(e, r, t) {
  if (typeof e != "function")
    throw new TypeError(QW);
  return setTimeout(function() {
    e.apply(void 0, t);
  }, r);
}
var JW = Ne(function(e, r) {
  return Fb(e, 1, r);
}), ek = JW, tk = Ne(function(e, r, t) {
  return Fb(e, nn(r) || 0, t);
}), rk = tk;
function Y0(e, r, t) {
  for (var n = -1, i = e == null ? 0 : e.length; ++n < i; )
    if (t(r, e[n]))
      return !0;
  return !1;
}
var nk = 200;
function tu(e, r, t, n) {
  var i = -1, o = Bc, a = !0, l = e.length, s = [], f = r.length;
  if (!l)
    return s;
  t && (r = Tt(r, un(t))), n ? (o = Y0, a = !1) : r.length >= nk && (o = Ms, a = !1, r = new _a(r));
  e:
    for (; ++i < l; ) {
      var h = e[i], d = t == null ? h : t(h);
      if (h = n || h !== 0 ? h : 0, a && d === d) {
        for (var v = f; v--; )
          if (r[v] === d)
            continue e;
        s.push(h);
      } else o(r, d, n) || s.push(h);
    }
  return s;
}
var ik = Ne(function(e, r) {
  return Ft(e) ? tu(e, rr(r, 1, Ft, !0)) : [];
}), Pb = ik;
function ut(e) {
  var r = e == null ? 0 : e.length;
  return r ? e[r - 1] : void 0;
}
var ok = Ne(function(e, r) {
  var t = ut(r);
  return Ft(t) && (t = void 0), Ft(e) ? tu(e, rr(r, 1, Ft, !0), Re(t)) : [];
}), ak = ok, lk = Ne(function(e, r) {
  var t = ut(r);
  return Ft(t) && (t = void 0), Ft(e) ? tu(e, rr(r, 1, Ft, !0), void 0, t) : [];
}), Nb = lk, sk = Rc(function(e, r) {
  return e / r;
}, 1), uk = sk;
function fk(e, r, t) {
  var n = e == null ? 0 : e.length;
  return n ? (r = t || r === void 0 ? 1 : Be(r), Rn(e, r < 0 ? 0 : r, n)) : [];
}
function ck(e, r, t) {
  var n = e == null ? 0 : e.length;
  return n ? (r = t || r === void 0 ? 1 : Be(r), r = n - r, Rn(e, 0, r < 0 ? 0 : r)) : [];
}
function kc(e, r, t, n) {
  for (var i = e.length, o = n ? i : -1; (n ? o-- : ++o < i) && r(e[o], o, e); )
    ;
  return t ? Rn(e, n ? 0 : o, n ? o + 1 : i) : Rn(e, n ? o + 1 : 0, n ? i : o);
}
function hk(e, r) {
  return e && e.length ? kc(e, Re(r), !0, !0) : [];
}
function dk(e, r) {
  return e && e.length ? kc(e, Re(r), !0) : [];
}
function bi(e) {
  return typeof e == "function" ? e : dr;
}
function xe(e, r) {
  var t = le(e) ? In : Po;
  return t(e, bi(r));
}
function vk(e, r) {
  for (var t = e == null ? 0 : e.length; t-- && r(e[t], t, e) !== !1; )
    ;
  return e;
}
var pk = Ib(!0), Hb = pk;
function X0(e, r) {
  return e && Hb(e, r, Rt);
}
var gk = Mb(X0, !0), zb = gk;
function V_(e, r) {
  var t = le(e) ? vk : zb;
  return t(e, bi(r));
}
function Wb(e, r, t) {
  e = nt(e), r = ln(r);
  var n = e.length;
  t = t === void 0 ? n : Ma(Be(t), 0, n);
  var i = t;
  return t -= r.length, t >= 0 && e.slice(t, i) == r;
}
function yk(e, r) {
  return Tt(r, function(t) {
    return [t, e[t]];
  });
}
function Ck(e) {
  var r = -1, t = Array(e.size);
  return e.forEach(function(n) {
    t[++r] = [n, n];
  }), t;
}
var mk = "[object Map]", _k = "[object Set]";
function kb(e) {
  return function(r) {
    var t = yi(r);
    return t == mk ? P0(r) : t == _k ? Ck(r) : yk(r, e(r));
  };
}
var wk = kb(Rt), q_ = wk, xk = kb(Ur), K_ = xk, Sk = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
}, bk = O0(Sk), Tk = bk, Gb = /[&<>"']/g, Ek = RegExp(Gb.source);
function V0(e) {
  return e = nt(e), e && Ek.test(e) ? e.replace(Gb, Tk) : e;
}
var Ub = /[\\^$.*+?()[\]{}|]/g, Lk = RegExp(Ub.source);
function Ak(e) {
  return e = nt(e), e && Lk.test(e) ? e.replace(Ub, "\\$&") : e;
}
function Yb(e, r) {
  for (var t = -1, n = e == null ? 0 : e.length; ++t < n; )
    if (!r(e[t], t, e))
      return !1;
  return !0;
}
function Rk(e, r) {
  var t = !0;
  return Po(e, function(n, i, o) {
    return t = !!r(n, i, o), t;
  }), t;
}
function Gc(e, r, t) {
  var n = le(e) ? Yb : Rk;
  return t && Tr(e, r, t) && (r = void 0), n(e, Re(r));
}
var Ok = 4294967295;
function Xb(e) {
  return e ? Ma(Be(e), 0, Ok) : 0;
}
function Ik(e, r, t, n) {
  var i = e.length;
  for (t = Be(t), t < 0 && (t = -t > i ? 0 : i + t), n = n === void 0 || n > i ? i : Be(n), n < 0 && (n += i), n = t > n ? 0 : Xb(n); t < n; )
    e[t++] = r;
  return e;
}
function Mk(e, r, t, n) {
  var i = e == null ? 0 : e.length;
  return i ? (t && typeof t != "number" && Tr(e, r, t) && (t = 0, n = i), Ik(e, r, t, n)) : [];
}
function Vb(e, r) {
  var t = [];
  return Po(e, function(n, i, o) {
    r(n, i, o) && t.push(n);
  }), t;
}
function Qi(e, r) {
  var t = le(e) ? Fo : Vb;
  return t(e, Re(r));
}
function qb(e) {
  return function(r, t, n) {
    var i = Object(r);
    if (!Gr(r)) {
      var o = Re(t);
      r = Rt(r), t = function(l) {
        return o(i[l], l, i);
      };
    }
    var a = e(r, t, n);
    return a > -1 ? i[o ? r[a] : a] : void 0;
  };
}
var Bk = Math.max;
function gl(e, r, t) {
  var n = e == null ? 0 : e.length;
  if (!n)
    return -1;
  var i = t == null ? 0 : Be(t);
  return i < 0 && (i = Bk(n + i, 0)), Mc(e, Re(r), i);
}
var Dk = qb(gl), cr = Dk;
function Kb(e, r, t) {
  var n;
  return t(e, function(i, o, a) {
    if (r(i, o, a))
      return n = o, !1;
  }), n;
}
function $k(e, r) {
  return Kb(e, Re(r), Si);
}
var Fk = Math.max, Pk = Math.min;
function jb(e, r, t) {
  var n = e == null ? 0 : e.length;
  if (!n)
    return -1;
  var i = n - 1;
  return t !== void 0 && (i = Be(t), i = t < 0 ? Fk(n + i, 0) : Pk(i, n - 1)), Mc(e, Re(r), i, !0);
}
var Nk = qb(jb), Uc = Nk;
function Hk(e, r) {
  return Kb(e, Re(r), X0);
}
function xa(e) {
  return e && e.length ? e[0] : void 0;
}
function Zb(e, r) {
  var t = -1, n = Gr(e) ? Array(e.length) : [];
  return Po(e, function(i, o, a) {
    n[++t] = r(i, o, a);
  }), n;
}
function We(e, r) {
  var t = le(e) ? Tt : Zb;
  return t(e, Re(r));
}
function ru(e, r) {
  return rr(We(e, r), 1);
}
var zk = 1 / 0;
function Wk(e, r) {
  return rr(We(e, r), zk);
}
function kk(e, r, t) {
  return t = t === void 0 ? 1 : Be(t), rr(We(e, r), t);
}
var Gk = 1 / 0;
function Qb(e) {
  var r = e == null ? 0 : e.length;
  return r ? rr(e, Gk) : [];
}
function Uk(e, r) {
  var t = e == null ? 0 : e.length;
  return t ? (r = r === void 0 ? 1 : Be(r), rr(e, r)) : [];
}
var Yk = 512;
function Xk(e) {
  return Vi(e, Yk);
}
var Vk = I0("floor"), qk = Vk, Kk = "Expected a function", jk = 8, Zk = 32, Qk = 128, Jk = 256;
function Jb(e) {
  return Zi(function(r) {
    var t = r.length, n = t, i = Ln.prototype.thru;
    for (e && r.reverse(); n--; ) {
      var o = r[n];
      if (typeof o != "function")
        throw new TypeError(Kk);
      if (i && !a && Df(o) == "wrapper")
        var a = new Ln([], !0);
    }
    for (n = a ? n : t; ++n < t; ) {
      o = r[n];
      var l = Df(o), s = l == "wrapper" ? y0(o) : void 0;
      s && Kv(s[0]) && s[1] == (Qk | jk | Zk | Jk) && !s[4].length && s[9] == 1 ? a = a[Df(s[0])].apply(a, s[3]) : a = o.length == 1 && Kv(o) ? a[l]() : a.thru(o);
    }
    return function() {
      var f = arguments, h = f[0];
      if (a && f.length == 1 && le(h))
        return a.plant(h).value();
      for (var d = 0, v = t ? r[d].apply(this, f) : h; ++d < t; )
        v = r[d].call(this, v);
      return v;
    };
  });
}
var eG = Jb(), tG = eG, rG = Jb(!0), nG = rG;
function eT(e, r) {
  return e == null ? e : W0(e, bi(r), Ur);
}
function iG(e, r) {
  return e == null ? e : Hb(e, bi(r), Ur);
}
function oG(e, r) {
  return e && Si(e, bi(r));
}
function aG(e, r) {
  return e && X0(e, bi(r));
}
function lG(e) {
  for (var r = -1, t = e == null ? 0 : e.length, n = {}; ++r < t; ) {
    var i = e[r];
    n[i[0]] = i[1];
  }
  return n;
}
function Yc(e, r) {
  return Fo(r, function(t) {
    return Vt(e[t]);
  });
}
function sG(e) {
  return e == null ? [] : Yc(e, Rt(e));
}
function uG(e) {
  return e == null ? [] : Yc(e, Ur(e));
}
var fG = Object.prototype, cG = fG.hasOwnProperty, hG = zc(function(e, r, t) {
  cG.call(e, t) ? e[t].push(r) : qi(e, t, [r]);
}), dG = hG;
function q0(e, r) {
  return e > r;
}
function Xc(e) {
  return function(r, t) {
    return typeof r == "string" && typeof t == "string" || (r = nn(r), t = nn(t)), e(r, t);
  };
}
var vG = Xc(q0), pG = vG, gG = Xc(function(e, r) {
  return e >= r;
}), yG = gG, CG = Object.prototype, mG = CG.hasOwnProperty;
function _G(e, r) {
  return e != null && mG.call(e, r);
}
function ip(e, r) {
  return e != null && Eb(e, r, _G);
}
var wG = Math.max, xG = Math.min;
function SG(e, r, t) {
  return e >= xG(r, t) && e < wG(r, t);
}
function op(e, r, t) {
  return r = ki(r), t === void 0 ? (t = r, r = 0) : t = ki(t), e = nn(e), SG(e, r, t);
}
var bG = "[object String]";
function Il(e) {
  return typeof e == "string" || !le(e) && It(e) && Ar(e) == bG;
}
function K0(e, r) {
  return Tt(r, function(t) {
    return e[t];
  });
}
function Ji(e) {
  return e == null ? [] : K0(e, Rt(e));
}
var TG = Math.max;
function Sr(e, r, t, n) {
  e = Gr(e) ? e : Ji(e), t = t && !n ? Be(t) : 0;
  var i = e.length;
  return t < 0 && (t = TG(i + t, 0)), Il(e) ? t <= i && e.indexOf(r, t) > -1 : !!i && bl(e, r, t) > -1;
}
var EG = Math.max;
function Vc(e, r, t) {
  var n = e == null ? 0 : e.length;
  if (!n)
    return -1;
  var i = t == null ? 0 : Be(t);
  return i < 0 && (i = EG(n + i, 0)), bl(e, r, i);
}
function LG(e) {
  var r = e == null ? 0 : e.length;
  return r ? Rn(e, 0, -1) : [];
}
var AG = Math.min;
function j0(e, r, t) {
  for (var n = t ? Y0 : Bc, i = e[0].length, o = e.length, a = o, l = Array(o), s = 1 / 0, f = []; a--; ) {
    var h = e[a];
    a && r && (h = Tt(h, un(r))), s = AG(h.length, s), l[a] = !t && (r || i >= 120 && h.length >= 120) ? new _a(a && h) : void 0;
  }
  h = e[0];
  var d = -1, v = l[0];
  e:
    for (; ++d < i && f.length < s; ) {
      var g = h[d], y = r ? r(g) : g;
      if (g = t || g !== 0 ? g : 0, !(v ? Ms(v, y) : n(f, y, t))) {
        for (a = o; --a; ) {
          var C = l[a];
          if (!(C ? Ms(C, y) : n(e[a], y, t)))
            continue e;
        }
        v && v.push(y), f.push(g);
      }
    }
  return f;
}
function Z0(e) {
  return Ft(e) ? e : [];
}
var RG = Ne(function(e) {
  var r = Tt(e, Z0);
  return r.length && r[0] === e[0] ? j0(r) : [];
}), tT = RG, OG = Ne(function(e) {
  var r = ut(e), t = Tt(e, Z0);
  return r === ut(t) ? r = void 0 : t.pop(), t.length && t[0] === e[0] ? j0(t, Re(r)) : [];
}), IG = OG, MG = Ne(function(e) {
  var r = ut(e), t = Tt(e, Z0);
  return r = typeof r == "function" ? r : void 0, r && t.pop(), t.length && t[0] === e[0] ? j0(t, void 0, r) : [];
}), BG = MG;
function DG(e, r, t, n) {
  return Si(e, function(i, o, a) {
    r(n, t(i), o, a);
  }), n;
}
function rT(e, r) {
  return function(t, n) {
    return DG(t, e, r(n), {});
  };
}
var $G = Object.prototype, FG = $G.toString, PG = rT(function(e, r, t) {
  r != null && typeof r.toString != "function" && (r = FG.call(r)), e[r] = t;
}, ll(dr)), NG = PG, nT = Object.prototype, HG = nT.hasOwnProperty, zG = nT.toString, WG = rT(function(e, r, t) {
  r != null && typeof r.toString != "function" && (r = zG.call(r)), HG.call(e, r) ? e[r].push(t) : e[r] = [t];
}, Re), kG = WG;
function iT(e, r) {
  return r.length < 2 ? e : Ia(e, Rn(r, 0, -1));
}
function nu(e, r, t) {
  r = Bo(r, e), e = iT(e, r);
  var n = e == null ? e : e[xi(ut(r))];
  return n == null ? void 0 : sn(n, e, t);
}
var GG = Ne(nu), UG = GG, YG = Ne(function(e, r, t) {
  var n = -1, i = typeof r == "function", o = Gr(e) ? Array(e.length) : [];
  return Po(e, function(a) {
    o[++n] = i ? sn(r, a, t) : nu(a, r, t);
  }), o;
}), XG = YG, VG = "[object ArrayBuffer]";
function qG(e) {
  return It(e) && Ar(e) == VG;
}
var j_ = An && An.isArrayBuffer, KG = j_ ? un(j_) : qG, jG = KG, ZG = "[object Boolean]";
function ui(e) {
  return e === !0 || e === !1 || It(e) && Ar(e) == ZG;
}
var QG = "[object Date]";
function JG(e) {
  return It(e) && Ar(e) == QG;
}
var Z_ = An && An.isDate, eU = Z_ ? un(Z_) : JG, tU = eU;
function rU(e) {
  return It(e) && e.nodeType === 1 && !Js(e);
}
var nU = "[object Map]", iU = "[object Set]", oU = Object.prototype, aU = oU.hasOwnProperty;
function Q(e) {
  if (e == null)
    return !0;
  if (Gr(e) && (le(e) || typeof e == "string" || typeof e.splice == "function" || Ro(e) || Ll(e) || Ca(e)))
    return !e.length;
  var r = yi(e);
  if (r == nU || r == iU)
    return !e.size;
  if (Qs(e))
    return !w0(e).length;
  for (var t in e)
    if (aU.call(e, t))
      return !1;
  return !0;
}
function tr(e, r) {
  return eu(e, r);
}
function lU(e, r, t) {
  t = typeof t == "function" ? t : void 0;
  var n = t ? t(e, r) : void 0;
  return n === void 0 ? eu(e, r, void 0, t) : !!n;
}
var sU = qt.isFinite;
function uU(e) {
  return typeof e == "number" && sU(e);
}
function oT(e) {
  return typeof e == "number" && e == Be(e);
}
function fU(e, r) {
  return e === r || N0(e, r, H0(r));
}
function cU(e, r, t) {
  return t = typeof t == "function" ? t : void 0, N0(e, r, H0(r), t);
}
var hU = "[object Number]";
function wr(e) {
  return typeof e == "number" || It(e) && Ar(e) == hU;
}
function aT(e) {
  return wr(e) && e != +e;
}
var dU = Bf ? Vt : _0, vU = dU, pU = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";
function gU(e) {
  if (vU(e))
    throw new Error(pU);
  return y2(e);
}
function Nt(e) {
  return e == null;
}
function lT(e) {
  return e === null;
}
var yU = "[object RegExp]";
function CU(e) {
  return It(e) && Ar(e) == yU;
}
var Q_ = An && An.isRegExp, mU = Q_ ? un(Q_) : CU, Q0 = mU, J_ = 9007199254740991;
function _U(e) {
  return oT(e) && e >= -J_ && e <= J_;
}
function qc(e) {
  return e === void 0;
}
var wU = "[object WeakMap]";
function xU(e) {
  return It(e) && yi(e) == wU;
}
var SU = "[object WeakSet]";
function bU(e) {
  return It(e) && Ar(e) == SU;
}
var TU = 1;
function EU(e) {
  return Re(typeof e == "function" ? e : bn(e, TU));
}
var LU = Array.prototype, AU = LU.join;
function RU(e, r) {
  return e == null ? "" : AU.call(e, r);
}
var OU = Rl(function(e, r, t) {
  return e + (t ? "-" : "") + r.toLowerCase();
}), IU = OU, MU = zc(function(e, r, t) {
  qi(e, t, r);
}), BU = MU;
function DU(e, r, t) {
  for (var n = t + 1; n--; )
    if (e[n] === r)
      return n;
  return n;
}
var $U = Math.max, FU = Math.min;
function PU(e, r, t) {
  var n = e == null ? 0 : e.length;
  if (!n)
    return -1;
  var i = n;
  return t !== void 0 && (i = Be(t), i = i < 0 ? $U(n + i, 0) : FU(i, n - 1)), r === r ? DU(e, r, i) : Mc(e, b2, i, !0);
}
var NU = Rl(function(e, r, t) {
  return e + (t ? " " : "") + r.toLowerCase();
}), J0 = NU, HU = X2("toLowerCase"), zU = HU;
function eg(e, r) {
  return e < r;
}
var WU = Xc(eg), kU = WU, GU = Xc(function(e, r) {
  return e <= r;
}), UU = GU;
function sT(e, r) {
  var t = {};
  return r = Re(r), Si(e, function(n, i, o) {
    qi(t, r(n, i, o), n);
  }), t;
}
function YU(e, r) {
  var t = {};
  return r = Re(r), Si(e, function(n, i, o) {
    qi(t, i, r(n, i, o));
  }), t;
}
var XU = 1;
function ap(e) {
  return Tb(bn(e, XU));
}
var VU = 1;
function qU(e, r) {
  return Lb(e, bn(r, VU));
}
function Kc(e, r, t) {
  for (var n = -1, i = e.length; ++n < i; ) {
    var o = e[n], a = r(o);
    if (a != null && (l === void 0 ? a === a && !an(a) : t(a, l)))
      var l = a, s = o;
  }
  return s;
}
function Gi(e) {
  return e && e.length ? Kc(e, dr, q0) : void 0;
}
function tg(e, r) {
  return e && e.length ? Kc(e, Re(r), q0) : void 0;
}
function rg(e, r) {
  for (var t, n = -1, i = e.length; ++n < i; ) {
    var o = r(e[n]);
    o !== void 0 && (t = t === void 0 ? o : t + o);
  }
  return t;
}
var KU = NaN;
function uT(e, r) {
  var t = e == null ? 0 : e.length;
  return t ? rg(e, r) / t : KU;
}
function jU(e) {
  return uT(e, dr);
}
function ZU(e, r) {
  return uT(e, Re(r));
}
var QU = El(function(e, r, t) {
  Wc(e, r, t);
}), Ds = QU, JU = Ne(function(e, r) {
  return function(t) {
    return nu(t, e, r);
  };
}), eY = JU, tY = Ne(function(e, r) {
  return function(t) {
    return nu(e, t, r);
  };
}), rY = tY;
function ng(e) {
  return e && e.length ? Kc(e, dr, eg) : void 0;
}
function nY(e, r) {
  return e && e.length ? Kc(e, Re(r), eg) : void 0;
}
function fT(e, r, t) {
  var n = Rt(r), i = Yc(r, n), o = !(rt(t) && "chain" in t) || !!t.chain, a = Vt(e);
  return In(i, function(l) {
    var s = r[l];
    e[l] = s, a && (e.prototype[l] = function() {
      var f = this.__chain__;
      if (o || f) {
        var h = e(this.__wrapped__), d = h.__actions__ = zr(this.__actions__);
        return d.push({ func: s, args: arguments, thisArg: e }), h.__chain__ = f, h;
      }
      return s.apply(e, Do([this.value()], arguments));
    });
  }), e;
}
var iY = Rc(function(e, r) {
  return e * r;
}, 1), oY = iY, aY = "Expected a function";
function iu(e) {
  if (typeof e != "function")
    throw new TypeError(aY);
  return function() {
    var r = arguments;
    switch (r.length) {
      case 0:
        return !e.call(this);
      case 1:
        return !e.call(this, r[0]);
      case 2:
        return !e.call(this, r[0], r[1]);
      case 3:
        return !e.call(this, r[0], r[1], r[2]);
    }
    return !e.apply(this, r);
  };
}
function lY(e) {
  for (var r, t = []; !(r = e.next()).done; )
    t.push(r.value);
  return t;
}
var sY = "[object Map]", uY = "[object Set]", tv = fr ? fr.iterator : void 0;
function cT(e) {
  if (!e)
    return [];
  if (Gr(e))
    return Il(e) ? Kn(e) : zr(e);
  if (tv && e[tv])
    return lY(e[tv]());
  var r = yi(e), t = r == sY ? P0 : r == uY ? Hc : Ji;
  return t(e);
}
function fY() {
  this.__values__ === void 0 && (this.__values__ = cT(this.value()));
  var e = this.__index__ >= this.__values__.length, r = e ? void 0 : this.__values__[this.__index__++];
  return { done: e, value: r };
}
function hT(e, r) {
  var t = e.length;
  if (t)
    return r += r < 0 ? t : 0, Xi(r, t) ? e[r] : void 0;
}
function cY(e, r) {
  return e && e.length ? hT(e, Be(r)) : void 0;
}
function hY(e) {
  return e = Be(e), Ne(function(r) {
    return hT(r, e);
  });
}
function ig(e, r) {
  return r = Bo(r, e), e = iT(e, r), e == null || delete e[xi(ut(r))];
}
function dY(e) {
  return Js(e) ? void 0 : e;
}
var vY = 1, pY = 2, gY = 4, yY = Zi(function(e, r) {
  var t = {};
  if (e == null)
    return t;
  var n = !1;
  r = Tt(r, function(o) {
    return o = Bo(o, e), n || (n = o.length > 1), o;
  }), wi(e, D0(e), t), n && (t = bn(t, vY | pY | gY, dY));
  for (var i = r.length; i--; )
    ig(t, r[i]);
  return t;
}), og = yY;
function ou(e, r, t, n) {
  if (!rt(e))
    return e;
  r = Bo(r, e);
  for (var i = -1, o = r.length, a = o - 1, l = e; l != null && ++i < o; ) {
    var s = xi(r[i]), f = t;
    if (s === "__proto__" || s === "constructor" || s === "prototype")
      return e;
    if (i != a) {
      var h = l[s];
      f = n ? n(h, s, l) : void 0, f === void 0 && (f = rt(h) ? h : Xi(r[i + 1]) ? [] : {});
    }
    Zs(l, s, f), l = l[s];
  }
  return e;
}
function dT(e, r, t) {
  for (var n = -1, i = r.length, o = {}; ++n < i; ) {
    var a = r[n], l = Ia(e, a);
    t(l, a) && ou(o, Bo(a, e), l);
  }
  return o;
}
function ag(e, r) {
  if (e == null)
    return {};
  var t = Tt(D0(e), function(n) {
    return [n];
  });
  return r = Re(r), dT(e, t, function(n, i) {
    return r(n, i[0]);
  });
}
function CY(e, r) {
  return ag(e, iu(Re(r)));
}
function mY(e) {
  return N2(2, e);
}
function _Y(e, r) {
  var t = e.length;
  for (e.sort(r); t--; )
    e[t] = e[t].value;
  return e;
}
function vT(e, r) {
  if (e !== r) {
    var t = e !== void 0, n = e === null, i = e === e, o = an(e), a = r !== void 0, l = r === null, s = r === r, f = an(r);
    if (!l && !f && !o && e > r || o && a && s && !l && !f || n && a && s || !t && s || !i)
      return 1;
    if (!n && !o && !f && e < r || f && t && i && !n && !o || l && t && i || !a && i || !s)
      return -1;
  }
  return 0;
}
function wY(e, r, t) {
  for (var n = -1, i = e.criteria, o = r.criteria, a = i.length, l = t.length; ++n < a; ) {
    var s = vT(i[n], o[n]);
    if (s) {
      if (n >= l)
        return s;
      var f = t[n];
      return s * (f == "desc" ? -1 : 1);
    }
  }
  return e.index - r.index;
}
function pT(e, r, t) {
  r.length ? r = Tt(r, function(o) {
    return le(o) ? function(a) {
      return Ia(a, o.length === 1 ? o[0] : o);
    } : o;
  }) : r = [dr];
  var n = -1;
  r = Tt(r, un(Re));
  var i = Zb(e, function(o, a, l) {
    var s = Tt(r, function(f) {
      return f(o);
    });
    return { criteria: s, index: ++n, value: o };
  });
  return _Y(i, function(o, a) {
    return wY(o, a, t);
  });
}
function lg(e, r, t, n) {
  return e == null ? [] : (le(r) || (r = r == null ? [] : [r]), t = n ? void 0 : t, le(t) || (t = t == null ? [] : [t]), pT(e, r, t));
}
function sg(e) {
  return Zi(function(r) {
    return r = Tt(r, un(Re)), Ne(function(t) {
      var n = this;
      return e(r, function(i) {
        return sn(i, n, t);
      });
    });
  });
}
var xY = sg(Tt), SY = xY, bY = Ne, TY = bY, EY = Math.min, LY = TY(function(e, r) {
  r = r.length == 1 && le(r[0]) ? Tt(r[0], un(Re)) : Tt(rr(r, 1), un(Re));
  var t = r.length;
  return Ne(function(n) {
    for (var i = -1, o = EY(n.length, t); ++i < o; )
      n[i] = r[i].call(this, n[i]);
    return sn(e, this, n);
  });
}), AY = LY, RY = sg(Yb), OY = RY, IY = sg(F0), MY = IY, BY = 9007199254740991, DY = Math.floor;
function lp(e, r) {
  var t = "";
  if (!e || r < 1 || r > BY)
    return t;
  do
    r % 2 && (t += e), r = DY(r / 2), r && (e += e);
  while (r);
  return t;
}
var $Y = z0("length"), FY = $Y, gT = "\\ud800-\\udfff", PY = "\\u0300-\\u036f", NY = "\\ufe20-\\ufe2f", HY = "\\u20d0-\\u20ff", zY = PY + NY + HY, WY = "\\ufe0e\\ufe0f", kY = "[" + gT + "]", sp = "[" + zY + "]", up = "\\ud83c[\\udffb-\\udfff]", GY = "(?:" + sp + "|" + up + ")", yT = "[^" + gT + "]", CT = "(?:\\ud83c[\\udde6-\\uddff]){2}", mT = "[\\ud800-\\udbff][\\udc00-\\udfff]", UY = "\\u200d", _T = GY + "?", wT = "[" + WY + "]?", YY = "(?:" + UY + "(?:" + [yT, CT, mT].join("|") + ")" + wT + _T + ")*", XY = wT + _T + YY, VY = "(?:" + [yT + sp + "?", sp, CT, mT, kY].join("|") + ")", ew = RegExp(up + "(?=" + up + ")|" + VY + XY, "g");
function qY(e) {
  for (var r = ew.lastIndex = 0; ew.test(e); )
    ++r;
  return r;
}
function Ml(e) {
  return Al(e) ? qY(e) : FY(e);
}
var KY = Math.ceil;
function ac(e, r) {
  r = r === void 0 ? " " : ln(r);
  var t = r.length;
  if (t < 2)
    return t ? lp(r, e) : r;
  var n = lp(r, KY(e / Ml(r)));
  return Al(r) ? $o(Kn(n), 0, e).join("") : n.slice(0, e);
}
var jY = Math.ceil, ZY = Math.floor;
function QY(e, r, t) {
  e = nt(e), r = Be(r);
  var n = r ? Ml(e) : 0;
  if (!r || n >= r)
    return e;
  var i = (r - n) / 2;
  return ac(ZY(i), t) + e + ac(jY(i), t);
}
function JY(e, r, t) {
  e = nt(e), r = Be(r);
  var n = r ? Ml(e) : 0;
  return r && n < r ? e + ac(r - n, t) : e;
}
function eX(e, r, t) {
  e = nt(e), r = Be(r);
  var n = r ? Ml(e) : 0;
  return r && n < r ? ac(r - n, t) + e : e;
}
var tX = /^\s+/, rX = qt.parseInt;
function nX(e, r, t) {
  return t || r == null ? r = 0 : r && (r = +r), rX(nt(e).replace(tX, ""), r || 0);
}
var iX = 32, ug = Ne(function(e, r) {
  var t = Ao(r, Tl(ug));
  return Vi(e, iX, void 0, r, t);
});
ug.placeholder = {};
var xT = ug, oX = 64, fg = Ne(function(e, r) {
  var t = Ao(r, Tl(fg));
  return Vi(e, oX, void 0, r, t);
});
fg.placeholder = {};
var aX = fg, lX = zc(function(e, r, t) {
  e[t ? 0 : 1].push(r);
}, function() {
  return [[], []];
}), sX = lX;
function uX(e, r) {
  return dT(e, r, function(t, n) {
    return wa(e, n);
  });
}
var fX = Zi(function(e, r) {
  return e == null ? {} : uX(e, r);
}), ST = fX;
function cX(e) {
  for (var r, t = this; t instanceof Oc; ) {
    var n = w2(t);
    n.__index__ = 0, n.__values__ = void 0, r ? i.__wrapped__ = n : r = n;
    var i = n;
    t = t.__wrapped__;
  }
  return i.__wrapped__ = e, r;
}
function hX(e) {
  return function(r) {
    return e == null ? void 0 : Ia(e, r);
  };
}
function dX(e, r, t, n) {
  for (var i = t - 1, o = e.length; ++i < o; )
    if (n(e[i], r))
      return i;
  return -1;
}
var vX = Array.prototype, tw = vX.splice;
function cg(e, r, t, n) {
  var i = n ? dX : bl, o = -1, a = r.length, l = e;
  for (e === r && (r = zr(r)), t && (l = Tt(e, un(t))); ++o < a; )
    for (var s = 0, f = r[o], h = t ? t(f) : f; (s = i(l, h, s, n)) > -1; )
      l !== e && tw.call(l, s, 1), tw.call(e, s, 1);
  return e;
}
function bT(e, r) {
  return e && e.length && r && r.length ? cg(e, r) : e;
}
var pX = Ne(bT), gX = pX;
function yX(e, r, t) {
  return e && e.length && r && r.length ? cg(e, r, Re(t)) : e;
}
function CX(e, r, t) {
  return e && e.length && r && r.length ? cg(e, r, void 0, t) : e;
}
var mX = Array.prototype, _X = mX.splice;
function TT(e, r) {
  for (var t = e ? r.length : 0, n = t - 1; t--; ) {
    var i = r[t];
    if (t == n || i !== o) {
      var o = i;
      Xi(i) ? _X.call(e, i, 1) : ig(e, i);
    }
  }
  return e;
}
var wX = Zi(function(e, r) {
  var t = e == null ? 0 : e.length, n = S0(e, r);
  return TT(e, Tt(r, function(i) {
    return Xi(i, t) ? +i : i;
  }).sort(vT)), n;
}), xX = wX, SX = Math.floor, bX = Math.random;
function hg(e, r) {
  return e + SX(bX() * (r - e + 1));
}
var TX = parseFloat, EX = Math.min, LX = Math.random;
function AX(e, r, t) {
  if (t && typeof t != "boolean" && Tr(e, r, t) && (r = t = void 0), t === void 0 && (typeof r == "boolean" ? (t = r, r = void 0) : typeof e == "boolean" && (t = e, e = void 0)), e === void 0 && r === void 0 ? (e = 0, r = 1) : (e = ki(e), r === void 0 ? (r = e, e = 0) : r = ki(r)), e > r) {
    var n = e;
    e = r, r = n;
  }
  if (t || e % 1 || r % 1) {
    var i = LX();
    return EX(e + i * (r - e + TX("1e-" + ((i + "").length - 1))), r);
  }
  return hg(e, r);
}
var RX = Math.ceil, OX = Math.max;
function IX(e, r, t, n) {
  for (var i = -1, o = OX(RX((r - e) / (t || 1)), 0), a = Array(o); o--; )
    a[n ? o : ++i] = e, e += t;
  return a;
}
function ET(e) {
  return function(r, t, n) {
    return n && typeof n != "number" && Tr(r, t, n) && (t = n = void 0), r = ki(r), t === void 0 ? (t = r, r = 0) : t = ki(t), n = n === void 0 ? r < t ? 1 : -1 : ki(n), IX(r, t, n, e);
  };
}
var MX = ET(), ul = MX, BX = ET(!0), DX = BX, $X = 256, FX = Zi(function(e, r) {
  return Vi(e, $X, void 0, void 0, void 0, r);
}), PX = FX;
function LT(e, r, t, n, i) {
  return i(e, function(o, a, l) {
    t = n ? (n = !1, o) : r(t, o, a, l);
  }), t;
}
function jc(e, r, t) {
  var n = le(e) ? R0 : LT, i = arguments.length < 3;
  return n(e, Re(r), t, i, Po);
}
function NX(e, r, t, n) {
  var i = e == null ? 0 : e.length;
  for (n && i && (t = e[--i]); i--; )
    t = r(t, e[i], i, e);
  return t;
}
function HX(e, r, t) {
  var n = le(e) ? NX : LT, i = arguments.length < 3;
  return n(e, Re(r), t, i, zb);
}
function zX(e, r) {
  var t = le(e) ? Fo : Vb;
  return t(e, iu(Re(r)));
}
function WX(e, r) {
  var t = [];
  if (!(e && e.length))
    return t;
  var n = -1, i = [], o = e.length;
  for (r = Re(r); ++n < o; ) {
    var a = e[n];
    r(a, n, e) && (t.push(a), i.push(n));
  }
  return TT(e, i), t;
}
function kX(e, r, t) {
  return (t ? Tr(e, r, t) : r === void 0) ? r = 1 : r = Be(r), lp(nt(e), r);
}
function GX() {
  var e = arguments, r = nt(e[0]);
  return e.length < 3 ? r : r.replace(e[1], e[2]);
}
var UX = "Expected a function";
function YX(e, r) {
  if (typeof e != "function")
    throw new TypeError(UX);
  return r = r === void 0 ? r : Be(r), Ne(e, r);
}
function XX(e, r, t) {
  r = Bo(r, e);
  var n = -1, i = r.length;
  for (i || (i = 1, e = void 0); ++n < i; ) {
    var o = e == null ? void 0 : e[xi(r[n])];
    o === void 0 && (n = i, o = t), e = Vt(o) ? o.call(e) : o;
  }
  return e;
}
var VX = Array.prototype, qX = VX.reverse;
function fp(e) {
  return e == null ? e : qX.call(e);
}
var KX = I0("round"), jX = KX;
function AT(e) {
  var r = e.length;
  return r ? e[hg(0, r - 1)] : void 0;
}
function ZX(e) {
  return AT(Ji(e));
}
function QX(e) {
  var r = le(e) ? AT : ZX;
  return r(e);
}
function Zc(e, r) {
  var t = -1, n = e.length, i = n - 1;
  for (r = r === void 0 ? n : r; ++t < r; ) {
    var o = hg(t, i), a = e[o];
    e[o] = e[t], e[t] = a;
  }
  return e.length = r, e;
}
function JX(e, r) {
  return Zc(zr(e), Ma(r, 0, e.length));
}
function eV(e, r) {
  var t = Ji(e);
  return Zc(t, Ma(r, 0, t.length));
}
function tV(e, r, t) {
  (t ? Tr(e, r, t) : r === void 0) ? r = 1 : r = Be(r);
  var n = le(e) ? JX : eV;
  return n(e, r);
}
function $s(e, r, t) {
  return e == null ? e : ou(e, r, t);
}
function rV(e, r, t, n) {
  return n = typeof n == "function" ? n : void 0, e == null ? e : ou(e, r, t, n);
}
function nV(e) {
  return Zc(zr(e));
}
function iV(e) {
  return Zc(Ji(e));
}
function oV(e) {
  var r = le(e) ? nV : iV;
  return r(e);
}
var aV = "[object Map]", lV = "[object Set]";
function aa(e) {
  if (e == null)
    return 0;
  if (Gr(e))
    return Il(e) ? Ml(e) : e.length;
  var r = yi(e);
  return r == aV || r == lV ? e.size : w0(e).length;
}
function sV(e, r, t) {
  var n = e == null ? 0 : e.length;
  return n ? (t && typeof t != "number" && Tr(e, r, t) ? (r = 0, t = n) : (r = r == null ? 0 : Be(r), t = t === void 0 ? n : Be(t)), Rn(e, r, t)) : [];
}
var uV = Rl(function(e, r, t) {
  return e + (t ? "_" : "") + r.toLowerCase();
}), fV = uV;
function cV(e, r) {
  var t;
  return Po(e, function(n, i, o) {
    return t = r(n, i, o), !t;
  }), !!t;
}
function RT(e, r, t) {
  var n = le(e) ? F0 : cV;
  return t && Tr(e, r, t) && (r = void 0), n(e, Re(r));
}
var hV = Ne(function(e, r) {
  if (e == null)
    return [];
  var t = r.length;
  return t > 1 && Tr(e, r[0], r[1]) ? r = [] : t > 2 && Tr(r[0], r[1], r[2]) && (r = [r[0]]), pT(e, rr(r, 1), []);
}), OT = hV, dV = 4294967295, vV = dV - 1, pV = Math.floor, gV = Math.min;
function dg(e, r, t, n) {
  var i = 0, o = e == null ? 0 : e.length;
  if (o === 0)
    return 0;
  r = t(r);
  for (var a = r !== r, l = r === null, s = an(r), f = r === void 0; i < o; ) {
    var h = pV((i + o) / 2), d = t(e[h]), v = d !== void 0, g = d === null, y = d === d, C = an(d);
    if (a)
      var _ = n || y;
    else f ? _ = y && (n || v) : l ? _ = y && v && (n || !g) : s ? _ = y && v && !g && (n || !C) : g || C ? _ = !1 : _ = n ? d <= r : d < r;
    _ ? i = h + 1 : o = h;
  }
  return gV(o, vV);
}
var yV = 4294967295, CV = yV >>> 1;
function Qc(e, r, t) {
  var n = 0, i = e == null ? n : e.length;
  if (typeof r == "number" && r === r && i <= CV) {
    for (; n < i; ) {
      var o = n + i >>> 1, a = e[o];
      a !== null && !an(a) && (t ? a <= r : a < r) ? n = o + 1 : i = o;
    }
    return i;
  }
  return dg(e, r, dr, t);
}
function mV(e, r) {
  return Qc(e, r);
}
function _V(e, r, t) {
  return dg(e, r, Re(t));
}
function wV(e, r) {
  var t = e == null ? 0 : e.length;
  if (t) {
    var n = Qc(e, r);
    if (n < t && Jn(e[n], r))
      return n;
  }
  return -1;
}
function xV(e, r) {
  return Qc(e, r, !0);
}
function SV(e, r, t) {
  return dg(e, r, Re(t), !0);
}
function bV(e, r) {
  var t = e == null ? 0 : e.length;
  if (t) {
    var n = Qc(e, r, !0) - 1;
    if (Jn(e[n], r))
      return n;
  }
  return -1;
}
function IT(e, r) {
  for (var t = -1, n = e.length, i = 0, o = []; ++t < n; ) {
    var a = e[t], l = r ? r(a) : a;
    if (!t || !Jn(l, s)) {
      var s = l;
      o[i++] = a === 0 ? 0 : a;
    }
  }
  return o;
}
function TV(e) {
  return e && e.length ? IT(e) : [];
}
function EV(e, r) {
  return e && e.length ? IT(e, Re(r)) : [];
}
var LV = 4294967295;
function MT(e, r, t) {
  return t && typeof t != "number" && Tr(e, r, t) && (r = t = void 0), t = t === void 0 ? LV : t >>> 0, t ? (e = nt(e), e && (typeof r == "string" || r != null && !Q0(r)) && (r = ln(r), !r && Al(e)) ? $o(Kn(e), 0, t) : e.split(r, t)) : [];
}
var AV = "Expected a function", RV = Math.max;
function OV(e, r) {
  if (typeof e != "function")
    throw new TypeError(AV);
  return r = r == null ? 0 : RV(Be(r), 0), Ne(function(t) {
    var n = t[r], i = $o(t, 0, r);
    return n && Do(i, n), sn(e, this, i);
  });
}
var IV = Rl(function(e, r, t) {
  return e + (t ? " " : "") + A0(r);
}), MV = IV;
function BV(e, r, t) {
  return e = nt(e), t = t == null ? 0 : Ma(Be(t), 0, e.length), r = ln(r), e.slice(t, t + r.length) == r;
}
function DV() {
  return {};
}
function $V() {
  return "";
}
function BT() {
  return !0;
}
var FV = Rc(function(e, r) {
  return e - r;
}, 0), PV = FV;
function NV(e) {
  return e && e.length ? rg(e, dr) : 0;
}
function DT(e, r) {
  return e && e.length ? rg(e, Re(r)) : 0;
}
function HV(e) {
  var r = e == null ? 0 : e.length;
  return r ? Rn(e, 1, r) : [];
}
function zV(e, r, t) {
  return e && e.length ? (r = t || r === void 0 ? 1 : Be(r), Rn(e, 0, r < 0 ? 0 : r)) : [];
}
function WV(e, r, t) {
  var n = e == null ? 0 : e.length;
  return n ? (r = t || r === void 0 ? 1 : Be(r), r = n - r, Rn(e, r < 0 ? 0 : r, n)) : [];
}
function kV(e, r) {
  return e && e.length ? kc(e, Re(r), !1, !0) : [];
}
function GV(e, r) {
  return e && e.length ? kc(e, Re(r)) : [];
}
function UV(e, r) {
  return r(e), e;
}
var $T = Object.prototype, YV = $T.hasOwnProperty;
function rw(e, r, t, n) {
  return e === void 0 || Jn(e, $T[t]) && !YV.call(n, t) ? r : e;
}
var XV = {
  "\\": "\\",
  "'": "'",
  "\n": "n",
  "\r": "r",
  "\u2028": "u2028",
  "\u2029": "u2029"
};
function VV(e) {
  return "\\" + XV[e];
}
var qV = /<%=([\s\S]+?)%>/g, FT = qV, KV = /<%-([\s\S]+?)%>/g, jV = KV, ZV = /<%([\s\S]+?)%>/g, QV = ZV, JV = {
  /**
   * Used to detect `data` property values to be HTML-escaped.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  escape: jV,
  /**
   * Used to detect code to be evaluated.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  evaluate: QV,
  /**
   * Used to detect `data` property values to inject.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  interpolate: FT,
  /**
   * Used to reference the data object in the template text.
   *
   * @memberOf _.templateSettings
   * @type {string}
   */
  variable: "",
  /**
   * Used to import variables into the compiled template.
   *
   * @memberOf _.templateSettings
   * @type {Object}
   */
  imports: {
    /**
     * A reference to the `lodash` function.
     *
     * @memberOf _.templateSettings.imports
     * @type {Function}
     */
    _: { escape: V0 }
  }
}, cp = JV, eq = "Invalid `variable` option passed into `_.template`", tq = /\b__p \+= '';/g, rq = /\b(__p \+=) '' \+/g, nq = /(__e\(.*?\)|\b__t\)) \+\n'';/g, iq = /[()=,{}\[\]\/\s]/, oq = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, xf = /($^)/, aq = /['\n\r\u2028\u2029\\]/g, lq = Object.prototype, nw = lq.hasOwnProperty;
function sq(e, r, t) {
  var n = cp.imports._.templateSettings || cp;
  t && Tr(e, r, t) && (r = void 0), e = nt(e), r = nc({}, r, n, rw);
  var i = nc({}, r.imports, n.imports, rw), o = Rt(i), a = K0(i, o), l, s, f = 0, h = r.interpolate || xf, d = "__p += '", v = RegExp(
    (r.escape || xf).source + "|" + h.source + "|" + (h === FT ? oq : xf).source + "|" + (r.evaluate || xf).source + "|$",
    "g"
  ), g = nw.call(r, "sourceURL") ? "//# sourceURL=" + (r.sourceURL + "").replace(/\s/g, " ") + `
` : "";
  e.replace(v, function(_, w, x, S, T, R) {
    return x || (x = S), d += e.slice(f, R).replace(aq, VV), w && (l = !0, d += `' +
__e(` + w + `) +
'`), T && (s = !0, d += `';
` + T + `;
__p += '`), x && (d += `' +
((__t = (` + x + `)) == null ? '' : __t) +
'`), f = R + _.length, _;
  }), d += `';
`;
  var y = nw.call(r, "variable") && r.variable;
  if (!y)
    d = `with (obj) {
` + d + `
}
`;
  else if (iq.test(y))
    throw new Error(eq);
  d = (s ? d.replace(tq, "") : d).replace(rq, "$1").replace(nq, "$1;"), d = "function(" + (y || "obj") + `) {
` + (y ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (l ? ", __e = _.escape" : "") + (s ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + d + `return __p
}`;
  var C = P2(function() {
    return Function(o, g + "return " + d).apply(void 0, a);
  });
  if (C.source = d, T0(C))
    throw C;
  return C;
}
var uq = "Expected a function";
function vg(e, r, t) {
  var n = !0, i = !0;
  if (typeof e != "function")
    throw new TypeError(uq);
  return rt(t) && (n = "leading" in t ? !!t.leading : n, i = "trailing" in t ? !!t.trailing : i), Bs(e, r, {
    leading: n,
    maxWait: r,
    trailing: i
  });
}
function au(e, r) {
  return r(e);
}
var fq = 9007199254740991, rv = 4294967295, cq = Math.min;
function hq(e, r) {
  if (e = Be(e), e < 1 || e > fq)
    return [];
  var t = rv, n = cq(e, rv);
  r = bi(r), e -= rv;
  for (var i = m0(n, r); ++t < e; )
    r(t);
  return i;
}
function dq() {
  return this;
}
function PT(e, r) {
  var t = e;
  return t instanceof Ye && (t = t.value()), R0(r, function(n, i) {
    return i.func.apply(i.thisArg, Do([n], i.args));
  }, t);
}
function nv() {
  return PT(this.__wrapped__, this.__actions__);
}
function vq(e) {
  return nt(e).toLowerCase();
}
function pq(e) {
  return le(e) ? Tt(e, xi) : an(e) ? [e] : zr($2(nt(e)));
}
var iw = 9007199254740991;
function gq(e) {
  return e ? Ma(Be(e), -iw, iw) : e === 0 ? e : 0;
}
function Fs(e) {
  return nt(e).toUpperCase();
}
function yq(e, r, t) {
  var n = le(e), i = n || Ro(e) || Ll(e);
  if (r = Re(r), t == null) {
    var o = e && e.constructor;
    i ? t = n ? new o() : [] : rt(e) ? t = Vt(o) ? Sl(Nc(e)) : {} : t = {};
  }
  return (i ? In : Si)(e, function(a, l, s) {
    return r(t, a, l, s);
  }), t;
}
function NT(e, r) {
  for (var t = e.length; t-- && bl(r, e[t], 0) > -1; )
    ;
  return t;
}
function HT(e, r) {
  for (var t = -1, n = e.length; ++t < n && bl(r, e[t], 0) > -1; )
    ;
  return t;
}
function zT(e, r, t) {
  if (e = nt(e), e && (t || r === void 0))
    return g2(e);
  if (!e || !(r = ln(r)))
    return e;
  var n = Kn(e), i = Kn(r), o = HT(n, i), a = NT(n, i) + 1;
  return $o(n, o, a).join("");
}
function Cq(e, r, t) {
  if (e = nt(e), e && (t || r === void 0))
    return e.slice(0, p2(e) + 1);
  if (!e || !(r = ln(r)))
    return e;
  var n = Kn(e), i = NT(n, Kn(r)) + 1;
  return $o(n, 0, i).join("");
}
var mq = /^\s+/;
function _q(e, r, t) {
  if (e = nt(e), e && (t || r === void 0))
    return e.replace(mq, "");
  if (!e || !(r = ln(r)))
    return e;
  var n = Kn(e), i = HT(n, Kn(r));
  return $o(n, i).join("");
}
var wq = 30, xq = "...", Sq = /\w*$/;
function bq(e, r) {
  var t = wq, n = xq;
  if (rt(r)) {
    var i = "separator" in r ? r.separator : i;
    t = "length" in r ? Be(r.length) : t, n = "omission" in r ? ln(r.omission) : n;
  }
  e = nt(e);
  var o = e.length;
  if (Al(e)) {
    var a = Kn(e);
    o = a.length;
  }
  if (t >= o)
    return e;
  var l = t - Ml(n);
  if (l < 1)
    return n;
  var s = a ? $o(a, 0, l).join("") : e.slice(0, l);
  if (i === void 0)
    return s + n;
  if (a && (l += s.length - l), Q0(i)) {
    if (e.slice(l).search(i)) {
      var f, h = s;
      for (i.global || (i = RegExp(i.source, nt(Sq.exec(i)) + "g")), i.lastIndex = 0; f = i.exec(h); )
        var d = f.index;
      s = s.slice(0, d === void 0 ? l : d);
    }
  } else if (e.indexOf(ln(i), l) != l) {
    var v = s.lastIndexOf(i);
    v > -1 && (s = s.slice(0, v));
  }
  return s + n;
}
function Tq(e) {
  return L2(e, 1);
}
var Eq = {
  "&amp;": "&",
  "&lt;": "<",
  "&gt;": ">",
  "&quot;": '"',
  "&#39;": "'"
}, Lq = O0(Eq), Aq = Lq, WT = /&(?:amp|lt|gt|quot|#39);/g, Rq = RegExp(WT.source);
function Oq(e) {
  return e = nt(e), e && Rq.test(e) ? e.replace(WT, Aq) : e;
}
var Iq = 1 / 0, Mq = sl && 1 / Hc(new sl([, -0]))[1] == Iq ? function(e) {
  return new sl(e);
} : Ic, Bq = Mq, Dq = 200;
function Oo(e, r, t) {
  var n = -1, i = Bc, o = e.length, a = !0, l = [], s = l;
  if (t)
    a = !1, i = Y0;
  else if (o >= Dq) {
    var f = r ? null : Bq(e);
    if (f)
      return Hc(f);
    a = !1, i = Ms, s = new _a();
  } else
    s = r ? [] : l;
  e:
    for (; ++n < o; ) {
      var h = e[n], d = r ? r(h) : h;
      if (h = t || h !== 0 ? h : 0, a && d === d) {
        for (var v = s.length; v--; )
          if (s[v] === d)
            continue e;
        r && s.push(d), l.push(h);
      } else i(s, d, t) || (s !== l && s.push(d), l.push(h));
    }
  return l;
}
var $q = Ne(function(e) {
  return Oo(rr(e, 1, Ft, !0));
}), Fq = $q, Pq = Ne(function(e) {
  var r = ut(e);
  return Ft(r) && (r = void 0), Oo(rr(e, 1, Ft, !0), Re(r));
}), Nq = Pq, Hq = Ne(function(e) {
  var r = ut(e);
  return r = typeof r == "function" ? r : void 0, Oo(rr(e, 1, Ft, !0), void 0, r);
}), zq = Hq;
function Ni(e) {
  return e && e.length ? Oo(e) : [];
}
function Wq(e, r) {
  return e && e.length ? Oo(e, Re(r)) : [];
}
function kq(e, r) {
  return r = typeof r == "function" ? r : void 0, e && e.length ? Oo(e, void 0, r) : [];
}
var Gq = 0;
function Uq(e) {
  var r = ++Gq;
  return nt(e) + r;
}
function hp(e, r) {
  return e == null ? !0 : ig(e, r);
}
var Yq = Math.max;
function pg(e) {
  if (!(e && e.length))
    return [];
  var r = 0;
  return e = Fo(e, function(t) {
    if (Ft(t))
      return r = Yq(t.length, r), !0;
  }), m0(r, function(t) {
    return Tt(e, z0(t));
  });
}
function kT(e, r) {
  if (!(e && e.length))
    return [];
  var t = pg(e);
  return r == null ? t : Tt(t, function(n) {
    return sn(r, void 0, n);
  });
}
function GT(e, r, t, n) {
  return ou(e, r, t(Ia(e, r)), n);
}
function Xq(e, r, t) {
  return e == null ? e : GT(e, r, bi(t));
}
function Vq(e, r, t, n) {
  return n = typeof n == "function" ? n : void 0, e == null ? e : GT(e, r, bi(t), n);
}
var qq = Rl(function(e, r, t) {
  return e + (t ? " " : "") + r.toUpperCase();
}), Kq = qq;
function jq(e) {
  return e == null ? [] : K0(e, Ur(e));
}
var Zq = Ne(function(e, r) {
  return Ft(e) ? tu(e, r) : [];
}), Qq = Zq;
function Jq(e, r) {
  return xT(bi(r), e);
}
var eK = Zi(function(e) {
  var r = e.length, t = r ? e[0] : 0, n = this.__wrapped__, i = function(o) {
    return S0(o, e);
  };
  return r > 1 || this.__actions__.length || !(n instanceof Ye) || !Xi(t) ? this.thru(i) : (n = n.slice(t, +t + (r ? 1 : 0)), n.__actions__.push({
    func: au,
    args: [i],
    thisArg: void 0
  }), new Ln(n, this.__chain__).thru(function(o) {
    return r && !o.length && o.push(void 0), o;
  }));
}), tK = eK;
function rK() {
  return ub(this);
}
function nK() {
  var e = this.__wrapped__;
  if (e instanceof Ye) {
    var r = e;
    return this.__actions__.length && (r = new Ye(this)), r = r.reverse(), r.__actions__.push({
      func: au,
      args: [fp],
      thisArg: void 0
    }), new Ln(r, this.__chain__);
  }
  return this.thru(fp);
}
function gg(e, r, t) {
  var n = e.length;
  if (n < 2)
    return n ? Oo(e[0]) : [];
  for (var i = -1, o = Array(n); ++i < n; )
    for (var a = e[i], l = -1; ++l < n; )
      l != i && (o[i] = tu(o[i] || a, e[l], r, t));
  return Oo(rr(o, 1), r, t);
}
var iK = Ne(function(e) {
  return gg(Fo(e, Ft));
}), oK = iK, aK = Ne(function(e) {
  var r = ut(e);
  return Ft(r) && (r = void 0), gg(Fo(e, Ft), Re(r));
}), lK = aK, sK = Ne(function(e) {
  var r = ut(e);
  return r = typeof r == "function" ? r : void 0, gg(Fo(e, Ft), void 0, r);
}), uK = sK, fK = Ne(pg), Jc = fK;
function UT(e, r, t) {
  for (var n = -1, i = e.length, o = r.length, a = {}; ++n < i; ) {
    var l = n < o ? r[n] : void 0;
    t(a, e[n], l);
  }
  return a;
}
function cK(e, r) {
  return UT(e || [], r || [], Zs);
}
function hK(e, r) {
  return UT(e || [], r || [], ou);
}
var dK = Ne(function(e) {
  var r = e.length, t = r > 1 ? e[r - 1] : void 0;
  return t = typeof t == "function" ? (e.pop(), t) : void 0, kT(e, t);
}), vK = dK, oe = {
  chunk: aH,
  compact: Xn,
  concat: tl,
  difference: Pb,
  differenceBy: ak,
  differenceWith: Nb,
  drop: fk,
  dropRight: ck,
  dropRightWhile: hk,
  dropWhile: dk,
  fill: Mk,
  findIndex: gl,
  findLastIndex: jb,
  first: xa,
  flatten: b0,
  flattenDeep: Qb,
  flattenDepth: Uk,
  fromPairs: lG,
  head: xa,
  indexOf: Vc,
  initial: LG,
  intersection: tT,
  intersectionBy: IG,
  intersectionWith: BG,
  join: RU,
  last: ut,
  lastIndexOf: PU,
  nth: cY,
  pull: gX,
  pullAll: bT,
  pullAllBy: yX,
  pullAllWith: CX,
  pullAt: xX,
  remove: WX,
  reverse: fp,
  slice: sV,
  sortedIndex: mV,
  sortedIndexBy: _V,
  sortedIndexOf: wV,
  sortedLastIndex: xV,
  sortedLastIndexBy: SV,
  sortedLastIndexOf: bV,
  sortedUniq: TV,
  sortedUniqBy: EV,
  tail: HV,
  take: zV,
  takeRight: WV,
  takeRightWhile: kV,
  takeWhile: GV,
  union: Fq,
  unionBy: Nq,
  unionWith: zq,
  uniq: Ni,
  uniqBy: Wq,
  uniqWith: kq,
  unzip: pg,
  unzipWith: kT,
  without: Qq,
  xor: oK,
  xorBy: lK,
  xorWith: uK,
  zip: Jc,
  zipObject: cK,
  zipObjectDeep: hK,
  zipWith: vK
}, ht = {
  countBy: FW,
  each: xe,
  eachRight: V_,
  every: Gc,
  filter: Qi,
  find: cr,
  findLast: Uc,
  flatMap: ru,
  flatMapDeep: Wk,
  flatMapDepth: kk,
  forEach: xe,
  forEachRight: V_,
  groupBy: dG,
  includes: Sr,
  invokeMap: XG,
  keyBy: BU,
  map: We,
  orderBy: lg,
  partition: sX,
  reduce: jc,
  reduceRight: HX,
  reject: zX,
  sample: QX,
  sampleSize: tV,
  shuffle: oV,
  size: aa,
  some: RT,
  sortBy: OT
}, pK = {
  now: $f
}, Mt = {
  after: c$,
  ary: L2,
  before: N2,
  bind: H2,
  bindKey: k7,
  curry: k0,
  curryRight: G0,
  debounce: Bs,
  defer: ek,
  delay: rk,
  flip: Xk,
  memoize: Oa,
  negate: iu,
  once: mY,
  overArgs: AY,
  partial: xT,
  partialRight: aX,
  rearg: PX,
  rest: YX,
  spread: OV,
  throttle: vg,
  unary: Tq,
  wrap: Jq
}, de = {
  castArray: JN,
  clone: Ol,
  cloneDeep: tp,
  cloneDeepWith: kz,
  cloneWith: Uz,
  conformsTo: AW,
  eq: Jn,
  gt: pG,
  gte: yG,
  isArguments: Ca,
  isArray: le,
  isArrayBuffer: jG,
  isArrayLike: Gr,
  isArrayLikeObject: Ft,
  isBoolean: ui,
  isBuffer: Ro,
  isDate: tU,
  isElement: rU,
  isEmpty: Q,
  isEqual: tr,
  isEqualWith: lU,
  isError: T0,
  isFinite: uU,
  isFunction: Vt,
  isInteger: oT,
  isLength: $c,
  isMap: yb,
  isMatch: fU,
  isMatchWith: cU,
  isNaN: aT,
  isNative: gU,
  isNil: Nt,
  isNull: lT,
  isNumber: wr,
  isObject: rt,
  isObjectLike: It,
  isPlainObject: Js,
  isRegExp: Q0,
  isSafeInteger: _U,
  isSet: Cb,
  isString: Il,
  isSymbol: an,
  isTypedArray: Ll,
  isUndefined: qc,
  isWeakMap: xU,
  isWeakSet: bU,
  lt: kU,
  lte: UU,
  toArray: cT,
  toFinite: ki,
  toInteger: Be,
  toLength: Xb,
  toNumber: nn,
  toPlainObject: Db,
  toSafeInteger: gq,
  toString: nt
}, Rr = {
  add: r$,
  ceil: nH,
  divide: uk,
  floor: qk,
  max: Gi,
  maxBy: tg,
  mean: jU,
  meanBy: ZU,
  min: ng,
  minBy: nY,
  multiply: oY,
  round: jX,
  subtract: PV,
  sum: NV,
  sumBy: DT
}, yg = {
  clamp: ic,
  inRange: op,
  random: AX
}, Te = {
  assign: D2,
  assignIn: b_,
  assignInWith: nc,
  assignWith: zP,
  at: b7,
  create: PW,
  defaults: VW,
  defaultsDeep: ZW,
  entries: q_,
  entriesIn: K_,
  extend: b_,
  extendWith: nc,
  findKey: $k,
  findLastKey: Hk,
  forIn: eT,
  forInRight: iG,
  forOwn: oG,
  forOwnRight: aG,
  functions: sG,
  functionsIn: uG,
  get: ge,
  has: ip,
  hasIn: wa,
  invert: NG,
  invertBy: kG,
  invoke: UG,
  keys: Rt,
  keysIn: Ur,
  mapKeys: sT,
  mapValues: YU,
  merge: Ds,
  mergeWith: U0,
  omit: og,
  omitBy: CY,
  pick: ST,
  pickBy: ag,
  result: XX,
  set: $s,
  setWith: rV,
  toPairs: q_,
  toPairsIn: K_,
  transform: yq,
  unset: hp,
  update: Xq,
  updateWith: Vq,
  values: Ji,
  valuesIn: jq
}, Ti = {
  at: tK,
  chain: ub,
  commit: Yz,
  lodash: L,
  next: fY,
  plant: cX,
  reverse: nK,
  tap: UV,
  thru: au,
  toIterator: dq,
  toJSON: nv,
  value: nv,
  valueOf: nv,
  wrapperChain: rK
}, it = {
  camelCase: QN,
  capitalize: V2,
  deburr: q2,
  endsWith: Wb,
  escape: V0,
  escapeRegExp: Ak,
  kebabCase: IU,
  lowerCase: J0,
  lowerFirst: zU,
  pad: QY,
  padEnd: JY,
  padStart: eX,
  parseInt: nX,
  repeat: kX,
  replace: GX,
  snakeCase: fV,
  split: MT,
  startCase: MV,
  startsWith: BV,
  template: sq,
  templateSettings: cp,
  toLower: vq,
  toUpper: Fs,
  trim: zT,
  trimEnd: Cq,
  trimStart: _q,
  truncate: bq,
  unescape: Oq,
  upperCase: Kq,
  upperFirst: A0,
  words: sb
}, lt = {
  attempt: P2,
  bindAll: N7,
  cond: Rb,
  conforms: LW,
  constant: ll,
  defaultTo: UW,
  flow: tG,
  flowRight: nG,
  identity: dr,
  iteratee: EU,
  matches: ap,
  matchesProperty: qU,
  method: eY,
  methodOf: rY,
  mixin: fT,
  noop: Ic,
  nthArg: hY,
  over: SY,
  overEvery: OY,
  overSome: MY,
  property: Ab,
  propertyOf: hX,
  range: ul,
  rangeRight: DX,
  stubArray: M0,
  stubFalse: _0,
  stubObject: DV,
  stubString: $V,
  stubTrue: BT,
  times: hq,
  toPath: pq,
  uniqueId: Uq
};
function gK() {
  var e = new Ye(this.__wrapped__);
  return e.__actions__ = zr(this.__actions__), e.__dir__ = this.__dir__, e.__filtered__ = this.__filtered__, e.__iteratees__ = zr(this.__iteratees__), e.__takeCount__ = this.__takeCount__, e.__views__ = zr(this.__views__), e;
}
function yK() {
  if (this.__filtered__) {
    var e = new Ye(this);
    e.__dir__ = -1, e.__filtered__ = !0;
  } else
    e = this.clone(), e.__dir__ *= -1;
  return e;
}
var CK = Math.max, mK = Math.min;
function _K(e, r, t) {
  for (var n = -1, i = t.length; ++n < i; ) {
    var o = t[n], a = o.size;
    switch (o.type) {
      case "drop":
        e += a;
        break;
      case "dropRight":
        r -= a;
        break;
      case "take":
        r = mK(r, e + a);
        break;
      case "takeRight":
        e = CK(e, r - a);
        break;
    }
  }
  return { start: e, end: r };
}
var wK = 1, xK = 2, SK = Math.min;
function bK() {
  var e = this.__wrapped__.value(), r = this.__dir__, t = le(e), n = r < 0, i = t ? e.length : 0, o = _K(0, i, this.__views__), a = o.start, l = o.end, s = l - a, f = n ? l : a - 1, h = this.__iteratees__, d = h.length, v = 0, g = SK(s, this.__takeCount__);
  if (!t || !n && i == s && g == s)
    return PT(e, this.__actions__);
  var y = [];
  e:
    for (; s-- && v < g; ) {
      f += r;
      for (var C = -1, _ = e[f]; ++C < d; ) {
        var w = h[C], x = w.iteratee, S = w.type, T = x(_);
        if (S == xK)
          _ = T;
        else if (!T) {
          if (S == wK)
            continue e;
          break e;
        }
      }
      y[v++] = _;
    }
  return y;
}
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var TK = "4.17.21", EK = 2, LK = 1, AK = 3, YT = 4294967295, RK = Array.prototype, OK = Object.prototype, XT = OK.hasOwnProperty, ow = fr ? fr.iterator : void 0, IK = Math.max, aw = Math.min, Cg = /* @__PURE__ */ function(e) {
  return function(r, t, n) {
    if (n == null) {
      var i = rt(t), o = i && Rt(t), a = o && o.length && Yc(t, o);
      (a ? a.length : i) || (n = t, t = r, r = this);
    }
    return e(r, t, n);
  };
}(fT);
L.after = Mt.after;
L.ary = Mt.ary;
L.assign = Te.assign;
L.assignIn = Te.assignIn;
L.assignInWith = Te.assignInWith;
L.assignWith = Te.assignWith;
L.at = Te.at;
L.before = Mt.before;
L.bind = Mt.bind;
L.bindAll = lt.bindAll;
L.bindKey = Mt.bindKey;
L.castArray = de.castArray;
L.chain = Ti.chain;
L.chunk = oe.chunk;
L.compact = oe.compact;
L.concat = oe.concat;
L.cond = lt.cond;
L.conforms = lt.conforms;
L.constant = lt.constant;
L.countBy = ht.countBy;
L.create = Te.create;
L.curry = Mt.curry;
L.curryRight = Mt.curryRight;
L.debounce = Mt.debounce;
L.defaults = Te.defaults;
L.defaultsDeep = Te.defaultsDeep;
L.defer = Mt.defer;
L.delay = Mt.delay;
L.difference = oe.difference;
L.differenceBy = oe.differenceBy;
L.differenceWith = oe.differenceWith;
L.drop = oe.drop;
L.dropRight = oe.dropRight;
L.dropRightWhile = oe.dropRightWhile;
L.dropWhile = oe.dropWhile;
L.fill = oe.fill;
L.filter = ht.filter;
L.flatMap = ht.flatMap;
L.flatMapDeep = ht.flatMapDeep;
L.flatMapDepth = ht.flatMapDepth;
L.flatten = oe.flatten;
L.flattenDeep = oe.flattenDeep;
L.flattenDepth = oe.flattenDepth;
L.flip = Mt.flip;
L.flow = lt.flow;
L.flowRight = lt.flowRight;
L.fromPairs = oe.fromPairs;
L.functions = Te.functions;
L.functionsIn = Te.functionsIn;
L.groupBy = ht.groupBy;
L.initial = oe.initial;
L.intersection = oe.intersection;
L.intersectionBy = oe.intersectionBy;
L.intersectionWith = oe.intersectionWith;
L.invert = Te.invert;
L.invertBy = Te.invertBy;
L.invokeMap = ht.invokeMap;
L.iteratee = lt.iteratee;
L.keyBy = ht.keyBy;
L.keys = Rt;
L.keysIn = Te.keysIn;
L.map = ht.map;
L.mapKeys = Te.mapKeys;
L.mapValues = Te.mapValues;
L.matches = lt.matches;
L.matchesProperty = lt.matchesProperty;
L.memoize = Mt.memoize;
L.merge = Te.merge;
L.mergeWith = Te.mergeWith;
L.method = lt.method;
L.methodOf = lt.methodOf;
L.mixin = Cg;
L.negate = iu;
L.nthArg = lt.nthArg;
L.omit = Te.omit;
L.omitBy = Te.omitBy;
L.once = Mt.once;
L.orderBy = ht.orderBy;
L.over = lt.over;
L.overArgs = Mt.overArgs;
L.overEvery = lt.overEvery;
L.overSome = lt.overSome;
L.partial = Mt.partial;
L.partialRight = Mt.partialRight;
L.partition = ht.partition;
L.pick = Te.pick;
L.pickBy = Te.pickBy;
L.property = lt.property;
L.propertyOf = lt.propertyOf;
L.pull = oe.pull;
L.pullAll = oe.pullAll;
L.pullAllBy = oe.pullAllBy;
L.pullAllWith = oe.pullAllWith;
L.pullAt = oe.pullAt;
L.range = lt.range;
L.rangeRight = lt.rangeRight;
L.rearg = Mt.rearg;
L.reject = ht.reject;
L.remove = oe.remove;
L.rest = Mt.rest;
L.reverse = oe.reverse;
L.sampleSize = ht.sampleSize;
L.set = Te.set;
L.setWith = Te.setWith;
L.shuffle = ht.shuffle;
L.slice = oe.slice;
L.sortBy = ht.sortBy;
L.sortedUniq = oe.sortedUniq;
L.sortedUniqBy = oe.sortedUniqBy;
L.split = it.split;
L.spread = Mt.spread;
L.tail = oe.tail;
L.take = oe.take;
L.takeRight = oe.takeRight;
L.takeRightWhile = oe.takeRightWhile;
L.takeWhile = oe.takeWhile;
L.tap = Ti.tap;
L.throttle = Mt.throttle;
L.thru = au;
L.toArray = de.toArray;
L.toPairs = Te.toPairs;
L.toPairsIn = Te.toPairsIn;
L.toPath = lt.toPath;
L.toPlainObject = de.toPlainObject;
L.transform = Te.transform;
L.unary = Mt.unary;
L.union = oe.union;
L.unionBy = oe.unionBy;
L.unionWith = oe.unionWith;
L.uniq = oe.uniq;
L.uniqBy = oe.uniqBy;
L.uniqWith = oe.uniqWith;
L.unset = Te.unset;
L.unzip = oe.unzip;
L.unzipWith = oe.unzipWith;
L.update = Te.update;
L.updateWith = Te.updateWith;
L.values = Te.values;
L.valuesIn = Te.valuesIn;
L.without = oe.without;
L.words = it.words;
L.wrap = Mt.wrap;
L.xor = oe.xor;
L.xorBy = oe.xorBy;
L.xorWith = oe.xorWith;
L.zip = oe.zip;
L.zipObject = oe.zipObject;
L.zipObjectDeep = oe.zipObjectDeep;
L.zipWith = oe.zipWith;
L.entries = Te.toPairs;
L.entriesIn = Te.toPairsIn;
L.extend = Te.assignIn;
L.extendWith = Te.assignInWith;
Cg(L, L);
L.add = Rr.add;
L.attempt = lt.attempt;
L.camelCase = it.camelCase;
L.capitalize = it.capitalize;
L.ceil = Rr.ceil;
L.clamp = yg.clamp;
L.clone = de.clone;
L.cloneDeep = de.cloneDeep;
L.cloneDeepWith = de.cloneDeepWith;
L.cloneWith = de.cloneWith;
L.conformsTo = de.conformsTo;
L.deburr = it.deburr;
L.defaultTo = lt.defaultTo;
L.divide = Rr.divide;
L.endsWith = it.endsWith;
L.eq = de.eq;
L.escape = it.escape;
L.escapeRegExp = it.escapeRegExp;
L.every = ht.every;
L.find = ht.find;
L.findIndex = oe.findIndex;
L.findKey = Te.findKey;
L.findLast = ht.findLast;
L.findLastIndex = oe.findLastIndex;
L.findLastKey = Te.findLastKey;
L.floor = Rr.floor;
L.forEach = ht.forEach;
L.forEachRight = ht.forEachRight;
L.forIn = Te.forIn;
L.forInRight = Te.forInRight;
L.forOwn = Te.forOwn;
L.forOwnRight = Te.forOwnRight;
L.get = Te.get;
L.gt = de.gt;
L.gte = de.gte;
L.has = Te.has;
L.hasIn = Te.hasIn;
L.head = oe.head;
L.identity = dr;
L.includes = ht.includes;
L.indexOf = oe.indexOf;
L.inRange = yg.inRange;
L.invoke = Te.invoke;
L.isArguments = de.isArguments;
L.isArray = le;
L.isArrayBuffer = de.isArrayBuffer;
L.isArrayLike = de.isArrayLike;
L.isArrayLikeObject = de.isArrayLikeObject;
L.isBoolean = de.isBoolean;
L.isBuffer = de.isBuffer;
L.isDate = de.isDate;
L.isElement = de.isElement;
L.isEmpty = de.isEmpty;
L.isEqual = de.isEqual;
L.isEqualWith = de.isEqualWith;
L.isError = de.isError;
L.isFinite = de.isFinite;
L.isFunction = de.isFunction;
L.isInteger = de.isInteger;
L.isLength = de.isLength;
L.isMap = de.isMap;
L.isMatch = de.isMatch;
L.isMatchWith = de.isMatchWith;
L.isNaN = de.isNaN;
L.isNative = de.isNative;
L.isNil = de.isNil;
L.isNull = de.isNull;
L.isNumber = de.isNumber;
L.isObject = rt;
L.isObjectLike = de.isObjectLike;
L.isPlainObject = de.isPlainObject;
L.isRegExp = de.isRegExp;
L.isSafeInteger = de.isSafeInteger;
L.isSet = de.isSet;
L.isString = de.isString;
L.isSymbol = de.isSymbol;
L.isTypedArray = de.isTypedArray;
L.isUndefined = de.isUndefined;
L.isWeakMap = de.isWeakMap;
L.isWeakSet = de.isWeakSet;
L.join = oe.join;
L.kebabCase = it.kebabCase;
L.last = ut;
L.lastIndexOf = oe.lastIndexOf;
L.lowerCase = it.lowerCase;
L.lowerFirst = it.lowerFirst;
L.lt = de.lt;
L.lte = de.lte;
L.max = Rr.max;
L.maxBy = Rr.maxBy;
L.mean = Rr.mean;
L.meanBy = Rr.meanBy;
L.min = Rr.min;
L.minBy = Rr.minBy;
L.stubArray = lt.stubArray;
L.stubFalse = lt.stubFalse;
L.stubObject = lt.stubObject;
L.stubString = lt.stubString;
L.stubTrue = lt.stubTrue;
L.multiply = Rr.multiply;
L.nth = oe.nth;
L.noop = lt.noop;
L.now = pK.now;
L.pad = it.pad;
L.padEnd = it.padEnd;
L.padStart = it.padStart;
L.parseInt = it.parseInt;
L.random = yg.random;
L.reduce = ht.reduce;
L.reduceRight = ht.reduceRight;
L.repeat = it.repeat;
L.replace = it.replace;
L.result = Te.result;
L.round = Rr.round;
L.sample = ht.sample;
L.size = ht.size;
L.snakeCase = it.snakeCase;
L.some = ht.some;
L.sortedIndex = oe.sortedIndex;
L.sortedIndexBy = oe.sortedIndexBy;
L.sortedIndexOf = oe.sortedIndexOf;
L.sortedLastIndex = oe.sortedLastIndex;
L.sortedLastIndexBy = oe.sortedLastIndexBy;
L.sortedLastIndexOf = oe.sortedLastIndexOf;
L.startCase = it.startCase;
L.startsWith = it.startsWith;
L.subtract = Rr.subtract;
L.sum = Rr.sum;
L.sumBy = Rr.sumBy;
L.template = it.template;
L.times = lt.times;
L.toFinite = de.toFinite;
L.toInteger = Be;
L.toLength = de.toLength;
L.toLower = it.toLower;
L.toNumber = de.toNumber;
L.toSafeInteger = de.toSafeInteger;
L.toString = de.toString;
L.toUpper = it.toUpper;
L.trim = it.trim;
L.trimEnd = it.trimEnd;
L.trimStart = it.trimStart;
L.truncate = it.truncate;
L.unescape = it.unescape;
L.uniqueId = lt.uniqueId;
L.upperCase = it.upperCase;
L.upperFirst = it.upperFirst;
L.each = ht.forEach;
L.eachRight = ht.forEachRight;
L.first = oe.head;
Cg(L, function() {
  var e = {};
  return Si(L, function(r, t) {
    XT.call(L.prototype, t) || (e[t] = r);
  }), e;
}(), { chain: !1 });
L.VERSION = TK;
(L.templateSettings = it.templateSettings).imports._ = L;
In(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(e) {
  L[e].placeholder = L;
});
In(["drop", "take"], function(e, r) {
  Ye.prototype[e] = function(t) {
    t = t === void 0 ? 1 : IK(Be(t), 0);
    var n = this.__filtered__ && !r ? new Ye(this) : this.clone();
    return n.__filtered__ ? n.__takeCount__ = aw(t, n.__takeCount__) : n.__views__.push({
      size: aw(t, YT),
      type: e + (n.__dir__ < 0 ? "Right" : "")
    }), n;
  }, Ye.prototype[e + "Right"] = function(t) {
    return this.reverse()[e](t).reverse();
  };
});
In(["filter", "map", "takeWhile"], function(e, r) {
  var t = r + 1, n = t == LK || t == AK;
  Ye.prototype[e] = function(i) {
    var o = this.clone();
    return o.__iteratees__.push({
      iteratee: Re(i),
      type: t
    }), o.__filtered__ = o.__filtered__ || n, o;
  };
});
In(["head", "last"], function(e, r) {
  var t = "take" + (r ? "Right" : "");
  Ye.prototype[e] = function() {
    return this[t](1).value()[0];
  };
});
In(["initial", "tail"], function(e, r) {
  var t = "drop" + (r ? "" : "Right");
  Ye.prototype[e] = function() {
    return this.__filtered__ ? new Ye(this) : this[t](1);
  };
});
Ye.prototype.compact = function() {
  return this.filter(dr);
};
Ye.prototype.find = function(e) {
  return this.filter(e).head();
};
Ye.prototype.findLast = function(e) {
  return this.reverse().find(e);
};
Ye.prototype.invokeMap = Ne(function(e, r) {
  return typeof e == "function" ? new Ye(this) : this.map(function(t) {
    return nu(t, e, r);
  });
});
Ye.prototype.reject = function(e) {
  return this.filter(iu(Re(e)));
};
Ye.prototype.slice = function(e, r) {
  e = Be(e);
  var t = this;
  return t.__filtered__ && (e > 0 || r < 0) ? new Ye(t) : (e < 0 ? t = t.takeRight(-e) : e && (t = t.drop(e)), r !== void 0 && (r = Be(r), t = r < 0 ? t.dropRight(-r) : t.take(r - e)), t);
};
Ye.prototype.takeRightWhile = function(e) {
  return this.reverse().takeWhile(e).reverse();
};
Ye.prototype.toArray = function() {
  return this.take(YT);
};
Si(Ye.prototype, function(e, r) {
  var t = /^(?:filter|find|map|reject)|While$/.test(r), n = /^(?:head|last)$/.test(r), i = L[n ? "take" + (r == "last" ? "Right" : "") : r], o = n || /^find/.test(r);
  i && (L.prototype[r] = function() {
    var a = this.__wrapped__, l = n ? [1] : arguments, s = a instanceof Ye, f = l[0], h = s || le(a), d = function(w) {
      var x = i.apply(L, Do([w], l));
      return n && v ? x[0] : x;
    };
    h && t && typeof f == "function" && f.length != 1 && (s = h = !1);
    var v = this.__chain__, g = !!this.__actions__.length, y = o && !v, C = s && !g;
    if (!o && h) {
      a = C ? a : new Ye(this);
      var _ = e.apply(a, l);
      return _.__actions__.push({ func: au, args: [d], thisArg: void 0 }), new Ln(_, v);
    }
    return y && C ? e.apply(this, l) : (_ = this.thru(d), y ? n ? _.value()[0] : _.value() : _);
  });
});
In(["pop", "push", "shift", "sort", "splice", "unshift"], function(e) {
  var r = RK[e], t = /^(?:push|sort|unshift)$/.test(e) ? "tap" : "thru", n = /^(?:pop|shift)$/.test(e);
  L.prototype[e] = function() {
    var i = arguments;
    if (n && !this.__chain__) {
      var o = this.value();
      return r.apply(le(o) ? o : [], i);
    }
    return this[t](function(a) {
      return r.apply(le(a) ? a : [], i);
    });
  };
});
Si(Ye.prototype, function(e, r) {
  var t = L[r];
  if (t) {
    var n = t.name + "";
    XT.call(al, n) || (al[n] = []), al[n].push({ name: r, func: t });
  }
});
al[Dc(void 0, EK).name] = [{
  name: "wrapper",
  func: void 0
}];
Ye.prototype.clone = gK;
Ye.prototype.reverse = yK;
Ye.prototype.value = bK;
L.prototype.at = Ti.at;
L.prototype.chain = Ti.wrapperChain;
L.prototype.commit = Ti.commit;
L.prototype.next = Ti.next;
L.prototype.plant = Ti.plant;
L.prototype.reverse = Ti.reverse;
L.prototype.toJSON = L.prototype.valueOf = L.prototype.value = Ti.value;
L.prototype.first = L.prototype.head;
ow && (L.prototype[ow] = Ti.toIterator);
function lc(e) {
  "@babel/helpers - typeof";
  return lc = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(r) {
    return typeof r;
  } : function(r) {
    return r && typeof Symbol == "function" && r.constructor === Symbol && r !== Symbol.prototype ? "symbol" : typeof r;
  }, lc(e);
}
var MK = /^\s+/, BK = /\s+$/;
function ce(e, r) {
  if (e = e || "", r = r || {}, e instanceof ce)
    return e;
  if (!(this instanceof ce))
    return new ce(e, r);
  var t = DK(e);
  this._originalInput = e, this._r = t.r, this._g = t.g, this._b = t.b, this._a = t.a, this._roundA = Math.round(100 * this._a) / 100, this._format = r.format || t.format, this._gradientType = r.gradientType, this._r < 1 && (this._r = Math.round(this._r)), this._g < 1 && (this._g = Math.round(this._g)), this._b < 1 && (this._b = Math.round(this._b)), this._ok = t.ok;
}
ce.prototype = {
  isDark: function() {
    return this.getBrightness() < 128;
  },
  isLight: function() {
    return !this.isDark();
  },
  isValid: function() {
    return this._ok;
  },
  getOriginalInput: function() {
    return this._originalInput;
  },
  getFormat: function() {
    return this._format;
  },
  getAlpha: function() {
    return this._a;
  },
  getBrightness: function() {
    var r = this.toRgb();
    return (r.r * 299 + r.g * 587 + r.b * 114) / 1e3;
  },
  getLuminance: function() {
    var r = this.toRgb(), t, n, i, o, a, l;
    return t = r.r / 255, n = r.g / 255, i = r.b / 255, t <= 0.03928 ? o = t / 12.92 : o = Math.pow((t + 0.055) / 1.055, 2.4), n <= 0.03928 ? a = n / 12.92 : a = Math.pow((n + 0.055) / 1.055, 2.4), i <= 0.03928 ? l = i / 12.92 : l = Math.pow((i + 0.055) / 1.055, 2.4), 0.2126 * o + 0.7152 * a + 0.0722 * l;
  },
  setAlpha: function(r) {
    return this._a = VT(r), this._roundA = Math.round(100 * this._a) / 100, this;
  },
  toHsv: function() {
    var r = sw(this._r, this._g, this._b);
    return {
      h: r.h * 360,
      s: r.s,
      v: r.v,
      a: this._a
    };
  },
  toHsvString: function() {
    var r = sw(this._r, this._g, this._b), t = Math.round(r.h * 360), n = Math.round(r.s * 100), i = Math.round(r.v * 100);
    return this._a == 1 ? "hsv(" + t + ", " + n + "%, " + i + "%)" : "hsva(" + t + ", " + n + "%, " + i + "%, " + this._roundA + ")";
  },
  toHsl: function() {
    var r = lw(this._r, this._g, this._b);
    return {
      h: r.h * 360,
      s: r.s,
      l: r.l,
      a: this._a
    };
  },
  toHslString: function() {
    var r = lw(this._r, this._g, this._b), t = Math.round(r.h * 360), n = Math.round(r.s * 100), i = Math.round(r.l * 100);
    return this._a == 1 ? "hsl(" + t + ", " + n + "%, " + i + "%)" : "hsla(" + t + ", " + n + "%, " + i + "%, " + this._roundA + ")";
  },
  toHex: function(r) {
    return uw(this._r, this._g, this._b, r);
  },
  toHexString: function(r) {
    return "#" + this.toHex(r);
  },
  toHex8: function(r) {
    return NK(this._r, this._g, this._b, this._a, r);
  },
  toHex8String: function(r) {
    return "#" + this.toHex8(r);
  },
  toRgb: function() {
    return {
      r: Math.round(this._r),
      g: Math.round(this._g),
      b: Math.round(this._b),
      a: this._a
    };
  },
  toRgbString: function() {
    return this._a == 1 ? "rgb(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ")" : "rgba(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ", " + this._roundA + ")";
  },
  toPercentageRgb: function() {
    return {
      r: Math.round(bt(this._r, 255) * 100) + "%",
      g: Math.round(bt(this._g, 255) * 100) + "%",
      b: Math.round(bt(this._b, 255) * 100) + "%",
      a: this._a
    };
  },
  toPercentageRgbString: function() {
    return this._a == 1 ? "rgb(" + Math.round(bt(this._r, 255) * 100) + "%, " + Math.round(bt(this._g, 255) * 100) + "%, " + Math.round(bt(this._b, 255) * 100) + "%)" : "rgba(" + Math.round(bt(this._r, 255) * 100) + "%, " + Math.round(bt(this._g, 255) * 100) + "%, " + Math.round(bt(this._b, 255) * 100) + "%, " + this._roundA + ")";
  },
  toName: function() {
    return this._a === 0 ? "transparent" : this._a < 1 ? !1 : jK[uw(this._r, this._g, this._b, !0)] || !1;
  },
  toFilter: function(r) {
    var t = "#" + fw(this._r, this._g, this._b, this._a), n = t, i = this._gradientType ? "GradientType = 1, " : "";
    if (r) {
      var o = ce(r);
      n = "#" + fw(o._r, o._g, o._b, o._a);
    }
    return "progid:DXImageTransform.Microsoft.gradient(" + i + "startColorstr=" + t + ",endColorstr=" + n + ")";
  },
  toString: function(r) {
    var t = !!r;
    r = r || this._format;
    var n = !1, i = this._a < 1 && this._a >= 0, o = !t && i && (r === "hex" || r === "hex6" || r === "hex3" || r === "hex4" || r === "hex8" || r === "name");
    return o ? r === "name" && this._a === 0 ? this.toName() : this.toRgbString() : (r === "rgb" && (n = this.toRgbString()), r === "prgb" && (n = this.toPercentageRgbString()), (r === "hex" || r === "hex6") && (n = this.toHexString()), r === "hex3" && (n = this.toHexString(!0)), r === "hex4" && (n = this.toHex8String(!0)), r === "hex8" && (n = this.toHex8String()), r === "name" && (n = this.toName()), r === "hsl" && (n = this.toHslString()), r === "hsv" && (n = this.toHsvString()), n || this.toHexString());
  },
  clone: function() {
    return ce(this.toString());
  },
  _applyModification: function(r, t) {
    var n = r.apply(null, [this].concat([].slice.call(t)));
    return this._r = n._r, this._g = n._g, this._b = n._b, this.setAlpha(n._a), this;
  },
  lighten: function() {
    return this._applyModification(kK, arguments);
  },
  brighten: function() {
    return this._applyModification(GK, arguments);
  },
  darken: function() {
    return this._applyModification(UK, arguments);
  },
  desaturate: function() {
    return this._applyModification(HK, arguments);
  },
  saturate: function() {
    return this._applyModification(zK, arguments);
  },
  greyscale: function() {
    return this._applyModification(WK, arguments);
  },
  spin: function() {
    return this._applyModification(YK, arguments);
  },
  _applyCombination: function(r, t) {
    return r.apply(null, [this].concat([].slice.call(t)));
  },
  analogous: function() {
    return this._applyCombination(qK, arguments);
  },
  complement: function() {
    return this._applyCombination(XK, arguments);
  },
  monochromatic: function() {
    return this._applyCombination(KK, arguments);
  },
  splitcomplement: function() {
    return this._applyCombination(VK, arguments);
  },
  // Disabled until https://github.com/bgrins/TinyColor/issues/254
  // polyad: function (number) {
  //   return this._applyCombination(polyad, [number]);
  // },
  triad: function() {
    return this._applyCombination(cw, [3]);
  },
  tetrad: function() {
    return this._applyCombination(cw, [4]);
  }
};
ce.fromRatio = function(e, r) {
  if (lc(e) == "object") {
    var t = {};
    for (var n in e)
      e.hasOwnProperty(n) && (n === "a" ? t[n] = e[n] : t[n] = us(e[n]));
    e = t;
  }
  return ce(e, r);
};
function DK(e) {
  var r = {
    r: 0,
    g: 0,
    b: 0
  }, t = 1, n = null, i = null, o = null, a = !1, l = !1;
  return typeof e == "string" && (e = ej(e)), lc(e) == "object" && (Fi(e.r) && Fi(e.g) && Fi(e.b) ? (r = $K(e.r, e.g, e.b), a = !0, l = String(e.r).substr(-1) === "%" ? "prgb" : "rgb") : Fi(e.h) && Fi(e.s) && Fi(e.v) ? (n = us(e.s), i = us(e.v), r = PK(e.h, n, i), a = !0, l = "hsv") : Fi(e.h) && Fi(e.s) && Fi(e.l) && (n = us(e.s), o = us(e.l), r = FK(e.h, n, o), a = !0, l = "hsl"), e.hasOwnProperty("a") && (t = e.a)), t = VT(t), {
    ok: a,
    format: e.format || l,
    r: Math.min(255, Math.max(r.r, 0)),
    g: Math.min(255, Math.max(r.g, 0)),
    b: Math.min(255, Math.max(r.b, 0)),
    a: t
  };
}
function $K(e, r, t) {
  return {
    r: bt(e, 255) * 255,
    g: bt(r, 255) * 255,
    b: bt(t, 255) * 255
  };
}
function lw(e, r, t) {
  e = bt(e, 255), r = bt(r, 255), t = bt(t, 255);
  var n = Math.max(e, r, t), i = Math.min(e, r, t), o, a, l = (n + i) / 2;
  if (n == i)
    o = a = 0;
  else {
    var s = n - i;
    switch (a = l > 0.5 ? s / (2 - n - i) : s / (n + i), n) {
      case e:
        o = (r - t) / s + (r < t ? 6 : 0);
        break;
      case r:
        o = (t - e) / s + 2;
        break;
      case t:
        o = (e - r) / s + 4;
        break;
    }
    o /= 6;
  }
  return {
    h: o,
    s: a,
    l
  };
}
function FK(e, r, t) {
  var n, i, o;
  e = bt(e, 360), r = bt(r, 100), t = bt(t, 100);
  function a(f, h, d) {
    return d < 0 && (d += 1), d > 1 && (d -= 1), d < 1 / 6 ? f + (h - f) * 6 * d : d < 1 / 2 ? h : d < 2 / 3 ? f + (h - f) * (2 / 3 - d) * 6 : f;
  }
  if (r === 0)
    n = i = o = t;
  else {
    var l = t < 0.5 ? t * (1 + r) : t + r - t * r, s = 2 * t - l;
    n = a(s, l, e + 1 / 3), i = a(s, l, e), o = a(s, l, e - 1 / 3);
  }
  return {
    r: n * 255,
    g: i * 255,
    b: o * 255
  };
}
function sw(e, r, t) {
  e = bt(e, 255), r = bt(r, 255), t = bt(t, 255);
  var n = Math.max(e, r, t), i = Math.min(e, r, t), o, a, l = n, s = n - i;
  if (a = n === 0 ? 0 : s / n, n == i)
    o = 0;
  else {
    switch (n) {
      case e:
        o = (r - t) / s + (r < t ? 6 : 0);
        break;
      case r:
        o = (t - e) / s + 2;
        break;
      case t:
        o = (e - r) / s + 4;
        break;
    }
    o /= 6;
  }
  return {
    h: o,
    s: a,
    v: l
  };
}
function PK(e, r, t) {
  e = bt(e, 360) * 6, r = bt(r, 100), t = bt(t, 100);
  var n = Math.floor(e), i = e - n, o = t * (1 - r), a = t * (1 - i * r), l = t * (1 - (1 - i) * r), s = n % 6, f = [t, a, o, o, l, t][s], h = [l, t, t, a, o, o][s], d = [o, o, l, t, t, a][s];
  return {
    r: f * 255,
    g: h * 255,
    b: d * 255
  };
}
function uw(e, r, t, n) {
  var i = [kn(Math.round(e).toString(16)), kn(Math.round(r).toString(16)), kn(Math.round(t).toString(16))];
  return n && i[0].charAt(0) == i[0].charAt(1) && i[1].charAt(0) == i[1].charAt(1) && i[2].charAt(0) == i[2].charAt(1) ? i[0].charAt(0) + i[1].charAt(0) + i[2].charAt(0) : i.join("");
}
function NK(e, r, t, n, i) {
  var o = [kn(Math.round(e).toString(16)), kn(Math.round(r).toString(16)), kn(Math.round(t).toString(16)), kn(qT(n))];
  return i && o[0].charAt(0) == o[0].charAt(1) && o[1].charAt(0) == o[1].charAt(1) && o[2].charAt(0) == o[2].charAt(1) && o[3].charAt(0) == o[3].charAt(1) ? o[0].charAt(0) + o[1].charAt(0) + o[2].charAt(0) + o[3].charAt(0) : o.join("");
}
function fw(e, r, t, n) {
  var i = [kn(qT(n)), kn(Math.round(e).toString(16)), kn(Math.round(r).toString(16)), kn(Math.round(t).toString(16))];
  return i.join("");
}
ce.equals = function(e, r) {
  return !e || !r ? !1 : ce(e).toRgbString() == ce(r).toRgbString();
};
ce.random = function() {
  return ce.fromRatio({
    r: Math.random(),
    g: Math.random(),
    b: Math.random()
  });
};
function HK(e, r) {
  r = r === 0 ? 0 : r || 10;
  var t = ce(e).toHsl();
  return t.s -= r / 100, t.s = eh(t.s), ce(t);
}
function zK(e, r) {
  r = r === 0 ? 0 : r || 10;
  var t = ce(e).toHsl();
  return t.s += r / 100, t.s = eh(t.s), ce(t);
}
function WK(e) {
  return ce(e).desaturate(100);
}
function kK(e, r) {
  r = r === 0 ? 0 : r || 10;
  var t = ce(e).toHsl();
  return t.l += r / 100, t.l = eh(t.l), ce(t);
}
function GK(e, r) {
  r = r === 0 ? 0 : r || 10;
  var t = ce(e).toRgb();
  return t.r = Math.max(0, Math.min(255, t.r - Math.round(255 * -(r / 100)))), t.g = Math.max(0, Math.min(255, t.g - Math.round(255 * -(r / 100)))), t.b = Math.max(0, Math.min(255, t.b - Math.round(255 * -(r / 100)))), ce(t);
}
function UK(e, r) {
  r = r === 0 ? 0 : r || 10;
  var t = ce(e).toHsl();
  return t.l -= r / 100, t.l = eh(t.l), ce(t);
}
function YK(e, r) {
  var t = ce(e).toHsl(), n = (t.h + r) % 360;
  return t.h = n < 0 ? 360 + n : n, ce(t);
}
function XK(e) {
  var r = ce(e).toHsl();
  return r.h = (r.h + 180) % 360, ce(r);
}
function cw(e, r) {
  if (isNaN(r) || r <= 0)
    throw new Error("Argument to polyad must be a positive number");
  for (var t = ce(e).toHsl(), n = [ce(e)], i = 360 / r, o = 1; o < r; o++)
    n.push(ce({
      h: (t.h + o * i) % 360,
      s: t.s,
      l: t.l
    }));
  return n;
}
function VK(e) {
  var r = ce(e).toHsl(), t = r.h;
  return [ce(e), ce({
    h: (t + 72) % 360,
    s: r.s,
    l: r.l
  }), ce({
    h: (t + 216) % 360,
    s: r.s,
    l: r.l
  })];
}
function qK(e, r, t) {
  r = r || 6, t = t || 30;
  var n = ce(e).toHsl(), i = 360 / t, o = [ce(e)];
  for (n.h = (n.h - (i * r >> 1) + 720) % 360; --r; )
    n.h = (n.h + i) % 360, o.push(ce(n));
  return o;
}
function KK(e, r) {
  r = r || 6;
  for (var t = ce(e).toHsv(), n = t.h, i = t.s, o = t.v, a = [], l = 1 / r; r--; )
    a.push(ce({
      h: n,
      s: i,
      v: o
    })), o = (o + l) % 1;
  return a;
}
ce.mix = function(e, r, t) {
  t = t === 0 ? 0 : t || 50;
  var n = ce(e).toRgb(), i = ce(r).toRgb(), o = t / 100, a = {
    r: (i.r - n.r) * o + n.r,
    g: (i.g - n.g) * o + n.g,
    b: (i.b - n.b) * o + n.b,
    a: (i.a - n.a) * o + n.a
  };
  return ce(a);
};
ce.readability = function(e, r) {
  var t = ce(e), n = ce(r);
  return (Math.max(t.getLuminance(), n.getLuminance()) + 0.05) / (Math.min(t.getLuminance(), n.getLuminance()) + 0.05);
};
ce.isReadable = function(e, r, t) {
  var n = ce.readability(e, r), i, o;
  switch (o = !1, i = tj(t), i.level + i.size) {
    case "AAsmall":
    case "AAAlarge":
      o = n >= 4.5;
      break;
    case "AAlarge":
      o = n >= 3;
      break;
    case "AAAsmall":
      o = n >= 7;
      break;
  }
  return o;
};
ce.mostReadable = function(e, r, t) {
  var n = null, i = 0, o, a, l, s;
  t = t || {}, a = t.includeFallbackColors, l = t.level, s = t.size;
  for (var f = 0; f < r.length; f++)
    o = ce.readability(e, r[f]), o > i && (i = o, n = ce(r[f]));
  return ce.isReadable(e, n, {
    level: l,
    size: s
  }) || !a ? n : (t.includeFallbackColors = !1, ce.mostReadable(e, ["#fff", "#000"], t));
};
var dp = ce.names = {
  aliceblue: "f0f8ff",
  antiquewhite: "faebd7",
  aqua: "0ff",
  aquamarine: "7fffd4",
  azure: "f0ffff",
  beige: "f5f5dc",
  bisque: "ffe4c4",
  black: "000",
  blanchedalmond: "ffebcd",
  blue: "00f",
  blueviolet: "8a2be2",
  brown: "a52a2a",
  burlywood: "deb887",
  burntsienna: "ea7e5d",
  cadetblue: "5f9ea0",
  chartreuse: "7fff00",
  chocolate: "d2691e",
  coral: "ff7f50",
  cornflowerblue: "6495ed",
  cornsilk: "fff8dc",
  crimson: "dc143c",
  cyan: "0ff",
  darkblue: "00008b",
  darkcyan: "008b8b",
  darkgoldenrod: "b8860b",
  darkgray: "a9a9a9",
  darkgreen: "006400",
  darkgrey: "a9a9a9",
  darkkhaki: "bdb76b",
  darkmagenta: "8b008b",
  darkolivegreen: "556b2f",
  darkorange: "ff8c00",
  darkorchid: "9932cc",
  darkred: "8b0000",
  darksalmon: "e9967a",
  darkseagreen: "8fbc8f",
  darkslateblue: "483d8b",
  darkslategray: "2f4f4f",
  darkslategrey: "2f4f4f",
  darkturquoise: "00ced1",
  darkviolet: "9400d3",
  deeppink: "ff1493",
  deepskyblue: "00bfff",
  dimgray: "696969",
  dimgrey: "696969",
  dodgerblue: "1e90ff",
  firebrick: "b22222",
  floralwhite: "fffaf0",
  forestgreen: "228b22",
  fuchsia: "f0f",
  gainsboro: "dcdcdc",
  ghostwhite: "f8f8ff",
  gold: "ffd700",
  goldenrod: "daa520",
  gray: "808080",
  green: "008000",
  greenyellow: "adff2f",
  grey: "808080",
  honeydew: "f0fff0",
  hotpink: "ff69b4",
  indianred: "cd5c5c",
  indigo: "4b0082",
  ivory: "fffff0",
  khaki: "f0e68c",
  lavender: "e6e6fa",
  lavenderblush: "fff0f5",
  lawngreen: "7cfc00",
  lemonchiffon: "fffacd",
  lightblue: "add8e6",
  lightcoral: "f08080",
  lightcyan: "e0ffff",
  lightgoldenrodyellow: "fafad2",
  lightgray: "d3d3d3",
  lightgreen: "90ee90",
  lightgrey: "d3d3d3",
  lightpink: "ffb6c1",
  lightsalmon: "ffa07a",
  lightseagreen: "20b2aa",
  lightskyblue: "87cefa",
  lightslategray: "789",
  lightslategrey: "789",
  lightsteelblue: "b0c4de",
  lightyellow: "ffffe0",
  lime: "0f0",
  limegreen: "32cd32",
  linen: "faf0e6",
  magenta: "f0f",
  maroon: "800000",
  mediumaquamarine: "66cdaa",
  mediumblue: "0000cd",
  mediumorchid: "ba55d3",
  mediumpurple: "9370db",
  mediumseagreen: "3cb371",
  mediumslateblue: "7b68ee",
  mediumspringgreen: "00fa9a",
  mediumturquoise: "48d1cc",
  mediumvioletred: "c71585",
  midnightblue: "191970",
  mintcream: "f5fffa",
  mistyrose: "ffe4e1",
  moccasin: "ffe4b5",
  navajowhite: "ffdead",
  navy: "000080",
  oldlace: "fdf5e6",
  olive: "808000",
  olivedrab: "6b8e23",
  orange: "ffa500",
  orangered: "ff4500",
  orchid: "da70d6",
  palegoldenrod: "eee8aa",
  palegreen: "98fb98",
  paleturquoise: "afeeee",
  palevioletred: "db7093",
  papayawhip: "ffefd5",
  peachpuff: "ffdab9",
  peru: "cd853f",
  pink: "ffc0cb",
  plum: "dda0dd",
  powderblue: "b0e0e6",
  purple: "800080",
  rebeccapurple: "663399",
  red: "f00",
  rosybrown: "bc8f8f",
  royalblue: "4169e1",
  saddlebrown: "8b4513",
  salmon: "fa8072",
  sandybrown: "f4a460",
  seagreen: "2e8b57",
  seashell: "fff5ee",
  sienna: "a0522d",
  silver: "c0c0c0",
  skyblue: "87ceeb",
  slateblue: "6a5acd",
  slategray: "708090",
  slategrey: "708090",
  snow: "fffafa",
  springgreen: "00ff7f",
  steelblue: "4682b4",
  tan: "d2b48c",
  teal: "008080",
  thistle: "d8bfd8",
  tomato: "ff6347",
  turquoise: "40e0d0",
  violet: "ee82ee",
  wheat: "f5deb3",
  white: "fff",
  whitesmoke: "f5f5f5",
  yellow: "ff0",
  yellowgreen: "9acd32"
}, jK = ce.hexNames = ZK(dp);
function ZK(e) {
  var r = {};
  for (var t in e)
    e.hasOwnProperty(t) && (r[e[t]] = t);
  return r;
}
function VT(e) {
  return e = parseFloat(e), (isNaN(e) || e < 0 || e > 1) && (e = 1), e;
}
function bt(e, r) {
  QK(e) && (e = "100%");
  var t = JK(e);
  return e = Math.min(r, Math.max(0, parseFloat(e))), t && (e = parseInt(e * r, 10) / 100), Math.abs(e - r) < 1e-6 ? 1 : e % r / parseFloat(r);
}
function eh(e) {
  return Math.min(1, Math.max(0, e));
}
function Jr(e) {
  return parseInt(e, 16);
}
function QK(e) {
  return typeof e == "string" && e.indexOf(".") != -1 && parseFloat(e) === 1;
}
function JK(e) {
  return typeof e == "string" && e.indexOf("%") != -1;
}
function kn(e) {
  return e.length == 1 ? "0" + e : "" + e;
}
function us(e) {
  return e <= 1 && (e = e * 100 + "%"), e;
}
function qT(e) {
  return Math.round(parseFloat(e) * 255).toString(16);
}
function hw(e) {
  return Jr(e) / 255;
}
var Nn = function() {
  var e = "[-\\+]?\\d+%?", r = "[-\\+]?\\d*\\.\\d+%?", t = "(?:" + r + ")|(?:" + e + ")", n = "[\\s|\\(]+(" + t + ")[,|\\s]+(" + t + ")[,|\\s]+(" + t + ")\\s*\\)?", i = "[\\s|\\(]+(" + t + ")[,|\\s]+(" + t + ")[,|\\s]+(" + t + ")[,|\\s]+(" + t + ")\\s*\\)?";
  return {
    CSS_UNIT: new RegExp(t),
    rgb: new RegExp("rgb" + n),
    rgba: new RegExp("rgba" + i),
    hsl: new RegExp("hsl" + n),
    hsla: new RegExp("hsla" + i),
    hsv: new RegExp("hsv" + n),
    hsva: new RegExp("hsva" + i),
    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
  };
}();
function Fi(e) {
  return !!Nn.CSS_UNIT.exec(e);
}
function ej(e) {
  e = e.replace(MK, "").replace(BK, "").toLowerCase();
  var r = !1;
  if (dp[e])
    e = dp[e], r = !0;
  else if (e == "transparent")
    return {
      r: 0,
      g: 0,
      b: 0,
      a: 0,
      format: "name"
    };
  var t;
  return (t = Nn.rgb.exec(e)) ? {
    r: t[1],
    g: t[2],
    b: t[3]
  } : (t = Nn.rgba.exec(e)) ? {
    r: t[1],
    g: t[2],
    b: t[3],
    a: t[4]
  } : (t = Nn.hsl.exec(e)) ? {
    h: t[1],
    s: t[2],
    l: t[3]
  } : (t = Nn.hsla.exec(e)) ? {
    h: t[1],
    s: t[2],
    l: t[3],
    a: t[4]
  } : (t = Nn.hsv.exec(e)) ? {
    h: t[1],
    s: t[2],
    v: t[3]
  } : (t = Nn.hsva.exec(e)) ? {
    h: t[1],
    s: t[2],
    v: t[3],
    a: t[4]
  } : (t = Nn.hex8.exec(e)) ? {
    r: Jr(t[1]),
    g: Jr(t[2]),
    b: Jr(t[3]),
    a: hw(t[4]),
    format: r ? "name" : "hex8"
  } : (t = Nn.hex6.exec(e)) ? {
    r: Jr(t[1]),
    g: Jr(t[2]),
    b: Jr(t[3]),
    format: r ? "name" : "hex"
  } : (t = Nn.hex4.exec(e)) ? {
    r: Jr(t[1] + "" + t[1]),
    g: Jr(t[2] + "" + t[2]),
    b: Jr(t[3] + "" + t[3]),
    a: hw(t[4] + "" + t[4]),
    format: r ? "name" : "hex8"
  } : (t = Nn.hex3.exec(e)) ? {
    r: Jr(t[1] + "" + t[1]),
    g: Jr(t[2] + "" + t[2]),
    b: Jr(t[3] + "" + t[3]),
    format: r ? "name" : "hex"
  } : !1;
}
function tj(e) {
  var r, t;
  return e = e || {
    level: "AA",
    size: "small"
  }, r = (e.level || "AA").toUpperCase(), t = (e.size || "small").toLowerCase(), r !== "AA" && r !== "AAA" && (r = "AA"), t !== "small" && t !== "large" && (t = "small"), {
    level: r,
    size: t
  };
}
var rj = "#FFFFFF", nj = "#000000", ij = [95, 85, 75, 30, 15, 0, 15, 30, 45, 60, 80], oj = 15, KT = function(e) {
  return ce(e).getLuminance() <= 0.5;
}, aj = function(e, r) {
  return ce.isReadable(e, r, {
    level: "AA",
    size: "small"
  });
}, lj = [
  {
    fontColorIndex: 0,
    bgColorIndex: 3
  },
  {
    fontColorIndex: 13,
    bgColorIndex: 8
  },
  {
    fontColorIndex: 14,
    bgColorIndex: 1
  }
], sj = function(e) {
  for (var r = [], t = 0; t < 11; t++) {
    var n = ij[t];
    r.push(Fs(n === 0 ? e : ce.mix(e, t < 5 ? rj : nj, n).toHexString()));
  }
  return r;
}, mg = function(e) {
  e === void 0 && (e = {});
  var r = Array.from(Array(oj)).fill(Xv), t = e.basicColorRelations, n = t === void 0 ? [] : t, i = e.brandColor, o = sj(i);
  return n.forEach(function(a) {
    r[a.basicColorIndex] = o[a.standardColorIndex];
  }), lj.forEach(function(a) {
    var l = a.fontColorIndex, s = a.bgColorIndex;
    r[l] = KT(r[s]) ? Xv : u2;
  }), M(M({}, e), { basicColors: r });
}, uj = {
  brandColor: "#3471F9",
  // ---------- semantic colors ----------
  semanticColors: {
    red: "#FF4D4F",
    green: "#29A294",
    yellow: "#FAAD14"
  },
  others: {
    // ---------- searchResults colors ----------
    highlight: "#87B5FF",
    results: "#F0F7FF"
  },
  basicColorRelations: [
    {
      basicColorIndex: 1,
      standardColorIndex: 0
    },
    {
      basicColorIndex: 2,
      standardColorIndex: 1
    },
    {
      basicColorIndex: 3,
      standardColorIndex: 5
    },
    {
      basicColorIndex: 4,
      standardColorIndex: 6
    },
    {
      basicColorIndex: 5,
      standardColorIndex: 6
    },
    {
      basicColorIndex: 6,
      standardColorIndex: 6
    },
    {
      basicColorIndex: 7,
      standardColorIndex: 5
    },
    {
      basicColorIndex: 9,
      standardColorIndex: 1
    },
    {
      basicColorIndex: 10,
      standardColorIndex: 4
    },
    {
      basicColorIndex: 11,
      standardColorIndex: 4
    },
    {
      basicColorIndex: 12,
      standardColorIndex: 5
    }
  ]
}, fj = mg(uj), cj = {
  brandColor: "#326EF4",
  // ---------- semantic colors ----------
  semanticColors: {
    red: "#FF4D4F",
    green: "#29A294",
    yellow: "#FAAD14"
  },
  others: {
    // ---------- searchResults colors ----------
    highlight: "#87B5FF",
    results: "#F0F7FF"
  },
  basicColorRelations: [
    {
      basicColorIndex: 1,
      standardColorIndex: 0
    },
    {
      basicColorIndex: 2,
      standardColorIndex: 1
    },
    {
      basicColorIndex: 3,
      standardColorIndex: 1
    },
    {
      basicColorIndex: 4,
      standardColorIndex: 2
    },
    {
      basicColorIndex: 5,
      standardColorIndex: 7
    },
    {
      basicColorIndex: 6,
      standardColorIndex: 5
    },
    {
      basicColorIndex: 7,
      standardColorIndex: 5
    },
    {
      basicColorIndex: 9,
      standardColorIndex: 1
    },
    {
      basicColorIndex: 10,
      standardColorIndex: 2
    },
    {
      basicColorIndex: 11,
      standardColorIndex: 5
    },
    {
      basicColorIndex: 12,
      standardColorIndex: 5
    }
  ]
}, hj = mg(cj), dj = {
  brandColor: "#9DA7B6",
  // ---------- semantic colors ----------
  semanticColors: {
    red: "#FF4D4F",
    green: "#29A294",
    yellow: "#FAAD14"
  },
  others: {
    // ---------- searchResults colors ----------
    highlight: "#87B5FF",
    results: "#F0F7FF"
  },
  basicColorRelations: [
    {
      basicColorIndex: 1,
      standardColorIndex: 0
    },
    {
      basicColorIndex: 2,
      standardColorIndex: 1
    },
    {
      basicColorIndex: 3,
      standardColorIndex: 1
    },
    {
      basicColorIndex: 4,
      standardColorIndex: 2
    },
    {
      basicColorIndex: 5,
      standardColorIndex: 7
    },
    {
      basicColorIndex: 6,
      standardColorIndex: 8
    },
    {
      basicColorIndex: 7,
      standardColorIndex: 5
    },
    {
      basicColorIndex: 9,
      standardColorIndex: 1
    },
    {
      basicColorIndex: 10,
      standardColorIndex: 2
    },
    {
      basicColorIndex: 11,
      standardColorIndex: 3
    },
    {
      basicColorIndex: 12,
      standardColorIndex: 3
    }
  ]
}, vj = mg(dj), pj = {
  default: hj,
  colorful: fj,
  gray: vj
}, Pn = "Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif", gj = 12, yj = {
  小计: "小计",
  总计: "总计",
  总和: "（总和）",
  项: "项",
  已选择: "已选择",
  序号: "序号",
  度量: "度量",
  数值: "数值",
  共计: "共计",
  条: "条",
  趋势: "趋势",
  隐藏: "隐藏",
  组内升序: "组内升序",
  升序: "升序",
  降序: "降序",
  组内降序: "组内降序",
  不排序: "不排序",
  "，": "，"
}, Cj = {
  小计: "Total",
  总计: "Total",
  总和: "(SUM)",
  项: "items",
  已选择: "selected",
  序号: "Index",
  度量: "Measure",
  数值: "Measure",
  共计: "Total",
  条: "",
  隐藏: "Hide",
  趋势: "Trend",
  组内升序: "Group ASC",
  组内降序: "Group DESC",
  升序: "ASC",
  降序: "DESC",
  不排序: "No order",
  "，": ", "
}, mj = "zh_CN", jT = mj, vp = {
  zh_CN: yj,
  en_US: Cj
}, _j = function(e) {
  jT = e;
}, wj = function(e) {
  vp = Ds({}, vp, e);
}, Et = function(e, r) {
  return r === void 0 && (r = e), ge(vp, [jT, e], r);
}, eo = "".concat(p0, "-tooltip"), _g = "".concat(eo, "-container"), xj = "".concat(_g, "-show"), Sj = "".concat(_g, "-hide"), dw = {
  x: 15,
  y: 10
}, bj = function() {
  return {
    key: "hiddenColumns",
    text: Et("隐藏"),
    icon: "EyeOutlined"
  };
}, Tj = function() {
  return {
    key: "trend",
    text: Et("趋势"),
    icon: "Trend"
  };
}, Ej = function() {
  return [
    {
      key: "asc",
      icon: "groupAsc",
      text: Et("组内升序")
    },
    {
      key: "desc",
      icon: "groupDesc",
      text: Et("组内降序")
    },
    {
      key: "none",
      text: Et("不排序")
    }
  ];
}, Lj = function() {
  return [
    {
      key: "asc",
      icon: "groupAsc",
      text: Et("升序")
    },
    {
      key: "desc",
      icon: "groupDesc",
      text: Et("降序")
    },
    {
      key: "none",
      text: Et("不排序")
    }
  ];
}, vw;
(function(e) {
  e[e.ALL = 0] = "ALL", e[e.COL = 1] = "COL", e[e.ROW = 2] = "ROW";
})(vw || (vw = {}));
var pp = 1, wn;
(function(e) {
  e.All = "all", e.DetailOnly = "detailOnly";
})(wn || (wn = {}));
function Xt(e) {
  return e === "mobile" ? !0 : /(iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent);
}
function Aj() {
  return /iPhone/gi.test(navigator.userAgent) && window.screen.height === 812 && window.screen.width === 375;
}
function ZT() {
  return /windows/i.test(navigator.userAgent);
}
var Rj = function(e) {
  var r = e || "default";
  return pj[r.toLowerCase()];
}, Oj = function(e) {
  var r, t, n, i, o, a = (e == null ? void 0 : e.palette) || Rj(e == null ? void 0 : e.name), l = a.basicColors, s = a.semanticColors, f = a.others, h = (r = e == null ? void 0 : e.spreadsheet) === null || r === void 0 ? void 0 : r.isTableMode(), d = ZT() ? "bold" : 700, v = function() {
    var g, y;
    return {
      bolderText: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: d,
        fill: l[13],
        opacity: 1,
        textAlign: "right",
        textBaseline: "middle",
        linkTextFill: l[6]
      },
      text: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: "normal",
        fill: l[13],
        opacity: 1,
        textAlign: "right",
        textBaseline: "middle",
        linkTextFill: l[6]
      },
      cell: {
        // ----------- background color -----------
        crossBackgroundColor: l[1],
        backgroundColor: l[8],
        backgroundColorOpacity: 1,
        // ----------- border color --------------
        horizontalBorderColor: l[9],
        horizontalBorderColorOpacity: 1,
        verticalBorderColor: l[9],
        verticalBorderColorOpacity: 1,
        // ----------- border width --------------
        horizontalBorderWidth: 1,
        verticalBorderWidth: 1,
        // -------------- border dash -----------------
        borderDash: [],
        // -------------- layout -----------------
        padding: {
          top: 8,
          right: 8,
          bottom: 8,
          left: 8
        },
        /* ---------- interaction state ----------- */
        interactionState: {
          // -------------- hover -------------------
          hover: {
            backgroundColor: l[2],
            backgroundOpacity: 0.6
          },
          // -------------- keep hover -------------------
          hoverFocus: {
            backgroundColor: l[2],
            backgroundOpacity: 0.6,
            borderColor: l[14],
            borderWidth: 1,
            borderOpacity: 1
          },
          // -------------- selected -------------------
          selected: {
            backgroundColor: l[2],
            backgroundOpacity: 0.6
          },
          // -------------- unselected -------------------
          unselected: {
            backgroundOpacity: 0.3,
            textOpacity: 0.3,
            opacity: 0.3
          },
          // -------------- searchResult -------------------
          searchResult: {
            backgroundColor: (g = f == null ? void 0 : f.results) !== null && g !== void 0 ? g : l[2],
            backgroundOpacity: 1
          },
          // -------------- highlight -------------------
          highlight: {
            backgroundColor: (y = f == null ? void 0 : f.highlight) !== null && y !== void 0 ? y : l[6],
            backgroundOpacity: 1
          },
          // -------------- prepare select --------------
          prepareSelect: {
            borderColor: l[14],
            borderOpacity: 1,
            borderWidth: 1
          }
        }
      },
      // ------------- mini chart ---------------
      miniChart: {
        // ------------- line graph -----------------
        line: {
          point: {
            size: 2.2,
            fill: l[6],
            opacity: 1
          },
          linkLine: {
            size: 1.5,
            fill: l[6],
            opacity: 0.6
          }
        },
        // ------------- bar graph -----------------
        bar: {
          intervalPadding: 4,
          fill: l[6],
          opacity: 1
        },
        // ------------- bullet graph -----------------
        bullet: {
          progressBar: {
            widthPercent: 0.6,
            height: 10,
            innerHeight: 6
          },
          comparativeMeasure: {
            width: 1,
            height: 12,
            fill: l[13],
            opacity: 0.25
          },
          rangeColors: {
            good: s == null ? void 0 : s.green,
            satisfactory: s.yellow,
            bad: s.red
          },
          backgroundColor: "#E9E9E9"
        },
        // ------------ interval bar graph -----------------
        interval: {
          height: gj,
          fill: l[7]
        }
      },
      icon: {
        fill: l[13],
        downIconColor: s.red,
        upIconColor: s.green,
        size: 10,
        margin: {
          right: 4,
          left: 4
        }
      }
    };
  };
  return {
    // ------------- Headers -------------------
    cornerCell: {
      bolderText: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: d,
        fill: l[0],
        opacity: 1,
        textAlign: h ? "center" : "left",
        textBaseline: "middle"
      },
      text: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: d,
        fill: l[0],
        opacity: 1,
        textAlign: "right",
        textBaseline: "middle"
      },
      cell: {
        // ----------- background color -----------
        backgroundColor: l[3],
        backgroundColorOpacity: 1,
        // ----------- border color --------------
        horizontalBorderColor: l[10],
        horizontalBorderColorOpacity: 1,
        verticalBorderColor: l[10],
        verticalBorderColorOpacity: 1,
        // ----------- border width --------------
        horizontalBorderWidth: 1,
        verticalBorderWidth: 1,
        // -------------- border dash -----------------
        borderDash: [],
        // -------------- layout -----------------
        padding: {
          top: 0,
          right: 8,
          bottom: 0,
          left: 8
        }
      },
      icon: {
        fill: l[0],
        size: 10,
        margin: {
          right: 4,
          left: 4
        }
      }
    },
    rowCell: {
      seriesText: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: "normal",
        fill: l[14],
        linkTextFill: l[6],
        opacity: 1,
        textBaseline: h ? "middle" : "top",
        textAlign: "center"
      },
      measureText: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: "normal",
        fill: l[14],
        linkTextFill: l[6],
        opacity: 1,
        textAlign: h ? "center" : "left",
        textBaseline: "top"
      },
      bolderText: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: d,
        fill: l[14],
        linkTextFill: l[6],
        opacity: 1,
        textAlign: h ? "center" : "left",
        textBaseline: "top"
      },
      text: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: "normal",
        fill: l[14],
        linkTextFill: l[6],
        opacity: 1,
        textBaseline: "top",
        textAlign: h ? "center" : "left"
        // default align center for row cell in table mode
      },
      cell: {
        // ----------- background color -----------
        backgroundColor: l[1],
        backgroundColorOpacity: 1,
        // ----------- bottom border color --------------
        horizontalBorderColor: l[9],
        horizontalBorderColorOpacity: 1,
        verticalBorderColor: l[9],
        verticalBorderColorOpacity: 1,
        // ----------- bottom border width --------------
        horizontalBorderWidth: 1,
        verticalBorderWidth: 1,
        // -------------- border dash -----------------
        borderDash: [],
        // -------------- layout -----------------
        padding: {
          top: 0,
          right: 8,
          bottom: 0,
          left: 8
        },
        /* ---------- interaction state ----------- */
        interactionState: {
          // -------------- hover -------------------
          hover: {
            backgroundColor: l[2],
            backgroundOpacity: 0.6
          },
          // -------------- selected -------------------
          selected: {
            backgroundColor: l[2],
            backgroundOpacity: 0.6
          },
          // -------------- unselected -------------------
          unselected: {
            backgroundOpacity: 0.3,
            textOpacity: 0.3,
            opacity: 0.3
          },
          // -------------- prepare select --------------
          prepareSelect: {
            borderColor: l[14],
            borderOpacity: 1,
            borderWidth: 1
          },
          // -------------- searchResult -------------------
          searchResult: {
            backgroundColor: (t = f == null ? void 0 : f.results) !== null && t !== void 0 ? t : l[2],
            backgroundOpacity: 1
          },
          // -------------- highlight -------------------
          highlight: {
            backgroundColor: (n = f == null ? void 0 : f.highlight) !== null && n !== void 0 ? n : l[6],
            backgroundOpacity: 1
          }
        }
      },
      icon: {
        fill: l[14],
        size: 10,
        margin: {
          right: 4,
          left: 4
        }
      },
      seriesNumberWidth: 80
    },
    colCell: {
      measureText: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: "normal",
        fill: l[0],
        opacity: 1,
        // 默认数值字段和 dataCell 数值对齐
        textAlign: "right",
        textBaseline: "middle"
      },
      bolderText: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: d,
        fill: l[0],
        opacity: 1,
        textAlign: "center",
        textBaseline: "middle"
      },
      text: {
        fontFamily: Pn,
        fontSize: 12,
        fontWeight: "normal",
        fill: l[0],
        opacity: 1,
        textAlign: "center",
        textBaseline: "middle"
      },
      cell: {
        // ----------- background color -----------
        backgroundColor: l[3],
        backgroundColorOpacity: 1,
        // ----------- border color --------------
        horizontalBorderColor: l[10],
        horizontalBorderColorOpacity: 1,
        verticalBorderColor: l[10],
        verticalBorderColorOpacity: 1,
        // ----------- border width --------------
        horizontalBorderWidth: 1,
        verticalBorderWidth: 1,
        // -------------- border dash -----------------
        borderDash: [],
        // -------------- layout -----------------
        padding: {
          top: 0,
          right: 8,
          bottom: 0,
          left: 8
        },
        /* ---------- interaction state ----------- */
        interactionState: {
          // -------------- hover -------------------
          hover: {
            backgroundColor: l[4],
            backgroundOpacity: 0.6
          },
          // -------------- selected -------------------
          selected: {
            backgroundColor: l[4],
            backgroundOpacity: 0.6
          },
          // -------------- unselected -------------------
          unselected: {
            backgroundOpacity: 0.3,
            textOpacity: 0.3,
            opacity: 0.3
          },
          // -------------- prepare select --------------
          prepareSelect: {
            borderColor: l[14],
            borderOpacity: 1,
            borderWidth: 1
          },
          // -------------- searchResult -------------------
          searchResult: {
            backgroundColor: (i = f == null ? void 0 : f.results) !== null && i !== void 0 ? i : l[2],
            backgroundOpacity: 1
          },
          // -------------- highlight -------------------
          highlight: {
            backgroundColor: (o = f == null ? void 0 : f.highlight) !== null && o !== void 0 ? o : l[6],
            backgroundOpacity: 1
          }
        }
      },
      icon: {
        fill: l[0],
        size: 10,
        margin: {
          top: 6,
          right: 4,
          bottom: 6,
          left: 4
        }
      }
    },
    // ------------- DataCell -------------------
    dataCell: v(),
    // ------------- MergedCell -------------------
    mergedCell: v(),
    // resize active area
    resizeArea: {
      size: 3,
      background: l[7],
      backgroundOpacity: 0,
      guideLineColor: l[7],
      guideLineDisableColor: "rgba(0,0,0,0.25)",
      guideLineDash: [3, 3],
      /* ---------- interaction state ----------- */
      interactionState: {
        hover: {
          backgroundColor: l[7],
          backgroundOpacity: 1
        }
      }
    },
    // ------------- scrollBar -------------------
    scrollBar: {
      trackColor: "rgba(0,0,0,0.01)",
      thumbHoverColor: "rgba(0,0,0,0.25)",
      thumbColor: "rgba(0,0,0,0.15)",
      thumbHorizontalMinSize: 32,
      thumbVerticalMinSize: 32,
      size: Xt() ? 3 : 6,
      hoverSize: Xt() ? 4 : 8,
      lineCap: "round"
    },
    // ------------- split line -----------------
    splitLine: {
      horizontalBorderColor: l[12],
      horizontalBorderColorOpacity: 0.2,
      horizontalBorderWidth: 2,
      verticalBorderColor: l[11],
      verticalBorderColorOpacity: 0.25,
      verticalBorderWidth: 2,
      showShadow: !0,
      shadowWidth: 8,
      shadowColors: {
        left: "rgba(0,0,0,0.1)",
        right: "rgba(0,0,0,0)"
      },
      borderDash: []
    },
    // ------------- prepareSelectMask -----------------
    prepareSelectMask: {
      backgroundColor: l[5],
      backgroundOpacity: 0.3
    },
    // ------------- canvas background
    background: {
      color: l[8],
      opacity: 1
    }
  };
}, Qt = (
  /** @class */
  function() {
    function e(r) {
      this.x = 0, this.y = 0, this.width = 0, this.height = 0, this.colIndex = -1, this.level = 0, this.isLeaf = !1, this.children = [], this.padding = 0;
      var t = r.id, n = r.key, i = r.value, o = r.label, a = r.parent, l = r.level, s = r.rowIndex, f = r.isTotals, h = r.isGrandTotals, d = r.isSubTotals, v = r.isCollapsed, g = r.isTotalRoot, y = r.hierarchy, C = r.isPivotMode, _ = r.seriesNumberWidth, w = r.field, x = r.spreadsheet, S = r.query, T = r.belongsCell, R = r.inCollapseNode, B = r.isTotalMeasure, $ = r.isLeaf, N = r.extra;
      this.id = t, this.key = n, this.value = i, this.label = o || i, this.parent = a, this.level = l, this.rowIndex = s, this.isTotals = f, this.isCollapsed = v, this.hierarchy = y, this.isPivotMode = C, this.seriesNumberWidth = _, this.field = w, this.spreadsheet = x, this.query = S, this.belongsCell = T, this.inCollapseNode = R, this.isTotalMeasure = B, this.isLeaf = $, this.isGrandTotals = h, this.isSubTotals = d, this.isTotalRoot = g, this.extra = N;
    }
    return e.getFieldPath = function(r, t) {
      if (r && !r.isTotals || r && t) {
        for (var n = r.parent, i = [r.field]; n && n.id !== v0; )
          i.push(n.field), n = n.parent;
        return i.reverse();
      }
    }, e.getAllLeaveNodes = function(r) {
      var t = [];
      if (r.isLeaf)
        return [r];
      for (var n = j([], W(r.children), !1), i = n.shift(); i; )
        i.isLeaf ? t.push(i) : n.unshift.apply(n, j([], W(i.children), !1)), i = n.shift();
      return t;
    }, e.getAllChildrenNodes = function(r) {
      var t = [];
      if (r.isLeaf)
        return [r];
      for (var n = j([], W(r.children || []), !1), i = n.shift(); i; )
        t.push(i), n.unshift.apply(n, j([], W(i.children), !1)), i = n.shift();
      return t;
    }, e.getAllBranch = function(r) {
      for (var t = [], n = this.getAllLeaveNodes(r), i = n.shift(), o = []; i; ) {
        o.unshift(i);
        for (var a = i.parent; a && !tr(a, r); ) {
          o.unshift(a);
          a = a.parent;
        }
        t.push(o), i = n.shift(), o = [];
      }
      return t;
    }, e.blankNode = function() {
      return new e({
        id: "",
        key: "",
        value: ""
      });
    }, e.rootNode = function() {
      return new e({
        id: "root",
        key: "",
        value: ""
      });
    }, e.prototype.toJSON = function() {
      return og(this, ["config", "hierarchy", "parent", "spreadsheet"]);
    }, e.prototype.getHeadLeafChild = function() {
      for (var r = this; !Q(r.children); )
        r = xa(r.children);
      return r;
    }, e.prototype.getTotalHeightForTreeHierarchy = function() {
      return this.height === 0 || Q(this.children) ? this.height : this.children.reduce(function(r, t) {
        return r + t.getTotalHeightForTreeHierarchy();
      }, this.height);
    }, e;
  }()
), QT = (
  /** @class */
  function() {
    function e() {
      this.width = 0, this.height = 0, this.maxLevel = -1, this.sampleNodesForAllLevels = [], this.sampleNodeForLastLevel = null, this.allNodesWithoutRoot = [], this.indexNode = [];
    }
    return e.prototype.getLeaves = function() {
      return this.allNodesWithoutRoot.filter(function(r) {
        return r.isLeaf;
      });
    }, e.prototype.getNodes = function(r) {
      return r !== void 0 ? this.allNodesWithoutRoot.filter(function(t) {
        return t.level === r;
      }) : this.allNodesWithoutRoot;
    }, e.prototype.getNodesLessThanLevel = function(r) {
      return this.allNodesWithoutRoot.filter(function(t) {
        return t.level <= r;
      });
    }, e.prototype.pushNode = function(r, t) {
      t === void 0 && (t = -1), t === -1 ? this.allNodesWithoutRoot.push(r) : this.allNodesWithoutRoot.splice(t, 0, r);
    }, e.prototype.pushIndexNode = function(r) {
      this.indexNode.push(r);
    }, e.prototype.getIndexNodes = function() {
      return this.indexNode;
    }, e;
  }()
), yl = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(r) {
      var t = r.label, n = r.isSubTotals, i = r.isGrandTotals, o = r.isTotalRoot;
      this.label = t, this.isSubTotals = n, this.isGrandTotals = i, this.isTotalRoot = o;
    }
    return e;
  }()
), Ij = function(e) {
  var r, t = e.isFirstField, n = e.currentField, i = e.fieldValues, o = e.spreadsheet, a = e.lastField, l = o.getTotalsConfig(t ? n : a), s, f;
  t ? l != null && l.showGrandTotals && (s = l.reverseLayout ? "unshift" : "push", f = new yl({
    label: l.label,
    isSubTotals: !1,
    isGrandTotals: !0,
    isTotalRoot: !0
  })) : (
    /**
     * 是否需要展示小计项
     * 1. showSubTotals 属性为真
     * 2. 子维度个数 > 1 或 showSubTotals.always 不为 false（undefined 认为是 true）
     */
    l != null && l.showSubTotals && (L.size(i) > 1 || L.get(l, "showSubTotals.always") !== !1) && n !== Ae && (s = l.reverseSubLayout ? "unshift" : "push", f = new yl({
      label: l.subLabel,
      isSubTotals: !0,
      isGrandTotals: !1,
      isTotalRoot: !0
    }))
  ), (r = i[s]) === null || r === void 0 || r.call(i, f);
};
function gp(e, r) {
  for (var t = {}, n = e; n && n.key; )
    (!n.isTotalRoot || r) && n.value !== La && (t[n.key] = n.value), n = n.parent;
  return t;
}
var Mj = "Transform Data", Bj = "Header Layout", Dj = "Data Cell Render", fi = (
  /** @class */
  function() {
    function e() {
      var r = this;
      this.debug = !1, this.debugCallback = function(t, n) {
        if (r.debug) {
          var i = performance.now();
          n();
          var o = performance.now();
          console.log(t, "".concat(o - i, " ms"));
        } else
          n();
      }, this.logger = function(t) {
        for (var n = [], i = 1; i < arguments.length; i++)
          n[i - 1] = arguments[i];
        r.debug && console.log.apply(console, j([t], W(n), !1));
      };
    }
    return e.getInstance = function() {
      return e.instance || (e.instance = new e()), e.instance;
    }, e.prototype.setDebug = function(r) {
      this.debug = r;
    }, e;
  }()
), $j = `
<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="↓" fill="#29A294">
        <tspan x="-0.225097656" y="8.5">↓</tspan>
    </text>
</g>
</svg>`, Fj = `<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="↑" fill="#FF4D4F">
        <tspan x="-0.225097656" y="8.5">↑</tspan>
    </text>
</g>
</svg>
`, Pj = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>down</title>
    <desc>Created with Sketch.</desc>
    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg>`, Nj = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>up</title>
    <desc>Created with Sketch.</desc>
    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg> `, Hj = `<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17452"
xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
<defs>
  <style type="text/css"></style>
</defs>
<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>
</svg>`, zj = `<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17561"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>
</svg>`, Wj = `<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17670"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>
</svg>`, kj = `<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17779"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>
</svg>`, Gj = `<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="设计输出" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">
    <g id="设计输出-移动端指标详情页-阅读端" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">
        <g id="编组-39" transform="translate(3064.500000, 667.000000)">
            <g id="编组-36" transform="translate(80.500000, 44.000000)">
                <g id="不排序" transform="translate(130.000000, 13.000000)">
                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id="形状结合"></path>
                </g>
            </g>
        </g>
    </g>q
</g>
</svg>`, Uj = '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>', Yj = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>编组 8备份 3</title>
    <g id="----隐藏列标注！" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="隐藏列标注" transform="translate(-275.000000, -824.000000)">
            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>
            <g id="编组-8备份-3" transform="translate(275.000000, 824.000000)">
                <rect id="矩形" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>
                <rect id="矩形备份-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
            </g>
            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="路径-2备份-3" stroke="#000000" opacity="0.25"></line>
        </g>
    </g>
</svg>`, Xj = `<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="16910">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="16911">
	</path>
</svg>`, Vj = `<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="17026">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="17027">
	</path>
</svg>`, qj = `<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`, Kj = `<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`, jj = `<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
<defs>
<style type="text/css"></style>
</defs>
<path
d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
p-id="17621"></path>
</svg>
`, Zj = `<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
    p-id="17621"></path>
</svg>
`, Qj = '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>', Jj = `<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>
`, eZ = '<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>', pw = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  ArrowDown: $j,
  ArrowUp: Fj,
  CellDown: Pj,
  CellUp: Nj,
  GlobalAsc: Hj,
  GlobalDesc: zj,
  GroupAsc: Wj,
  GroupDesc: kj,
  GroupNone: Gj,
  Minus: Xj,
  Plus: Vj,
  SortDown: Kj,
  SortUp: Zj,
  SortDownSelected: qj,
  SortUpSelected: jj,
  InfoCircle: Uj,
  ExpandColIcon: Yj,
  Trend: Qj,
  DrillDownIcon: Jj,
  EyeOutlined: eZ
}), JT = {}, eE = function(e, r) {
  JT[J0(e)] = r;
}, tE = function(e) {
  return JT[J0(e)];
};
Rt(pw).forEach(function(e) {
  eE(e, pw[e]);
});
var gw = "<svg", yw = "data:image/svg+xml", Cw = {}, Ps = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      return n.isOnlineLink = function(i) {
        return /^(https?:)?(\/\/)/.test(i);
      }, n.render(), n;
    }
    return r.prototype.getImage = function(t, n, i) {
      var o = this;
      return new Promise(function(a, l) {
        var s = tE(t);
        if (s) {
          var f = new Image();
          f.onload = function() {
            Cw[n] = f, a(f);
          }, f.onerror = l, s.includes(yw) || o.isOnlineLink(s) ? (f.src = s, f.crossOrigin = "anonymous") : (i && (s = s.replace(/fill=[\'\"]#?\w+[\'\"]/g, ""), s = s.replace(/fill>/g, ">")), s = s.replace(gw, "".concat(gw, ' fill="').concat(i, '"')), f.src = "".concat(yw, ";utf-8,").concat(encodeURIComponent(s)));
        }
      });
    }, r.prototype.render = function() {
      var t = this.cfg, n = t.name, i = t.fill, o = Ol(this.cfg), a = M(M({}, og(o, "fill")), { type: r.type }), l = new f0({
        attrs: a
      });
      this.iconImageShape = l, this.setImageAttrs({ name: n, fill: i });
    }, r.prototype.setImageAttrs = function(t) {
      var n = this, i = t.name, o = t.fill, a = this.iconImageShape;
      i = i || a.attrs.name, o = o || a.attrs.fill;
      var l = "".concat(i, "-").concat(o), s = Cw[l];
      s ? (a.attr("img", s), this.addShape("image", a)) : this.getImage(i, l, o).then(function(f) {
        var h, d, v, g = (v = (d = (h = n.getParent()) === null || h === void 0 ? void 0 : h.getMeta) === null || d === void 0 ? void 0 : d.call(h).spreadsheet) === null || v === void 0 ? void 0 : v.container;
        if (n.destroyed || g && !g.get("refreshElements")) {
          fi.getInstance().logger("GuiIcon ".concat(i, " destroyed."));
          return;
        }
        a.attr("img", f), n.addShape("image", a);
      }).catch(function(f) {
        if (f instanceof TypeError) {
          console.warn("GuiIcon ".concat(i, " destroyed:"), f);
          return;
        }
        console.error("GuiIcon ".concat(i, " load failed:"), f);
      });
    }, r.type = "__GUI_ICON__", r;
  }(_i)
), kt;
(function(e) {
  e.TOP = "TOP", e.BOTTOM = "BOTTOM", e.LEFT = "LEFT", e.RIGHT = "RIGHT";
})(kt || (kt = {}));
var la;
(function(e) {
  e.SUM = "SUM", e.MIN = "MIN", e.MAX = "MAX", e.AVG = "AVG";
})(la || (la = {}));
var xn;
(function(e) {
  e.Row = "row", e.Col = "col", e.Series = "series";
})(xn || (xn = {}));
var tZ = (
  /** @class */
  function() {
    function e() {
      this.store = /* @__PURE__ */ new Map();
    }
    return e.prototype.set = function(r, t) {
      return this.store.set(r, t);
    }, e.prototype.get = function(r, t) {
      var n, i = this.store.get(r);
      return (n = i) !== null && n !== void 0 ? n : t;
    }, e.prototype.clear = function() {
      this.store.clear();
    }, e.prototype.size = function() {
      return this.store.size;
    }, e;
  }()
), Ff = function(e) {
  var r, t, n = e.facetCfg, i = e.level, o = e.fields, a = n.colCfg, l = n.spreadsheet, s = n.dataSet, f = s.moreThanOneValue(), h = (t = (r = l.dataCfg.fields) === null || r === void 0 ? void 0 : r.valueInCols) !== null && t !== void 0 ? t : !0, d = (a == null ? void 0 : a.hideMeasureColumn) && h && !f && Sr(o, Ae), v = d ? 2 : 1;
  return i === o.length - v;
}, rE = function(e, r, t, n) {
  return r.layoutArrange ? r.layoutArrange(r.spreadsheet, t, n, e) : e;
}, wg = function(e, r, t, n) {
  var i, o, a = (o = (i = e.spreadsheet) === null || i === void 0 ? void 0 : i.facet) === null || o === void 0 ? void 0 : o.getHiddenColumnsInfo(t);
  if (a && // fix: Only hiding the column headers is supported to prevent the row subtotals from being hidden when the IDs of the row totals and column totals are the same.
  e.columns.find(function(C) {
    return C === t.field;
  }))
    return !1;
  var l = !0, s = function(C, _, w) {
    _ === void 0 && (_ = -1), w === void 0 && (w = -1), _ === -1 ? (r.children.push(C), n.pushNode(C)) : (r.children.splice(_, 0, C), n.pushNode(C, w));
  };
  if (e.layoutHierarchy) {
    var f = e.layoutHierarchy(e.spreadsheet, t);
    if (f) {
      var h = ui(f == null ? void 0 : f.delete) ? f == null ? void 0 : f.delete : !1;
      l = !h;
      var d = f.push, v = f.unshift, g = r.children.length, y = n.getNodes().length;
      Q(v) || (xe(v, function(C) {
        s(C);
      }), g = r.children.length, y = n.getNodes().length), Q(d) || xe(d, function(C) {
        s(C);
      }), h || s(t, g, y);
    } else
      s(t);
  } else
    s(t);
  return l;
}, yp = function(e, r, t) {
  e != null && e.layoutCoordinate && (r != null && r.isLeaf || t != null && t.isLeaf) && (e == null || e.layoutCoordinate(e.spreadsheet, r, t));
}, rZ = function(e, r) {
  var t = e == null ? void 0 : e.layoutDataPosition;
  if (t) {
    var n = r.getCellMeta, i = t(e.spreadsheet, n);
    return M(M({}, r), { getCellMeta: i });
  }
  return r;
}, nE = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(r) {
      this.label = r;
    }
    return e;
  }()
), iE = function(e) {
  var r = e.addTotalMeasureInTotal, t = e.parentNode, n = e.currentField, i = e.fields, o = e.facetCfg, a = e.hierarchy, l = i.indexOf(n), s = o.dataSet, f = o.values, h = o.spreadsheet, d = [], v = {}, g = h.getTotalsConfig(n), y = t.isGrandTotals ? g.totalsGroupDimensions || [] : g.subTotalsGroupDimensions || [], C = s.isEmpty() ? [] : y;
  if (C != null && C.includes(n)) {
    v = gp(t);
    var _ = s.getDimensionValues(n, v);
    d.push.apply(d, j([], W((_ || []).map(function(x) {
      return new yl({
        label: x,
        isSubTotals: t.isSubTotals,
        isGrandTotals: t.isGrandTotals,
        isTotalRoot: !1
      });
    })), !1)), Q(d) && n && d.push(La);
  } else if (r && n === Ae)
    v = gp(t), d.push.apply(d, j([], W(f.map(function(x) {
      return new nE(x);
    })), !1));
  else if (Ff({ facetCfg: o, level: l, fields: i })) {
    t.isLeaf = !0, a.pushIndexNode(t), t.rowIndex = a.getIndexNodes().length - 1;
    return;
  } else {
    iE(M(M({}, e), { currentField: i[l + 1] }));
    return;
  }
  var w = d.filter(function(x) {
    return !qc(x);
  });
  xg(M(M({}, e), { fieldValues: w, level: l, parentNode: t, query: v }));
}, nZ = function(e) {
  var r, t = e.parentNode, n = e.currentField, i = e.fields, o = e.facetCfg, a = i.indexOf(n), l = o.dataSet, s = o.spreadsheet, f = [], h = {};
  h = gp(t, !0);
  var d = l.getDimensionValues(n, h), v = rE(d, o, t, n);
  f.push.apply(f, j([], W(v || []), !1)), Q(f) && n && (n === Ae ? f.push.apply(f, j([], W((r = l.fields) === null || r === void 0 ? void 0 : r.values), !1)) : f.push(La)), Ij({
    currentField: n,
    lastField: i[a - 1],
    isFirstField: a === 0,
    fieldValues: f,
    spreadsheet: s
  });
  var g = f.filter(function(y) {
    return !qc(y);
  });
  xg(M(M({}, e), { fieldValues: g, level: a, parentNode: t, query: h }));
}, oE = function(e) {
  e.parentNode.isTotals ? iE(e) : nZ(e);
}, Ns = function(e, r) {
  return "".concat(e).concat(ur).concat(r);
}, xg = function(e) {
  var r, t, n, i, o, a, l, s, f, h, d = e.currentField, v = e.fields, g = e.fieldValues, y = e.facetCfg, C = e.hierarchy, _ = e.parentNode, w = e.level, x = e.query, S = e.addMeasureInTotalQuery, T = e.addTotalMeasureInTotal, R = y.spreadsheet, B = y.collapsedCols;
  try {
    for (var $ = br(g.entries()), N = $.next(); !N.done; N = $.next()) {
      var z = W(N.value, 2), V = z[0], X = z[1], Z = X instanceof yl, ne = X instanceof nE, se = void 0, q = void 0, ee = !1, Oe = !1, me = !1, _e = !1, ke = d;
      if (Z) {
        var Ee = X;
        Oe = Ee.isGrandTotals, me = Ee.isSubTotals, _e = Ee.isTotalRoot, se = Et(X.label), _e ? q = x : q = M(M({}, x), (n = {}, n[d] = se, n)), S && (q[Ae] = (l = R == null ? void 0 : R.dataSet) === null || l === void 0 ? void 0 : l.fields.values[0]), ee = Ff({ facetCfg: y, level: w, fields: v });
      } else ne ? (se = Et(X.label), q = M(M({}, x), (i = {}, i[Ae] = se, i)), ke = Ae, Oe = _.isGrandTotals, me = _.isSubTotals, ee = Ff({ facetCfg: y, level: w, fields: v })) : R.isTableMode() ? (se = X, ke = v[V], q = M(M({}, x), (o = {}, o[ke] = se, o)), ee = !0) : (se = X, q = se === La ? M({}, x) : M(M({}, x), (a = {}, a[d] = se, a)), ee = Ff({ facetCfg: y, level: w, fields: v }));
      var Ze = Ns(_.id, se);
      if (!Ze)
        return;
      var ft = ui(B == null ? void 0 : B[Ze]) ? B == null ? void 0 : B[Ze] : !1, Fe = new Qt({
        id: Ze,
        key: ke,
        value: se,
        level: w,
        field: ke,
        parent: _,
        isTotals: Z || ne,
        isGrandTotals: Oe,
        isSubTotals: me,
        isTotalMeasure: ne,
        isCollapsed: ft,
        isTotalRoot: _e,
        hierarchy: C,
        query: q,
        spreadsheet: R,
        isLeaf: ee || ft
      }), Ge = wg(y, _, Fe, C), ot = (s = R == null ? void 0 : R.facet) === null || s === void 0 ? void 0 : s.getHiddenColumnsInfo(Fe);
      ot && _ && (_.hiddenChildNodeInfo = ot), w > C.maxLevel && !Oe && !_.isGrandTotals && !_.isSubTotals && !Fe.isSubTotals && (C.sampleNodesForAllLevels.push(Fe), C.maxLevel = w, C.sampleNodeForLastLevel = ot ? ((f = ot == null ? void 0 : ot.displaySiblingNode) === null || f === void 0 ? void 0 : f.next) || ((h = ot == null ? void 0 : ot.displaySiblingNode) === null || h === void 0 ? void 0 : h.prev) : Fe);
      var nr = ee || ft || !Ge;
      nr ? (Fe.isLeaf = !0, C.pushIndexNode(Fe), Fe.rowIndex = C.getIndexNodes().length - 1) : oE({
        addTotalMeasureInTotal: T,
        addMeasureInTotalQuery: S,
        parentNode: Fe,
        currentField: v[w + 1],
        fields: v,
        facetCfg: y,
        hierarchy: C
      });
    }
  } catch (vr) {
    r = { error: vr };
  } finally {
    try {
      N && !N.done && (t = $.return) && t.call($);
    } finally {
      if (r) throw r.error;
    }
  }
}, aE = function(e, r, t, n) {
  var i = r.facetCfg, o = r.hierarchy, a = r.parentNode, l = i.dataSet;
  e.forEach(function(s, f) {
    typeof s == "string" && (s = { key: s });
    var h = s.key, d = h === ga ? Et("序号") : l.getFieldName(h), v = n || a;
    if (xg({
      currentField: h,
      fields: [h],
      fieldValues: [d],
      facetCfg: i,
      hierarchy: o,
      parentNode: v,
      level: t,
      query: {},
      addMeasureInTotalQuery: !1,
      addTotalMeasureInTotal: !1
    }), s.children && s.children.length) {
      var g = v.children[f];
      g.isLeaf = !1, aE(s.children, r, t + 1, g);
    }
  });
}, ca = function(e, r) {
  return r > 0 && e < r;
}, ha = function(e, r, t) {
  return r > 0 && e >= t - r;
}, th = function(e, r, t) {
  return t > 0 && e < r + t;
}, lu = function(e, r, t) {
  return t > 0 && e >= r + 1 - t;
}, Sg = function(e, r, t, n, i, o) {
  var a = gl(t, function(d, v) {
    var g = e - (Nt(o) ? 0 : o) + i.x;
    return g >= d && g < t[v + 1];
  }, 0);
  a = Math.max(a, 0);
  var l = gl(t, function(d, v) {
    var g = i.width + e + i.x;
    return g >= d && g < t[v + 1];
  }, a);
  l = Math.min(l === -1 ? 1 / 0 : l, t.length - 2);
  var s = n.getIndexRange(r + i.y, i.height + r + i.y), f = s.start, h = s.end;
  return [a, l, f, h];
}, iZ = function(e, r, t) {
  var n = 2, i = Math.abs(e / r), o = i <= 1 / n ? 0 : e, a = i > n ? 0 : r;
  return [o * t.horizontal, a * t.vertical];
}, Hi = function(e, r, t) {
  var n, i, o = e == null ? void 0 : e.getMatrix(), a = (n = o == null ? void 0 : o[6]) !== null && n !== void 0 ? n : 0, l = (i = o == null ? void 0 : o[7]) !== null && i !== void 0 ? i : 0;
  e == null || e.translate(r - a, t - l);
}, rh = function(e, r) {
  var t, n = e == null ? void 0 : e.getMatrix(), i = (t = n == null ? void 0 : n[6]) !== null && t !== void 0 ? t : 0;
  e == null || e.translate(r - i, 0);
}, oZ = function(e, r) {
  var t, n = e == null ? void 0 : e.getMatrix(), i = (t = n == null ? void 0 : n[7]) !== null && t !== void 0 ? t : 0;
  e == null || e.translate(0, r - i);
}, aZ = function(e, r, t, n) {
  var i = r.frozenColCount, o = r.frozenRowCount, a = r.frozenTrailingColCount, l = r.frozenTrailingRowCount, s = e.colIndex, f = e.rowIndex;
  return th(f, n.start, o) ? Pt.ROW : lu(f, n.end, l) ? Pt.TRAILING_ROW : ca(s, i) ? Pt.COL : ha(s, a, t) ? Pt.TRAILING_COL : Pt.SCROLL;
}, lZ = function(e, r, t) {
  for (var n, i = e.frozenColCount, o = e.frozenRowCount, a = e.frozenTrailingColCount, l = e.frozenTrailingRowCount, s = (n = {}, n[Pt.TOP] = [], n[Pt.BOTTOM] = [], n), f = 0; f < i; f++) {
    for (var h = t.start; h < t.start + o; h++)
      s[Pt.TOP].push({
        x: f,
        y: h
      });
    if (l > 0)
      for (var h = 0; h < l; h++) {
        var d = t.end - h;
        s[Pt.BOTTOM].push({
          x: f,
          y: d
        });
      }
  }
  for (var f = 0; f < a; f++) {
    for (var v = r - 1 - f, h = t.start; h < t.start + o; h++)
      s[Pt.TOP].push({
        x: v,
        y: h
      });
    if (l > 0)
      for (var h = 0; h < l; h++) {
        var d = t.end - h;
        s[Pt.BOTTOM].push({
          x: v,
          y: d
        });
      }
  }
  return s;
}, sZ = function(e, r, t, n) {
  var i = r.frozenColCount, o = r.frozenRowCount, a = r.frozenTrailingColCount, l = r.frozenTrailingRowCount, s = j([], W(e), !1);
  ca(s[0], i) && (s[0] = i), ha(s[1], a, t) && (s[1] = t - a - 1), th(s[2], n.start, o) && (s[2] = n.start + o), lu(s[3], n.end, l) && (s[3] = n.end - l);
  var f = j([], W(s), !1);
  f[2] = n.start, f[3] = n.start + o - 1;
  var h = j([], W(s), !1);
  h[0] = 0, h[1] = i - 1;
  var d = j([], W(s), !1);
  d[2] = n.end + 1 - l, d[3] = n.end;
  var v = j([], W(s), !1);
  return v[0] = t - a, v[1] = t - 1, {
    center: s,
    frozenRow: f,
    frozenCol: h,
    frozenTrailingCol: v,
    frozenTrailingRow: d
  };
}, uZ = function(e, r) {
  var t = e, n = 0, i = t.getTotalLength() - 1;
  if (r) {
    var o = r.current, a = o === void 0 ? pp : o, l = r.pageSize;
    n = Math.max((a - 1) * l, 0), i = Math.min(a * l - 1, t.getTotalLength() - 1);
  }
  return {
    start: n,
    end: i
  };
}, sc = function(e, r, t) {
  var n = r, i = t, o = function(a) {
    return a.isLeaf ? 1 : a.children ? a.children.reduce(function(l, s) {
      return l += o(s), l;
    }, 0) : 0;
  };
  return r && (n = e.slice(0, r).reduce(function(a, l) {
    return a += o(l), a;
  }, 0)), t && (i = e.slice(e.length - t).reduce(function(a, l) {
    return a += o(l), a;
  }, 0)), { colCount: n, trailingColCount: i };
}, lE = function(e, r) {
  return e.reduce(function(t, n) {
    typeof n == "string" && (n = { key: n });
    var i = M({}, n);
    return i.children ? (i.children = lE(i.children, r), t.push(i), t) : (r[i.key] && t.push(i), t);
  }, []);
}, ci = function(e) {
  return e.parent.id === "root";
}, fZ = function(e) {
  for (; !ci(e); )
    e = e.parent;
  return e;
}, cZ = function(e) {
  var r = [], t = function(n) {
    n.forEach(function(i) {
      typeof i == "string" || !i.children ? r.push(i) : t(i.children);
    });
  };
  return t(e), r;
}, Ba = function(e) {
  var r = cZ(e);
  return r.map(function(t) {
    return typeof t == "string" ? t : t.key;
  });
}, Cp = function(e) {
  var r = e.children[0];
  return r ? r.isLeaf ? r : Cp(r) : e;
}, hZ = function(e) {
  return Q(e.rows) && Q(e.columns) && Q(e.values) && Q(e.customTreeItems);
}, Cl = function(e, r) {
  var t, n = e.pagination, i = e.frozenFirstRow, o = e.hierarchyType, a = e.showSeriesNumber, l = n && n.pageSize, s = !1, f = r == null ? void 0 : r[0];
  if (!l && i) {
    s = ((t = f == null ? void 0 : f.children) === null || t === void 0 ? void 0 : t.length) === 0;
    var h = o === "tree" || o === "customTree";
    h && !s && (s = !a);
  }
  var d = s && !!f;
  return {
    frozenRowCount: d ? 1 : 0,
    frozenColCount: 0,
    frozenTrailingColCount: 0,
    frozenTrailingRowCount: 0,
    enableFrozenFirstRow: s,
    frozenRowHeight: d ? f.height : 0
  };
}, sE = function(e) {
  return e === La ? Ac : e;
}, dZ = function(e) {
  var r = e.facetCfg, t = r.columns, n = r.spreadsheet, i = n.store.get("hiddenColumnsDetail"), o = r == null ? void 0 : r.showSeriesNumber, a = Ba(t), l = a.filter(function(d) {
    return i ? i.every(function(v) {
      return v.hideColumnNodes.every(function(g) {
        return g.field !== d;
      });
    }) : !0;
  }), s = j([], W(l), !1), f = j([], W(t), !1), h = {};
  o && (f.unshift({
    key: ga
  }), h[ga] = !0), s.reduce(function(d, v) {
    return d[v] = !0, d;
  }, h), aE(lE(f, h), e, 0, null);
}, rl = function(e) {
  return Number.parseFloat((nn(e) || 0).toPrecision(s2));
}, So = function(e, r, t) {
  if (t === void 0 && (t = 0), !Object.values(e).find(function(a) {
    return a > 0;
  }))
    return e;
  var n = M({}, e);
  n.frozenColCount >= r && (n.frozenColCount = r);
  var i = r - n.frozenColCount;
  n.frozenTrailingColCount > i && (n.frozenTrailingColCount = i), n.frozenRowCount >= t && (n.frozenRowCount = t);
  var o = t - n.frozenRowCount;
  return n.frozenTrailingRowCount > o && (n.frozenTrailingRowCount = o), n;
}, vZ = function(e) {
  var r;
  return (r = e == null ? void 0 : e.position) !== null && r !== void 0 ? r : "right";
}, pZ = function(e, r) {
  e === void 0 && (e = 0), r === void 0 && (r = 0), e = rl(e), r = rl(r);
  var t = e >= 0, n = r >= 0 && e <= 0, i = t ? e : r, o = n ? 0 : i, a = r - e;
  return function(l) {
    var s = t ? 0 : 1, f = n ? ic(Math.abs(0 - e) / a, 0, 1) : s, h = ic((l - o) / a, -1, 1);
    return { zeroScale: f, scale: h };
  };
}, uE = function(e, r) {
  return Uc(e, function(t) {
    return t.field instanceof RegExp ? t.field.test(r) : t.field === r;
  });
}, bg = function(e) {
  return Ds({
    size: 0,
    position: "right",
    margin: {
      left: 0,
      right: 0
    }
  }, e);
}, fE = function(e, r, t) {
  var n = r.size, i = r.margin, o = uE(e == null ? void 0 : e.icon, t), a = o && o.mapping && {
    size: n,
    margin: i,
    position: vZ(o)
  };
  return bg(a);
};
function on(e, r, t) {
  var n;
  return (n = e == null ? void 0 : e.addShape) === null || n === void 0 ? void 0 : n.call(e, "rect", M({ zIndex: 1, attrs: r }, t || {}));
}
function gZ(e, r) {
  var t;
  return (t = e == null ? void 0 : e.addShape) === null || t === void 0 ? void 0 : t.call(e, "polygon", {
    attrs: r
  });
}
function yZ(e, r) {
  var t;
  return (t = e == null ? void 0 : e.addShape) === null || t === void 0 ? void 0 : t.call(e, "polyline", {
    attrs: r
  });
}
function cE(e, r) {
  var t;
  return (t = e == null ? void 0 : e.addShape) === null || t === void 0 ? void 0 : t.call(e, "circle", {
    attrs: r
  });
}
function Sa(e, r, t, n, i, o, a, l) {
  var s;
  return !Q(r) && e && xe(r, function(f) {
    e.contain(f) && e.removeChild(f, !0);
  }), (s = e == null ? void 0 : e.addShape) === null || s === void 0 ? void 0 : s.call(e, "text", {
    attrs: M(M({ x: t, y: n, text: i, originalText: l }, o), a)
  });
}
function Jt(e, r, t) {
  var n;
  return (n = e == null ? void 0 : e.addShape) === null || n === void 0 ? void 0 : n.call(e, "line", {
    zIndex: 100,
    attrs: M(M({}, r), t)
  });
}
function Cn(e, r, t) {
  if (!Q(e)) {
    var n = le(e) ? e : [e];
    n.forEach(function(i) {
      $s(i, "attrs.".concat(r), t);
    });
  }
}
function Tg(e, r) {
  var t = new Ps(r);
  return e == null || e.add(t), t;
}
function hE(e, r, t, n, i) {
  var o = new Ps(M(M({ name: n ? "Plus" : "Minus" }, r), { fill: t }));
  return Vt(i) && o.on("click", i), e == null || e.add(o), o;
}
var mp = "s2-offscreen-canvas", CZ = function() {
  var e = document.getElementById(mp);
  return e || (e = document.createElement("canvas"), e.id = mp, e.style.display = "none", document.body.appendChild(e), e);
}, mZ = function() {
  var e;
  (e = document.getElementById(mp)) === null || e === void 0 || e.remove();
}, dE = function(e, r) {
  var t, n, i, o = e.data, a = e.encode, l = e.type, s = r.getMeta(), f = s.x, h = s.y, d = s.height, v = s.width, g = r.getStyle(J.DATA_CELL), y = g.cell, C = g.miniChart, _ = [], w = We(o, function(ne) {
    return _.push(ne == null ? void 0 : ne[a.y]), {
      x: ne[a.x],
      y: ne[a.y]
    };
  }), x = Gi(_), S = ng(_), T = x - S, R = f + y.padding.left, B = f + v - y.padding.right, $ = h + y.padding.top, N = h + d - y.padding.bottom, z = N - $, V = l === pl.Bar ? (B - R - (_.length - 1) * ((t = C == null ? void 0 : C.bar) === null || t === void 0 ? void 0 : t.intervalPadding)) / _.length + ((n = C == null ? void 0 : C.bar) === null || n === void 0 ? void 0 : n.intervalPadding) : (i = (B - R) / (_.length - 1)) !== null && i !== void 0 ? i : 0, X = [], Z = We(w, function(ne, se) {
    var q, ee = R + se * V, Oe;
    if (T !== 0 ? Oe = N - ((ne == null ? void 0 : ne.y) - S) / T * z : Oe = S > 0 ? $ : N, l === pl.Bar) {
      var me = void 0, _e = void 0;
      S < 0 && x > 0 && T !== 0 ? (me = N - (0 - S) / T * z, _e = Math.abs(Oe - me), (ne == null ? void 0 : ne.y) < 0 && (Oe = me)) : (me = S < 0 ? $ : N, T = Gi([Math.abs(x), Math.abs(S)]), _e = T === 0 ? z : Math.abs((ne == null ? void 0 : ne.y) - 0) / T * z, Oe = me);
      var ke = V - ((q = C == null ? void 0 : C.bar) === null || q === void 0 ? void 0 : q.intervalPadding);
      X.push([ke, _e]);
    }
    return [ee, Oe];
  });
  return {
    points: Z,
    box: X
  };
}, _Z = function(e, r) {
  if (!(Q(e == null ? void 0 : e.data) || Q(r))) {
    var t = r.getStyle(J.DATA_CELL), n = t.miniChart, i = n.line, o = i.point, a = i.linkLine, l = dE(e, r).points;
    yZ(r, {
      points: l,
      stroke: a.fill,
      lineWidth: a.size,
      opacity: a.opacity
    });
    for (var s = 0; s < l.length; s++)
      cE(r, {
        x: l[s][0],
        y: l[s][1],
        r: o.size,
        fill: o.fill,
        fillOpacity: o.opacity
      });
  }
}, wZ = function(e, r) {
  if (!(Q(e == null ? void 0 : e.data) || Q(r)))
    for (var t = r.getStyle(J.DATA_CELL), n = t.miniChart, i = n.bar, o = dE(e, r), a = o.points, l = o.box, s = 0; s < a.length; s++)
      on(r, {
        x: a[s][0],
        y: a[s][1],
        width: l[s][0],
        height: l[s][1],
        fill: i.fill,
        fillOpacity: i.opacity
      });
}, xZ = function(e, r, t) {
  var n = Number(r) - Number(e);
  return Number.isNaN(n) || Number(e) < 0 ? t.bad : n <= 0.1 ? t.good : n > 0.1 && n <= 0.2 ? t.satisfactory : t.bad;
}, SZ = function(e, r) {
  var t, n, i = Number(e);
  if (Number.isNaN(i))
    return e;
  var o = (t = r.min) !== null && t !== void 0 ? t : r, a = (n = r.max) !== null && n !== void 0 ? n : r, l = new Intl.NumberFormat("en-US", {
    minimumFractionDigits: o,
    maximumFractionDigits: a,
    // 禁用自动分组: "12220%" => "12,220%"
    useGrouping: !1,
    style: "percent"
  });
  return l.format(i);
}, bZ = function(e) {
  var r, t, n, i, o, a;
  if (!Q(e)) {
    var l = e.getCellArea(), s = l.x, f = l.y, h = l.height, d = l.width, v = e.findFieldCondition((r = e.cellConditions) === null || r === void 0 ? void 0 : r.interval);
    if (v && v.mapping) {
      var g = e.mappingValue(v);
      if (!g)
        return;
      var y = g.isCompare ? g : e.valueRangeByField, C = rl(y.minValue), _ = rl(y.maxValue), w = Nt(g == null ? void 0 : g.fieldValue) ? rl(e.getMeta().fieldValue) : rl(g == null ? void 0 : g.fieldValue);
      if (w < C || w > _)
        return;
      var x = (n = (t = e.getStyle().miniChart.interval) === null || t === void 0 ? void 0 : t.height) !== null && n !== void 0 ? n : e.getStyle().cell.miniBarChartHeight, S = (o = (i = e.getStyle().miniChart.interval) === null || i === void 0 ? void 0 : i.fill) !== null && o !== void 0 ? o : e.getStyle().cell.miniBarChartFillColor, T = pZ(C, _), R = T(w), B = R.zeroScale, $ = R.scale, N = (a = g.fill) !== null && a !== void 0 ? a : S;
      return on(e, {
        x: s + d * B,
        y: f + h / 2 - x / 2,
        width: d * $,
        height: x,
        fill: N
      });
    }
  }
}, TZ = function(e, r) {
  var t, n = r.getStyle(J.DATA_CELL), i = r.getMeta(), o = i.x, a = i.y, l = i.height, s = i.width, f = i.spreadsheet;
  if (Q(e)) {
    Sa(r, [], o + s - n.cell.padding.right, a + l / 2, Da(r, f.options.placeholder), n.text);
    return;
  }
  var h = n.miniChart.bullet, d = h.progressBar, v = h.comparativeMeasure, g = h.rangeColors, y = h.backgroundColor, C = e.measure, _ = e.target, w = Math.max(Number(C), 0), x = Math.max(Number(_), 0), S = SZ(C, 2), T = (d == null ? void 0 : d.widthPercent) > 1 ? (d == null ? void 0 : d.widthPercent) / 100 : d == null ? void 0 : d.widthPercent, R = n.cell.padding, B = s - R.left - R.right, $ = T * B, N = B - $, z = o + s - R.right - $, V = a + l / 2 - d.height / 2;
  on(r, {
    x: z,
    y: V,
    width: $,
    height: d.height,
    fill: y,
    textBaseline: n.text.textBaseline
  });
  var X = ge(r.getMeta(), "spreadsheet.options.bullet.getRangeColor"), Z = Math.max(Math.min($ * w, $), 0);
  on(r, {
    x: z,
    y: V + (d.height - d.innerHeight) / 2,
    width: Z,
    height: d.innerHeight,
    fill: (t = X == null ? void 0 : X(w, x)) !== null && t !== void 0 ? t : xZ(w, x, g)
  });
  var ne = z + $ * x;
  Jt(r, {
    x1: ne,
    y1: a + (l - v.height) / 2,
    x2: ne,
    y2: a + (l - v.height) / 2 + v.height
  }, {
    stroke: (v == null ? void 0 : v.fill) || (v == null ? void 0 : v.color),
    lineWidth: v.width,
    opacity: v == null ? void 0 : v.opacity
  }), Sa(r, [], z - R.right, a + l / 2, ml({
    measureTextWidth: f.measureTextWidth,
    text: S,
    maxWidth: N - R.right,
    fontParam: n.text
  }), n.text);
}, EZ = function(e, r) {
  switch (r == null ? void 0 : r.type) {
    case pl.Line:
      _Z(r, e);
      break;
    case pl.Bar:
      wZ(r, e);
      break;
    default:
      TZ(r, e);
      break;
  }
}, vE = function(e, r) {
  var t = e.x, n = e.y, i = e.width, o = e.height, a = i - (r == null ? void 0 : r.left) - (r == null ? void 0 : r.right), l = o - (r == null ? void 0 : r.top) - (r == null ? void 0 : r.bottom);
  return {
    x: t + (r == null ? void 0 : r.left),
    y: n + (r == null ? void 0 : r.top),
    width: a,
    height: l
  };
}, pE = function(e, r) {
  return r = bg(r), e - r.size - r.margin.right - r.margin.left;
}, uc = function(e, r, t) {
  var n = e.y, i = e.height;
  t === void 0 && (t = 0);
  var o = 0;
  switch (r) {
    case "top":
      o = n;
      break;
    case "middle":
      o = n + i / 2 - t / 2;
      break;
    default:
      o = n + i - t;
      break;
  }
  return o;
}, su = function(e, r, t, n, i) {
  t === void 0 && (t = 0), i === void 0 && (i = 1);
  var o = e.x, a = e.width, l = r || {}, s = l.textAlign, f = l.textBaseline, h = bg(n), d = h.size, v = h.margin, g = h.position, y = i * (d + v.left) + (i ? v.right : 0), C, _;
  switch (s) {
    case "left":
      C = o + (g === "left" ? y : 0), _ = o + (g === "left" ? v.left : t + v.left);
      break;
    case "center": {
      var w = y - (g === "left" ? v.left : v.right) + t, x = o + a / 2 - w / 2;
      C = x + t / 2 + (g === "left" ? y - v.left : 0), _ = x + (g === "left" ? 0 : t + v.left);
      break;
    }
    default: {
      C = o + a - (g === "right" ? y : 0), _ = o + a - (g === "right" ? y - v.left : t + y - v.left);
      break;
    }
  }
  var S = uc(e, f, 0), T = uc(e, f, d);
  return {
    text: { x: C, y: S },
    icon: { x: _, y: T }
  };
}, LZ = function(e, r) {
  return su(e, r).text;
}, AZ = function(e, r, t) {
  var n = r.start + r.width, i = e.start + e.width, o, a;
  if (r.start <= e.start && n >= i)
    o = e.start + e.width / 2, a = e.width;
  else if (r.start <= e.start) {
    var l = r.width - (e.start - r.start);
    o = l < t ? n - t / 2 : n - l / 2, a = l;
  } else if (n >= i) {
    var l = r.width - (n - i);
    o = l < t ? r.start + t / 2 : r.start + l / 2, a = l;
  } else
    o = r.start + r.width / 2, a = r.width;
  return { start: o, width: a };
}, ba = function(e, r, t) {
  var n = r.x, i = r.y, o = r.width, a = r.height, l = t.horizontalBorderWidth, s = t.horizontalBorderColorOpacity, f = t.horizontalBorderColor, h = t.verticalBorderWidth, d = t.verticalBorderColor, v = t.verticalBorderColorOpacity, g = t.borderDash, y, C, _, w, x;
  if (e === kt.TOP || e === kt.BOTTOM) {
    var S = i;
    e === kt.TOP ? S = i + h / 2 : S = i + a - h / 2, C = S, w = S, y = n, _ = n + o, x = {
      lineWidth: l,
      stroke: f,
      strokeOpacity: s,
      lineDash: g
    };
  }
  if (e === kt.LEFT || e === kt.RIGHT) {
    var T = n;
    e === kt.LEFT ? T = n + l / 2 : T = n + o - l / 2, y = T, _ = T, C = i, w = i + a, x = {
      lineWidth: h,
      stroke: d,
      strokeOpacity: v,
      lineDash: g
    };
  }
  return {
    position: {
      x1: y,
      x2: _,
      y1: C,
      y2: w
    },
    style: x
  };
}, RZ = function(e, r, t) {
  t === void 0 && (t = { left: 0, right: 0 });
  var n = M({}, e);
  return r === "left" ? (n.start += t.left, n.width -= t.left) : r === "right" && (n.width -= t.right), n;
}, OZ = function(e, r, t, n) {
  var i = r + t, o = e.start;
  if (n === "center")
    return o - t / 2;
  var a = e.width - i > 0, l = a ? e.width / 2 : i / 2;
  return n === "left" ? o - l : o + l - t;
};
Oa(function(e, r) {
  if (e === void 0 && (e = ""), !r)
    return 0;
  var t = CZ().getContext("2d"), n = r, i = n.fontSize, o = n.fontFamily, a = n.fontWeight, l = n.fontStyle, s = n.fontVariant;
  return t.font = [l, s, a, "".concat(i, "px"), o].join(" ").trim(), t.measureText("".concat(e)).width;
}, function(e, r) {
  return j([e], W(Ji(r)), !1).join("");
});
var mw = function(e, r, t, n) {
  var i = 16, o = e(ol, n), a;
  Il(r) ? a = r : a = nt(r);
  var l = t, s = [], f, h;
  if (e(r, n) <= t)
    return r;
  for (var d = !0; d; ) {
    if (f = a.substr(0, i), h = e(f, n), h + o > l && h > l) {
      d = !1;
      break;
    }
    if (s.push(f), l -= h, a = a.substr(i), !a)
      return s.join("");
  }
  for (var v = !0; v; ) {
    if (f = a.substr(0, 1), h = e(f, n), h + o > l) {
      v = !1;
      break;
    }
    if (s.push(f), l -= h, a = a.substr(1), !a)
      return s.join("");
  }
  return "".concat(s.join(""), "...");
}, ml = function(e) {
  var r = e.measureTextWidth, t = e.text, n = e.maxWidth, i = e.fontParam, o = e.priorityParam, a = e.placeholder, l = {}, s = a ?? Ac, f = Nt(t) || t === "" || t === La, h = f ? s : "".concat(t), d = o;
  if (i && le(i) ? d = i : l = i || {}, !d || !d.length)
    return mw(r, h, n, l);
  var v = [], g = [h];
  d.forEach(function(w) {
    g.forEach(function(x, S) {
      var T = -1, R = x.match(new RegExp(w));
      if (R) {
        var B = R[0];
        T = R.index, v.push(B);
        var $ = T + B.length, N = x.slice(0, T), z = x.slice($), V = [N, z].filter(function(X) {
          return !!X;
        });
        g.splice.apply(g, j([S, 1], W(V), !1));
      }
    });
  }), g = v.concat(g);
  var y = h, C = r(ol, l), _ = n;
  return g.forEach(function(w) {
    if (_ <= 0) {
      var x = y.indexOf(w), S = y.slice(x - 3, x);
      if (S && S !== ol) {
        var T = r(w, l);
        y = y.replace(w, T > C ? ol : w);
      } else
        y = y.replace(w, "");
      _ -= C;
    } else {
      var T = r(w, l);
      if (_ < T && T > C) {
        var R = mw(r, w, _, l);
        y = y.replace(w, R), _ = 0;
      } else
        _ -= T;
    }
  }), y;
}, IZ = function(e, r, t, n) {
  var i = r.right, o = t || 0;
  return e + i / 2 + o;
}, MZ = function(e) {
  var r, t, n = e.getMeta().isTotals, i = (t = (r = e).isMeasureField) === null || t === void 0 ? void 0 : t.call(r), o = e.getStyle(e.cellType || J.DATA_CELL), a;
  return i ? a = o.measureText : n ? a = o.bolderText : a = o.text, {
    cellStyle: o,
    textStyle: a
  };
}, BZ = function(e) {
  var r = e.rowIndex, t = e.colIndex, n = e.meta, i = e.data, o = e.textStyle, a = e.textCondition, l = o == null ? void 0 : o.fill;
  return a != null && a.mapping && (l = a == null ? void 0 : a.mapping(i, {
    rowIndex: r,
    colIndex: t,
    meta: n
  }).fill), M(M({}, o), { fill: l });
}, Da = function(e, r) {
  return Vt(r) ? r(e) : r;
}, DZ = function(e, r, t) {
  for (var n = e.x, i = e.y, o = e.width, a = e.height, l = a / aa(r), s = [], f, h, d, v = 0, g = We(t, function(w) {
    return w > 1 ? w / 100 : w;
  }), y = 0; y < aa(r); y++) {
    h = i + l * y;
    var C = [];
    f = n, v = 0;
    for (var _ = 0; _ < aa(r[y]); _++)
      d = Q(g) ? o / aa(r[0]) : o * g[_], f = IZ(n, { left: 0, right: 0 }, v), v += d, C.push({
        x: f,
        y: h,
        width: d,
        height: l
      });
    s.push(C);
  }
  return s;
}, $Z = function(e, r, t) {
  var n, i, o, a;
  t === void 0 && (t = !0);
  var l = e.getContentArea(), s = l.x, f = l.y, h = l.height, d = l.width, v = e.getMeta().fieldValue, g = v.values, y = e.getMeta().spreadsheet, C = y.options, _ = y.measureTextWidth, w = C.style.cellCfg.valuesCfg, x = (i = (n = C == null ? void 0 : C.conditions) === null || n === void 0 ? void 0 : n.text) === null || i === void 0 ? void 0 : i[0], S = (a = (o = C == null ? void 0 : C.conditions) === null || o === void 0 ? void 0 : o.icon) === null || a === void 0 ? void 0 : a[0];
  if (!le(g)) {
    EZ(e, g);
    return;
  }
  var T = w == null ? void 0 : w.widthPercent, R = 0;
  if (v != null && v.label) {
    var B = e.getStyle(J.DATA_CELL), $ = B.bolderText;
    R = h / (g.length + 1);
    var N = Sa(e, [], s, f + R / 2, ml({
      measureTextWidth: _,
      text: v.label,
      maxWidth: d,
      fontParam: $
    }), $);
    e.addTextShape(N);
  }
  for (var z = MZ(e), V = z.cellStyle, X = z.textStyle, Z = V == null ? void 0 : V.icon, ne = S && S.mapping && {
    size: Z == null ? void 0 : Z.size,
    margin: Z == null ? void 0 : Z.margin,
    position: S == null ? void 0 : S.position
  }, se, q = DZ({
    x: s,
    y: f + R,
    height: h - R,
    width: d
  }, g, T), ee = 0; ee < g.length; ee++)
    for (var Oe = Ol(g[ee]), me = 0; me < Oe.length; me++) {
      se = Oe[me];
      var _e = t ? BZ({
        rowIndex: ee,
        colIndex: me,
        meta: e == null ? void 0 : e.getMeta(),
        data: se,
        textStyle: X,
        textCondition: x
      }) : X, ke = (e == null ? void 0 : e.getMeta().spreadsheet.options).placeholder, Ee = Da(e == null ? void 0 : e.getMeta(), ke), Ze = pE(q[ee][me].width, Z), ft = ml({
        measureTextWidth: _,
        text: se,
        maxWidth: Ze,
        fontParam: _e,
        placeholder: Ee
      }), Fe = _(ft, X), Ge = su(q[ee][me], X, Fe, ne, S ? 1 : 0), N = Sa(e, [], Ge.text.x, Ge.text.y, ft, _e, {}, se == null ? void 0 : se.toString());
      if (e.addTextShape(N), S && t) {
        var ot = S == null ? void 0 : S.mapping(se, {
          rowIndex: ee,
          colIndex: me,
          meta: e == null ? void 0 : e.getMeta()
        });
        if (ot) {
          var nr = Tg(e, M(M({}, Ge.icon), { name: ot.icon, width: Z == null ? void 0 : Z.size, height: Z == null ? void 0 : Z.size, fill: ot.fill }));
          e.addConditionIconShape(nr);
        }
      }
    }
}, iv = function(e, r) {
  return r === void 0 && (r = 1), (e == null ? void 0 : e.width) * r;
}, gE = function(e) {
  try {
    return JSON.parse(e);
  } catch {
    return null;
  }
}, FZ = function(e, r, t) {
  return e.sort(function(n, i) {
    var o = r.indexOf(n), a = r.indexOf(i);
    return o === -1 && a === -1 ? 0 : o === -1 ? 1 : a === -1 ? -1 : o - a;
  });
}, PZ = function(e) {
  return e === void 0 && (e = []), e.filter(function(r) {
    return r !== gi && r !== d0;
  });
}, NZ = function(e) {
  return le(e) ? Qb(e) : [e];
}, HZ = function(e, r) {
  var t;
  return (t = e == null ? void 0 : e.filter(function(n) {
    return !(r != null && r.includes(n));
  })) === null || t === void 0 ? void 0 : t.concat(r);
};
function zZ(e, r) {
  var t = e.isRowTotal, n = e.isRowSubTotal, i = e.isColTotal, o = e.isColSubTotal, a = r || {}, l = a.row, s = a.col, f = l || {}, h = f.calcTotals, d = h === void 0 ? {} : h, v = f.calcSubTotals, g = v === void 0 ? {} : v, y = s || {}, C = y.calcTotals, _ = C === void 0 ? {} : C, w = y.calcSubTotals, x = w === void 0 ? {} : w, S = function(T, R) {
    if ((T.aggregation || T.calcFunc) && R)
      return {
        aggregation: T.aggregation,
        calcFunc: T.calcFunc
      };
  };
  return S(_, i) || S(x, o) || S(d, t) || S(g, n);
}
function Hs(e) {
  return e === Mf;
}
function ta(e, r, t) {
  return e === void 0 && (e = {}), r === void 0 && (r = []), t === void 0 && (t = gi), r.reduce(function(n, i) {
    var o = e[i];
    return i in e ? n.push(String(o)) : n.push(t), n;
  }, []);
}
function yE(e, r) {
  var t = r.filter(function(n) {
    return n in e;
  });
  return Q(t) && t.push(d0), t;
}
function _w(e, r, t) {
  e === void 0 && (e = {}), r === void 0 && (r = []);
  var n = [];
  function i(o, a, l) {
    return a.reduce(function(s, f) {
      var h = o[f];
      return f in o ? s.push(String(h)) : f === Ae && l ? s.push(l) : s.push(gi), s;
    }, []);
  }
  return t ? t.forEach(function(o) {
    n.push(i(e, r, o));
  }) : n.push(i(e, r)), n;
}
function WZ(e, r, t) {
  var n, i = r.slice(0, r.indexOf(e) + 1);
  return (n = t.map(function(o) {
    return i.map(function(a) {
      return o[a];
    }).join("".concat(ur));
  })) === null || n === void 0 ? void 0 : n.filter(function(o) {
    return o;
  });
}
function fc(e, r) {
  return e.concat(r).filter(function(t) {
    return t !== Ae;
  }).join(ur);
}
function cc(e) {
  var r = e.rowDimensionValues, t = e.colDimensionValues, n = e.isFirstCreate, i = e.onFirstCreate, o = e.rowFields, a = e.colFields, l = e.rowPivotMeta, s = e.colPivotMeta, f = e.prefix, h = f === void 0 ? "" : f, d = function(y, C, _, w) {
    for (var x = _, S = [], T = 0; T < C.length; T++) {
      var R = C[T];
      if (n && x && !(x != null && x.has(R))) {
        var B = C.slice(0, T + 1).map(function(Z) {
          return String(Z);
        }), $ = B.join(ur), N = R === gi, z = void 0;
        N ? z = 0 : x.has(gi) ? z = x.size : z = x.size + 1, x.set(R, {
          id: $,
          dimensions: B,
          value: R,
          level: z,
          children: /* @__PURE__ */ new Map()
        }), i == null || i({
          dimension: y == null ? void 0 : y[T],
          dimensionPath: $,
          careRepeated: w
        });
      }
      var V = x == null ? void 0 : x.get(R);
      if (S.push(Hs(R) ? R : V == null ? void 0 : V.level), V) {
        var X = y == null ? void 0 : y[T + 1];
        n && V.childField !== X && (V.childField = X), x = V == null ? void 0 : V.children;
      }
    }
    return S;
  }, v = d(o, r, l, !1), g = d(a, t, s, !0);
  return j(j([h], W(v), !1), W(g), !1);
}
function kZ(e) {
  var r = e.rows, t = e.columns, n = e.values, i = e.valueInCols, o = e.data, a = o === void 0 ? [] : o, l = e.indexesData, s = l === void 0 ? {} : l, f = e.sortedDimensionValues, h = e.rowPivotMeta, d = e.colPivotMeta, v = e.getExistValuesByDataItem, g = [], y = new Set(tT(r, t)), C = function(w) {
    var x = w.dimension, S = w.dimensionPath, T = w.careRepeated, R = T === void 0 ? !0 : T;
    R && y.has(x) || (f[x] || (f[x] = [])).push(S);
  }, _ = fc(r, t);
  return a.forEach(function(w) {
    var x, S, T, R;
    if (!(!w || Q(w))) {
      var B = v ? v(w, n) : yE(w, n), $ = _w(w, r, i ? null : B), N = _w(w, t, i ? B : null);
      try {
        for (var z = br($), V = z.next(); !V.done; V = z.next()) {
          var X = V.value;
          try {
            for (var Z = (T = void 0, br(N)), ne = Z.next(); !ne.done; ne = Z.next()) {
              var se = ne.value, q = cc({
                rowDimensionValues: X,
                colDimensionValues: se,
                rowPivotMeta: h,
                colPivotMeta: d,
                rowFields: r,
                colFields: t,
                isFirstCreate: !0,
                onFirstCreate: C,
                prefix: _
              });
              g.push(q), $s(s, q, w);
            }
          } catch (ee) {
            T = { error: ee };
          } finally {
            try {
              ne && !ne.done && (R = Z.return) && R.call(Z);
            } finally {
              if (T) throw T.error;
            }
          }
        }
      } catch (ee) {
        x = { error: ee };
      } finally {
        try {
          V && !V.done && (S = z.return) && S.call(z);
        } finally {
          if (x) throw x.error;
        }
      }
    }
  }), {
    paths: g,
    indexesData: s,
    rowPivotMeta: h,
    colPivotMeta: d,
    sortedDimensionValues: f
  };
}
function ww(e, r) {
  if (!(!e || !r)) {
    var t = r.split(ur), n = ut(t), i = e;
    xe(t, function(o, a) {
      var l = i.get(o);
      return l ? (o === n ? (l.children = /* @__PURE__ */ new Map(), l.childField = void 0) : i = l.children, !0) : a === 0 && o === v0;
    });
  }
}
function GZ(e, r, t) {
  var n = function(a) {
    var l = cr(e, function(s) {
      var f = s.field;
      return f === a;
    });
    return ge(l, "name", a);
  }, i = r || t, o = {
    field: Ae,
    name: i,
    formatter: function(a) {
      return n(a);
    }
  };
  return o;
}
function ps(e, r) {
  return {
    isRowTotal: e.isGrandTotals,
    isRowSubTotal: e.isSubTotals,
    isColTotal: r.isGrandTotals,
    isColSubTotal: r.isSubTotals
  };
}
function UZ(e) {
  for (var r = null, t = 0; t < e.length; t++) {
    var n = e[t];
    if (Hs(n))
      r = t;
    else if (!lT(r) && r < t)
      return !0;
  }
  return !1;
}
function CE(e) {
  var r = e.pivotMeta, t = e.dimensionValues, n = e.fieldIdx, i = e.queryType, o = e.fields, a = e.sortedDimensionValues, l = {
    children: r
  }, s = [l];
  function f(v, g) {
    var y, C = ru(v, function(x) {
      var S, T, R = [];
      try {
        for (var B = br(x.children.values()), $ = B.next(); !$.done; $ = B.next()) {
          var N = $.value;
          N.value !== d0 && (i === wn.All || N.value !== gi) && R.push(N);
        }
      } catch (z) {
        S = { error: z };
      } finally {
        try {
          $ && !$.done && (T = B.return) && T.call(B);
        } finally {
          if (S) throw S.error;
        }
      }
      return R;
    });
    if (v.length > 1) {
      var _ = (y = a[g]) !== null && y !== void 0 ? y : [], w = new Map(_.map(function(x, S) {
        return [x, S];
      }));
      return C.sort(function(x, S) {
        return w.get(x.id) - w.get(S.id);
      }), C;
    }
    return C;
  }
  for (var h = function(v) {
    var g = t[v], y = o[v];
    Hs(g) ? s = f(s, y) : s = s.map(function(C) {
      return C.children.get(g);
    }).filter(Boolean);
  }, d = 0; d <= n; d++)
    h(d);
  return s;
}
function xw(e) {
  var r = e.dimensionValues, t = e.pivotMeta, n = e.fields, i = e.sortedDimensionValues, o = e.queryType, a = o === void 0 ? wn.All : o;
  if (!UZ(r))
    return [r];
  var l = CE({
    pivotMeta: t,
    dimensionValues: r,
    fieldIdx: r.length - 1,
    queryType: a,
    fields: n,
    sortedDimensionValues: i
  });
  return l.map(function(s) {
    return s.dimensions;
  });
}
function YZ(e) {
  var r = e.rowFields, t = e.rowDimensionValues, n = e.rowPivotMeta, i = e.colFields, o = e.colDimensionValues, a = e.colPivotMeta, l = e.queryType, s = e.sortedDimensionValues, f = xw({
    dimensionValues: t,
    pivotMeta: n,
    fields: r,
    sortedDimensionValues: s,
    queryType: l
  }), h = xw({
    dimensionValues: o,
    pivotMeta: a,
    fields: i,
    sortedDimensionValues: s,
    queryType: l
  });
  return {
    rowQueries: f,
    colQueries: h
  };
}
function XZ(e, r) {
  return e ? le(e) ? ru(e, function(t) {
    if (!le(t))
      return Xn([t]);
    var n = r === wn.DetailOnly ? 1 : 0;
    return Xn(t.slice(n));
  }) : Xn([e]) : [];
}
var Sf;
function Sw(e, r) {
  return !e || !r ? !1 : String(e).toLowerCase() === String(r).toLowerCase();
}
var VZ = `\r
`, qZ = "	", hc = function(e, r) {
  var t = e.getColumnNodes().find(function(n) {
    return n.id === r;
  });
  return e.isPivotMode() ? t == null ? void 0 : t.value : t == null ? void 0 : t.field;
}, KZ = function(e, r) {
  var t = r.getColumnNodes().find(function(n) {
    return n.colIndex === e;
  });
  return hc(r, t.id);
}, jZ = function(e, r) {
  var t = e.rowIndex, n = e.colIndex;
  return [
    r.getRowNodes().find(function(i) {
      return i.rowIndex === t;
    }),
    r.getColumnNodes().find(function(i) {
      return i.colIndex === n;
    })
  ];
}, zs = function(e, r) {
  var t = r.getColumnNodes().find(function(i) {
    return i.colIndex === e;
  }), n = hc(r, t.id);
  return r.options.interaction.copyWithFormat ? r.dataSet.getFieldFormatter(n) : function(i) {
    return i;
  };
}, ZZ = function(e) {
  var r, t, n, i, o = ((i = (n = (t = e.options) === null || t === void 0 ? void 0 : t.style) === null || n === void 0 ? void 0 : n.colCfg) === null || i === void 0 ? void 0 : i.hideMeasureColumn) && e.isValueInCols();
  return o ? (r = {}, r[Ae] = e.dataCfg.fields.values[0], r) : {};
}, QZ = function(e, r, t) {
  var n, i;
  if (t.isPivotMode()) {
    var o = W(jZ(e, t), 2), a = o[0], l = o[1], s = ZZ(t), f = t.dataSet.getCellData({
      query: M(M(M({}, a.query), l.query), s),
      rowNode: a,
      isTotals: a.isTotals || a.isTotalMeasure || l.isTotals || l.isTotalMeasure,
      totalStatus: ps(a, l)
    });
    return (n = f == null ? void 0 : f[Nr]) !== null && n !== void 0 ? n : "";
  }
  var h = KZ(e.colIndex, t);
  return (i = r[e.rowIndex]) === null || i === void 0 ? void 0 : i[h];
}, mE = function(e, r, t) {
  var n = zs(e.colIndex, t);
  return n(QZ(e, r, t));
}, Eg = function(e) {
  return /\n/.test(e) ? '"' + e.replace(/\r\n?/g, `
`) + '"' : e;
}, Ws = function(e, r) {
  var t = e.split(ur);
  return r ? t.slice(t.length - r) : (t.shift(), t);
}, _p = function(e, r) {
  return We(e, function(t) {
    return r.dataSet.getFieldName(t);
  });
}, Lt;
(function(e) {
  e.PLAIN = "text/plain", e.HTML = "text/html";
})(Lt || (Lt = {}));
var JZ = function(e) {
  return {
    type: Lt.PLAIN,
    content: We(e, function(r) {
      return r.join(qZ);
    }).join(VZ)
  };
}, eQ = function(e) {
  function r(n, i) {
    return n.map(function(o) {
      return "<".concat(i, ">").concat(V0(o), "</").concat(i, ">");
    }).join("");
  }
  function t(n, i) {
    return n.map(function(o) {
      return "<".concat(i, ">").concat(r(o, "td"), "</").concat(i, ">");
    }).join("");
  }
  return {
    type: Lt.HTML,
    content: '<meta charset="utf-8"><table><tbody>'.concat(t(e, "tr"), "</tbody></table>")
  };
}, tQ = (Sf = {}, Sf[Lt.PLAIN] = JZ, Sf[Lt.HTML] = eQ, Sf);
function Wr(e) {
  return tQ[e];
}
function rQ(e, r) {
  return r === void 0 && (r = Lt.PLAIN), Array.isArray(r) ? [].concat(e).filter(function(t) {
    return r.includes(t.type);
  }).map(function(t) {
    return t.content;
  }) : [].concat(e).filter(function(t) {
    return (t == null ? void 0 : t.type) === r;
  }).map(function(t) {
    return t.content;
  })[0] || "";
}
var _E = function(e, r, t) {
  var n, i, o, a, l, s, f = (i = (n = e[0]) === null || n === void 0 ? void 0 : n.length) !== null && i !== void 0 ? i : 0, h = (o = r == null ? void 0 : r.length) !== null && o !== void 0 ? o : 0, d = (l = (a = t[0]) === null || a === void 0 ? void 0 : a.length) !== null && l !== void 0 ? l : 0, v = (s = t.length) !== null && s !== void 0 ? s : 0, g = f + d, y = h + v, C = Array.from(Array(y), function() {
    return new Array(g);
  });
  return C = We(C, function(_, w) {
    return We(_, function(x, S) {
      if (S >= 0 && S < f && w >= 0 && w < h)
        return "";
      if (S >= f && S <= g && w >= 0 && w < h)
        return r[w][S - f];
      if (S >= 0 && S < f && w >= h && w < y)
        return e[w - h][S];
      if (S >= f && S <= g && w >= h && w < y)
        return t[w - h][S - f];
    });
  }), [
    Wr(Lt.PLAIN)(C),
    Wr(Lt.HTML)(C)
  ];
}, nQ = function(e, r, t) {
  var n = r.map(function(i) {
    return i.map(function(o) {
      return o ? Eg(mE(o, e, t)) : "";
    });
  });
  return [
    Wr(Lt.PLAIN)(n),
    Wr(Lt.HTML)(n)
  ];
}, iQ = function(e) {
  if (!(e != null && e.length))
    return [];
  var r = W([
    { row: 1 / 0, col: 1 / 0 },
    { row: 0, col: 0 }
  ], 2), t = r[0], n = r[1];
  e.forEach(function(s) {
    var f = s.rowIndex, h = s.colIndex;
    t.col = Math.min(h, t.col), t.row = Math.min(f, t.row), n.col = Math.max(h, n.col), n.row = Math.max(f, n.row);
  });
  var i = W([
    n.row - t.row + 1,
    n.col - t.col + 1
  ], 2), o = i[0], a = i[1], l = new Array(o).fill("").map(function() {
    return new Array(a).fill("");
  });
  return e.forEach(function(s) {
    var f = s.rowIndex, h = s.colIndex, d = W([f - t.row, h - t.col], 2), v = d[0], g = d[1];
    l[v][g] = s;
  }), l;
}, oQ = function(e, r) {
  var t = e.dataSet.getDisplayDataSet(), n = r.length ? r.map(function(o) {
    return {
      field: hc(e, o.id),
      formatter: zs(o.colIndex, e)
    };
  }) : e.dataCfg.fields.columns.map(function(o) {
    return e.getColumnNodes().find(function(a) {
      return a.field === o;
    });
  }).map(function(o) {
    return {
      field: hc(e, o.id),
      formatter: zs(o.colIndex, e)
    };
  }), i = t.map(function(o) {
    return n.map(function(a) {
      var l = a.field, s = a.formatter;
      return Eg(s(o[l]));
    });
  });
  return [
    Wr(Lt.PLAIN)(i),
    Wr(Lt.HTML)(i)
  ];
}, wE = function(e, r, t) {
  return We(e, function(n) {
    return r.map(function(i) {
      var o, a = t.dataSet.getCellData({
        query: M(M({}, n.query), i.query),
        rowNode: n,
        isTotals: n.isTotals || n.isTotalMeasure || i.isTotals || i.isTotalMeasure,
        totalStatus: ps(n, i)
      });
      return zs(i.colIndex, t)((o = a == null ? void 0 : a[Nr]) !== null && o !== void 0 ? o : "");
    });
  });
}, aQ = function(e, r, t) {
  var n = wE(r, t, e);
  return [
    Wr(Lt.PLAIN)(n),
    Wr(Lt.HTML)(n)
  ];
}, lQ = function(e, r, t) {
  var n = We(r, function(a) {
    return Ws(a.id);
  }), i = Jc.apply(void 0, j([], W(We(t, function(a) {
    return Ws(a.id);
  })), !1)), o = wE(r, t, e);
  return _E(n, i, o);
};
function xE(e, r, t) {
  var n = e.options.interaction.copyWithHeader;
  return n ? lQ(e, r, t) : aQ(e, r, t);
}
var sQ = function(e, r) {
  var t = e.getRowNodes().filter(function(o) {
    return o.isLeaf || e.isHierarchyTreeType();
  }), n = e.getColumnNodes().filter(function(o) {
    return o.isLeaf;
  }), i = r.length ? r.reduce(function(o, a) {
    return o.push.apply(o, j([], W(n.filter(function(l) {
      return l.id.startsWith(a.id);
    })), !1)), o;
  }, []) : n;
  return xE(e, t, i);
}, bw = function(e, r, t) {
  return r.isPivotMode() ? sQ(r, t) : oQ(r, t);
}, uQ = function(e, r) {
  var t = e.dataSet.getDisplayDataSet(), n = t.filter(function(i, o) {
    return r.map(function(a) {
      return a.rowIndex;
    }).includes(o);
  }).map(function(i) {
    var o = e.getColumnNodes().reduce(function(a, l, s) {
      return a[l.field] = s, a;
    }, {});
    return Object.keys(i).sort(function(a, l) {
      return o[a] - o[l];
    }).map(function(a) {
      return e.getColumnNodes().find(function(l) {
        return l.field === a;
      });
    }).filter(Boolean).map(function(a) {
      return Eg(zs(a.colIndex, e)(i[a.field]));
    });
  });
  return [
    Wr(Lt.PLAIN)(n),
    Wr(Lt.HTML)(n)
  ];
}, fQ = function(e, r) {
  var t = e.getRowNodes().filter(function(o) {
    return o.isLeaf || e.isHierarchyTreeType();
  }), n = e.getColumnNodes().filter(function(o) {
    return o.isLeaf;
  }), i = r.reduce(function(o, a) {
    return o.push.apply(o, j([], W(t.filter(function(l) {
      return l.id.startsWith(a.id);
    })), !1)), o;
  }, []);
  return xE(e, i, n);
}, cQ = function(e, r, t) {
  return r.isPivotMode() ? fQ(r, t) : uQ(r, t);
}, hQ = function(e, r, t) {
  var n = Jc.apply(void 0, j([], W(We(e[0], function(a) {
    var l, s = (a == null ? void 0 : a.colId) || ut((l = a == null ? void 0 : a.id) === null || l === void 0 ? void 0 : l.split(Yv)) || "";
    return _p(Ws(s), t);
  })), !1)), i = We(e, function(a) {
    var l, s, f, h = ((l = a == null ? void 0 : a[0]) === null || l === void 0 ? void 0 : l.rowId) || xa((f = (s = a == null ? void 0 : a[0]) === null || s === void 0 ? void 0 : s.id) === null || f === void 0 ? void 0 : f.split(Yv)) || "";
    return _p(Ws(h), t);
  }), o = We(e, function(a) {
    return We(a, function(l) {
      return mE(l, r, t);
    });
  });
  return _E(i, n, o);
};
function dQ(e) {
  var r = /* @__PURE__ */ new Set();
  return xe(e, function(t) {
    var n = t.getMeta().level;
    r.has(n) || r.add(n);
  }), r;
}
function vQ(e, r) {
  return Qi(e, function(t) {
    var n = t.getMeta(), i = n.level === r, o = n.isTotals && Q(n.children);
    return i || o;
  });
}
function pQ(e, r) {
  for (var t = e, n = { level: r }, i = t.label; t.level >= 0; ) {
    for (var o = n.level - t.level; o > 0; )
      i = "".concat(t.label).concat(ur).concat(i), o--;
    n = t, t = t.parent;
  }
  return i;
}
function gQ(e, r, t) {
  return We(e, function(n) {
    var i = n.getMeta(), o = i.id, a = i.isTotals, l = i.spreadsheet, s = a ? pQ(i, r) : o, f = Ws(s, t.size);
    return _p(f, l);
  });
}
function yQ(e) {
  var r, t = dQ(e), n = (r = Gi(Array.from(t))) !== null && r !== void 0 ? r : 0, i = vQ(e, n), o = e[0].cellType === J.COL_CELL, a = gQ(i, n, t);
  return o && (a = Jc.apply(void 0, j([], W(a), !1))), [
    Wr(Lt.PLAIN)(a),
    Wr(Lt.HTML)(a)
  ];
}
var CQ = function(e, r, t) {
  return We(r, function(n) {
    var i;
    return (i = e[n]) !== null && i !== void 0 ? i : t;
  });
}, mQ = function(e, r) {
  var t = e.options.placeholder, n = e.dataCfg.fields, i = n.rows, o = n.columns, a = n.values, l = Da(e, t), s = e.getColumnLeafNodes(), f = [];
  if (e.isTableMode()) {
    var h = Qi(s, function(y) {
      return y.field !== ga;
    });
    f = We(r, function(y) {
      return We(h, function(C) {
        var _;
        return (_ = y == null ? void 0 : y[C.field]) !== null && _ !== void 0 ? _ : l;
      });
    });
  } else if (e.isPivotMode()) {
    var d = j(j(j([], W(i), !1), W(o), !1), W(a), !1), v = NZ(r), g = v.filter(function(y) {
      return j(j([], W(i), !1), W(o), !1).every(function(C) {
        return !Nt(y[C]);
      });
    });
    f = jc(g, function(y, C) {
      return j(j([], W(y), !1), [CQ(C, d, l)], !1);
    }, []);
  }
  return [
    Wr(Lt.PLAIN)(f),
    Wr(Lt.HTML)(f)
  ];
};
function _Q(e, r) {
  var t, n, i = r.filter(function(h) {
    var d = h.type;
    return d === J.COL_CELL;
  }), o = r.filter(function(h) {
    var d = h.type;
    return d === J.ROW_CELL;
  }), a = e.dataSet.getDisplayDataSet();
  if (e.interaction.getCurrentStateName() === ae.ALL_SELECTED)
    n = bw(a, e, []);
  else if (i.length)
    n = bw(a, e, i);
  else if (o.length)
    n = cQ(a, e, o);
  else {
    if (!r.length)
      return;
    var l = iQ(r), s = e.interaction.getSelectedCellHighlight().currentRow;
    if (s) {
      var f = lg(r, "rowIndex", "asc").map(function(h) {
        return e.dataSet.getRowData(h);
      });
      n = mQ(e, f);
    } else !((t = e.options.interaction) === null || t === void 0) && t.copyWithHeader ? n = hQ(l, a, e) : n = nQ(a, l, e);
  }
  return n;
}
var wQ = function(e) {
  var r, t = e.interaction, n = t.getState().cells || [], i, o = (r = t.getInteractedCells()) !== null && r !== void 0 ? r : [], a = Q(o) ? !1 : Gc(o, function(l) {
    return l.cellType === J.ROW_CELL || l.cellType === J.COL_CELL;
  });
  return a ? i = yQ(o) : i = _Q(e, n), i && SQ(i), rQ(i, Lt.PLAIN);
};
function gs(e) {
  if (!e)
    return e;
  var r = sE(e);
  if (typeof r == "string") {
    var t = r;
    return '"'.concat(t.replace(/"/g, '""'), '"');
  }
  return '"'.concat(r, '"');
}
var SE = function(e) {
  return new Promise(function(r, t) {
    var n;
    Array.isArray(e) ? n = ge(e.filter(function(a) {
      return a.type === Lt.PLAIN;
    }), "[0].content", "") : n = e.content || "";
    var i = document.createElement("textarea");
    i.value = n, document.body.appendChild(i), i.focus({ preventScroll: !0 }), i.select();
    var o = document.execCommand("copy");
    document.body.removeChild(i), o ? r() : t();
  });
}, xQ = function(e) {
  return navigator.clipboard.write([
    new ClipboardItem([].concat(e).reduce(function(r, t) {
      var n, i = t.type, o = t.content, a = o.replace(/\x00/g, "");
      return M(M({}, r), (n = {}, n[i] = new Blob([a], { type: i }), n));
    }, {}))
  ]).catch(function() {
    return SE(e);
  });
}, SQ = function(e, r) {
  r === void 0 && (r = !1);
  var t;
  return typeof e == "string" ? t = {
    content: e,
    type: Lt.PLAIN
  } : t = e, !navigator.clipboard || !window.ClipboardItem || r ? SE(t) : xQ(t);
}, bQ = function(e, r) {
  try {
    var t = document.createElement("a");
    t.download = "".concat(r, ".csv");
    var n = new Blob(["\uFEFF".concat(e)], {
      type: "text/csv;charset=utf-8"
    });
    t.href = URL.createObjectURL(n), t.click(), URL.revokeObjectURL(t.href);
  } catch (i) {
    console.error(i);
  }
}, TQ = function(e) {
  var r = e != null && e.label ? [e == null ? void 0 : e.label] : [], t = e == null ? void 0 : e.values;
  return Q(t) || xe(t, function(n) {
    r.push(n.join(" "));
  }), r.join("$");
}, EQ = function(e, r) {
  var t, n, i, o;
  return r ? (o = e == null ? void 0 : e.values) === null || o === void 0 ? void 0 : o[0] : (n = (t = e == null ? void 0 : e.originalValues) === null || t === void 0 ? void 0 : t[0]) !== null && n !== void 0 ? n : (i = e == null ? void 0 : e.values) === null || i === void 0 ? void 0 : i[0];
}, LQ = function(e, r, t) {
  var n, i, o, a = e.dataSet.getDisplayDataSet(), l = ((o = e.dataCfg) === null || o === void 0 ? void 0 : o.fields).columns, s = Ba(l || []), f = [], h = function(_, w) {
    var x = [];
    t ? x = s.map(function(S) {
      var T = e.dataSet.getFieldFormatter(S);
      return gs(T(w[S], w));
    }) : x = s.map(function(S) {
      return gs(w[S]);
    }), e.options.showSeriesNumber && (x = [gs(_ + 1)].concat(x)), f.push(x.join(r));
  };
  try {
    for (var d = br(a.entries()), v = d.next(); !v.done; v = d.next()) {
      var g = W(v.value, 2), y = g[0], C = g[1];
      h(y, C);
    }
  } catch (_) {
    n = { error: _ };
  } finally {
    try {
      v && !v.done && (i = d.return) && i.call(d);
    } finally {
      if (n) throw n.error;
    }
  }
  return f;
}, AQ = function(e, r, t) {
  if (!e)
    return "";
  var n = e.fieldValue, i = e.valueField, o = e.data;
  if (rt(n))
    return TQ(n);
  if (!t)
    return "".concat(n);
  var a = r.dataSet.getFieldFormatter(i);
  return a(n, o);
}, RQ = function(e, r, t, n) {
  var i = [];
  if (e) {
    var o = e.fieldValue, a = e.valueField, l = e.data;
    if (rt(o))
      return i = EQ(o, n), i;
    if (Nt(o) && t.length > 1)
      return i.push.apply(i, j([], W(t), !1)), i;
    if (!n)
      i.push(o);
    else {
      var s = r.dataSet.getFieldFormatter(a);
      i.push(s(o, l));
    }
  } else
    i.push.apply(i, j([], W(t), !1));
  return i.join("    ");
}, bE = function(e) {
  var r = gE(e);
  return le(r) ? r : e;
}, OQ = function(e, r, t) {
  var n = bE(r.label), i = le(n) ? n.length : 1, o = t.options.placeholder, a = Vt(o) ? o(e) : o;
  return Array(i).fill(a);
}, IQ = function(e) {
  var r = e.map(function(t) {
    return t.map(function(n) {
      return le(n) ? n : le(t[0]) ? j([n], W(new Array(t[0].length - 1)), !1) : n;
    });
  });
  return r;
}, TE = function(e) {
  var r, t, n, i, o = (n = (t = (r = e.spreadsheet) === null || r === void 0 ? void 0 : r.dataSet) === null || t === void 0 ? void 0 : t.getFieldFormatter) === null || n === void 0 ? void 0 : n.call(t, e.field);
  return (i = o == null ? void 0 : o(e.label)) !== null && i !== void 0 ? i : e.label;
}, MQ = function(e) {
  var r = [], t = function(n) {
    if (n.id !== v0) {
      var i = TE(n);
      if (r.unshift(i), n != null && n.parent)
        return t(n.parent);
    }
  };
  return t(e), r;
}, BQ = function(e) {
  return {
    isFormatHeader: e,
    isFormatData: e
  };
}, DQ = function(e, r, t) {
  var n, i, o, a, l, s = BQ(t), f = s.isFormatHeader, h = s.isFormatData, d = (l = e == null ? void 0 : e.facet) === null || l === void 0 ? void 0 : l.layoutResult, v = d.rowsHierarchy, g = d.rowLeafNodes, y = d.colLeafNodes, C = d.getCellMeta, _ = v.maxLevel, w = e.dataCfg.fields.valueInCols, x = v.sampleNodesForAllLevels.map(function(et) {
    return e.dataSet.getFieldName(et.key);
  }), S = g.reduce(function(et, ct) {
    var pt, Ir = ((pt = ct.level) !== null && pt !== void 0 ? pt : 0) + 1;
    return Ir > et ? Ir : et;
  }, 0), T = [], R = 0;
  if (!e.isPivotMode())
    T = LQ(e, r, h);
  else {
    var B = g.filter(function(et) {
      return et.height !== 0;
    });
    try {
      for (var $ = br(B), N = $.next(); !N.done; N = $.next()) {
        var z = N.value, V = [];
        if (f)
          V = MQ(z);
        else {
          z.label = zT(z == null ? void 0 : z.label);
          var X = z.id.replace(ID, "");
          V = X.split(ur);
        }
        var Z = _ + 1, ne = Z - V.length;
        ne > 0 && V.push.apply(V, j([], W(new Array(ne)), !1));
        var se = e.dataSet.getFieldName(ut(V));
        V[V.length - 1] = se;
        try {
          for (var q = (o = void 0, br(y)), ee = q.next(); !ee.done; ee = q.next()) {
            var Oe = ee.value;
            if (w) {
              var me = C(z.rowIndex, Oe.colIndex);
              V.push(AQ(me, e, h));
            } else {
              var me = C(z.rowIndex, Oe.colIndex), _e = OQ(me, Oe, e), ke = RQ(me, e, _e, h);
              le(ke) ? V = V.concat.apply(V, j([], W(ke), !1)) : V.push(ke);
            }
          }
        } catch (et) {
          o = { error: et };
        } finally {
          try {
            ee && !ee.done && (a = q.return) && a.call(q);
          } finally {
            if (o) throw o.error;
          }
        }
        R = Gi([V.length, R]);
        var Ee = V.map(function(et) {
          return gs(et);
        }).join(r);
        T.push(Ee);
      }
    } catch (et) {
      n = { error: et };
    } finally {
      try {
        N && !N.done && (i = $.return) && i.call($);
      } finally {
        if (n) throw n.error;
      }
    }
  }
  var Ze = [];
  if (Q(y) && !e.isPivotMode())
    Ze = [x];
  else {
    var ft = 0, Fe = Ol(y).map(function(et) {
      for (var ct = et, pt = []; ct.level !== void 0; ) {
        var Ir = bE(ct.label);
        le(Ir) ? ft = Gi([ft, aa(Ir)]) : Ir = f && e.isPivotMode() ? TE(ct) : Ir, pt.push(Ir), ct = ct.parent;
      }
      return pt;
    });
    ft > 1 && (Fe = IQ(Fe));
    for (var Ge = Fe.map(function(et) {
      return et.length;
    }), ot = Gi(Ge), nr = [], vr = function(et) {
      var ct = Fe.map(function(pt) {
        return pt.length < ot ? j(j([], W(new Array(ot - pt.length)), !1), W(pt), !1) : pt;
      }).map(function(pt) {
        return pt[et];
      }).map(function(pt) {
        return e.dataSet.getFieldName(pt);
      });
      nr.push(b0(ct));
    }, Kt = ot - 1; Kt >= 0; Kt -= 1)
      vr(Kt);
    Ze = nr.map(function(et, ct) {
      var pt, Ir;
      if (e.isPivotMode()) {
        var Yr = e.facet.cornerHeader.cfg, yu = Yr.columns, yh = Yr.rows, ko = Yr.data, Xr = ko.filter(function(ni) {
          var Dl = ni.cornerType;
          return Dl === xn.Col;
        });
        if (ct < nr.length - 1)
          return j(j(j([], W(Array(_).fill("")), !1), [
            ((Ir = Xr.find(function(ni) {
              var Dl = ni.field;
              return Dl === yu[ct];
            })) === null || Ir === void 0 ? void 0 : Ir.label) || ""
          ], !1), W(et), !1);
        var Mn = yh.slice(0, S);
        return Mn.length < S && Mn.unshift.apply(Mn, j([], W(Array(S - Mn.length).fill("")), !1)), j(j([], W(Mn.map(function(ni) {
          return e.dataSet.getFieldName(ni) || "";
        })), !1), W(et), !1);
      }
      return ct < nr.length ? (pt = Array(S).fill("")).concat.apply(pt, j([], W(et), !1)) : x.concat.apply(x, j([], W(et), !1));
    });
  }
  var io = Ze.map(function(et) {
    var ct = R - et.length;
    return ct > 0 && et.unshift.apply(et, j([], W(new Array(ct)), !1)), et.map(function(pt) {
      return gs(pt);
    }).join(r);
  }).join(`\r
`), ri = [io].concat(T), oo = ri.join(`\r
`);
  return oo;
}, $Q = function(e) {
  var r, t, n, i, o, a, l = (n = (t = (r = e.target) === null || r === void 0 ? void 0 : r.attrs) === null || t === void 0 ? void 0 : t.appendInfo) === null || n === void 0 ? void 0 : n.cellData, s = (o = (i = e.target).get) === null || o === void 0 ? void 0 : o.call(i, "parent"), f = ((a = s == null ? void 0 : s.getMeta) === null || a === void 0 ? void 0 : a.call(s)) || l;
  return {
    target: s,
    viewMeta: f,
    event: e
  };
}, Lg = function(e, r, t) {
  var n, i = e.split(ur);
  if (t)
    n = [e];
  else {
    n = [Ns(i[0], i[1])];
    for (var o = 2; o < i.length; o += 1)
      n.push(Ns(n[o - 2], i[o]));
  }
  var a = Qi(r, function(l) {
    var s;
    return n.includes((s = l.getMeta()) === null || s === void 0 ? void 0 : s.id);
  });
  return a;
}, EE = function(e, r, t) {
  if (e) {
    var n = Lg(e, r);
    xe(n, function(i) {
      i.updateByState(t);
    });
  }
}, FQ = function(e, r) {
  return typeof e == "function" ? e(r) : e.some(function(t) {
    return t === r.key || t === r.id || t === r.valueField;
  });
}, zn = function() {
  for (var e = [], r = 0; r < arguments.length; r++)
    e[r] = arguments[r];
  var t = function(i, o) {
    if (le(i) && le(o))
      return o;
  }, n = j(j([], W(e), !1), [t], !1);
  return U0.apply(void 0, j([{}], W(n), !1));
}, PQ = function(e) {
  var r = ["rows", "columns", "values"], t = r.reduce(function(n, i) {
    var o = e[i], a = Ni(o);
    return tr(a, o) || console.warn("fields.".concat(i, ":[").concat(o, "] should be unique")), n[i] = a, n;
  }, {});
  return M(M({}, e), t);
}, ov = function() {
  for (var e = [], r = 0; r < arguments.length; r++)
    e[r] = arguments[r];
  var t = zn.apply(void 0, j([BD], W(e), !1));
  return t.fields = PQ(t.fields), (!Q(t.fields.customTreeItems) || Q(t.fields.values)) && (t.fields.valueInCols = !1), t;
}, Tw = function(e) {
  return zn(h2, e);
}, nh = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t, n) {
      for (var i = [], o = 2; o < arguments.length; o++)
        i[o - 2] = arguments[o];
      var a = e.call(this, {}) || this;
      return a.textShapes = [], a.actualTextWidth = 0, a.conditionIconShapes = [], a.stateShapes = /* @__PURE__ */ new Map(), a.meta = t, a.spreadsheet = n, a.theme = n.theme, a.conditions = a.spreadsheet.options.conditions, a.handleRestOptions.apply(a, j([], W(i), !1)), a.shouldInit() && a.initCell(), a;
    }
    return r.prototype.getMeta = function() {
      return this.meta;
    }, r.prototype.setMeta = function(t) {
      this.meta = zn(this.meta, t);
    }, r.prototype.getIconStyle = function() {
      return this.theme[this.cellType].icon;
    }, r.prototype.getTextAndIconPosition = function(t) {
      t === void 0 && (t = 1);
      var n = this.getTextStyle(), i = this.getIconStyle();
      return su(this.getContentArea(), n, this.actualTextWidth, i, t);
    }, r.prototype.getActualText = function() {
      return this.actualText;
    }, r.prototype.isTextOverflowing = function() {
      var t = this.getActualText();
      return t ? Sr(t, ol) : t !== this.getFieldValue();
    }, r.prototype.getFieldValue = function() {
      var t = this.getFormattedFieldValue().formattedValue;
      return t === La ? this.getActualText() : t;
    }, r.prototype.handleRestOptions = function() {
    }, r.prototype.shouldInit = function() {
      var t = this.meta, n = t.width, i = t.height;
      return n > 0 && i > 0;
    }, r.prototype.getStyle = function(t) {
      return ge(this.theme, t || this.cellType);
    }, r.prototype.getResizeAreaStyle = function() {
      return this.getStyle("resizeArea");
    }, r.prototype.shouldDrawResizeAreaByType = function(t, n) {
      var i = this.spreadsheet.options.interaction.resize;
      return ui(i) ? i : Vt(i.visible) ? i.visible(n) : i[t];
    }, r.prototype.getCellArea = function() {
      var t = this.meta, n = t.x, i = t.y, o = t.height, a = t.width;
      return { x: n, y: i, height: o, width: a };
    }, r.prototype.getContentArea = function() {
      var t = this.getStyle() || this.theme.dataCell, n = (t == null ? void 0 : t.cell).padding;
      return vE(this.getCellArea(), n);
    }, r.prototype.getIconPosition = function(t) {
      return t === void 0 && (t = 1), this.getTextAndIconPosition(t).icon;
    }, r.prototype.drawTextShape = function() {
      var t = this.getFormattedFieldValue().formattedValue, n = this.getMaxTextWidth(), i = this.getTextStyle(), o = this.spreadsheet, a = o.options.placeholder, l = o.measureTextWidth, s = Da(this, a), f = ml({
        measureTextWidth: l,
        text: t,
        maxWidth: n,
        fontParam: i,
        placeholder: s
      });
      this.actualText = f, this.actualTextWidth = l(f, i);
      var h = this.getTextPosition();
      this.textShape = Sa(this, [this.textShape], h.x, h.y, f, i), this.textShapes.push(this.textShape);
    }, r.prototype.drawLinkFieldShape = function(t, n) {
      if (t) {
        var i = this.spreadsheet.options.style.device;
        if (!Xt(i)) {
          var o = this.getTextStyle(), a = this.getTextPosition(), l = a.x;
          o.textAlign === "center" ? l -= this.actualTextWidth / 2 : o.textAlign === "right" && (l -= this.actualTextWidth);
          var s = this.textShape.getBBox().maxY;
          this.linkFieldShape = Jt(this, {
            x1: l,
            y1: s + 1,
            x2: l + this.actualTextWidth,
            y2: s + 1
          }, { stroke: n, lineWidth: 1 });
        }
        this.textShape.attr({
          fill: n,
          cursor: "pointer",
          appendInfo: {
            isLinkFieldText: !0,
            cellData: this.meta
          }
        });
      }
    }, r.prototype.getLinkFieldStyle = function() {
      return this.getTextStyle().linkTextFill;
    }, r.prototype.drawLinkField = function(t) {
      var n = this.spreadsheet.options.interaction.linkFields, i = n === void 0 ? [] : n, o = this.getLinkFieldStyle(), a = FQ(i, t);
      this.drawLinkFieldShape(a, o);
    }, r.prototype.updateByState = function(t, n) {
      var i = this;
      this.spreadsheet.interaction.setInteractedCells(n);
      var o = ge(this.theme, "".concat(this.cellType, ".cell.interactionState.").concat(t));
      xe(o, function(a, l) {
        var s = Rt(ag(DD, function(f) {
          return Sr(f, l);
        }));
        s.forEach(function(f) {
          var h = i.stateShapes.has(f), d = h ? i.stateShapes.get(f) : i[f], v = le(d) ? d : [d];
          if (h && v.forEach(function(y) {
            y.set("visible", !0);
          }), f === "interactiveBorderShape" && l === "borderWidth" && wr(a)) {
            var g = i.getInteractiveBorderShapeStyle(a);
            xe(g, function(y, C) {
              Cn(v, C, y);
            });
          }
          Cn(v, tn[l], a);
        });
      });
    }, r.prototype.getInteractiveBorderShapeStyle = function(t) {
      var n = this.getCellArea(), i = n.x, o = n.y, a = n.height, l = n.width, s = this.theme.dataCell.cell, f = s.horizontalBorderWidth, h = s.verticalBorderWidth;
      return {
        x: i + h / 2 + t / 2,
        y: o + f / 2 + t / 2,
        width: l - h - t,
        height: a - f - t
      };
    }, r.prototype.hideInteractionShape = function() {
      this.stateShapes.forEach(function(t) {
        Cn(t, tn.backgroundOpacity, 0), Cn(t, tn.backgroundColor, "transparent"), Cn(t, tn.borderOpacity, 0), Cn(t, tn.borderWidth, 1), Cn(t, tn.borderColor, "transparent");
      });
    }, r.prototype.clearUnselectedState = function() {
      Cn(this.backgroundShape, tn.backgroundOpacity, 1), Cn(this.textShapes, tn.textOpacity, 1), Cn(this.linkFieldShape, tn.opacity, 1);
    }, r.prototype.getTextShape = function() {
      return this.textShape;
    }, r.prototype.getTextShapes = function() {
      return this.textShapes || [this.textShape];
    }, r.prototype.addTextShape = function(t) {
      t && this.textShapes.push(t);
    }, r.prototype.getConditionIconShape = function() {
      return this.conditionIconShape;
    }, r.prototype.getConditionIconShapes = function() {
      return this.conditionIconShapes || [this.conditionIconShape];
    }, r.prototype.addConditionIconShape = function(t) {
      t && this.conditionIconShapes.push(t);
    }, r.prototype.resetTextAndConditionIconShapes = function() {
      this.textShapes = [], this.conditionIconShapes = [];
    }, Object.defineProperty(r.prototype, "cellConditions", {
      get: function() {
        return this.conditions;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.drawConditionIconShapes = function() {
      var t, n = this.findFieldCondition((t = this.conditions) === null || t === void 0 ? void 0 : t.icon);
      if (n && n.mapping) {
        var i = this.mappingValue(n), o = this.getIconPosition(), a = this.theme.dataCell.icon.size;
        Q(i == null ? void 0 : i.icon) || (this.conditionIconShape = Tg(this, M(M({}, o), { name: i.icon, width: a, height: a, fill: i.fill })), this.addConditionIconShape(this.conditionIconShape));
      }
    }, r.prototype.getTextConditionFill = function(t) {
      var n, i, o = t.fill, a = this.findFieldCondition((n = this.conditions) === null || n === void 0 ? void 0 : n.text);
      return a != null && a.mapping && (o = ((i = this.mappingValue(a)) === null || i === void 0 ? void 0 : i.fill) || t.fill), o;
    }, r.prototype.getCrossBackgroundColor = function(t) {
      var n = this.getStyle().cell, i = n.crossBackgroundColor, o = n.backgroundColorOpacity;
      return i && t % 2 === 0 ? { backgroundColorOpacity: o, backgroundColor: i } : {
        backgroundColorOpacity: o,
        backgroundColor: this.getStyle().cell.backgroundColor
      };
    }, r;
  }(_i)
), LE = function(e, r) {
  return r ? r(e[Ae], e[Nr]) : e[Nr];
}, sa = function(e, r) {
  var t = r.getMeta().id;
  return e.some(function(n) {
    return tr(n.id, t);
  });
}, uu = function(e, r) {
  return "".concat(e).concat(Yv).concat(r);
}, NQ = function(e) {
  var r = e.interaction.getSelectedCellHighlight(), t = r.currentRow, n = r.currentCol, i = r.rowHeader, o = r.colHeader;
  return t || n || i || o;
}, Ag = function(e) {
  return e.type === J.DATA_CELL;
}, HQ = function(e, r) {
  xe(e, function(t) {
    Ag(t) && t.rowIndex === r.getMeta().rowIndex && r.updateByState(ae.SELECTED);
  });
}, zQ = function(e, r) {
  xe(e, function(t) {
    Ag(t) && t.colIndex === r.getMeta().colIndex && r.updateByState(ae.SELECTED);
  });
}, WQ = function(e, r) {
  xe(e, function(t) {
    Ag(t) && t.rowIndex === r.getMeta().rowIndex && t.colIndex === r.getMeta().colIndex && r.updateByState(ae.SELECTED);
  });
}, kQ = function(e, r, t) {
  var n = t.interaction.getSelectedCellHighlight(), i = n.rowHeader, o = n.colHeader, a = n.currentRow, l = n.currentCol, s = r.cellType === J.ROW_CELL, f = t.isTableMode() && t.options.showSeriesNumber && i && s;
  (a || f) && HQ(e, r), l && zQ(e, r), (i || o) && WQ(e, r);
}, No = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return Object.defineProperty(r.prototype, "cellType", {
      get: function() {
        return J.DATA_CELL;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(r.prototype, "valueRangeByField", {
      get: function() {
        return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField);
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.handleByStateName = function(t, n) {
      sa(t, this) && this.updateByState(n);
    }, r.prototype.handleSearchResult = function(t) {
      if (sa(t, this)) {
        var n = cr(t, function(i) {
          return i == null ? void 0 : i.isTarget;
        });
        n.id === this.getMeta().id ? this.updateByState(ae.HIGHLIGHT) : this.updateByState(ae.SEARCH_RESULT);
      }
    }, r.prototype.handleSelect = function(t) {
      var n, i = (n = t == null ? void 0 : t[0]) === null || n === void 0 ? void 0 : n.type;
      switch (i) {
        case J.COL_CELL:
          this.changeRowColSelectState("colIndex");
          break;
        case J.ROW_CELL:
          this.changeRowColSelectState("rowIndex");
          break;
        case J.DATA_CELL:
          NQ(this.spreadsheet) ? kQ(t, this, this.spreadsheet) : sa(t, this) ? this.updateByState(ae.SELECTED) : this.spreadsheet.options.interaction.selectedCellsSpotlight && this.updateByState(ae.UNSELECTED);
          break;
      }
    }, r.prototype.handleHover = function(t) {
      var n = xa(t);
      if (n.type !== J.DATA_CELL) {
        this.hideInteractionShape();
        return;
      }
      var i = this.spreadsheet.interaction.getHoverHighlight(), o = i.currentRow, a = i.currentCol;
      if (o || a) {
        var l = this.meta.colIndex, s = this.meta.rowIndex;
        a && l === (n == null ? void 0 : n.colIndex) || o && s === (n == null ? void 0 : n.rowIndex) ? this.updateByState(ae.HOVER) : this.hideInteractionShape();
      }
      var f = this.getMeta(), h = f.id, d = f.rowIndex, v = f.colIndex;
      tr(n.id, h) && tr(n.rowIndex, d) && tr(n.colIndex, v) && this.updateByState(ae.HOVER_FOCUS);
    }, r.prototype.update = function() {
      var t = this.spreadsheet.interaction.getCurrentStateName(), n = this.spreadsheet.interaction.getCells();
      if (t === ae.ALL_SELECTED) {
        this.updateByState(ae.SELECTED);
        return;
      }
      if (!(Q(n) || !t))
        switch (t) {
          case ae.SELECTED:
            this.handleSelect(n);
            break;
          case ae.HOVER_FOCUS:
          case ae.HOVER:
            this.handleHover(n);
            break;
          case ae.SEARCH_RESULT:
            this.handleSearchResult(n);
            break;
          default:
            this.handleByStateName(n, t);
            break;
        }
    }, r.prototype.setMeta = function(t) {
      e.prototype.setMeta.call(this, t), this.initCell();
    }, r.prototype.drawTextShape = function() {
      e.prototype.drawTextShape.call(this), this.drawLinkField(this.meta);
    }, r.prototype.initCell = function() {
      this.resetTextAndConditionIconShapes(), this.drawBackgroundShape(), this.drawInteractiveBgShape(), this.shouldHideRowSubtotalData() || (this.drawConditionIntervalShape(), this.drawTextShape(), this.drawConditionIconShapes()), this.drawInteractiveBorderShape(), this.meta.isFrozenCorner && this.drawBorderShape(), this.update();
    }, r.prototype.getDefaultTextFill = function(t) {
      var n = t.fill, i = this.getBackgroundColor(), o = i.backgroundColor, a = i.intelligentReverseTextColor;
      return KT(o) && (n === u2 || !aj(o, n)) && a && (n = Xv), n;
    }, r.prototype.getTextStyle = function() {
      var t = this.meta.isTotals, n = t ? this.theme.dataCell.bolderText : this.theme.dataCell.text, i = this.getTextConditionFill(M(M({}, n), { fill: this.getDefaultTextFill(n) }));
      return M(M({}, n), { fill: i });
    }, r.prototype.getIconStyle = function() {
      return fE(this.conditions, this.theme.dataCell.icon, this.meta.valueField);
    }, r.prototype.drawConditionIntervalShape = function() {
      this.conditionIntervalShape = bZ(this);
    }, r.prototype.shouldHideRowSubtotalData = function() {
      var t, n = this.meta, i = n.rowId, o = n.rowIndex, a = this.spreadsheet.store.get("drillDownIdPathMap");
      if (a != null && a.has(i))
        return !1;
      var l = ((t = this.spreadsheet.options.totals) !== null && t !== void 0 ? t : {}).row, s = l === void 0 ? {} : l, f = this.spreadsheet.facet.layoutResult.rowLeafNodes[o], h = !(f != null && f.isGrandTotals) && (f == null ? void 0 : f.isTotals);
      return this.spreadsheet.options.hierarchyType === "tree" && !s.showSubTotals && h;
    }, r.prototype.getFormattedFieldValue = function() {
      var t;
      if (this.shouldHideRowSubtotalData())
        return {
          value: null,
          // 这里使用默认的placeholder，而不是空字符串，是为了防止后续使用用户自定义的placeholder
          // 比如用户自定义 placeholder 为 0, 那行小计也会显示0，也很有迷惑性，显示 - 更为合理
          formattedValue: Ac
        };
      var n = this.meta, i = n.rowId, o = n.valueField, a = n.fieldValue, l = n.data, s = n.id, f = (t = this.spreadsheet.dataSet.displayFormattedValueMap) === null || t === void 0 ? void 0 : t.get(s), h = this.spreadsheet.dataSet.getFieldMeta(i), d = h ? i : o, v = this.spreadsheet.dataSet.getFieldFormatter(d), g = f ?? v(a, l, this.meta);
      return {
        value: a,
        formattedValue: g
      };
    }, r.prototype.getMaxTextWidth = function() {
      var t = this.getContentArea().width, n = this.getIconStyle();
      return pE(t, n);
    }, r.prototype.getTextPosition = function() {
      return this.getTextAndIconPosition().text;
    }, r.prototype.getBackgroundColor = function() {
      var t, n = this.getCrossBackgroundColor(this.meta.rowIndex), i = n.backgroundColor, o = n.backgroundColorOpacity;
      if (this.shouldHideRowSubtotalData())
        return { backgroundColor: i, backgroundColorOpacity: o };
      var a = this.findFieldCondition((t = this.conditions) === null || t === void 0 ? void 0 : t.background), l = !1;
      if (a && a.mapping) {
        var s = this.mappingValue(a);
        s && (i = s.fill, l = s.intelligentReverseTextColor, o = 1);
      }
      return {
        backgroundColor: i,
        backgroundColorOpacity: o,
        intelligentReverseTextColor: l
      };
    }, r.prototype.drawBackgroundShape = function() {
      var t = this.getBackgroundColor(), n = t.backgroundColor, i = t.backgroundColorOpacity;
      this.backgroundShape = on(this, M(M({}, this.getCellArea()), { fill: n, fillOpacity: i }));
    }, r.prototype.drawInteractiveBorderShape = function() {
      var t = 1, n = this.getCellArea(), i = n.x, o = n.y, a = n.height, l = n.width;
      this.stateShapes.set("interactiveBorderShape", on(this, {
        x: i + t,
        y: o + t,
        width: l - t * 2,
        height: a - t * 2
      }, {
        capture: !1,
        visible: !1
      }));
    }, r.prototype.drawInteractiveBgShape = function() {
      this.stateShapes.set("interactiveBgShape", on(this, M({}, this.getCellArea()), {
        visible: !1
      }));
    }, r.prototype.changeRowColSelectState = function(t) {
      var n = this.spreadsheet.interaction, i = ge(this.meta, t), o = n.getState(), a = o.nodes, l = a === void 0 ? [] : a, s = o.cells, f = s === void 0 ? [] : s, h = !1;
      if (this.spreadsheet.isTableMode() && l.length) {
        var d = l[0].hierarchy.getLeaves();
        h = d.some(function(v, g) {
          return l.some(function(y) {
            return y === v;
          }) ? g === i : !1;
        });
      } else
        h = j(j([], W(l), !1), W(f), !1).some(function(v) {
          return ge(v, t) === i;
        });
      h ? this.updateByState(ae.SELECTED) : this.spreadsheet.options.interaction.selectedCellsSpotlight ? this.updateByState(ae.UNSELECTED) : this.hideInteractionShape();
    }, r.prototype.drawBorderShape = function() {
      var t = this;
      [kt.BOTTOM, kt.RIGHT].forEach(function(n) {
        var i = ba(n, t.getCellArea(), t.getStyle().cell), o = i.position, a = i.style;
        Jt(t, o, a);
      });
    }, r.prototype.findFieldCondition = function(t) {
      return uE(t, this.meta.valueField);
    }, r.prototype.mappingValue = function(t) {
      var n = this.meta.fieldValue, i = this.spreadsheet.isTableMode() ? this.spreadsheet.dataSet.getCellData({
        query: { rowIndex: this.meta.rowIndex }
      }) : this.meta.data;
      return t == null ? void 0 : t.mapping(n, i);
    }, r.prototype.updateByState = function(t) {
      if (e.prototype.updateByState.call(this, t, this), t === ae.UNSELECTED) {
        var n = ge(this.theme, "".concat(this.cellType, ".cell.interactionState.").concat(t));
        n && this.toggleConditionIntervalShapeOpacity(n.opacity);
      }
    }, r.prototype.clearUnselectedState = function() {
      e.prototype.clearUnselectedState.call(this), this.toggleConditionIntervalShapeOpacity(1);
    }, r.prototype.toggleConditionIntervalShapeOpacity = function(t) {
      Cn(this.conditionIntervalShape, tn.backgroundOpacity, t), Cn(this.conditionIconShapes, tn.opacity, t);
    }, r.prototype.drawLeftBorder = function() {
      var t = ba(kt.LEFT, this.getCellArea(), this.getStyle().cell), n = t.position, i = t.style;
      Jt(this, n, i);
    }, r;
  }(nh)
), GQ = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t, n, i) {
      return e.call(this, i, t, n) || this;
    }
    return r.prototype.handleRestOptions = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      var i = W(t, 1), o = i[0];
      this.cells = o;
    }, Object.defineProperty(r.prototype, "cellType", {
      get: function() {
        return J.MERGED_CELL;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.update = function() {
    }, r.prototype.initCell = function() {
      this.resetTextAndConditionIconShapes(), this.conditions = this.spreadsheet.options.conditions, this.drawBackgroundShape(), this.drawTextShape();
    }, r.prototype.drawBackgroundShape = function() {
      var t = VQ(this.cells), n = this.theme.dataCell.cell;
      this.backgroundShape = gZ(this, {
        points: t,
        stroke: n.horizontalBorderColor,
        fill: n.backgroundColor,
        lineHeight: n.horizontalBorderWidth
      });
    }, r.prototype.drawTextShape = function() {
      Q(this.meta) || (rt(this.meta.fieldValue) ? $Z(this) : e.prototype.drawTextShape.call(this));
    }, r;
  }(No)
), UQ = function(e, r, t, n) {
  var i = [e, r], o = [e + t, r], a = [e + t, r + n], l = [e, r + n];
  return [
    [i, o],
    [o, a],
    [a, l],
    [l, i]
  ];
}, YQ = function(e) {
  var r = [];
  return xe(e, function(t) {
    var n = [t[1], t[0]];
    JSON.stringify(e).includes(JSON.stringify(n)) || r.push(t);
  }), r;
}, XQ = function(e, r) {
  return cr(r, function(t) {
    return tr(t[0], e[1]);
  });
}, VQ = function(e) {
  var r = [];
  e.forEach(function(a) {
    var l = a.getMeta(), s = l.x, f = l.y, h = l.width, d = l.height;
    r = r.concat(UQ(s, f, h, d));
  }), r = YQ(r);
  for (var t = [], n = r[0], i = n, o = []; !tr(n, o); )
    t = t.concat(i), o = XQ(i, r), i = o;
  return t;
}, qQ = function(e, r) {
  var t = [], n;
  return xe(e, function(i) {
    var o, a, l, s = (a = (o = r == null ? void 0 : r.facet) === null || o === void 0 ? void 0 : o.layoutResult) === null || a === void 0 ? void 0 : a.getCellMeta(i.rowIndex, i.colIndex);
    if (s) {
      var f = (l = r == null ? void 0 : r.facet) === null || l === void 0 ? void 0 : l.cfg.dataCell(s);
      n = i != null && i.showText ? s : n, t.push(f);
    }
  }), { cells: t, cellsMeta: n };
}, KQ = function(e, r) {
  var t = [], n = [], i;
  return xe(e, function(o) {
    var a = cr(r, function(l) {
      var s, f = (s = l == null ? void 0 : l.getMeta) === null || s === void 0 ? void 0 : s.call(l);
      if ((f == null ? void 0 : f.colIndex) === (o == null ? void 0 : o.colIndex) && (f == null ? void 0 : f.rowIndex) === (o == null ? void 0 : o.rowIndex))
        return l;
    });
    a ? (t.push(a), i = o != null && o.showText ? a == null ? void 0 : a.getMeta() : i) : n.push(o);
  }), { cells: t, invisibleCellInfo: n, cellsMeta: i };
}, AE = function(e, r, t) {
  var n;
  t === void 0 && (t = []);
  var i = KQ(t, e), o = i.cellsMeta, a = i.cells, l = i.invisibleCellInfo, s = o, f = a, h = (l == null ? void 0 : l.length) > 0 && l.length < t.length;
  if (h) {
    var d = qQ(l, r), v = d.cells, g = d.cellsMeta;
    s = s || g, f = a.concat(v);
  }
  return !Q(a) && !s && (s = (n = f[0]) === null || n === void 0 ? void 0 : n.getMeta()), {
    cells: f,
    viewMeta: s
  };
}, jQ = function(e) {
  var r = e.interaction, t = r.getActiveCells(), n = [];
  return xe(t, function(i, o) {
    var a = i.getMeta(), l = o === 0 ? { showText: !0 } : {};
    n.push(M(M({}, l), { colIndex: a == null ? void 0 : a.colIndex, rowIndex: a == null ? void 0 : a.rowIndex }));
  }), n;
}, RE = function(e, r, t) {
  var n;
  return !((n = e.options) === null || n === void 0) && n.mergedCell ? e.options.mergedCell(e, r, t) : new GQ(e, r, t);
}, ZQ = function(e, r, t) {
  var n, i = r || jQ(e);
  if ((i == null ? void 0 : i.length) <= 1) {
    console.error("[mergeCell]: The merged cells must be more than one!");
    return;
  }
  var o = e.interaction.getPanelGroupAllDataCells(), a = AE(o, e, i), l = a.cells, s = a.viewMeta;
  if (!Q(l)) {
    var f = ((n = e.options) === null || n === void 0 ? void 0 : n.mergedCellsInfo) || [];
    f.push(i), e.setOptions({
      mergedCellsInfo: f
    });
    var h = t ? void 0 : s;
    e.panelScrollGroup.addMergeCell(RE(e, l, h));
  }
}, QQ = function(e, r) {
  var t = We(e.cells, function(n) {
    return {
      colIndex: n.getMeta().colIndex,
      rowIndex: n.getMeta().rowIndex
    };
  });
  return Qi(r, function(n) {
    var i = n.map(function(o) {
      return o.showText ? {
        colIndex: o.colIndex,
        rowIndex: o.rowIndex
      } : o;
    });
    return !tr(i, t);
  });
}, JQ = function(e, r) {
  var t, n, i;
  if (!r || r.cellType !== J.MERGED_CELL) {
    console.error("[unmergeCell]: The ".concat(r, " is not a MergedCell"));
    return;
  }
  var o = QQ(r, (t = e.options) === null || t === void 0 ? void 0 : t.mergedCellsInfo);
  (o == null ? void 0 : o.length) !== ((i = (n = e.options) === null || n === void 0 ? void 0 : n.mergedCellsInfo) === null || i === void 0 ? void 0 : i.length) && (e.setOptions({
    mergedCellsInfo: o
  }), r.remove(!0));
}, eJ = function(e) {
  return We(e, function(r) {
    return {
      cells: r.cells,
      viewMeta: r.getMeta()
    };
  });
}, Ew = function(e, r) {
  return Nb(e, r, function(t, n) {
    return tr(t.viewMeta.id, n.viewMeta.id);
  });
}, tJ = function(e, r) {
  var t, n = (t = e.options) === null || t === void 0 ? void 0 : t.mergedCellsInfo;
  if (!Q(n)) {
    var i = e.interaction.getPanelGroupAllDataCells();
    if (!Q(i)) {
      var o = [];
      n.forEach(function(h) {
        var d = AE(i, e, h);
        d.cells.length > 0 && o.push(d);
      });
      var a = r.getChildren(), l = eJ(a), s = Ew(l, o), f = Ew(o, l);
      xe(s, function(h) {
        var d = cr(a, function(v) {
          return tr(v.getMeta().id, h.viewMeta.id);
        });
        d == null || d.remove(!0);
      }), xe(f, function(h) {
        var d = h.cells, v = h.viewMeta;
        r.add(RE(e, d, v));
      });
    }
  }
}, OE = function(e) {
  var r = e.includes(ur) ? "id" : "field";
  return r;
}, wp = function(e, r) {
  r === void 0 && (r = []);
  var t = e.getInitColumnLeafNodes();
  return Xn(r.map(function(n) {
    var i = OE(n);
    return t.find(function(o) {
      return o[i] === n;
    });
  }));
}, rJ = function(e, r) {
  if (r === void 0 && (r = []), Q(r))
    return {
      prev: null,
      next: null
    };
  var t = e.getInitColumnLeafNodes(), n = wp(e, r).map(function(s) {
    return s == null ? void 0 : s.colIndex;
  }), i = Math.max.apply(Math, j([], W(n), !1)), o = Math.min.apply(Math, j([], W(n), !1)), a = t.find(function(s) {
    return s.colIndex === i + 1;
  }), l = t.find(function(s) {
    return s.colIndex === o - 1;
  });
  return {
    prev: l || null,
    next: a || null
  };
}, nJ = function(e, r) {
  if (Q(r))
    return [];
  var t = Number.NEGATIVE_INFINITY;
  return e.reduce(function(n, i, o) {
    if (!r.includes(i))
      return n;
    if (o === t + 1) {
      var a = ut(n);
      a.push(i);
    } else {
      var l = [i];
      n.push(l);
    }
    return t = o, n;
  }, []);
}, Lw = function(e, r, t) {
  r === void 0 && (r = []), t === void 0 && (t = !1);
  var n = function(d, v) {
    d === void 0 && (d = []), v === void 0 && (v = []), e.setOptions({
      interaction: {
        hiddenColumnFields: d
      }
    }), e.interaction.reset(), e.store.set("hiddenColumnsDetail", v), e.render(!1, { reBuildHiddenColumnsDetail: !1 });
  };
  if (Q(r) && t) {
    n();
    return;
  }
  var i = e.store.get("hiddenColumnsDetail", []), o = e.options.interaction.hiddenColumnFields;
  if (!(tr(r, o) && !t)) {
    var a = Ni(j(j([], W(r), !1), W(o), !1)), l = wp(e, a).every(function(d, v, g) {
      var y = g[v + 1];
      return !y || Math.abs(d.colIndex - y.colIndex) === 1;
    }), s = rJ(e, l ? a : r), f = {
      hideColumnNodes: wp(e, r),
      displaySiblingNode: s
    }, h = j(j([], W(i), !1), [
      f
    ], !1);
    e.emit(I.LAYOUT_COLS_HIDDEN, f, h), n(a, h);
  }
}, iJ = function(e) {
  var r = e.dataCfg.fields.columns, t = r === void 0 ? [] : r;
  return e.isTableMode() ? t : e.getInitColumnLeafNodes().map(function(n) {
    var i = n.id;
    return i;
  });
}, Rg = function(e, r, t) {
  r === void 0 && (r = []), t === void 0 && (t = !1), Q(r) && t && Lw(e, r, !0);
  var n = iJ(e), i = Ba(n), o = nJ(i, r);
  o.forEach(function(a) {
    Lw(e, a, t);
  });
}, oJ = function(e, r) {
  var t = e.getColumnLeafNodes(), n = e.getInitColumnLeafNodes(), i = OE(r);
  return ge(ut(t), i) === r && ge(ut(n), i) !== r;
}, aJ = function(e) {
  return (e == null ? void 0 : e.next) || (e == null ? void 0 : e.prev);
}, lJ = function(e) {
  var r = aJ(e);
  return r == null ? void 0 : r.id;
}, xp = function(e, r) {
  return lJ(e) === r;
}, ks = function(e) {
  var r = e.type, t = e.id, n = e.theme, i = e.width, o = e.height, a = xc(e, ["type", "id", "theme", "width", "height"]), l = r === Sn.Horizontal ? n.size : null, s = r === Sn.Vertical ? n.size : null;
  return {
    fill: n.background,
    fillOpacity: n.backgroundOpacity,
    cursor: "".concat(r, "-resize"),
    width: l,
    height: s,
    appendInfo: M(M({}, a), { isResizeArea: !0, type: r, id: t, width: i, height: o, size: n.size })
  };
}, fu = function(e, r) {
  if (e.foregroundGroup) {
    var t = e.foregroundGroup.findById(r);
    return t || e.foregroundGroup.addGroup({
      id: r,
      zIndex: dD
    });
  }
}, Og = function(e, r, t) {
  var n = t ?? {}, i = n.scrollX, o = i === void 0 ? 0 : i, a = n.scrollY, l = a === void 0 ? 0 : a, s = !(e.x - o > r.x + r.width || e.x + e.width - o < r.x), f = !(e.y - l > r.y + r.height || e.y + e.height - l < r.y);
  return s && f;
}, sJ = function(e, r, t) {
  if (!e)
    return !1;
  var n = e.iconNames, i = e.displayCondition, o = e.belongsCell;
  return Q(n) || o !== t ? !1 : i ? n.some(function(a) {
    return i(r, a);
  }) : !0;
}, Ig = function(e, r, t) {
  var n = cr(e, function(o) {
    return sJ(o, r, t);
  });
  if (n) {
    var i = n.iconNames;
    return n.displayCondition && (i = i.filter(function(o) {
      return n.displayCondition(r, o);
    })), M(M({}, n), { iconNames: i });
  }
}, IE = function(e, r) {
  var t = e.label, n = e.field;
  return tr(n, Ae) ? {
    formattedValue: r || t,
    value: t
  } : {
    formattedValue: t,
    value: t
  };
}, Bl = function(e) {
  return Fs(e) === "ASC";
}, Mg = function(e) {
  return Fs(e) === "DESC";
}, Aw = function(e) {
  return !aT(Number(e));
}, Rw = function(e, r, t) {
  var n = Bl(r) ? 1 : -1, i = ["-", void 0];
  return e == null ? void 0 : e.sort(function(o, a) {
    var l = o, s = a;
    if (t) {
      if (l = o[t], s = a[t], Aw(l) && Aw(s))
        return (Number(l) - Number(s)) * n;
      if (l && (i != null && i.includes(l == null ? void 0 : l.toString())))
        return -n;
      if (Number(l) && (i != null && i.includes(s == null ? void 0 : s.toString())))
        return n;
    }
    return !Nt(l) && !Nt(s) ? l.toString().localeCompare(s.toString(), "zh") * n : l ? n : -n;
  });
}, ME = function(e, r, t) {
  return t ? HZ(r, Ni(e)) : j([], W(new Set(j(j([], W(e), !1), W(r), !1))), !1);
}, BE = function(e) {
  var r = e.sortByValues, t = e.originValues, n = t.filter(function(l) {
    return r.find(function(s) {
      return Wb(l, s);
    });
  }), i = n.map(function(l) {
    var s = l.split(ur);
    if (s.length > 1) {
      var f = s.slice(0, s.length - 1).join(ur);
      return [f, s[s.length - 1]];
    }
    return s;
  }), o = Array.from(new Set(i.map(function(l) {
    return l[0];
  })));
  i.sort(function(l, s) {
    var f = l.slice(0, l.length - 1), h = s.slice(0, s.length - 1);
    if (f.join() !== h.join()) {
      var d = o.indexOf(f[0]), v = o.indexOf(h[0]);
      return d - v;
    }
    var g = r.indexOf(l[l.length - 1]), y = r.indexOf(s[s.length - 1]);
    return g - y;
  });
  var a = i.map(function(l) {
    return l.join(ur);
  });
  return FZ(t, a);
}, uJ = function(e) {
  var r = e.originValues, t = e.measureValues, n = e.sortParam, i = e.dataSet, o = n.sortFunc, a = n.sortFieldId, l = n.sortMethod, s = o(M({ data: t }, n));
  return s != null && s.length ? (i.fields.rows.indexOf(a) > 0 || i.fields.columns.indexOf(a) > 0) && !Sr(s[0], ur) ? BE({
    sortByValues: s,
    originValues: r
  }) : ME(s, r, Bl(l)) : r;
}, fJ = function(e) {
  var r = e.sortParam, t = e.measureValues, n = e.originValues, i = e.dataSet, o = r.sortByMeasure, a = r.query, l = r.sortFieldId, s = r.sortMethod, f = i.fields, h = f.rows, d = f.columns, v = h.includes(l), g;
  if (o) {
    var y = Rw(t, s, o === gi ? a[Ae] : o);
    g = WZ(l, v ? h : Ba(d), y);
  } else
    g = We(Rw(t, s));
  return ME(g, n, Bl(s));
}, cJ = function(e) {
  var r = e.sortParam, t = e.originValues, n = e.measureValues, i = e.dataSet, o = r.sortFunc, a = r.sortMethod, l = r.sortBy, s = t, f = {
    originValues: t,
    measureValues: n,
    sortParam: r,
    dataSet: i
  };
  return o ? s = uJ(f) : l ? s = BE({ sortByValues: l, originValues: t }) : (Bl(a) || Mg(a)) && (s = fJ(f)), s;
}, hJ = function(e, r, t) {
  var n, i = {}, o = Sr(e, ur);
  if (o)
    for (var a = MT(e, ur), l = !((n = r == null ? void 0 : r.rows) === null || n === void 0) && n.includes(t) ? r.rows : Ba(r.columns), s = 0; s <= Vc(l, t); s++)
      i[l[s]] = a[s];
  else
    i[t] = e;
  return i;
}, Ow = function(e) {
  return e.filter(function(r) {
    return r !== Ae;
  });
}, dJ = function(e) {
  var r = e.dataSet, t = e.sortParam, n = e.originValues, i = r.fields, o = t.sortByMeasure, a = t.query, l = t.sortFieldId;
  if (o !== gi) {
    var s = r.getMultiData(a, {
      queryType: wn.DetailOnly
    });
    return s;
  }
  var f = r.getMultiData(a, {
    queryType: wn.All
  }), h = Ba(i.columns), d = Sr(i.rows, l), v = Ow(d ? i.rows : h), g = Ow(d ? h : i.rows), y = v[v.indexOf(l) + 1], C = Rt(a), _ = g.filter(function(x) {
    return !C.includes(x);
  }), w = f.filter(function(x) {
    var S = new Set(Object.keys(x[h0]));
    if (!S.has(l) || S.has(y))
      return !1;
    var T = _.every(function(R) {
      return !S.has(R);
    });
    return T;
  });
  return Q(w) ? Xn(We(n, function(x) {
    var S = hJ(x, i, l);
    return r.getTotalValue(M(M({}, a), S));
  })) : w;
}, vJ = function(e) {
  var r = e.dataSet, t = e.sortParam, n = e.originValues, i = e.isSortByMeasure, o;
  return i ? o = dJ(e) : o = n, cJ({
    sortParam: t,
    originValues: n,
    measureValues: o,
    dataSet: r
  });
}, DE = function(e, r) {
  if (e != null && e.sortMethod) {
    if (Bl(e == null ? void 0 : e.sortMethod))
      return "groupAsc";
    if (Mg(e == null ? void 0 : e.sortMethod))
      return "groupDesc";
  }
  if (r)
    return "SortDown";
}, Iw = function(e) {
  var r, t, n = e.pivotMeta, i = e.dimensions, o = e.sortedDimensionValues, a = e.sortFieldId, l = {
    children: n
  }, s = [l];
  try {
    for (var f = br(i), h = f.next(); !h.done; h = f.next()) {
      var d = h.value;
      if (d !== a)
        s = ru(s, function(v) {
          return j([], W(v.children.values()), !1);
        });
      else {
        s.forEach(function(v) {
          var g = j([], W(v.children.values()), !1), y = OT(g, function(C) {
            return Vc(o, C.id);
          }).map(function(C) {
            return [C.value, C];
          });
          v.children = new Map(y);
        });
        break;
      }
    }
  } catch (v) {
    r = { error: v };
  } finally {
    try {
      h && !h.done && (t = f.return) && t.call(f);
    } finally {
      if (r) throw r.error;
    }
  }
  return l.children;
}, Bg = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.handleRestOptions = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      var i = W(t, 1), o = i[0];
      this.headerConfig = M({}, o);
      var a = this.meta, l = a.value, s = a.query, f = this.spreadsheet.dataCfg.sortParams, h = this.isSortCell(), d = cr(j([], W(f), !1).reverse(), function(g) {
        return h && (g == null ? void 0 : g.sortByMeasure) === l && tr(ge(g, "query"), s);
      }), v = DE(d, h);
      this.headerConfig.sortParam = M(M(M({}, this.headerConfig.sortParam), d || { query: s }), { type: v });
    }, r.prototype.initCell = function() {
      this.resetTextAndConditionIconShapes(), this.actionIcons = [], this.hasDefaultHiddenIcon = !1;
    }, r.prototype.getTreeIcon = function() {
      return this.treeIcon;
    }, r.prototype.getInteractiveBorderShapeStyle = function(t) {
      var n = this.getCellArea(), i = n.x, o = n.y, a = n.height, l = n.width;
      return {
        x: i + t,
        y: o + t,
        width: l - t * 2,
        height: a - t * 2
      };
    }, r.prototype.getFormattedFieldValue = function() {
      var t = this.meta, n = t.label, i = t.isTotalRoot, o = t.isGrandTotals, a = this.spreadsheet.dataSet.getFieldFormatter(this.meta.field), l = !0;
      this.spreadsheet.isTableMode() ? l = !1 : this.spreadsheet.isHierarchyTreeType() ? l = !(o && i) : l = !i;
      var s = l && a ? a(n, void 0, this.meta) : n;
      return {
        formattedValue: s,
        value: n
      };
    }, r.prototype.getActionIconCfg = function() {
      return Ig(this.spreadsheet.options.headerActionIcons, this.meta, this.cellType);
    }, r.prototype.showSortIcon = function() {
      var t = this.spreadsheet, n = t.options, i = t.dataCfg, o = Q(i.fields.values);
      if (n.showDefaultHeaderActionIcon && !o) {
        var a = this.headerConfig.sortParam, l = this.meta.query;
        return l && tr(a == null ? void 0 : a.query, l) && (a == null ? void 0 : a.type) && (a == null ? void 0 : a.type) !== "none";
      }
      return !1;
    }, r.prototype.getActionIconsCount = function() {
      if (this.showSortIcon())
        return 1;
      var t = this.getActionIconCfg();
      if (t) {
        var n = t.iconNames;
        return n.length;
      }
      return 0;
    }, r.prototype.getActionIconsWidth = function() {
      var t = this.getStyle().icon, n = t.size, i = t.margin;
      return (n + i.left) * this.getActionIconsCount();
    }, r.prototype.drawSortIcons = function() {
      var t = this;
      if (this.showSortIcon()) {
        var n = this.getStyle(), i = n.icon, o = n.text, a = this.getTextConditionFill(o), l = this.headerConfig.sortParam, s = this.getIconPosition(), f = new Ps(M(M({ name: ge(l, "type", "none") }, s), { width: i.size, height: i.size, fill: a }));
        f.on("click", function(h) {
          t.spreadsheet.emit(I.GLOBAL_ACTION_ICON_CLICK, h), t.spreadsheet.handleGroupSort(h, t.meta);
        }), this.add(f), this.actionIcons.push(f);
      }
    }, r.prototype.hasDefaultHideActionIcon = function() {
      return this.hasDefaultHiddenIcon;
    }, r.prototype.addActionIcon = function(t) {
      var n = this, i = t.x, o = t.y, a = t.iconName, l = t.defaultHide, s = t.action, f = t.onClick, h = t.onHover, d = this.getStyle(), v = d.icon, g = d.text, y = this.getTextConditionFill(g), C = (v == null ? void 0 : v.fill) || y, _ = new Ps({
        name: a,
        x: i,
        y: o,
        width: v == null ? void 0 : v.size,
        height: v == null ? void 0 : v.size,
        fill: C
      });
      _.set("visible", !l), _.on("mouseover", function(w) {
        n.spreadsheet.emit(I.GLOBAL_ACTION_ICON_HOVER, w), h == null || h({
          hovering: !0,
          iconName: a,
          meta: n.meta,
          event: w
        });
      }), _.on("mouseleave", function(w) {
        n.spreadsheet.emit(I.GLOBAL_ACTION_ICON_HOVER_OFF, w), h == null || h({
          hovering: !1,
          iconName: a,
          meta: n.meta,
          event: w
        });
      }), _.on("click", function(w) {
        var x;
        n.spreadsheet.emit(I.GLOBAL_ACTION_ICON_CLICK, w), (x = f || s) === null || x === void 0 || x({
          iconName: a,
          meta: n.meta,
          event: w
        });
      }), this.actionIcons.push(_), this.add(_);
    }, r.prototype.drawActionIcons = function() {
      var t = this;
      if (this.showSortIcon()) {
        this.drawSortIcons();
        return;
      }
      var n = this.getActionIconCfg();
      if (n) {
        var i = n.iconNames, o = n.action, a = n.onClick, l = n.onHover, s = n.defaultHide, f = this.getIconPosition(i.length), h = this.getStyle().icon, d = h.size, v = h.margin;
        xe(i, function(g, y) {
          var C = f.x + y * d + y * v.left, _ = f.y, w = typeof s == "function" ? s(t.meta, g) : s;
          w && (t.hasDefaultHiddenIcon = !0), t.addActionIcon({
            iconName: g,
            x: C,
            y: _,
            defaultHide: w,
            action: o,
            onClick: a,
            onHover: l
          });
        });
      }
    }, r.prototype.drawBackgroundShape = function() {
      var t = this.getBackgroundColor(), n = t.backgroundColor, i = t.backgroundColorOpacity;
      this.backgroundShape = on(this, M(M({}, this.getCellArea()), { fill: n, fillOpacity: i }));
    }, r.prototype.isSortCell = function() {
      var t, n, i, o = (n = (t = this.spreadsheet) === null || t === void 0 ? void 0 : t.isValueInCols) === null || n === void 0 ? void 0 : n.call(t), a = this.meta.level === ((i = this.meta.hierarchy) === null || i === void 0 ? void 0 : i.maxLevel);
      return o ? a && this.cellType === J.COL_CELL : a && this.cellType === J.ROW_CELL;
    }, r.prototype.handleByStateName = function(t, n) {
      sa(t, this) && this.updateByState(n);
    }, r.prototype.handleSearchResult = function(t) {
      if (sa(t, this)) {
        var n = cr(t, function(i) {
          return i == null ? void 0 : i.isTarget;
        });
        n.id === this.getMeta().id ? this.updateByState(ae.HIGHLIGHT) : this.updateByState(ae.SEARCH_RESULT);
      }
    }, r.prototype.handleHover = function(t) {
      var n;
      sa(t, this) && (this.updateByState(ae.HOVER), this.hasDefaultHideActionIcon() && this.toggleActionIcon((n = t == null ? void 0 : t[0]) === null || n === void 0 ? void 0 : n.id));
    }, r.prototype.handleSelect = function(t, n) {
      sa(t, this) && this.updateByState(ae.SELECTED);
      var i = We(n, "id");
      Sr(i, this.meta.id) && this.updateByState(ae.SELECTED);
    }, r.prototype.getTextStyle = function() {
      var t = this.getStyle(), n = t.text, i = t.bolderText, o = t.measureText, a;
      this.isMeasureField() ? a = o || n : this.isBolderText() ? a = i : a = n;
      var l = this.getTextConditionFill(a);
      return M(M({}, a), { fill: l });
    }, r.prototype.getBackgroundColor = function() {
      var t, n = ((t = this.getStyle()) === null || t === void 0 ? void 0 : t.cell) || {}, i = n.backgroundColor, o = n.backgroundColorOpacity;
      return this.getBackgroundColorByCondition(i, o);
    }, r.prototype.getBackgroundColorByCondition = function(t, n) {
      var i, o = t, a = this.findFieldCondition((i = this.conditions) === null || i === void 0 ? void 0 : i.background);
      if (a && a.mapping) {
        var l = this.mappingValue(a);
        l && (o = l.fill);
      }
      return { backgroundColor: o, backgroundColorOpacity: n };
    }, r.prototype.toggleActionIcon = function(t) {
      if (this.getMeta().id === t) {
        var n = [];
        xe(this.actionIcons, function(i) {
          i.get("visible") || (i.set("visible", !0), n.push(i));
        }), this.spreadsheet.store.set("visibleActionIcons", n);
      }
    }, r.prototype.update = function() {
      var t = this.spreadsheet.interaction, n = t == null ? void 0 : t.getState(), i = t == null ? void 0 : t.getCells([
        J.CORNER_CELL,
        J.COL_CELL,
        J.ROW_CELL
      ]);
      if (xa(i))
        switch (n == null ? void 0 : n.stateName) {
          case ae.SELECTED:
          case ae.BRUSH_SELECTED:
            this.handleSelect(i, n == null ? void 0 : n.nodes);
            break;
          case ae.HOVER_FOCUS:
          case ae.HOVER:
            this.handleHover(i);
            break;
          case ae.SEARCH_RESULT:
            this.handleSearchResult(i);
            break;
          default:
            this.handleByStateName(i, n == null ? void 0 : n.stateName);
            break;
        }
    }, r.prototype.updateByState = function(t) {
      e.prototype.updateByState.call(this, t, this);
    }, r.prototype.hideInteractionShape = function() {
      e.prototype.hideInteractionShape.call(this);
    }, r.prototype.isMeasureField = function() {
      return [Ae, fD].includes(this.meta.field);
    }, r.prototype.mappingValue = function(t) {
      var n = this.getMeta().label;
      return t == null ? void 0 : t.mapping(n, this.meta);
    }, r.prototype.findFieldCondition = function(t) {
      var n = this;
      return Uc(t, function(i) {
        return i.field instanceof RegExp ? i.field.test(n.meta.field) : i.field === n.meta.field;
      });
    }, r;
  }(nh)
), ih = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return Object.defineProperty(r.prototype, "cellType", {
      get: function() {
        return J.COL_CELL;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.initCell = function() {
      e.prototype.initCell.call(this), this.drawBackgroundShape(), this.drawInteractiveBgShape(), this.drawInteractiveBorderShape(), this.drawTextShape(), this.drawConditionIconShapes(), this.drawActionIcons(), this.drawBorders(), this.drawResizeArea(), this.addExpandColumnIconShapes(), this.update();
    }, r.prototype.drawInteractiveBgShape = function() {
      this.stateShapes.set("interactiveBgShape", on(this, M({}, this.getCellArea()), {
        visible: !1
      }));
    }, r.prototype.drawInteractiveBorderShape = function() {
      var t = 2;
      this.stateShapes.set("interactiveBorderShape", on(this, this.getInteractiveBorderShapeStyle(t), {
        visible: !1
      }));
    }, r.prototype.getMaxTextWidth = function() {
      var t = this.getContentArea().width;
      return t - this.getActionIconsWidth();
    }, r.prototype.getIconPosition = function() {
      if (this.meta.isLeaf)
        return e.prototype.getIconPosition.call(this, this.getActionIconsCount());
      var t = this.getIconStyle(), n = t.margin.left, i = this.getTextStyle(), o = this.textPosition, a = o == null ? void 0 : o.x, l = (o == null ? void 0 : o.y) - t.size / 2;
      return i.textAlign === "left" ? {
        x: a + this.actualTextWidth + n,
        y: l
      } : i.textAlign === "right" ? {
        x: a + n,
        y: l
      } : {
        x: a + this.actualTextWidth / 2 + n,
        y: l
      };
    }, r.prototype.isBolderText = function() {
      var t = this.meta, n = t.isLeaf, i = t.isTotals;
      return !!(i || !n);
    }, r.prototype.getTextPosition = function() {
      var t, n = this.meta.isLeaf, i = this.headerConfig, o = i.width, a = i.scrollContainsRowHeader, l = i.cornerWidth, s = i.scrollX, f = this.getTextStyle(), h = this.getContentArea(), d = this.getIconStyle();
      if (n)
        return su(h, f, this.actualTextWidth, d, this.getActionIconsCount()).text;
      var v = {
        start: s - (a ? l : 0),
        width: o + (a ? l : 0)
      }, g = this.getTextStyle().textAlign, y = RZ(v, g, (t = this.getStyle().cell) === null || t === void 0 ? void 0 : t.padding), C = this.getActionIconsWidth(), _ = this.actualTextWidth + C, w = AZ(y, { start: h.x, width: h.width }, _), x = OZ(w, this.actualTextWidth, C, g), S = h.y + h.height / 2;
      return this.textPosition = { x, y: S }, this.textPosition;
    }, r.prototype.getActionIconsWidth = function() {
      var t = this.getStyle().icon, n = t.size, i = t.margin, o = this.getActionIconsCount();
      return (n + i.left) * o + (o > 0 ? i.right : 0);
    }, r.prototype.getColResizeAreaKey = function() {
      return this.meta.key;
    }, r.prototype.getColResizeArea = function() {
      return fu(this.spreadsheet, o2);
    }, r.prototype.getHorizontalResizeAreaName = function() {
      return "".concat(l2).concat(this.meta.key);
    }, r.prototype.drawHorizontalResizeArea = function() {
      var t, n, i = ((n = (t = this.spreadsheet.options.style) === null || t === void 0 ? void 0 : t.colCfg) === null || n === void 0 ? void 0 : n.height) === 0;
      if (!(i || !this.shouldDrawResizeAreaByType("colCellVertical", this))) {
        var o = this.headerConfig, a = o.cornerWidth, l = o.viewportWidth, s = this.meta, f = s.y, h = s.height, d = this.getResizeAreaStyle(), v = this.getColResizeArea(), g = this.getHorizontalResizeAreaName(), y = v.find(function(_) {
          return _.attrs.name === g;
        });
        if (!y) {
          var C = a + l;
          v.addShape("rect", {
            attrs: M(M({}, ks({
              theme: d,
              type: Sn.Vertical,
              id: this.getColResizeAreaKey(),
              effect: _r.Field,
              offsetX: 0,
              offsetY: f,
              width: C,
              height: h,
              meta: this.meta
            })), { name: g, x: 0, y: f + h - d.size / 2, width: C })
          });
        }
      }
    }, r.prototype.shouldAddVerticalResizeArea = function() {
      var t = this.meta, n = t.x, i = t.y, o = t.width, a = t.height, l = this.headerConfig, s = l.scrollX, f = l.scrollY, h = l.scrollContainsRowHeader, d = l.cornerWidth, v = l.height, g = l.width, y = this.getResizeAreaStyle(), C = {
        x: n + o - y.size / 2,
        y: i,
        width: y.size,
        height: a
      }, _ = {
        x: h ? -d : 0,
        y: 0,
        width: h ? d + g : g,
        height: v
      };
      return Og(C, _, {
        scrollX: s,
        scrollY: f
      });
    }, r.prototype.getVerticalResizeAreaOffset = function() {
      var t = this.meta, n = t.x, i = t.y, o = this.headerConfig, a = o.scrollX, l = o.position;
      return {
        x: l.x + n - a,
        y: l.y + i
      };
    }, r.prototype.drawVerticalResizeArea = function() {
      if (!(!this.meta.isLeaf || !this.shouldDrawResizeAreaByType("colCellHorizontal", this))) {
        var t = this.meta, n = t.label, i = t.width, o = t.height, a = this.getResizeAreaStyle(), l = this.getColResizeArea();
        if (this.shouldAddVerticalResizeArea()) {
          var s = this.getVerticalResizeAreaOffset(), f = s.x, h = s.y;
          l.addShape("rect", {
            attrs: M(M({}, ks({
              theme: a,
              type: Sn.Horizontal,
              effect: _r.Cell,
              id: n,
              offsetX: f,
              offsetY: h,
              width: i,
              height: o,
              meta: this.meta
            })), { x: f + i - a.size / 2, y: h, height: o })
          });
        }
      }
    }, r.prototype.drawResizeArea = function() {
      this.drawHorizontalResizeArea(), this.drawVerticalResizeArea();
    }, r.prototype.drawHorizontalBorder = function() {
      var t = ba(kt.TOP, this.meta, this.theme.colCell.cell), n = t.position, i = t.style;
      Jt(this, n, i);
    }, r.prototype.drawVerticalBorder = function(t) {
      var n = ba(t, this.meta, this.theme.colCell.cell), i = n.position, o = n.style;
      Jt(this, i, o);
    }, r.prototype.drawBorders = function() {
      var t = this.spreadsheet, n = t.options, i = t.isTableMode;
      this.meta.colIndex === 0 && i() && !n.showSeriesNumber && this.drawVerticalBorder(kt.LEFT), this.drawHorizontalBorder(), this.drawVerticalBorder(kt.RIGHT);
    }, r.prototype.hasHiddenColumnCell = function() {
      var t = this, n = this.spreadsheet.options, i = n.interaction.hiddenColumnFields, o = i === void 0 ? [] : i, a = n.tooltip.operation, l = this.spreadsheet.store.get("hiddenColumnsDetail", []);
      return Q(l) || Q(o) || !a.hiddenColumns ? !1 : !!l.find(function(s) {
        return xp(s == null ? void 0 : s.displaySiblingNode, t.meta.id);
      });
    }, r.prototype.getExpandIconTheme = function() {
      var t = this.getStyle();
      return t.icon;
    }, r.prototype.addExpandColumnSplitLine = function() {
      var t = this.meta, n = t.x, i = t.y, o = t.width, a = t.height, l = this.theme.splitLine, s = l.horizontalBorderColor, f = l.horizontalBorderWidth, h = l.horizontalBorderColorOpacity, d = l.borderDash, v = this.isLastColumn() ? n + o - f : n;
      Jt(this, {
        x1: v,
        y1: i,
        x2: v,
        y2: i + a
      }, {
        stroke: s,
        lineWidth: f,
        strokeOpacity: h,
        lineDash: d
      });
    }, r.prototype.addExpandColumnIconShapes = function() {
      this.hasHiddenColumnCell() && (this.addExpandColumnSplitLine(), this.addExpandColumnIcons());
    }, r.prototype.addExpandColumnIcons = function() {
      var t = this.isLastColumn();
      this.addExpandColumnIcon(t), this.isAllDisplaySiblingNodeHidden() && t && this.addExpandColumnIcon(!1);
    }, r.prototype.addExpandColumnIcon = function(t) {
      var n = this, i = this.getExpandColumnIconConfig(t), o = Tg(this, M(M({}, i), { name: "ExpandColIcon", cursor: "pointer" }));
      o.on("click", function() {
        n.spreadsheet.emit(I.LAYOUT_COLS_EXPANDED, n.meta);
      });
    }, r.prototype.getExpandColumnIconConfig = function(t) {
      var n = this.getExpandIconTheme().size, i = this.getCellArea(), o = i.x, a = i.y, l = i.width, s = i.height, f = o - n, h = t ? f + l : f, d = a + s / 2 - n / 2;
      return {
        x: h,
        y: d,
        width: n * 2,
        height: n
      };
    }, r.prototype.isLastColumn = function() {
      return oJ(this.spreadsheet, this.meta.id);
    }, r.prototype.isAllDisplaySiblingNodeHidden = function() {
      var t = this.meta.id, n = this.spreadsheet.store.get("hiddenColumnsDetail", []), i = n.find(function(a) {
        var l, s = a.displaySiblingNode;
        return ((l = s == null ? void 0 : s.next) === null || l === void 0 ? void 0 : l.id) === t;
      }), o = n.find(function(a) {
        var l, s = a.displaySiblingNode;
        return ((l = s == null ? void 0 : s.prev) === null || l === void 0 ? void 0 : l.id) === t;
      });
      return o && i;
    }, r;
  }(Bg)
), pJ = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.isBolderText = function() {
      var t = this.meta.cornerType;
      return t === xn.Col;
    }, Object.defineProperty(r.prototype, "cellType", {
      get: function() {
        return J.CORNER_CELL;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.initCell = function() {
      e.prototype.initCell.call(this), this.resetTextAndConditionIconShapes(), this.drawBackgroundShape(), this.drawTreeIcon(), this.drawCellText(), this.drawConditionIconShapes(), this.drawActionIcons(), this.drawBorderShape(), this.drawResizeArea(), this.update();
    }, r.prototype.drawCellText = function() {
      this.drawTextShape();
    }, r.prototype.drawTextShape = function() {
      var t = this.getContentArea().x, n = this.getCellArea(), i = n.y, o = n.height, a = this.getTextStyle(), l = this.getCornerText(), s = this.getMaxTextWidth(), f = Da(this.meta, this.spreadsheet.options.placeholder), h = this.spreadsheet.measureTextWidth, d = ml({
        measureTextWidth: h,
        text: l,
        maxWidth: s,
        fontParam: a,
        placeholder: f
      });
      this.actualText = d;
      var v = d.indexOf(ol), g = d, y = "";
      if (v !== -1 && this.spreadsheet.isHierarchyTreeType()) {
        var C = v + (Aj() ? 1 : 0);
        g = l.substr(0, C), y = l.slice(C), y = ml({
          measureTextWidth: h,
          text: y,
          maxWidth: s,
          fontParam: a
        });
      }
      var _ = LZ({
        x: t + this.getTreeIconWidth(),
        y: i,
        width: s,
        height: o
      }, a).x, w = i + (Q(y) ? o / 2 : o / 4);
      this.addTextShape(Sa(this, [this.textShapes[0]], _, w, g, a)), Q(y) || this.addTextShape(Sa(this, [this.textShapes[1]], _, i + o * 0.75, y, a)), this.actualTextWidth = Gi([
        h(g, a),
        h(y, a)
      ]);
    }, r.prototype.drawTreeIcon = function() {
      var t = this;
      if (!(!this.showTreeIcon() || this.meta.cornerType === xn.Col)) {
        var n = this.headerConfig.hierarchyCollapse, i = this.getStyle().icon.size, o = this.getTextStyle(), a = o.textBaseline, l = o.fill, s = this.getContentArea();
        this.treeIcon = hE(this, {
          x: s.x,
          y: uc(s, a, i),
          width: i,
          height: i
        }, l, n, function() {
          t.headerConfig.spreadsheet.store.set("scrollY", 0), t.headerConfig.spreadsheet.emit(I.LAYOUT_TREE_ROWS_COLLAPSE_ALL, n);
        });
      }
    }, r.prototype.drawBorderShape = function() {
      var t = this;
      [kt.TOP, kt.LEFT].forEach(function(n) {
        var i = ba(n, t.getCellArea(), t.getStyle().cell), o = i.position, a = i.style;
        Jt(t, o, a);
      });
    }, r.prototype.isLastRowCornerCell = function() {
      var t = this.meta, n = t.cornerType, i = t.field, o = this.headerConfig.rows;
      return n === xn.Row && (this.spreadsheet.isHierarchyTreeType() || ut(o) === i);
    }, r.prototype.getResizeAreaEffect = function() {
      var t = this.meta.cornerType;
      return t === xn.Series ? _r.Series : this.isLastRowCornerCell() && this.spreadsheet.isHierarchyTreeType() ? _r.Tree : _r.Field;
    }, r.prototype.drawResizeArea = function() {
      if (this.shouldDrawResizeAreaByType("cornerCellHorizontal", this)) {
        var t = this.getResizeAreaStyle(), n = fu(this.spreadsheet, Uv), i = this.headerConfig, o = i.position, a = i.scrollX, l = i.scrollY, s = i.width, f = i.height, h = this.meta, d = h.x, v = h.y, g = h.width, y = h.height, C = h.field, _ = h.cornerType, w = {
          x: d + g - t.size / 2,
          y: v,
          width: t.size,
          height: y
        }, x = {
          x: 0,
          y: 0,
          width: s,
          height: f
        };
        if (!(_ === xn.Col || !Og(w, x, {
          scrollX: a,
          scrollY: l
        }))) {
          var S = o.x + d - a, T = o.y + (this.isLastRowCornerCell() ? 0 : v);
          n.addShape("rect", {
            attrs: M(M({}, ks({
              theme: t,
              id: C,
              type: Sn.Horizontal,
              effect: this.getResizeAreaEffect(),
              offsetX: S,
              offsetY: T,
              width: g,
              height: y,
              meta: this.meta
            })), { x: S + g - t.size / 2, y: T, height: this.isLastRowCornerCell() ? f : y })
          });
        }
      }
    }, r.prototype.showTreeIcon = function() {
      var t;
      return this.spreadsheet.isHierarchyTreeType() && ((t = this.meta) === null || t === void 0 ? void 0 : t.x) === 0;
    }, r.prototype.getIconPosition = function() {
      var t, n, i = (n = (t = this.textShapes) === null || t === void 0 ? void 0 : t[0]) === null || n === void 0 ? void 0 : n.cfg.attrs, o = this.getTextStyle(), a = o.textBaseline, l = o.textAlign, s = this.getStyle().icon, f = s.size, h = s.margin, d = (i == null ? void 0 : i.x) + Rb([
        [ap("center"), ll(this.actualTextWidth / 2)],
        [ap("right"), ll(0)],
        [BT, ll(this.actualTextWidth)]
      ])(l) + h.left, v = uc(this.getContentArea(), a, f);
      return { x: d, y: v };
    }, r.prototype.getTreeIconWidth = function() {
      var t = this.getStyle().icon, n = t.size, i = t.margin;
      return this.showTreeIcon() ? n + i.right : 0;
    }, r.prototype.getTextStyle = function() {
      var t = this.getStyle(), n = t.text, i = t.bolderText, o = this.isBolderText() ? n : i, a = this.getTextConditionFill(o);
      return M(M({}, o), { fill: a });
    }, r.prototype.getMaxTextWidth = function() {
      var t = this.getContentArea().width;
      return t - this.getTreeIconWidth() - this.getActionIconsWidth();
    }, r.prototype.getTextPosition = function() {
      return {
        x: 0,
        y: 0
      };
    }, r.prototype.getFormattedFieldValue = function() {
      return IE(this.meta, this.spreadsheet.dataSet.getFieldName(this.meta.label));
    }, r.prototype.getCornerText = function() {
      var t = this.getFormattedFieldValue().formattedValue;
      return t;
    }, r;
  }(Bg)
), gJ = function(e, r, t, n) {
  var i, o, a = ge(n, "size"), l = ge(n, "margin"), s = 0;
  return e.options.showDefaultHeaderActionIcon ? s = 1 : s = (o = (i = Ig(e.options.headerActionIcons, r, t)) === null || i === void 0 ? void 0 : i.iconNames.length) !== null && o !== void 0 ? o : 0, s * (a + l.left) + (s > 0 ? l.right : 0);
}, $E = function(e, r, t) {
  var n, i, o = ((n = t.icon.margin) === null || n === void 0 ? void 0 : n.left) || 0, a = ((i = t.icon.margin) === null || i === void 0 ? void 0 : i.right) || 0, l = e.store.get("hiddenColumnsDetail", []), s = !1, f = !1;
  l.forEach(function(d) {
    var v, g, y, C;
    ((g = (v = d == null ? void 0 : d.displaySiblingNode) === null || v === void 0 ? void 0 : v.prev) === null || g === void 0 ? void 0 : g.field) === r && (s = !0), ((C = (y = d == null ? void 0 : d.displaySiblingNode) === null || y === void 0 ? void 0 : y.next) === null || C === void 0 ? void 0 : C.field) === r && (f = !0);
  });
  var h = ge(t, "icon.size");
  return {
    left: f ? h + a : 0,
    right: s ? h + o : 0
  };
}, yJ = function(e, r, t) {
  var n = ge(t, "cell.padding"), i = $E(e, r.field, t);
  return n.left + n.right + gJ(e, r, J.COL_CELL, ge(t, "icon")) + i.left + i.right;
}, FE = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.handleRestOptions = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      var i = W(t, 1), o = i[0];
      this.headerConfig = M({}, o);
      var a = this.meta.field, l = this.spreadsheet.dataCfg.sortParams, s = cr(l, function(h) {
        return (h == null ? void 0 : h.sortFieldId) === a;
      }), f = DE(s, !0);
      this.headerConfig.sortParam = M(M(M({}, this.headerConfig.sortParam), s || {}), { type: f });
    }, r.prototype.isFrozenCell = function() {
      var t = this.spreadsheet.options, n = t.frozenColCount, i = t.frozenTrailingColCount, o = this.spreadsheet.facet.layoutResult.colNodes.filter(function(l) {
        return ci(l);
      }), a = fZ(this.meta).colIndex;
      return ca(a, n) || ha(a, i, o.length);
    }, r.prototype.getFormattedFieldValue = function() {
      return IE(this.meta, this.spreadsheet.dataSet.getFieldName(this.meta.label));
    }, r.prototype.shouldAddVerticalResizeArea = function() {
      return this.isFrozenCell() ? !0 : e.prototype.shouldAddVerticalResizeArea.call(this);
    }, r.prototype.getVerticalResizeAreaOffset = function() {
      var t = this.meta, n = t.x, i = t.y, o = this.headerConfig, a = o.scrollX, l = o.position;
      return this.isFrozenCell() ? {
        x: n,
        y: i
      } : {
        x: l.x + n - a,
        y: l.y + i
      };
    }, r.prototype.getColResizeArea = function() {
      var t = this.isFrozenCell();
      return t ? fu(this.spreadsheet, a2) : e.prototype.getColResizeArea.call(this);
    }, r.prototype.isSortCell = function() {
      return !0;
    }, r.prototype.showSortIcon = function() {
      return this.spreadsheet.options.showDefaultHeaderActionIcon;
    }, r.prototype.getTextStyle = function() {
      var t = this.getStyle();
      return t == null ? void 0 : t.bolderText;
    }, r.prototype.getContentArea = function() {
      var t, n = (((t = this.getStyle()) === null || t === void 0 ? void 0 : t.cell) || this.theme.dataCell.cell).padding, i = M({}, n), o = $E(this.spreadsheet, this.meta.field, this.getStyle());
      return o.left && (i.left = (i.left || 0) + o.left), o.right && (i.right = (i.right || 0) + o.right), vE(this.getCellArea(), i);
    }, r.prototype.getHorizontalResizeAreaName = function() {
      return "".concat(l2).concat("table-col-cell");
    }, r.prototype.drawBackgroundShape = function() {
      var t = this.getStyle().cell.backgroundColor;
      this.backgroundShape = on(this, M(M({}, this.getCellArea()), { fill: t }));
    }, r;
  }(ih)
), CJ = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getStyle = function(t) {
      return t ? this.theme[t] : ge(this, "theme.cornerCell");
    }, r.prototype.showSortIcon = function() {
      return !1;
    }, r.prototype.drawLeftBorder = function() {
      var t = ba(kt.LEFT, this.getCellArea(), this.getStyle().cell), n = t.position, i = t.style;
      Jt(this, n, i);
    }, r.prototype.drawBorders = function() {
      e.prototype.drawBorders.call(this), this.meta.colIndex === 0 && this.drawLeftBorder();
    }, r;
  }(FE)
), oh = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getLinkFieldStyle = function() {
      return this.theme.rowCell.text.linkTextFill;
    }, r.prototype.drawBorderShape = function() {
      e.prototype.drawBorderShape.call(this), this.meta.colIndex === 0 && this.drawLeftBorder();
    }, r.prototype.shouldDrawResizeArea = function() {
      return this.meta.colIndex === 0;
    }, r.prototype.drawResizeArea = function() {
      if (this.shouldDrawResizeArea()) {
        var t = this.getCellArea(), n = t.x, i = t.y, o = t.width, a = t.height, l = this.meta.rowIndex, s = this.getResizeAreaStyle(), f = this.spreadsheet.options, h = f.frozenRowCount, d = f.frozenTrailingRowCount, v = this.spreadsheet.facet.getCellRange(), g = th(l, v.start, h), y = lu(l, v.end, d), C = g || y, _ = C ? i2 : vl, w = fu(this.spreadsheet, _), x = this.spreadsheet.facet.layoutResult.colsHierarchy.height, S = this.spreadsheet.facet.getScrollOffset().scrollY, T = this.spreadsheet.facet.getPaginationScrollY(), R = S + T, B = i + (y ? 0 : x);
        y || (B -= g ? T : R), w.addShape("rect", {
          attrs: M(M({}, ks({
            id: String(this.meta.rowIndex),
            theme: s,
            type: Sn.Vertical,
            effect: _r.Cell,
            offsetX: n,
            offsetY: B,
            width: o,
            height: a,
            meta: this.meta
          })), { x: n, y: B + a - s.size / 2, width: o })
        });
      }
    }, r;
  }(No)
), PE = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return Object.defineProperty(r.prototype, "cellType", {
      get: function() {
        return J.ROW_CELL;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.getTextStyle = function() {
      return this.theme.rowCell.seriesText;
    }, r;
  }(oh)
), ah = (
  /** @class */
  function() {
    function e(r) {
      this.EVENT = "gesture", this.gm = r;
    }
    return e.prototype.do = function(r) {
      var t = r.type;
      switch (t) {
        case "touchstart":
          this.onTouchStart(r);
          break;
        case "touchmove":
          this.onTouchMove(r);
          break;
        case "touchend":
          this.onTouchEnd(r);
          break;
        case "touchcancel":
          this.onTouchCancel(r);
          break;
        default:
          return;
      }
    }, e.prototype.emit = function(r) {
      this.gm.emit(this.EVENT, r);
    }, e;
  }()
), mJ = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.EVENT = "pan", t;
    }
    return r.prototype.onTouchCancel = function(t) {
    }, r.prototype.onTouchEnd = function(t) {
    }, r.prototype.onTouchMove = function(t) {
      var n = t.x, i = t.y, o = n - this.preX, a = i - this.preY;
      this.preX = n, this.preY = i, this.emit({ x: n, y: i, deltaX: o, deltaY: a, event: t });
    }, r.prototype.onTouchStart = function(t) {
      var n = t.x, i = t.y;
      this.preX = n, this.preY = i;
    }, r;
  }(ah)
), bo = typeof performance == "object" && performance.now ? performance : Date, _J = 300, Mw = 10, wJ = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.EVENT = "press", t;
    }
    return r.prototype.onTouchCancel = function(t) {
      this.clearTimeout();
    }, r.prototype.onTouchEnd = function(t) {
      this.clearTimeout();
    }, r.prototype.onTouchMove = function(t) {
      var n = t.x, i = t.y;
      (n - this.touchStartX > Mw || i - this.touchStartY > Mw) && this.clearTimeout();
    }, r.prototype.onTouchStart = function(t) {
      var n = this;
      this.clearTimeout();
      var i = t.x, o = t.y;
      this.touchStartTime = bo.now(), this.touchStartX = i, this.touchStartY = o, this.pressTimeout = window.setTimeout(function() {
        n.emit({ x: i, y: o, event: t });
      }, _J);
    }, r.prototype.clearTimeout = function() {
      window.clearTimeout(this.pressTimeout);
    }, r;
  }(ah)
), xJ = 100, SJ = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.EVENT = "swipe", t.latestMoveTime = 0, t.ms = 0, t.speedX = 0, t.speedY = 0, t.preX = 0, t.preY = 0, t;
    }
    return r.prototype.onTouchCancel = function(t) {
    }, r.prototype.onTouchEnd = function(t) {
      var n = this.speedX, i = this.speedY;
      if (bo.now() - this.latestMoveTime < xJ) {
        var o = t.x, a = t.y;
        this.emit({ x: o, y: a, speedX: n, speedY: i, event: t });
      }
    }, r.prototype.onTouchMove = function(t) {
      var n = t.x, i = t.y, o = bo.now(), a = n - this.preX, l = i - this.preY, s = o - this.ms;
      this.speedX = a / s, this.speedY = l / s, this.latestMoveTime = o;
    }, r.prototype.onTouchStart = function(t) {
      var n = t.x, i = t.y;
      this.speedX = this.speedY = 0, this.preX = n, this.preY = i, this.ms = bo.now();
    }, r;
  }(ah)
), bJ = 300, Bw = 2, TJ = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.EVENT = "tap", t;
    }
    return r.prototype.onTouchCancel = function(t) {
    }, r.prototype.onTouchEnd = function(t) {
      var n = t.x, i = t.y;
      n - this.touchStartX < Bw && i - this.touchStartY < Bw && bo.now() - this.touchStartTime < bJ && this.emit({ x: n, y: i, event: t });
    }, r.prototype.onTouchMove = function(t) {
    }, r.prototype.onTouchStart = function(t) {
      var n = t.x, i = t.y;
      this.touchStartTime = bo.now(), this.touchStartX = n, this.touchStartY = i;
    }, r;
  }(ah)
), EJ = {
  Pan: mJ,
  Press: wJ,
  Swipe: SJ,
  Tap: TJ
}, LJ = function(e) {
  return EJ[e];
}, NE = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t, n) {
      n === void 0 && (n = {});
      var i = e.call(this) || this;
      return i.onTouchStart = function(o) {
        i.preventEvent(o), i.element.on("touchmove", i.onTouchMove), i.element.on("touchend", i.onTouchEnd), i.element.on("touchcancel", i.onTouchCancel), i.emit("touchdown", o), i.doGestures(o);
      }, i.onTouchMove = function(o) {
        i.preventEvent(o), i.emit("touchmove", o), i.doGestures(o);
      }, i.onTouchEnd = function(o) {
        i.preventEvent(o), i.emit("touchend", o), i.element.off("touchmove", i.onTouchMove), i.element.off("touchend", i.onTouchEnd), i.element.off("touchcancel", i.onTouchCancel), i.doGestures(o);
      }, i.onTouchCancel = function(o) {
        i.preventEvent(o), i.emit("touchcancel", o), i.element.off("touchmove", i.onTouchMove), i.element.off("touchend", i.onTouchEnd), i.element.off("touchcancel", i.onTouchCancel), i.doGestures(o);
      }, i.element = t, i.options = n, i.initialGestures(), i.bindTouchStart(), i;
    }
    return r.prototype.destroy = function() {
      this.element.off("touchstart", this.onTouchStart), this.off();
    }, r.prototype.initialGestures = function() {
      var t = this, n = this.options.gestures || ["Pan", "Press", "Swipe", "Tap"];
      this.gestures = n.map(function(i) {
        var o = LJ(i);
        return new o(t);
      });
    }, r.prototype.bindTouchStart = function() {
      this.element.on("touchstart", this.onTouchStart);
    }, r.prototype.preventEvent = function(t) {
      var n = t.type, i = this.options.prevents || [];
      i.includes(n) && t.preventDefault();
    }, r.prototype.doGestures = function(t) {
      this.gestures.forEach(function(n) {
        n.do(t);
      });
    }, r;
  }(bc)
), AJ = TS, RJ = 800, OJ = "swipe", IJ = "pan", Dw = "wheel", MJ = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this) || this;
      return n.rafMs = 0, n.onPan = function(i) {
        n.raf && cancelAnimationFrame(n.raf);
        var o = i.deltaX, a = i.deltaY, l = n.getWrapperEvent(i, o, a);
        n.emit(Dw, l);
      }, n.onSwipe = function(i) {
        var o = i.speedX, a = i.speedY;
        n.rafMs = bo.now(), n.ms = n.rafMs, (o !== 0 || a !== 0) && n.rafInertia(i);
      }, n.element = t, n.gm = new NE(t, { gestures: ["Pan", "Swipe"] }), n.gm.on(OJ, n.onSwipe), n.gm.on(IJ, n.onPan), n;
    }
    return r.prototype.destroy = function() {
      window.cancelAnimationFrame(this.raf), this.gm.destroy(), this.off();
    }, r.prototype.rafInertia = function(t) {
      var n = this, i = t.speedX, o = t.speedY;
      this.raf = window.requestAnimationFrame(function() {
        var a = bo.now(), l = (a - n.ms) / RJ;
        if (l < 1) {
          l = AJ(1 - l);
          var s = a - n.rafMs, f = i * l * s, h = o * l * s, d = n.getWrapperEvent(t, f, h);
          n.emit(Dw, d), n.rafMs = a, n.rafInertia(t);
        }
      });
    }, r.prototype.getWrapperEvent = function(t, n, i) {
      return M(M({}, t), { deltaX: -n, deltaY: -i });
    }, r;
  }(bc)
), BJ = function(e) {
  var r = 0, t = e.children;
  return t == null || t.forEach(function(n) {
    r += n.height || 0;
  }), r;
}, HE = function(e, r, t, n, i) {
  var o = 0, a = e + (r - i) / 2, l = e + (r + i) / 2, s = t + n;
  return e + i >= s ? o = e : s < l ? o = t + n - i : t > a ? e + r - t > i ? o = t : o = e + r - i : o = e + (r - i) / 2, o;
}, DJ = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return Object.defineProperty(r.prototype, "cellType", {
      get: function() {
        return J.ROW_CELL;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.destroy = function() {
      var t;
      e.prototype.destroy.call(this), (t = this.gm) === null || t === void 0 || t.destroy();
    }, r.prototype.initCell = function() {
      e.prototype.initCell.call(this), this.drawBackgroundShape(), this.drawInteractiveBgShape(), this.drawInteractiveBorderShape(), this.drawTextShape(), this.drawConditionIconShapes(), this.drawTreeIcon(), this.drawTreeLeafNodeAlignDot(), this.drawRectBorder(), this.drawResizeAreaInLeaf(), this.drawActionIcons(), this.update();
    }, r.prototype.getBackgroundColor = function() {
      var t = this.getCrossBackgroundColor(this.meta.rowIndex), n = t.backgroundColor, i = t.backgroundColorOpacity;
      return this.getBackgroundColorByCondition(n, i);
    }, r.prototype.drawInteractiveBorderShape = function() {
      var t = 2;
      this.stateShapes.set("interactiveBorderShape", on(this, this.getInteractiveBorderShapeStyle(t), {
        visible: !1
      }));
    }, r.prototype.drawInteractiveBgShape = function() {
      this.stateShapes.set("interactiveBgShape", on(this, M({}, this.getCellArea()), {
        visible: !1
      }));
    }, r.prototype.showTreeIcon = function() {
      return this.spreadsheet.isHierarchyTreeType() && !this.meta.isLeaf;
    }, r.prototype.showTreeLeafNodeAlignDot = function() {
      var t;
      return ((t = this.spreadsheet.options.style) === null || t === void 0 ? void 0 : t.showTreeLeafNodeAlignDot) && this.spreadsheet.isHierarchyTreeType();
    }, r.prototype.getParentTreeIconCfg = function() {
      if (!(!this.showTreeLeafNodeAlignDot() || !this.spreadsheet.isHierarchyTreeType() || !this.meta.isLeaf))
        return ge(this.meta, "parent.belongsCell.treeIcon.cfg");
    }, r.prototype.drawTreeIcon = function() {
      var t = this;
      if (this.showTreeIcon()) {
        var n = this.meta, i = n.isCollapsed, o = n.id, a = n.hierarchy, l = this.getContentArea().x, s = this.getTextStyle().fill, f = this.getStyle().icon.size, h = this.getContentIndent(), d = l + h, v = this.getIconYPosition();
        this.treeIcon = hE(this, {
          x: d,
          y: v,
          width: f,
          height: f
        }, s, i, function() {
          if (!Xt()) {
            if (!i) {
              var g = t.spreadsheet.store.get("scrollY"), y = t.headerConfig.viewportHeight || 0, C = BJ(t.meta), _ = a.height - C;
              if (g > 0 && g + y > _) {
                var w = _ - y;
                t.spreadsheet.store.set("scrollY", w > 0 ? w : 0);
              }
            }
            t.spreadsheet.emit(I.ROW_CELL_COLLAPSE_TREE_ROWS, {
              id: o,
              isCollapsed: !i,
              node: t.meta
            });
          }
        }), Xt() && (this.gm = new NE(this, {
          gestures: ["Tap"]
        }), this.gm.on("tap", function() {
          t.spreadsheet.emit(I.ROW_CELL_COLLAPSE_TREE_ROWS, {
            id: o,
            isCollapsed: !i,
            node: t.meta
          });
        }));
      }
    }, r.prototype.drawTreeLeafNodeAlignDot = function() {
      var t = this.getParentTreeIconCfg();
      if (t) {
        var n = this.getStyle().icon, i = n.size, o = n.margin, a = t.x + i + o.right, l = this.getTextPosition().y, s = this.getTextStyle(), f = s.fill, h = s.fontSize, d = i / 5;
        this.treeLeafNodeAlignDot = cE(this, {
          x: a + i / 2,
          y: l + (h - d) / 2,
          r: d,
          fill: f,
          fillOpacity: 0.3
          // 暂时先写死，后面看是否有这个点点的定制需求
        });
      }
    }, r.prototype.isBolderText = function() {
      var t = this.meta, n = t.isLeaf, i = t.isTotals, o = t.level;
      return !n && o === 0 || i;
    }, r.prototype.drawTextShape = function() {
      e.prototype.drawTextShape.call(this), this.drawLinkField(this.meta);
    }, r.prototype.drawRectBorder = function() {
      var t = this, n = this.getCellArea().x, i = this.getContentIndent(), o = this.spreadsheet.isHierarchyTreeType() ? n : n + i;
      [kt.BOTTOM, kt.LEFT].forEach(function(a) {
        var l = ba(a, M(M({}, t.getCellArea()), { x: o }), t.getStyle().cell), s = l.position, f = l.style;
        Jt(t, s, f);
      });
    }, r.prototype.getResizeClipAreaBBox = function() {
      var t = this.headerConfig, n = t.width, i = t.viewportHeight;
      return {
        x: 0,
        y: 0,
        width: n,
        height: i
      };
    }, r.prototype.drawResizeAreaInLeaf = function() {
      if (!(!this.meta.isLeaf || !this.shouldDrawResizeAreaByType("rowCellVertical", this))) {
        var t = this.getCellArea(), n = t.x, i = t.y, o = t.width, a = t.height, l = this.getResizeAreaStyle(), s = fu(this.spreadsheet, vl), f = this.headerConfig, h = f.position, d = f.seriesNumberWidth, v = f.width, g = f.scrollX, y = f.scrollY, C = {
          // fix: When scrolling without the entire frozen header horizontally, the resize area would be removed permanently.
          x: n + d,
          y: i + a - l.size / 2,
          width: o,
          height: l.size
        }, _ = this.getResizeClipAreaBBox();
        if (Og(C, _, {
          scrollX: g,
          scrollY: y
        })) {
          var w = (h == null ? void 0 : h.x) + n - g + d, x = (h == null ? void 0 : h.y) + i - y, S = this.spreadsheet.isFrozenRowHeader() ? v - d - (n - g) : o;
          s.addShape("rect", {
            attrs: M(M({}, ks({
              id: this.meta.id,
              theme: l,
              type: Sn.Vertical,
              effect: _r.Cell,
              offsetX: w,
              offsetY: x,
              width: o,
              height: a,
              meta: this.meta
            })), { x: w, y: x + a - l.size / 2, width: S })
          });
        }
      }
    }, r.prototype.getContentIndent = function() {
      if (!this.spreadsheet.isHierarchyTreeType())
        return 0;
      for (var t = this.getStyle(), n = t.icon, i = t.cell, o = n.size + n.margin.right, a = this.meta.parent, l = 0; a; )
        a.height !== 0 && (l += o), a = a.parent;
      return this.showTreeLeafNodeAlignDot() && (l += this.isTreeLevel() ? 0 : i.padding.right + n.margin.right), l;
    }, r.prototype.getTextIndent = function() {
      var t = this.getStyle().icon, n = t.size, i = t.margin, o = this.getContentIndent(), a = this.showTreeIcon() || this.isTreeLevel() && this.showTreeLeafNodeAlignDot() ? n + i.right : 0;
      return o + a;
    }, r.prototype.isTreeLevel = function() {
      return cr(ge(this.meta, "parent.children"), function(t) {
        return !t.isLeaf;
      });
    }, r.prototype.getIconPosition = function() {
      if (!this.textShape)
        return {
          x: 0,
          y: 0
        };
      var t = this.textShape.cfg.attrs, n = t.x, i = t.y, o = t.textAlign, a = this.getStyle().icon.margin.left;
      return o === "left" ? {
        x: n + this.actualTextWidth + a,
        y: i
      } : o === "right" ? {
        x: n + a,
        y: i
      } : {
        x: n + this.actualTextWidth / 2 + a,
        y: i
      };
    }, r.prototype.getMaxTextWidth = function() {
      var t = this.getContentArea().width;
      return t - this.getTextIndent() - this.getActionIconsWidth();
    }, r.prototype.getTextArea = function() {
      var t = this.getContentArea(), n = this.getTextIndent();
      return M(M({}, t), { x: t.x + n, width: t.width - n });
    }, r.prototype.getAdjustTextAreaHeight = function(t, n, i) {
      var o = t.height;
      return !this.spreadsheet.facet.vScrollBar && t.y + t.height > n + i && (o = n + i - t.y), o;
    }, r.prototype.calculateTextY = function(t) {
      var n = t.textArea, i = t.adjustTextAreaHeight, o = this.headerConfig, a = o.scrollY, l = o.viewportHeight, s = this.getTextStyle().fontSize;
      return HE(n.y, i, a, l, s);
    }, r.prototype.getTextPosition = function() {
      var t = this.getTextArea(), n = this.headerConfig, i = n.scrollY, o = n.viewportHeight, a = this.getAdjustTextAreaHeight(t, i, o), l = this.calculateTextY({ textArea: t, adjustTextAreaHeight: a }), s = su(t, this.getTextStyle(), 0, this.getIconStyle(), this.getActionIconsCount()).text.x;
      return { x: s, y: l };
    }, r.prototype.getIconYPosition = function() {
      var t = this.getTextPosition().y, n = this.getStyle().icon.size, i = this.getTextStyle().fontSize;
      return t + (i - n) / 2;
    }, r;
  }(Bg)
), cu = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.handleRestOptions = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      var i = W(t), o = i[0], a = i.slice(1);
      e.prototype.handleRestOptions.call(this, o, a), this.frozenRowCell = a[0];
    }, r.prototype.getAdjustTextAreaHeight = function(t, n, i) {
      var o = t.y - this.getFrozenFirstRowHeight(), a = t.height;
      return !this.spreadsheet.facet.vScrollBar && o + t.height > n + i && (a = n + i - o), a;
    }, r.prototype.calculateTextY = function(t) {
      var n = t.textArea, i = t.adjustTextAreaHeight, o = this.headerConfig, a = o.scrollY, l = o.viewportHeight, s = this.getTextStyle().fontSize;
      return HE(
        n.y,
        i,
        // viewportLeft: start at the frozen row position
        a + this.getFrozenFirstRowHeight(),
        l,
        s
      );
    }, r.prototype.getResizeClipAreaBBox = function() {
      return M(M({}, e.prototype.getResizeClipAreaBBox.call(this)), { y: this.getFrozenFirstRowHeight() });
    }, r.prototype.getFrozenFirstRowHeight = function() {
      var t;
      if (this.frozenRowCell)
        return 0;
      var n = this.spreadsheet, i = n.facet, o = n.options, a = Cl(o, (t = i == null ? void 0 : i.layoutResult) === null || t === void 0 ? void 0 : t.rowNodes).frozenRowHeight;
      return a;
    }, r;
  }(DJ)
), zE = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.initCell = function() {
      this.drawBackgroundShape(), this.drawRectBorder(), this.drawTextShape();
    }, r.prototype.getTextStyle = function() {
      var t;
      return (t = this.getStyle()) === null || t === void 0 ? void 0 : t.seriesText;
    }, r.prototype.getTextPosition = function() {
      return e.prototype.getTextPosition.call(this);
    }, r.prototype.getActionIconsCount = function() {
      return 0;
    }, r.prototype.getIconStyle = function() {
    }, r.prototype.drawResizeAreaInLeaf = function() {
    }, r.prototype.update = function() {
    }, r.prototype.findFieldCondition = function() {
    }, r.prototype.mappingValue = function() {
    }, r;
  }(cu)
), dc = function(e) {
  return [lr.META, lr.CONTROL].includes(e.key);
}, WE = function(e) {
  return e.ctrlKey || e.metaKey;
}, di = function(e) {
  var r = e.getMeta(), t = r || {}, n = t.id, i = t.colIndex, o = t.rowIndex, a = t.rowQuery;
  return {
    id: n,
    colIndex: i,
    rowIndex: o,
    type: e.cellType,
    rowQuery: a
  };
}, $J = function(e, r) {
  var t = e.interaction;
  t.changeState({
    stateName: ae.SELECTED,
    cells: r
  }), e.emit(I.GLOBAL_SELECTED, t.getActiveCells());
};
function Sp(e, r) {
  var t = Math.min(e.rowIndex, r.rowIndex), n = Math.max(e.rowIndex, r.rowIndex), i = Math.min(e.colIndex, r.colIndex), o = Math.max(e.colIndex, r.colIndex);
  return {
    start: {
      rowIndex: t,
      colIndex: i
    },
    end: {
      rowIndex: n,
      colIndex: o
    }
  };
}
function FJ(e, r) {
  var t = r.interaction, n = r.facet, i = r.options;
  if (r.isTableMode()) {
    if (!i.showSeriesNumber)
      return [];
    var o = n.layoutResult.colLeafNodes[0].id, a = uu(String(e.rowIndex), o), l = [], s = t.getAllCells().find(function(f) {
      return f.getMeta().id === a;
    });
    return s && s instanceof PE && l.push(s), l;
  }
  return Lg(e.rowId, t.getAllRowHeaderCells(), r.isHierarchyTreeType());
}
var Dg = function(e, r) {
  var t = e.getSelectedCellHighlight(), n = t.colHeader, i = t.rowHeader;
  n && e.updateCells(e.getAllColHeaderCells()), i && e.updateCells(e.getAllRowHeaderCells()), r();
}, kE = function(e) {
  var r = e.store.get("visibleActionIcons"), t = e.interaction.getInteractedCells(), n = e.interaction.getState().cells;
  if (Q(t) && Q(n) && Q(r))
    return !1;
  if (xe(r, function(o) {
    o.set("visible", !1);
  }), e.store.set("visibleActionIcons", []), xe(t, function(o) {
    o.hideInteractionShape();
  }), e.interaction.resetState(), e.options.interaction.selectedCellsSpotlight) {
    var i = e.interaction.getPanelGroupAllUnSelectedDataCells() || [];
    xe(i, function(o) {
      o.clearUnselectedState();
    });
  }
  return !0;
}, PJ = function(e, r) {
  var t = r == null ? void 0 : r.stateName;
  e.interaction.isEqualStateName(t) || (kE(e), e.hideTooltip(), e.store.set(qv, r));
}, NJ = function(e, r, t) {
  var n, i, o = t.facet, a = o.panelBBox.width, l = o == null ? void 0 : o.frozenGroupInfo, s = (n = l == null ? void 0 : l.frozenCol.width) !== null && n !== void 0 ? n : 0, f = (i = l == null ? void 0 : l.frozenTrailingCol.width) !== null && i !== void 0 ? i : 0, h = o.layoutResult.colLeafNodes[e];
  return r === Yt.SCROLL_UP ? h.x - s : h.x + h.width - (a - f);
}, HJ = function(e, r, t) {
  var n, i, o = t.facet, a = o.viewCellHeights.getCellOffsetY, l = o.panelBBox.height, s = a(e + 1);
  if (Nt(s))
    return 0;
  var f = o == null ? void 0 : o.frozenGroupInfo, h = (n = f == null ? void 0 : f.frozenRow.height) !== null && n !== void 0 ? n : 0, d = (i = f == null ? void 0 : f.frozenTrailingRow.height) !== null && i !== void 0 ? i : 0;
  return r === Yt.SCROLL_UP ? a(e) - h : s - (l - d);
};
/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */
var nl = 9e15, Ho = 1e9, bp = "0123456789abcdef", vc = "2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058", pc = "3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789", Tp = {
  // These values must be integers within the stated ranges (inclusive).
  // Most of these values can be changed at run-time using the `Decimal.config` method.
  // The maximum number of significant digits of the result of a calculation or base conversion.
  // E.g. `Decimal.config({ precision: 20 });`
  precision: 20,
  // 1 to MAX_DIGITS
  // The rounding mode used when rounding to `precision`.
  //
  // ROUND_UP         0 Away from zero.
  // ROUND_DOWN       1 Towards zero.
  // ROUND_CEIL       2 Towards +Infinity.
  // ROUND_FLOOR      3 Towards -Infinity.
  // ROUND_HALF_UP    4 Towards nearest neighbour. If equidistant, up.
  // ROUND_HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.
  // ROUND_HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.
  // ROUND_HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.
  // ROUND_HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.
  //
  // E.g.
  // `Decimal.rounding = 4;`
  // `Decimal.rounding = Decimal.ROUND_HALF_UP;`
  rounding: 4,
  // 0 to 8
  // The modulo mode used when calculating the modulus: a mod n.
  // The quotient (q = a / n) is calculated according to the corresponding rounding mode.
  // The remainder (r) is calculated as: r = a - n * q.
  //
  // UP         0 The remainder is positive if the dividend is negative, else is negative.
  // DOWN       1 The remainder has the same sign as the dividend (JavaScript %).
  // FLOOR      3 The remainder has the same sign as the divisor (Python %).
  // HALF_EVEN  6 The IEEE 754 remainder function.
  // EUCLID     9 Euclidian division. q = sign(n) * floor(a / abs(n)). Always positive.
  //
  // Truncated division (1), floored division (3), the IEEE 754 remainder (6), and Euclidian
  // division (9) are commonly used for the modulus operation. The other rounding modes can also
  // be used, but they may not give useful results.
  modulo: 1,
  // 0 to 9
  // The exponent value at and beneath which `toString` returns exponential notation.
  // JavaScript numbers: -7
  toExpNeg: -7,
  // 0 to -EXP_LIMIT
  // The exponent value at and above which `toString` returns exponential notation.
  // JavaScript numbers: 21
  toExpPos: 21,
  // 0 to EXP_LIMIT
  // The minimum exponent value, beneath which underflow to zero occurs.
  // JavaScript numbers: -324  (5e-324)
  minE: -nl,
  // -1 to -EXP_LIMIT
  // The maximum exponent value, above which overflow to Infinity occurs.
  // JavaScript numbers: 308  (1.7976931348623157e+308)
  maxE: nl,
  // 1 to EXP_LIMIT
  // Whether to use cryptographically-secure random number generation, if available.
  crypto: !1
  // true/false
}, GE, zi, be = !0, lh = "[DecimalError] ", Io = lh + "Invalid argument: ", UE = lh + "Precision limit exceeded", YE = lh + "crypto unavailable", XE = "[object Decimal]", hr = Math.floor, Wt = Math.pow, zJ = /^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i, WJ = /^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i, kJ = /^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i, VE = /^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i, Vn = 1e7, pe = 7, GJ = 9007199254740991, UJ = vc.length - 1, Ep = pc.length - 1, Y = { toStringTag: XE };
Y.absoluteValue = Y.abs = function() {
  var e = new this.constructor(this);
  return e.s < 0 && (e.s = 1), he(e);
};
Y.ceil = function() {
  return he(new this.constructor(this), this.e + 1, 2);
};
Y.clampedTo = Y.clamp = function(e, r) {
  var t, n = this, i = n.constructor;
  if (e = new i(e), r = new i(r), !e.s || !r.s) return new i(NaN);
  if (e.gt(r)) throw Error(Io + r);
  return t = n.cmp(e), t < 0 ? e : n.cmp(r) > 0 ? r : new i(n);
};
Y.comparedTo = Y.cmp = function(e) {
  var r, t, n, i, o = this, a = o.d, l = (e = new o.constructor(e)).d, s = o.s, f = e.s;
  if (!a || !l)
    return !s || !f ? NaN : s !== f ? s : a === l ? 0 : !a ^ s < 0 ? 1 : -1;
  if (!a[0] || !l[0]) return a[0] ? s : l[0] ? -f : 0;
  if (s !== f) return s;
  if (o.e !== e.e) return o.e > e.e ^ s < 0 ? 1 : -1;
  for (n = a.length, i = l.length, r = 0, t = n < i ? n : i; r < t; ++r)
    if (a[r] !== l[r]) return a[r] > l[r] ^ s < 0 ? 1 : -1;
  return n === i ? 0 : n > i ^ s < 0 ? 1 : -1;
};
Y.cosine = Y.cos = function() {
  var e, r, t = this, n = t.constructor;
  return t.d ? t.d[0] ? (e = n.precision, r = n.rounding, n.precision = e + Math.max(t.e, t.sd()) + pe, n.rounding = 1, t = YJ(n, QE(n, t)), n.precision = e, n.rounding = r, he(zi == 2 || zi == 3 ? t.neg() : t, e, r, !0)) : new n(1) : new n(NaN);
};
Y.cubeRoot = Y.cbrt = function() {
  var e, r, t, n, i, o, a, l, s, f, h = this, d = h.constructor;
  if (!h.isFinite() || h.isZero()) return new d(h);
  for (be = !1, o = h.s * Wt(h.s * h, 1 / 3), !o || Math.abs(o) == 1 / 0 ? (t = er(h.d), e = h.e, (o = (e - t.length + 1) % 3) && (t += o == 1 || o == -2 ? "0" : "00"), o = Wt(t, 1 / 3), e = hr((e + 1) / 3) - (e % 3 == (e < 0 ? -1 : 2)), o == 1 / 0 ? t = "5e" + e : (t = o.toExponential(), t = t.slice(0, t.indexOf("e") + 1) + e), n = new d(t), n.s = h.s) : n = new d(o.toString()), a = (e = d.precision) + 3; ; )
    if (l = n, s = l.times(l).times(l), f = s.plus(h), n = vt(f.plus(h).times(l), f.plus(s), a + 2, 1), er(l.d).slice(0, a) === (t = er(n.d)).slice(0, a))
      if (t = t.slice(a - 3, a + 1), t == "9999" || !i && t == "4999") {
        if (!i && (he(l, e + 1, 0), l.times(l).times(l).eq(h))) {
          n = l;
          break;
        }
        a += 4, i = 1;
      } else {
        (!+t || !+t.slice(1) && t.charAt(0) == "5") && (he(n, e + 1, 1), r = !n.times(n).times(n).eq(h));
        break;
      }
  return be = !0, he(n, e, d.rounding, r);
};
Y.decimalPlaces = Y.dp = function() {
  var e, r = this.d, t = NaN;
  if (r) {
    if (e = r.length - 1, t = (e - hr(this.e / pe)) * pe, e = r[e], e) for (; e % 10 == 0; e /= 10) t--;
    t < 0 && (t = 0);
  }
  return t;
};
Y.dividedBy = Y.div = function(e) {
  return vt(this, new this.constructor(e));
};
Y.dividedToIntegerBy = Y.divToInt = function(e) {
  var r = this, t = r.constructor;
  return he(vt(r, new t(e), 0, 1, 1), t.precision, t.rounding);
};
Y.equals = Y.eq = function(e) {
  return this.cmp(e) === 0;
};
Y.floor = function() {
  return he(new this.constructor(this), this.e + 1, 3);
};
Y.greaterThan = Y.gt = function(e) {
  return this.cmp(e) > 0;
};
Y.greaterThanOrEqualTo = Y.gte = function(e) {
  var r = this.cmp(e);
  return r == 1 || r === 0;
};
Y.hyperbolicCosine = Y.cosh = function() {
  var e, r, t, n, i, o = this, a = o.constructor, l = new a(1);
  if (!o.isFinite()) return new a(o.s ? 1 / 0 : NaN);
  if (o.isZero()) return l;
  t = a.precision, n = a.rounding, a.precision = t + Math.max(o.e, o.sd()) + 4, a.rounding = 1, i = o.d.length, i < 32 ? (e = Math.ceil(i / 3), r = (1 / uh(4, e)).toString()) : (e = 16, r = "2.3283064365386962890625e-10"), o = _l(a, 1, o.times(r), new a(1), !0);
  for (var s, f = e, h = new a(8); f--; )
    s = o.times(o), o = l.minus(s.times(h.minus(s.times(h))));
  return he(o, a.precision = t, a.rounding = n, !0);
};
Y.hyperbolicSine = Y.sinh = function() {
  var e, r, t, n, i = this, o = i.constructor;
  if (!i.isFinite() || i.isZero()) return new o(i);
  if (r = o.precision, t = o.rounding, o.precision = r + Math.max(i.e, i.sd()) + 4, o.rounding = 1, n = i.d.length, n < 3)
    i = _l(o, 2, i, i, !0);
  else {
    e = 1.4 * Math.sqrt(n), e = e > 16 ? 16 : e | 0, i = i.times(1 / uh(5, e)), i = _l(o, 2, i, i, !0);
    for (var a, l = new o(5), s = new o(16), f = new o(20); e--; )
      a = i.times(i), i = i.times(l.plus(a.times(s.times(a).plus(f))));
  }
  return o.precision = r, o.rounding = t, he(i, r, t, !0);
};
Y.hyperbolicTangent = Y.tanh = function() {
  var e, r, t = this, n = t.constructor;
  return t.isFinite() ? t.isZero() ? new n(t) : (e = n.precision, r = n.rounding, n.precision = e + 7, n.rounding = 1, vt(t.sinh(), t.cosh(), n.precision = e, n.rounding = r)) : new n(t.s);
};
Y.inverseCosine = Y.acos = function() {
  var e, r = this, t = r.constructor, n = r.abs().cmp(1), i = t.precision, o = t.rounding;
  return n !== -1 ? n === 0 ? r.isNeg() ? Gn(t, i, o) : new t(0) : new t(NaN) : r.isZero() ? Gn(t, i + 4, o).times(0.5) : (t.precision = i + 6, t.rounding = 1, r = r.asin(), e = Gn(t, i + 4, o).times(0.5), t.precision = i, t.rounding = o, e.minus(r));
};
Y.inverseHyperbolicCosine = Y.acosh = function() {
  var e, r, t = this, n = t.constructor;
  return t.lte(1) ? new n(t.eq(1) ? 0 : NaN) : t.isFinite() ? (e = n.precision, r = n.rounding, n.precision = e + Math.max(Math.abs(t.e), t.sd()) + 4, n.rounding = 1, be = !1, t = t.times(t).minus(1).sqrt().plus(t), be = !0, n.precision = e, n.rounding = r, t.ln()) : new n(t);
};
Y.inverseHyperbolicSine = Y.asinh = function() {
  var e, r, t = this, n = t.constructor;
  return !t.isFinite() || t.isZero() ? new n(t) : (e = n.precision, r = n.rounding, n.precision = e + 2 * Math.max(Math.abs(t.e), t.sd()) + 6, n.rounding = 1, be = !1, t = t.times(t).plus(1).sqrt().plus(t), be = !0, n.precision = e, n.rounding = r, t.ln());
};
Y.inverseHyperbolicTangent = Y.atanh = function() {
  var e, r, t, n, i = this, o = i.constructor;
  return i.isFinite() ? i.e >= 0 ? new o(i.abs().eq(1) ? i.s / 0 : i.isZero() ? i : NaN) : (e = o.precision, r = o.rounding, n = i.sd(), Math.max(n, e) < 2 * -i.e - 1 ? he(new o(i), e, r, !0) : (o.precision = t = n - i.e, i = vt(i.plus(1), new o(1).minus(i), t + e, 1), o.precision = e + 4, o.rounding = 1, i = i.ln(), o.precision = e, o.rounding = r, i.times(0.5))) : new o(NaN);
};
Y.inverseSine = Y.asin = function() {
  var e, r, t, n, i = this, o = i.constructor;
  return i.isZero() ? new o(i) : (r = i.abs().cmp(1), t = o.precision, n = o.rounding, r !== -1 ? r === 0 ? (e = Gn(o, t + 4, n).times(0.5), e.s = i.s, e) : new o(NaN) : (o.precision = t + 6, o.rounding = 1, i = i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(), o.precision = t, o.rounding = n, i.times(2)));
};
Y.inverseTangent = Y.atan = function() {
  var e, r, t, n, i, o, a, l, s, f = this, h = f.constructor, d = h.precision, v = h.rounding;
  if (f.isFinite()) {
    if (f.isZero())
      return new h(f);
    if (f.abs().eq(1) && d + 4 <= Ep)
      return a = Gn(h, d + 4, v).times(0.25), a.s = f.s, a;
  } else {
    if (!f.s) return new h(NaN);
    if (d + 4 <= Ep)
      return a = Gn(h, d + 4, v).times(0.5), a.s = f.s, a;
  }
  for (h.precision = l = d + 10, h.rounding = 1, t = Math.min(28, l / pe + 2 | 0), e = t; e; --e) f = f.div(f.times(f).plus(1).sqrt().plus(1));
  for (be = !1, r = Math.ceil(l / pe), n = 1, s = f.times(f), a = new h(f), i = f; e !== -1; )
    if (i = i.times(s), o = a.minus(i.div(n += 2)), i = i.times(s), a = o.plus(i.div(n += 2)), a.d[r] !== void 0) for (e = r; a.d[e] === o.d[e] && e--; ) ;
  return t && (a = a.times(2 << t - 1)), be = !0, he(a, h.precision = d, h.rounding = v, !0);
};
Y.isFinite = function() {
  return !!this.d;
};
Y.isInteger = Y.isInt = function() {
  return !!this.d && hr(this.e / pe) > this.d.length - 2;
};
Y.isNaN = function() {
  return !this.s;
};
Y.isNegative = Y.isNeg = function() {
  return this.s < 0;
};
Y.isPositive = Y.isPos = function() {
  return this.s > 0;
};
Y.isZero = function() {
  return !!this.d && this.d[0] === 0;
};
Y.lessThan = Y.lt = function(e) {
  return this.cmp(e) < 0;
};
Y.lessThanOrEqualTo = Y.lte = function(e) {
  return this.cmp(e) < 1;
};
Y.logarithm = Y.log = function(e) {
  var r, t, n, i, o, a, l, s, f = this, h = f.constructor, d = h.precision, v = h.rounding, g = 5;
  if (e == null)
    e = new h(10), r = !0;
  else {
    if (e = new h(e), t = e.d, e.s < 0 || !t || !t[0] || e.eq(1)) return new h(NaN);
    r = e.eq(10);
  }
  if (t = f.d, f.s < 0 || !t || !t[0] || f.eq(1))
    return new h(t && !t[0] ? -1 / 0 : f.s != 1 ? NaN : t ? 0 : 1 / 0);
  if (r)
    if (t.length > 1)
      o = !0;
    else {
      for (i = t[0]; i % 10 === 0; ) i /= 10;
      o = i !== 1;
    }
  if (be = !1, l = d + g, a = wo(f, l), n = r ? gc(h, l + 10) : wo(e, l), s = vt(a, n, l, 1), Gs(s.d, i = d, v))
    do
      if (l += 10, a = wo(f, l), n = r ? gc(h, l + 10) : wo(e, l), s = vt(a, n, l, 1), !o) {
        +er(s.d).slice(i + 1, i + 15) + 1 == 1e14 && (s = he(s, d + 1, 0));
        break;
      }
    while (Gs(s.d, i += 10, v));
  return be = !0, he(s, d, v);
};
Y.minus = Y.sub = function(e) {
  var r, t, n, i, o, a, l, s, f, h, d, v, g = this, y = g.constructor;
  if (e = new y(e), !g.d || !e.d)
    return !g.s || !e.s ? e = new y(NaN) : g.d ? e.s = -e.s : e = new y(e.d || g.s !== e.s ? g : NaN), e;
  if (g.s != e.s)
    return e.s = -e.s, g.plus(e);
  if (f = g.d, v = e.d, l = y.precision, s = y.rounding, !f[0] || !v[0]) {
    if (v[0]) e.s = -e.s;
    else if (f[0]) e = new y(g);
    else return new y(s === 3 ? -0 : 0);
    return be ? he(e, l, s) : e;
  }
  if (t = hr(e.e / pe), h = hr(g.e / pe), f = f.slice(), o = h - t, o) {
    for (d = o < 0, d ? (r = f, o = -o, a = v.length) : (r = v, t = h, a = f.length), n = Math.max(Math.ceil(l / pe), a) + 2, o > n && (o = n, r.length = 1), r.reverse(), n = o; n--; ) r.push(0);
    r.reverse();
  } else {
    for (n = f.length, a = v.length, d = n < a, d && (a = n), n = 0; n < a; n++)
      if (f[n] != v[n]) {
        d = f[n] < v[n];
        break;
      }
    o = 0;
  }
  for (d && (r = f, f = v, v = r, e.s = -e.s), a = f.length, n = v.length - a; n > 0; --n) f[a++] = 0;
  for (n = v.length; n > o; ) {
    if (f[--n] < v[n]) {
      for (i = n; i && f[--i] === 0; ) f[i] = Vn - 1;
      --f[i], f[n] += Vn;
    }
    f[n] -= v[n];
  }
  for (; f[--a] === 0; ) f.pop();
  for (; f[0] === 0; f.shift()) --t;
  return f[0] ? (e.d = f, e.e = sh(f, t), be ? he(e, l, s) : e) : new y(s === 3 ? -0 : 0);
};
Y.modulo = Y.mod = function(e) {
  var r, t = this, n = t.constructor;
  return e = new n(e), !t.d || !e.s || e.d && !e.d[0] ? new n(NaN) : !e.d || t.d && !t.d[0] ? he(new n(t), n.precision, n.rounding) : (be = !1, n.modulo == 9 ? (r = vt(t, e.abs(), 0, 3, 1), r.s *= e.s) : r = vt(t, e, 0, n.modulo, 1), r = r.times(e), be = !0, t.minus(r));
};
Y.naturalExponential = Y.exp = function() {
  return Lp(this);
};
Y.naturalLogarithm = Y.ln = function() {
  return wo(this);
};
Y.negated = Y.neg = function() {
  var e = new this.constructor(this);
  return e.s = -e.s, he(e);
};
Y.plus = Y.add = function(e) {
  var r, t, n, i, o, a, l, s, f, h, d = this, v = d.constructor;
  if (e = new v(e), !d.d || !e.d)
    return !d.s || !e.s ? e = new v(NaN) : d.d || (e = new v(e.d || d.s === e.s ? d : NaN)), e;
  if (d.s != e.s)
    return e.s = -e.s, d.minus(e);
  if (f = d.d, h = e.d, l = v.precision, s = v.rounding, !f[0] || !h[0])
    return h[0] || (e = new v(d)), be ? he(e, l, s) : e;
  if (o = hr(d.e / pe), n = hr(e.e / pe), f = f.slice(), i = o - n, i) {
    for (i < 0 ? (t = f, i = -i, a = h.length) : (t = h, n = o, a = f.length), o = Math.ceil(l / pe), a = o > a ? o + 1 : a + 1, i > a && (i = a, t.length = 1), t.reverse(); i--; ) t.push(0);
    t.reverse();
  }
  for (a = f.length, i = h.length, a - i < 0 && (i = a, t = h, h = f, f = t), r = 0; i; )
    r = (f[--i] = f[i] + h[i] + r) / Vn | 0, f[i] %= Vn;
  for (r && (f.unshift(r), ++n), a = f.length; f[--a] == 0; ) f.pop();
  return e.d = f, e.e = sh(f, n), be ? he(e, l, s) : e;
};
Y.precision = Y.sd = function(e) {
  var r, t = this;
  if (e !== void 0 && e !== !!e && e !== 1 && e !== 0) throw Error(Io + e);
  return t.d ? (r = qE(t.d), e && t.e + 1 > r && (r = t.e + 1)) : r = NaN, r;
};
Y.round = function() {
  var e = this, r = e.constructor;
  return he(new r(e), e.e + 1, r.rounding);
};
Y.sine = Y.sin = function() {
  var e, r, t = this, n = t.constructor;
  return t.isFinite() ? t.isZero() ? new n(t) : (e = n.precision, r = n.rounding, n.precision = e + Math.max(t.e, t.sd()) + pe, n.rounding = 1, t = VJ(n, QE(n, t)), n.precision = e, n.rounding = r, he(zi > 2 ? t.neg() : t, e, r, !0)) : new n(NaN);
};
Y.squareRoot = Y.sqrt = function() {
  var e, r, t, n, i, o, a = this, l = a.d, s = a.e, f = a.s, h = a.constructor;
  if (f !== 1 || !l || !l[0])
    return new h(!f || f < 0 && (!l || l[0]) ? NaN : l ? a : 1 / 0);
  for (be = !1, f = Math.sqrt(+a), f == 0 || f == 1 / 0 ? (r = er(l), (r.length + s) % 2 == 0 && (r += "0"), f = Math.sqrt(r), s = hr((s + 1) / 2) - (s < 0 || s % 2), f == 1 / 0 ? r = "5e" + s : (r = f.toExponential(), r = r.slice(0, r.indexOf("e") + 1) + s), n = new h(r)) : n = new h(f.toString()), t = (s = h.precision) + 3; ; )
    if (o = n, n = o.plus(vt(a, o, t + 2, 1)).times(0.5), er(o.d).slice(0, t) === (r = er(n.d)).slice(0, t))
      if (r = r.slice(t - 3, t + 1), r == "9999" || !i && r == "4999") {
        if (!i && (he(o, s + 1, 0), o.times(o).eq(a))) {
          n = o;
          break;
        }
        t += 4, i = 1;
      } else {
        (!+r || !+r.slice(1) && r.charAt(0) == "5") && (he(n, s + 1, 1), e = !n.times(n).eq(a));
        break;
      }
  return be = !0, he(n, s, h.rounding, e);
};
Y.tangent = Y.tan = function() {
  var e, r, t = this, n = t.constructor;
  return t.isFinite() ? t.isZero() ? new n(t) : (e = n.precision, r = n.rounding, n.precision = e + 10, n.rounding = 1, t = t.sin(), t.s = 1, t = vt(t, new n(1).minus(t.times(t)).sqrt(), e + 10, 0), n.precision = e, n.rounding = r, he(zi == 2 || zi == 4 ? t.neg() : t, e, r, !0)) : new n(NaN);
};
Y.times = Y.mul = function(e) {
  var r, t, n, i, o, a, l, s, f, h = this, d = h.constructor, v = h.d, g = (e = new d(e)).d;
  if (e.s *= h.s, !v || !v[0] || !g || !g[0])
    return new d(!e.s || v && !v[0] && !g || g && !g[0] && !v ? NaN : !v || !g ? e.s / 0 : e.s * 0);
  for (t = hr(h.e / pe) + hr(e.e / pe), s = v.length, f = g.length, s < f && (o = v, v = g, g = o, a = s, s = f, f = a), o = [], a = s + f, n = a; n--; ) o.push(0);
  for (n = f; --n >= 0; ) {
    for (r = 0, i = s + n; i > n; )
      l = o[i] + g[n] * v[i - n - 1] + r, o[i--] = l % Vn | 0, r = l / Vn | 0;
    o[i] = (o[i] + r) % Vn | 0;
  }
  for (; !o[--a]; ) o.pop();
  return r ? ++t : o.shift(), e.d = o, e.e = sh(o, t), be ? he(e, d.precision, d.rounding) : e;
};
Y.toBinary = function(e, r) {
  return $g(this, 2, e, r);
};
Y.toDecimalPlaces = Y.toDP = function(e, r) {
  var t = this, n = t.constructor;
  return t = new n(t), e === void 0 ? t : (kr(e, 0, Ho), r === void 0 ? r = n.rounding : kr(r, 0, 8), he(t, e + t.e + 1, r));
};
Y.toExponential = function(e, r) {
  var t, n = this, i = n.constructor;
  return e === void 0 ? t = Ci(n, !0) : (kr(e, 0, Ho), r === void 0 ? r = i.rounding : kr(r, 0, 8), n = he(new i(n), e + 1, r), t = Ci(n, !0, e + 1)), n.isNeg() && !n.isZero() ? "-" + t : t;
};
Y.toFixed = function(e, r) {
  var t, n, i = this, o = i.constructor;
  return e === void 0 ? t = Ci(i) : (kr(e, 0, Ho), r === void 0 ? r = o.rounding : kr(r, 0, 8), n = he(new o(i), e + i.e + 1, r), t = Ci(n, !1, e + n.e + 1)), i.isNeg() && !i.isZero() ? "-" + t : t;
};
Y.toFraction = function(e) {
  var r, t, n, i, o, a, l, s, f, h, d, v, g = this, y = g.d, C = g.constructor;
  if (!y) return new C(g);
  if (f = t = new C(1), n = s = new C(0), r = new C(n), o = r.e = qE(y) - g.e - 1, a = o % pe, r.d[0] = Wt(10, a < 0 ? pe + a : a), e == null)
    e = o > 0 ? r : f;
  else {
    if (l = new C(e), !l.isInt() || l.lt(f)) throw Error(Io + l);
    e = l.gt(r) ? o > 0 ? r : f : l;
  }
  for (be = !1, l = new C(er(y)), h = C.precision, C.precision = o = y.length * pe * 2; d = vt(l, r, 0, 1, 1), i = t.plus(d.times(n)), i.cmp(e) != 1; )
    t = n, n = i, i = f, f = s.plus(d.times(i)), s = i, i = r, r = l.minus(d.times(i)), l = i;
  return i = vt(e.minus(t), n, 0, 1, 1), s = s.plus(i.times(f)), t = t.plus(i.times(n)), s.s = f.s = g.s, v = vt(f, n, o, 1).minus(g).abs().cmp(vt(s, t, o, 1).minus(g).abs()) < 1 ? [f, n] : [s, t], C.precision = h, be = !0, v;
};
Y.toHexadecimal = Y.toHex = function(e, r) {
  return $g(this, 16, e, r);
};
Y.toNearest = function(e, r) {
  var t = this, n = t.constructor;
  if (t = new n(t), e == null) {
    if (!t.d) return t;
    e = new n(1), r = n.rounding;
  } else {
    if (e = new n(e), r === void 0 ? r = n.rounding : kr(r, 0, 8), !t.d) return e.s ? t : e;
    if (!e.d)
      return e.s && (e.s = t.s), e;
  }
  return e.d[0] ? (be = !1, t = vt(t, e, 0, r, 1).times(e), be = !0, he(t)) : (e.s = t.s, t = e), t;
};
Y.toNumber = function() {
  return +this;
};
Y.toOctal = function(e, r) {
  return $g(this, 8, e, r);
};
Y.toPower = Y.pow = function(e) {
  var r, t, n, i, o, a, l = this, s = l.constructor, f = +(e = new s(e));
  if (!l.d || !e.d || !l.d[0] || !e.d[0]) return new s(Wt(+l, f));
  if (l = new s(l), l.eq(1)) return l;
  if (n = s.precision, o = s.rounding, e.eq(1)) return he(l, n, o);
  if (r = hr(e.e / pe), r >= e.d.length - 1 && (t = f < 0 ? -f : f) <= GJ)
    return i = KE(s, l, t, n), e.s < 0 ? new s(1).div(i) : he(i, n, o);
  if (a = l.s, a < 0) {
    if (r < e.d.length - 1) return new s(NaN);
    if (e.d[r] & 1 || (a = 1), l.e == 0 && l.d[0] == 1 && l.d.length == 1)
      return l.s = a, l;
  }
  return t = Wt(+l, f), r = t == 0 || !isFinite(t) ? hr(f * (Math.log("0." + er(l.d)) / Math.LN10 + l.e + 1)) : new s(t + "").e, r > s.maxE + 1 || r < s.minE - 1 ? new s(r > 0 ? a / 0 : 0) : (be = !1, s.rounding = l.s = 1, t = Math.min(12, (r + "").length), i = Lp(e.times(wo(l, n + t)), n), i.d && (i = he(i, n + 5, 1), Gs(i.d, n, o) && (r = n + 10, i = he(Lp(e.times(wo(l, r + t)), r), r + 5, 1), +er(i.d).slice(n + 1, n + 15) + 1 == 1e14 && (i = he(i, n + 1, 0)))), i.s = a, be = !0, s.rounding = o, he(i, n, o));
};
Y.toPrecision = function(e, r) {
  var t, n = this, i = n.constructor;
  return e === void 0 ? t = Ci(n, n.e <= i.toExpNeg || n.e >= i.toExpPos) : (kr(e, 1, Ho), r === void 0 ? r = i.rounding : kr(r, 0, 8), n = he(new i(n), e, r), t = Ci(n, e <= n.e || n.e <= i.toExpNeg, e)), n.isNeg() && !n.isZero() ? "-" + t : t;
};
Y.toSignificantDigits = Y.toSD = function(e, r) {
  var t = this, n = t.constructor;
  return e === void 0 ? (e = n.precision, r = n.rounding) : (kr(e, 1, Ho), r === void 0 ? r = n.rounding : kr(r, 0, 8)), he(new n(t), e, r);
};
Y.toString = function() {
  var e = this, r = e.constructor, t = Ci(e, e.e <= r.toExpNeg || e.e >= r.toExpPos);
  return e.isNeg() && !e.isZero() ? "-" + t : t;
};
Y.truncated = Y.trunc = function() {
  return he(new this.constructor(this), this.e + 1, 1);
};
Y.valueOf = Y.toJSON = function() {
  var e = this, r = e.constructor, t = Ci(e, e.e <= r.toExpNeg || e.e >= r.toExpPos);
  return e.isNeg() ? "-" + t : t;
};
function er(e) {
  var r, t, n, i = e.length - 1, o = "", a = e[0];
  if (i > 0) {
    for (o += a, r = 1; r < i; r++)
      n = e[r] + "", t = pe - n.length, t && (o += mo(t)), o += n;
    a = e[r], n = a + "", t = pe - n.length, t && (o += mo(t));
  } else if (a === 0)
    return "0";
  for (; a % 10 === 0; ) a /= 10;
  return o + a;
}
function kr(e, r, t) {
  if (e !== ~~e || e < r || e > t)
    throw Error(Io + e);
}
function Gs(e, r, t, n) {
  var i, o, a, l;
  for (o = e[0]; o >= 10; o /= 10) --r;
  return --r < 0 ? (r += pe, i = 0) : (i = Math.ceil((r + 1) / pe), r %= pe), o = Wt(10, pe - r), l = e[i] % o | 0, n == null ? r < 3 ? (r == 0 ? l = l / 100 | 0 : r == 1 && (l = l / 10 | 0), a = t < 4 && l == 99999 || t > 3 && l == 49999 || l == 5e4 || l == 0) : a = (t < 4 && l + 1 == o || t > 3 && l + 1 == o / 2) && (e[i + 1] / o / 100 | 0) == Wt(10, r - 2) - 1 || (l == o / 2 || l == 0) && (e[i + 1] / o / 100 | 0) == 0 : r < 4 ? (r == 0 ? l = l / 1e3 | 0 : r == 1 ? l = l / 100 | 0 : r == 2 && (l = l / 10 | 0), a = (n || t < 4) && l == 9999 || !n && t > 3 && l == 4999) : a = ((n || t < 4) && l + 1 == o || !n && t > 3 && l + 1 == o / 2) && (e[i + 1] / o / 1e3 | 0) == Wt(10, r - 3) - 1, a;
}
function Pf(e, r, t) {
  for (var n, i = [0], o, a = 0, l = e.length; a < l; ) {
    for (o = i.length; o--; ) i[o] *= r;
    for (i[0] += bp.indexOf(e.charAt(a++)), n = 0; n < i.length; n++)
      i[n] > t - 1 && (i[n + 1] === void 0 && (i[n + 1] = 0), i[n + 1] += i[n] / t | 0, i[n] %= t);
  }
  return i.reverse();
}
function YJ(e, r) {
  var t, n, i;
  if (r.isZero()) return r;
  n = r.d.length, n < 32 ? (t = Math.ceil(n / 3), i = (1 / uh(4, t)).toString()) : (t = 16, i = "2.3283064365386962890625e-10"), e.precision += t, r = _l(e, 1, r.times(i), new e(1));
  for (var o = t; o--; ) {
    var a = r.times(r);
    r = a.times(a).minus(a).times(8).plus(1);
  }
  return e.precision -= t, r;
}
var vt = /* @__PURE__ */ function() {
  function e(n, i, o) {
    var a, l = 0, s = n.length;
    for (n = n.slice(); s--; )
      a = n[s] * i + l, n[s] = a % o | 0, l = a / o | 0;
    return l && n.unshift(l), n;
  }
  function r(n, i, o, a) {
    var l, s;
    if (o != a)
      s = o > a ? 1 : -1;
    else
      for (l = s = 0; l < o; l++)
        if (n[l] != i[l]) {
          s = n[l] > i[l] ? 1 : -1;
          break;
        }
    return s;
  }
  function t(n, i, o, a) {
    for (var l = 0; o--; )
      n[o] -= l, l = n[o] < i[o] ? 1 : 0, n[o] = l * a + n[o] - i[o];
    for (; !n[0] && n.length > 1; ) n.shift();
  }
  return function(n, i, o, a, l, s) {
    var f, h, d, v, g, y, C, _, w, x, S, T, R, B, $, N, z, V, X, Z, ne = n.constructor, se = n.s == i.s ? 1 : -1, q = n.d, ee = i.d;
    if (!q || !q[0] || !ee || !ee[0])
      return new ne(
        // Return NaN if either NaN, or both Infinity or 0.
        !n.s || !i.s || (q ? ee && q[0] == ee[0] : !ee) ? NaN : (
          // Return ±0 if x is 0 or y is ±Infinity, or return ±Infinity as y is 0.
          q && q[0] == 0 || !ee ? se * 0 : se / 0
        )
      );
    for (s ? (g = 1, h = n.e - i.e) : (s = Vn, g = pe, h = hr(n.e / g) - hr(i.e / g)), X = ee.length, z = q.length, w = new ne(se), x = w.d = [], d = 0; ee[d] == (q[d] || 0); d++) ;
    if (ee[d] > (q[d] || 0) && h--, o == null ? (B = o = ne.precision, a = ne.rounding) : l ? B = o + (n.e - i.e) + 1 : B = o, B < 0)
      x.push(1), y = !0;
    else {
      if (B = B / g + 2 | 0, d = 0, X == 1) {
        for (v = 0, ee = ee[0], B++; (d < z || v) && B--; d++)
          $ = v * s + (q[d] || 0), x[d] = $ / ee | 0, v = $ % ee | 0;
        y = v || d < z;
      } else {
        for (v = s / (ee[0] + 1) | 0, v > 1 && (ee = e(ee, v, s), q = e(q, v, s), X = ee.length, z = q.length), N = X, S = q.slice(0, X), T = S.length; T < X; ) S[T++] = 0;
        Z = ee.slice(), Z.unshift(0), V = ee[0], ee[1] >= s / 2 && ++V;
        do
          v = 0, f = r(ee, S, X, T), f < 0 ? (R = S[0], X != T && (R = R * s + (S[1] || 0)), v = R / V | 0, v > 1 ? (v >= s && (v = s - 1), C = e(ee, v, s), _ = C.length, T = S.length, f = r(C, S, _, T), f == 1 && (v--, t(C, X < _ ? Z : ee, _, s))) : (v == 0 && (f = v = 1), C = ee.slice()), _ = C.length, _ < T && C.unshift(0), t(S, C, T, s), f == -1 && (T = S.length, f = r(ee, S, X, T), f < 1 && (v++, t(S, X < T ? Z : ee, T, s))), T = S.length) : f === 0 && (v++, S = [0]), x[d++] = v, f && S[0] ? S[T++] = q[N] || 0 : (S = [q[N]], T = 1);
        while ((N++ < z || S[0] !== void 0) && B--);
        y = S[0] !== void 0;
      }
      x[0] || x.shift();
    }
    if (g == 1)
      w.e = h, GE = y;
    else {
      for (d = 1, v = x[0]; v >= 10; v /= 10) d++;
      w.e = d + h * g - 1, he(w, l ? o + w.e + 1 : o, a, y);
    }
    return w;
  };
}();
function he(e, r, t, n) {
  var i, o, a, l, s, f, h, d, v, g = e.constructor;
  e: if (r != null) {
    if (d = e.d, !d) return e;
    for (i = 1, l = d[0]; l >= 10; l /= 10) i++;
    if (o = r - i, o < 0)
      o += pe, a = r, h = d[v = 0], s = h / Wt(10, i - a - 1) % 10 | 0;
    else if (v = Math.ceil((o + 1) / pe), l = d.length, v >= l)
      if (n) {
        for (; l++ <= v; ) d.push(0);
        h = s = 0, i = 1, o %= pe, a = o - pe + 1;
      } else
        break e;
    else {
      for (h = l = d[v], i = 1; l >= 10; l /= 10) i++;
      o %= pe, a = o - pe + i, s = a < 0 ? 0 : h / Wt(10, i - a - 1) % 10 | 0;
    }
    if (n = n || r < 0 || d[v + 1] !== void 0 || (a < 0 ? h : h % Wt(10, i - a - 1)), f = t < 4 ? (s || n) && (t == 0 || t == (e.s < 0 ? 3 : 2)) : s > 5 || s == 5 && (t == 4 || n || t == 6 && // Check whether the digit to the left of the rounding digit is odd.
    (o > 0 ? a > 0 ? h / Wt(10, i - a) : 0 : d[v - 1]) % 10 & 1 || t == (e.s < 0 ? 8 : 7)), r < 1 || !d[0])
      return d.length = 0, f ? (r -= e.e + 1, d[0] = Wt(10, (pe - r % pe) % pe), e.e = -r || 0) : d[0] = e.e = 0, e;
    if (o == 0 ? (d.length = v, l = 1, v--) : (d.length = v + 1, l = Wt(10, pe - o), d[v] = a > 0 ? (h / Wt(10, i - a) % Wt(10, a) | 0) * l : 0), f)
      for (; ; )
        if (v == 0) {
          for (o = 1, a = d[0]; a >= 10; a /= 10) o++;
          for (a = d[0] += l, l = 1; a >= 10; a /= 10) l++;
          o != l && (e.e++, d[0] == Vn && (d[0] = 1));
          break;
        } else {
          if (d[v] += l, d[v] != Vn) break;
          d[v--] = 0, l = 1;
        }
    for (o = d.length; d[--o] === 0; ) d.pop();
  }
  return be && (e.e > g.maxE ? (e.d = null, e.e = NaN) : e.e < g.minE && (e.e = 0, e.d = [0])), e;
}
function Ci(e, r, t) {
  if (!e.isFinite()) return ZE(e);
  var n, i = e.e, o = er(e.d), a = o.length;
  return r ? (t && (n = t - a) > 0 ? o = o.charAt(0) + "." + o.slice(1) + mo(n) : a > 1 && (o = o.charAt(0) + "." + o.slice(1)), o = o + (e.e < 0 ? "e" : "e+") + e.e) : i < 0 ? (o = "0." + mo(-i - 1) + o, t && (n = t - a) > 0 && (o += mo(n))) : i >= a ? (o += mo(i + 1 - a), t && (n = t - i - 1) > 0 && (o = o + "." + mo(n))) : ((n = i + 1) < a && (o = o.slice(0, n) + "." + o.slice(n)), t && (n = t - a) > 0 && (i + 1 === a && (o += "."), o += mo(n))), o;
}
function sh(e, r) {
  var t = e[0];
  for (r *= pe; t >= 10; t /= 10) r++;
  return r;
}
function gc(e, r, t) {
  if (r > UJ)
    throw be = !0, t && (e.precision = t), Error(UE);
  return he(new e(vc), r, 1, !0);
}
function Gn(e, r, t) {
  if (r > Ep) throw Error(UE);
  return he(new e(pc), r, t, !0);
}
function qE(e) {
  var r = e.length - 1, t = r * pe + 1;
  if (r = e[r], r) {
    for (; r % 10 == 0; r /= 10) t--;
    for (r = e[0]; r >= 10; r /= 10) t++;
  }
  return t;
}
function mo(e) {
  for (var r = ""; e--; ) r += "0";
  return r;
}
function KE(e, r, t, n) {
  var i, o = new e(1), a = Math.ceil(n / pe + 4);
  for (be = !1; ; ) {
    if (t % 2 && (o = o.times(r), Fw(o.d, a) && (i = !0)), t = hr(t / 2), t === 0) {
      t = o.d.length - 1, i && o.d[t] === 0 && ++o.d[t];
      break;
    }
    r = r.times(r), Fw(r.d, a);
  }
  return be = !0, o;
}
function $w(e) {
  return e.d[e.d.length - 1] & 1;
}
function jE(e, r, t) {
  for (var n, i = new e(r[0]), o = 0; ++o < r.length; )
    if (n = new e(r[o]), n.s)
      i[t](n) && (i = n);
    else {
      i = n;
      break;
    }
  return i;
}
function Lp(e, r) {
  var t, n, i, o, a, l, s, f = 0, h = 0, d = 0, v = e.constructor, g = v.rounding, y = v.precision;
  if (!e.d || !e.d[0] || e.e > 17)
    return new v(e.d ? e.d[0] ? e.s < 0 ? 0 : 1 / 0 : 1 : e.s ? e.s < 0 ? 0 : e : NaN);
  for (r == null ? (be = !1, s = y) : s = r, l = new v(0.03125); e.e > -2; )
    e = e.times(l), d += 5;
  for (n = Math.log(Wt(2, d)) / Math.LN10 * 2 + 5 | 0, s += n, t = o = a = new v(1), v.precision = s; ; ) {
    if (o = he(o.times(e), s, 1), t = t.times(++h), l = a.plus(vt(o, t, s, 1)), er(l.d).slice(0, s) === er(a.d).slice(0, s)) {
      for (i = d; i--; ) a = he(a.times(a), s, 1);
      if (r == null)
        if (f < 3 && Gs(a.d, s - n, g, f))
          v.precision = s += 10, t = o = l = new v(1), h = 0, f++;
        else
          return he(a, v.precision = y, g, be = !0);
      else
        return v.precision = y, a;
    }
    a = l;
  }
}
function wo(e, r) {
  var t, n, i, o, a, l, s, f, h, d, v, g = 1, y = 10, C = e, _ = C.d, w = C.constructor, x = w.rounding, S = w.precision;
  if (C.s < 0 || !_ || !_[0] || !C.e && _[0] == 1 && _.length == 1)
    return new w(_ && !_[0] ? -1 / 0 : C.s != 1 ? NaN : _ ? 0 : C);
  if (r == null ? (be = !1, h = S) : h = r, w.precision = h += y, t = er(_), n = t.charAt(0), Math.abs(o = C.e) < 15e14) {
    for (; n < 7 && n != 1 || n == 1 && t.charAt(1) > 3; )
      C = C.times(e), t = er(C.d), n = t.charAt(0), g++;
    o = C.e, n > 1 ? (C = new w("0." + t), o++) : C = new w(n + "." + t.slice(1));
  } else
    return f = gc(w, h + 2, S).times(o + ""), C = wo(new w(n + "." + t.slice(1)), h - y).plus(f), w.precision = S, r == null ? he(C, S, x, be = !0) : C;
  for (d = C, s = a = C = vt(C.minus(1), C.plus(1), h, 1), v = he(C.times(C), h, 1), i = 3; ; ) {
    if (a = he(a.times(v), h, 1), f = s.plus(vt(a, new w(i), h, 1)), er(f.d).slice(0, h) === er(s.d).slice(0, h))
      if (s = s.times(2), o !== 0 && (s = s.plus(gc(w, h + 2, S).times(o + ""))), s = vt(s, new w(g), h, 1), r == null)
        if (Gs(s.d, h - y, x, l))
          w.precision = h += y, f = a = C = vt(d.minus(1), d.plus(1), h, 1), v = he(C.times(C), h, 1), i = l = 1;
        else
          return he(s, w.precision = S, x, be = !0);
      else
        return w.precision = S, s;
    s = f, i += 2;
  }
}
function ZE(e) {
  return String(e.s * e.s / 0);
}
function Ap(e, r) {
  var t, n, i;
  for ((t = r.indexOf(".")) > -1 && (r = r.replace(".", "")), (n = r.search(/e/i)) > 0 ? (t < 0 && (t = n), t += +r.slice(n + 1), r = r.substring(0, n)) : t < 0 && (t = r.length), n = 0; r.charCodeAt(n) === 48; n++) ;
  for (i = r.length; r.charCodeAt(i - 1) === 48; --i) ;
  if (r = r.slice(n, i), r) {
    if (i -= n, e.e = t = t - n - 1, e.d = [], n = (t + 1) % pe, t < 0 && (n += pe), n < i) {
      for (n && e.d.push(+r.slice(0, n)), i -= pe; n < i; ) e.d.push(+r.slice(n, n += pe));
      r = r.slice(n), n = pe - r.length;
    } else
      n -= i;
    for (; n--; ) r += "0";
    e.d.push(+r), be && (e.e > e.constructor.maxE ? (e.d = null, e.e = NaN) : e.e < e.constructor.minE && (e.e = 0, e.d = [0]));
  } else
    e.e = 0, e.d = [0];
  return e;
}
function XJ(e, r) {
  var t, n, i, o, a, l, s, f, h;
  if (r.indexOf("_") > -1) {
    if (r = r.replace(/(\d)_(?=\d)/g, "$1"), VE.test(r)) return Ap(e, r);
  } else if (r === "Infinity" || r === "NaN")
    return +r || (e.s = NaN), e.e = NaN, e.d = null, e;
  if (WJ.test(r))
    t = 16, r = r.toLowerCase();
  else if (zJ.test(r))
    t = 2;
  else if (kJ.test(r))
    t = 8;
  else
    throw Error(Io + r);
  for (o = r.search(/p/i), o > 0 ? (s = +r.slice(o + 1), r = r.substring(2, o)) : r = r.slice(2), o = r.indexOf("."), a = o >= 0, n = e.constructor, a && (r = r.replace(".", ""), l = r.length, o = l - o, i = KE(n, new n(t), o, o * 2)), f = Pf(r, t, Vn), h = f.length - 1, o = h; f[o] === 0; --o) f.pop();
  return o < 0 ? new n(e.s * 0) : (e.e = sh(f, h), e.d = f, be = !1, a && (e = vt(e, i, l * 4)), s && (e = e.times(Math.abs(s) < 54 ? Wt(2, s) : jn.pow(2, s))), be = !0, e);
}
function VJ(e, r) {
  var t, n = r.d.length;
  if (n < 3)
    return r.isZero() ? r : _l(e, 2, r, r);
  t = 1.4 * Math.sqrt(n), t = t > 16 ? 16 : t | 0, r = r.times(1 / uh(5, t)), r = _l(e, 2, r, r);
  for (var i, o = new e(5), a = new e(16), l = new e(20); t--; )
    i = r.times(r), r = r.times(o.plus(i.times(a.times(i).minus(l))));
  return r;
}
function _l(e, r, t, n, i) {
  var o, a, l, s, f = e.precision, h = Math.ceil(f / pe);
  for (be = !1, s = t.times(t), l = new e(n); ; ) {
    if (a = vt(l.times(s), new e(r++ * r++), f, 1), l = i ? n.plus(a) : n.minus(a), n = vt(a.times(s), new e(r++ * r++), f, 1), a = l.plus(n), a.d[h] !== void 0) {
      for (o = h; a.d[o] === l.d[o] && o--; ) ;
      if (o == -1) break;
    }
    o = l, l = n, n = a, a = o;
  }
  return be = !0, a.d.length = h + 1, a;
}
function uh(e, r) {
  for (var t = e; --r; ) t *= e;
  return t;
}
function QE(e, r) {
  var t, n = r.s < 0, i = Gn(e, e.precision, 1), o = i.times(0.5);
  if (r = r.abs(), r.lte(o))
    return zi = n ? 4 : 1, r;
  if (t = r.divToInt(i), t.isZero())
    zi = n ? 3 : 2;
  else {
    if (r = r.minus(t.times(i)), r.lte(o))
      return zi = $w(t) ? n ? 2 : 3 : n ? 4 : 1, r;
    zi = $w(t) ? n ? 1 : 4 : n ? 3 : 2;
  }
  return r.minus(i).abs();
}
function $g(e, r, t, n) {
  var i, o, a, l, s, f, h, d, v, g = e.constructor, y = t !== void 0;
  if (y ? (kr(t, 1, Ho), n === void 0 ? n = g.rounding : kr(n, 0, 8)) : (t = g.precision, n = g.rounding), !e.isFinite())
    h = ZE(e);
  else {
    for (h = Ci(e), a = h.indexOf("."), y ? (i = 2, r == 16 ? t = t * 4 - 3 : r == 8 && (t = t * 3 - 2)) : i = r, a >= 0 && (h = h.replace(".", ""), v = new g(1), v.e = h.length - a, v.d = Pf(Ci(v), 10, i), v.e = v.d.length), d = Pf(h, 10, i), o = s = d.length; d[--s] == 0; ) d.pop();
    if (!d[0])
      h = y ? "0p+0" : "0";
    else {
      if (a < 0 ? o-- : (e = new g(e), e.d = d, e.e = o, e = vt(e, v, t, n, 0, i), d = e.d, o = e.e, f = GE), a = d[t], l = i / 2, f = f || d[t + 1] !== void 0, f = n < 4 ? (a !== void 0 || f) && (n === 0 || n === (e.s < 0 ? 3 : 2)) : a > l || a === l && (n === 4 || f || n === 6 && d[t - 1] & 1 || n === (e.s < 0 ? 8 : 7)), d.length = t, f)
        for (; ++d[--t] > i - 1; )
          d[t] = 0, t || (++o, d.unshift(1));
      for (s = d.length; !d[s - 1]; --s) ;
      for (a = 0, h = ""; a < s; a++) h += bp.charAt(d[a]);
      if (y) {
        if (s > 1)
          if (r == 16 || r == 8) {
            for (a = r == 16 ? 4 : 3, --s; s % a; s++) h += "0";
            for (d = Pf(h, i, r), s = d.length; !d[s - 1]; --s) ;
            for (a = 1, h = "1."; a < s; a++) h += bp.charAt(d[a]);
          } else
            h = h.charAt(0) + "." + h.slice(1);
        h = h + (o < 0 ? "p" : "p+") + o;
      } else if (o < 0) {
        for (; ++o; ) h = "0" + h;
        h = "0." + h;
      } else if (++o > s) for (o -= s; o--; ) h += "0";
      else o < s && (h = h.slice(0, o) + "." + h.slice(o));
    }
    h = (r == 16 ? "0x" : r == 2 ? "0b" : r == 8 ? "0o" : "") + h;
  }
  return e.s < 0 ? "-" + h : h;
}
function Fw(e, r) {
  if (e.length > r)
    return e.length = r, !0;
}
function qJ(e) {
  return new this(e).abs();
}
function KJ(e) {
  return new this(e).acos();
}
function jJ(e) {
  return new this(e).acosh();
}
function ZJ(e, r) {
  return new this(e).plus(r);
}
function QJ(e) {
  return new this(e).asin();
}
function JJ(e) {
  return new this(e).asinh();
}
function eee(e) {
  return new this(e).atan();
}
function tee(e) {
  return new this(e).atanh();
}
function ree(e, r) {
  e = new this(e), r = new this(r);
  var t, n = this.precision, i = this.rounding, o = n + 4;
  return !e.s || !r.s ? t = new this(NaN) : !e.d && !r.d ? (t = Gn(this, o, 1).times(r.s > 0 ? 0.25 : 0.75), t.s = e.s) : !r.d || e.isZero() ? (t = r.s < 0 ? Gn(this, n, i) : new this(0), t.s = e.s) : !e.d || r.isZero() ? (t = Gn(this, o, 1).times(0.5), t.s = e.s) : r.s < 0 ? (this.precision = o, this.rounding = 1, t = this.atan(vt(e, r, o, 1)), r = Gn(this, o, 1), this.precision = n, this.rounding = i, t = e.s < 0 ? t.minus(r) : t.plus(r)) : t = this.atan(vt(e, r, o, 1)), t;
}
function nee(e) {
  return new this(e).cbrt();
}
function iee(e) {
  return he(e = new this(e), e.e + 1, 2);
}
function oee(e, r, t) {
  return new this(e).clamp(r, t);
}
function aee(e) {
  if (!e || typeof e != "object") throw Error(lh + "Object expected");
  var r, t, n, i = e.defaults === !0, o = [
    "precision",
    1,
    Ho,
    "rounding",
    0,
    8,
    "toExpNeg",
    -nl,
    0,
    "toExpPos",
    0,
    nl,
    "maxE",
    0,
    nl,
    "minE",
    -nl,
    0,
    "modulo",
    0,
    9
  ];
  for (r = 0; r < o.length; r += 3)
    if (t = o[r], i && (this[t] = Tp[t]), (n = e[t]) !== void 0)
      if (hr(n) === n && n >= o[r + 1] && n <= o[r + 2]) this[t] = n;
      else throw Error(Io + t + ": " + n);
  if (t = "crypto", i && (this[t] = Tp[t]), (n = e[t]) !== void 0)
    if (n === !0 || n === !1 || n === 0 || n === 1)
      if (n)
        if (typeof crypto < "u" && crypto && (crypto.getRandomValues || crypto.randomBytes))
          this[t] = !0;
        else
          throw Error(YE);
      else
        this[t] = !1;
    else
      throw Error(Io + t + ": " + n);
  return this;
}
function lee(e) {
  return new this(e).cos();
}
function see(e) {
  return new this(e).cosh();
}
function JE(e) {
  var r, t, n;
  function i(o) {
    var a, l, s, f = this;
    if (!(f instanceof i)) return new i(o);
    if (f.constructor = i, Pw(o)) {
      f.s = o.s, be ? !o.d || o.e > i.maxE ? (f.e = NaN, f.d = null) : o.e < i.minE ? (f.e = 0, f.d = [0]) : (f.e = o.e, f.d = o.d.slice()) : (f.e = o.e, f.d = o.d ? o.d.slice() : o.d);
      return;
    }
    if (s = typeof o, s === "number") {
      if (o === 0) {
        f.s = 1 / o < 0 ? -1 : 1, f.e = 0, f.d = [0];
        return;
      }
      if (o < 0 ? (o = -o, f.s = -1) : f.s = 1, o === ~~o && o < 1e7) {
        for (a = 0, l = o; l >= 10; l /= 10) a++;
        be ? a > i.maxE ? (f.e = NaN, f.d = null) : a < i.minE ? (f.e = 0, f.d = [0]) : (f.e = a, f.d = [o]) : (f.e = a, f.d = [o]);
        return;
      } else if (o * 0 !== 0) {
        o || (f.s = NaN), f.e = NaN, f.d = null;
        return;
      }
      return Ap(f, o.toString());
    } else if (s !== "string")
      throw Error(Io + o);
    return (l = o.charCodeAt(0)) === 45 ? (o = o.slice(1), f.s = -1) : (l === 43 && (o = o.slice(1)), f.s = 1), VE.test(o) ? Ap(f, o) : XJ(f, o);
  }
  if (i.prototype = Y, i.ROUND_UP = 0, i.ROUND_DOWN = 1, i.ROUND_CEIL = 2, i.ROUND_FLOOR = 3, i.ROUND_HALF_UP = 4, i.ROUND_HALF_DOWN = 5, i.ROUND_HALF_EVEN = 6, i.ROUND_HALF_CEIL = 7, i.ROUND_HALF_FLOOR = 8, i.EUCLID = 9, i.config = i.set = aee, i.clone = JE, i.isDecimal = Pw, i.abs = qJ, i.acos = KJ, i.acosh = jJ, i.add = ZJ, i.asin = QJ, i.asinh = JJ, i.atan = eee, i.atanh = tee, i.atan2 = ree, i.cbrt = nee, i.ceil = iee, i.clamp = oee, i.cos = lee, i.cosh = see, i.div = uee, i.exp = fee, i.floor = cee, i.hypot = hee, i.ln = dee, i.log = vee, i.log10 = gee, i.log2 = pee, i.max = yee, i.min = Cee, i.mod = mee, i.mul = _ee, i.pow = wee, i.random = xee, i.round = See, i.sign = bee, i.sin = Tee, i.sinh = Eee, i.sqrt = Lee, i.sub = Aee, i.sum = Ree, i.tan = Oee, i.tanh = Iee, i.trunc = Mee, e === void 0 && (e = {}), e && e.defaults !== !0)
    for (n = ["precision", "rounding", "toExpNeg", "toExpPos", "maxE", "minE", "modulo", "crypto"], r = 0; r < n.length; ) e.hasOwnProperty(t = n[r++]) || (e[t] = this[t]);
  return i.config(e), i;
}
function uee(e, r) {
  return new this(e).div(r);
}
function fee(e) {
  return new this(e).exp();
}
function cee(e) {
  return he(e = new this(e), e.e + 1, 3);
}
function hee() {
  var e, r, t = new this(0);
  for (be = !1, e = 0; e < arguments.length; )
    if (r = new this(arguments[e++]), r.d)
      t.d && (t = t.plus(r.times(r)));
    else {
      if (r.s)
        return be = !0, new this(1 / 0);
      t = r;
    }
  return be = !0, t.sqrt();
}
function Pw(e) {
  return e instanceof jn || e && e.toStringTag === XE || !1;
}
function dee(e) {
  return new this(e).ln();
}
function vee(e, r) {
  return new this(e).log(r);
}
function pee(e) {
  return new this(e).log(2);
}
function gee(e) {
  return new this(e).log(10);
}
function yee() {
  return jE(this, arguments, "lt");
}
function Cee() {
  return jE(this, arguments, "gt");
}
function mee(e, r) {
  return new this(e).mod(r);
}
function _ee(e, r) {
  return new this(e).mul(r);
}
function wee(e, r) {
  return new this(e).pow(r);
}
function xee(e) {
  var r, t, n, i, o = 0, a = new this(1), l = [];
  if (e === void 0 ? e = this.precision : kr(e, 1, Ho), n = Math.ceil(e / pe), this.crypto)
    if (crypto.getRandomValues)
      for (r = crypto.getRandomValues(new Uint32Array(n)); o < n; )
        i = r[o], i >= 429e7 ? r[o] = crypto.getRandomValues(new Uint32Array(1))[0] : l[o++] = i % 1e7;
    else if (crypto.randomBytes) {
      for (r = crypto.randomBytes(n *= 4); o < n; )
        i = r[o] + (r[o + 1] << 8) + (r[o + 2] << 16) + ((r[o + 3] & 127) << 24), i >= 214e7 ? crypto.randomBytes(4).copy(r, o) : (l.push(i % 1e7), o += 4);
      o = n / 4;
    } else
      throw Error(YE);
  else for (; o < n; ) l[o++] = Math.random() * 1e7 | 0;
  for (n = l[--o], e %= pe, n && e && (i = Wt(10, pe - e), l[o] = (n / i | 0) * i); l[o] === 0; o--) l.pop();
  if (o < 0)
    t = 0, l = [0];
  else {
    for (t = -1; l[0] === 0; t -= pe) l.shift();
    for (n = 1, i = l[0]; i >= 10; i /= 10) n++;
    n < pe && (t -= pe - n);
  }
  return a.e = t, a.d = l, a;
}
function See(e) {
  return he(e = new this(e), e.e + 1, this.rounding);
}
function bee(e) {
  return e = new this(e), e.d ? e.d[0] ? e.s : 0 * e.s : e.s || NaN;
}
function Tee(e) {
  return new this(e).sin();
}
function Eee(e) {
  return new this(e).sinh();
}
function Lee(e) {
  return new this(e).sqrt();
}
function Aee(e, r) {
  return new this(e).sub(r);
}
function Ree() {
  var e = 0, r = arguments, t = new this(r[e]);
  for (be = !1; t.s && ++e < r.length; ) t = t.plus(r[e]);
  return be = !0, he(t, this.precision, this.rounding);
}
function Oee(e) {
  return new this(e).tan();
}
function Iee(e) {
  return new this(e).tanh();
}
function Mee(e) {
  return he(e = new this(e), e.e + 1, 1);
}
Y[Symbol.for("nodejs.util.inspect.custom")] = Y.toString;
Y[Symbol.toStringTag] = "Decimal";
var jn = Y.constructor = JE(Tp);
vc = new jn(vc);
pc = new jn(pc);
var Qa, eL = function(e) {
  return typeof e == "number" ? Number.isNaN(e) : e && typeof e == "string" ? Number.isNaN(Number(e)) : !0;
}, Fg = function(e, r, t) {
  return t === void 0 && (t = !1), e != null && e.length ? e.reduce(function(n, i) {
    var o = ge(i, r), a = eL(o);
    if (t && a)
      return n;
    var l = a ? 0 : o;
    return n.push(new jn(l)), n;
  }, []) : [];
}, tL = function(e, r) {
  var t = Fg(e, r);
  return t.length ? jn.sum.apply(jn, j([], W(t), !1)).toNumber() : 0;
}, Nw = function(e, r, t) {
  var n = Fg(r, t, !0);
  if (n != null && n.length)
    return jn[e].apply(jn, j([], W(n), !1)).toNumber();
}, Bee = function(e, r) {
  var t = Fg(e, r);
  return t != null && t.length ? jn.sum.apply(jn, j([], W(t), !1)).dividedBy(t.length).toNumber() : 0;
}, Dee = (Qa = {}, Qa[la.SUM] = tL, Qa[la.MIN] = function(e, r) {
  return Nw("min", e, r);
}, Qa[la.MAX] = function(e, r) {
  return Nw("max", e, r);
}, Qa[la.AVG] = Bee, Qa), $ee = function(e) {
  return rt(e) && "values" in e;
}, Fee = function(e) {
  var r = e.spreadsheet, t = e.position, n = e.tooltipContainer, i = e.autoAdjustBoundary, o = r.getCanvasElement(), a = t.x + dw.x, l = t.y + dw.y;
  if (!i || !o)
    return {
      x: a,
      y: l
    };
  var s = i === "body", f = r.facet.panelBBox, h = f.maxX, d = f.maxY, v = r.options, g = v.width, y = v.height, C = o.getBoundingClientRect(), _ = C.top, w = C.left, x = n.getBoundingClientRect(), S = x.width, T = x.height, R = document.body.getBoundingClientRect(), B = R.width, $ = R.height, N = s ? B : Math.min(g, h) + w, z = s ? $ : Math.min(y, d) + _;
  return a + S >= N && (a = N - S), l + T >= z && (l = z - T), {
    x: a,
    y: l
  };
}, rL = function(e) {
  return M({ operator: { onClick: Ic, menus: [] }, enterable: !0, enableFormat: !0 }, e);
}, Rp = function(e) {
  return M(M({}, e == null ? void 0 : e.colQuery), e == null ? void 0 : e.rowQuery);
}, bf = function(e, r) {
  var t;
  if (e) {
    var n = r.style, i = r.className, o = i === void 0 ? [] : i, a = r.visible;
    if (n && Object.assign(e.style, n), o.length) {
      var l = o.filter(Boolean);
      (t = e.classList).add.apply(t, j([], W(l), !1));
    }
    e.classList.toggle(xj, a), e.classList.toggle(Sj, !a);
  }
}, Pee = function(e) {
  var r = wr(e) && Number.isNaN(e), t = e === "";
  return Nt(e) || r || t ? "-" : e;
}, Pg = function(e, r) {
  var t, n = (t = e == null ? void 0 : e.dataSet) === null || t === void 0 ? void 0 : t.getFieldFormatter(r);
  return function(i, o) {
    return Pee(n(i, o));
  };
}, Nf = function(e, r) {
  var t, n = r.data, i = r.field, o = r.valueField, a = r.useCompleteDataForFormatter, l = a === void 0 ? !0 : a, s = (t = e == null ? void 0 : e.dataSet) === null || t === void 0 ? void 0 : t.getFieldName(i), f = Pg(e, i), h = rt(n[i]) ? JSON.stringify(n[i]) : n[i], d = f(o || h, l ? n : void 0);
  return {
    name: s,
    value: d
  };
}, Hw = function(e, r, t) {
  var n = Qi(tl([], r), function(o) {
    return o !== Ae && t[o];
  }), i = We(n, function(o) {
    return Nf(e, {
      data: t,
      field: o,
      useCompleteDataForFormatter: !1
    });
  });
  return i;
}, Nee = function(e, r, t) {
  var n, i, o, a, l = (t || {}).isTotals, s = [], f = [];
  if (r) {
    var h = (i = (n = e == null ? void 0 : e.dataSet) === null || n === void 0 ? void 0 : n.fields) === null || i === void 0 ? void 0 : i.columns, d = (a = (o = e == null ? void 0 : e.dataSet) === null || o === void 0 ? void 0 : o.fields) === null || a === void 0 ? void 0 : a.rows;
    s = Hw(e, Ba(h || []), r), f = Hw(e, d, r);
  }
  return Q(s) && Q(f) && l && (s = [{ value: Et("总计") }]), { cols: s, rows: f };
}, Hee = function(e, r, t) {
  if (r) {
    var n = t.isTotals, i = r[Ae], o = r[i], a = [];
    if (n)
      a.push(Nf(e, {
        data: r,
        field: i,
        valueField: ge(r, Nr)
      }));
    else if ($ee(o) && e.getTooltipDataItemMappingCallback()) {
      var l = LE(r, e.getTooltipDataItemMappingCallback());
      xe(l, function(s, f) {
        a.push(Nf(e, { data: l, field: f }));
      });
    } else
      a.push(Nf(e, { data: r, field: i }));
    return a;
  }
}, zee = function(e, r, t) {
  var n;
  if (t)
    return Et("总计");
  var i = (n = e == null ? void 0 : e.dataSet) === null || n === void 0 ? void 0 : n.getFieldName(r);
  return i && i !== "undefined" ? i : "";
}, zw = function(e, r, t) {
  t === void 0 && (t = !0);
  var n = [];
  return xe(r, function(i, o) {
    xe(e, function(a) {
      !t && a.colIndex !== -1 ? n.push([o, a.colIndex]) : t && a.rowIndex !== -1 && n.push([a.rowIndex, o]);
    });
  }), n;
}, Wee = function(e, r) {
  var t, n = r.rowLeafNodes, i = r.colLeafNodes, o = e.interaction.getState(), a = o.nodes, l = a === void 0 ? [] : a, s = o.cells, f = s === void 0 ? [] : s, h = (t = f == null ? void 0 : f[0]) === null || t === void 0 ? void 0 : t.type, d = l.filter(function(v) {
    return v == null ? void 0 : v.isLeaf;
  });
  return h === J.COL_CELL ? zw(d, n, !1) : h === J.ROW_CELL ? zw(d, i) : [];
}, kee = function(e, r, t) {
  var n, i = (n = e.facet) === null || n === void 0 ? void 0 : n.layoutResult, o = function(s) {
    var f = r == null ? void 0 : r.getMeta(), h = f == null ? void 0 : f.isTotals, d = (r == null ? void 0 : r.cellType) === J.COL_CELL, v = (r == null ? void 0 : r.cellType) === J.ROW_CELL;
    if (!d && !v)
      return !1;
    var g = i.colNodes.find(function(_) {
      return _.colIndex === s.colIndex;
    }), y = i.rowNodes.find(function(_) {
      return _.rowIndex === s.rowIndex;
    }), C = d ? y == null ? void 0 : y.isTotals : g == null ? void 0 : g.isTotals;
    return !h && (s == null ? void 0 : s.isTotals) || h && C;
  };
  if (t) {
    var a = Wee(e, i);
    return Xn(We(a, function(s) {
      var f = W(s, 2), h = f[0], d = f[1], v = i.getCellMeta(h, d);
      if (!o(v))
        return (v == null ? void 0 : v.data) || Rp(v);
    }));
  }
  var l = e.interaction.getCells();
  return l.filter(function(s) {
    var f = i.getCellMeta(s.rowIndex, s.colIndex);
    return !o(f);
  }).map(function(s) {
    var f = i.getCellMeta(s.rowIndex, s.colIndex);
    return (f == null ? void 0 : f.data) || Rp(f);
  });
}, Gee = function(e) {
  var r = e.spreadsheet, t = e.targetCell, n = e.options, i = n === void 0 ? {} : n, o = [], a = {}, l = r.isTableMode();
  if (l && (i != null && i.showSingleTips)) {
    var s = t.getMeta(), f = s != null && s.field ? r.dataSet.getMultiData({ field: s.field }) : [r.dataSet.getRowData(s)];
    return [{ selectedData: f, name: "", value: "" }];
  }
  var h = kee(r, t, i.showSingleTips);
  return xe(h, function(d) {
    var v;
    a[d == null ? void 0 : d[Ae]] ? (v = a[d == null ? void 0 : d[Ae]]) === null || v === void 0 || v.push(d) : a[d == null ? void 0 : d[Ae]] = [d];
  }), sT(a, function(d, v) {
    var g, y = zee(r, v, i == null ? void 0 : i.isTotals), C = "", _ = "";
    if (Gc(d, function(R) {
      return eL(ge(R, Nr));
    })) {
      var w = r.options.placeholder, x = Da(a, w);
      C = x, _ = x;
    } else {
      var S = Pg(r, v), T = tL(d, Nr);
      _ = T, C = (g = S == null ? void 0 : S(T, d)) !== null && g !== void 0 ? g : parseFloat(T.toPrecision(s2));
    }
    o.push({
      selectedData: d,
      name: y,
      value: C,
      originValue: _
    });
  }), o;
}, Uee = function(e) {
  if (e) {
    var r = e.getMeta();
    if (!r.isTotals) {
      var t = cr(r.spreadsheet.dataCfg.meta, {
        field: r.field || r.value || r.valueField
      }), n = t == null ? void 0 : t.field;
      return r.spreadsheet.dataSet.getFieldDescription(n);
    }
  }
}, Yee = function(e) {
  var r = e.spreadsheet, t = e.cellInfos, n = t === void 0 ? [] : t, i = e.options, o = i === void 0 ? {} : i, a = e.targetCell, l = null, s = null, f = null, h = Uee(a), d = n[0] || {};
  if (!(o != null && o.hideSummary))
    l = Gee({
      spreadsheet: r,
      options: o,
      targetCell: a
    });
  else if (o.showSingleTips) {
    var v = Pg(r, d.valueField), g = v(d.value), y = o.enableFormat ? r.dataSet.getFieldName(d.value) || g : r.dataSet.getFieldName(d.valueField);
    d.name = y || "";
  } else
    s = Nee(r, d, o), f = Hee(r, d, o);
  var C = d || {}, _ = C.interpretation, w = C.infos, x = C.tips, S = C.name;
  return {
    summaries: l,
    interpretation: _,
    infos: w,
    tips: x,
    name: S,
    headInfo: s,
    details: f,
    description: h
  };
}, Xee = function(e) {
  return We(e, function(r) {
    var t = r.getMeta();
    return D2({}, t.query || {}, ST(t, ["colIndex", "rowIndex"]));
  });
}, Ng = function(e) {
  if (!e.interaction.isSelectedState())
    return [];
  var r = e.dataCfg.fields.valueInCols;
  return e.interaction.getCells().reduce(function(t, n) {
    var i = e.facet.layoutResult.getCellMeta(n == null ? void 0 : n.rowIndex, n == null ? void 0 : n.colIndex), o = Rp(i);
    if (Q(i) || Q(o))
      return [];
    var a = M(M({}, o), { colIndex: r ? i.colIndex : null, rowIndex: r ? null : i.rowIndex }), l = t.find(function(s) {
      return tr(a, s);
    });
    return l || t.push(a), t;
  }, []);
}, Vee = function(e, r) {
  e === void 0 && (e = {});
  var t = function(l) {
    return zn(e, l);
  }, n = e.col, i = e.row, o = e.data, a = e.corner;
  return r === J.COL_CELL ? t(n) : r === J.ROW_CELL ? t(i) : r === J.DATA_CELL ? t(o) : r === J.CORNER_CELL ? t(a) : M({}, e);
}, Hg = function(e, r) {
  var t;
  if (!(!r || !e)) {
    var n = (t = e.getCellType) === null || t === void 0 ? void 0 : t.call(e, r == null ? void 0 : r.target);
    return Vee(e.options.tooltip, n);
  }
}, nL = function(e, r) {
  var t = r.defaultMenus, n = t === void 0 ? [] : t, i = r.cell, o = function(l) {
    return l === void 0 && (l = []), l.filter(function(s) {
      var f;
      return Vt(s.visible) ? s.visible(i) : (f = s.visible) !== null && f !== void 0 ? f : !0;
    }).map(function(s) {
      return s.children && (s.children = o(s.children)), s;
    });
  }, a = o(e.menus);
  return {
    onClick: e.onClick,
    menus: Xn(j(j([], W(n), !1), W(a), !1))
  };
}, qee = function(e, r) {
  for (var t = !1, n = r; n && n !== document.body; ) {
    if (e === n) {
      t = !0;
      break;
    }
    n = n.parentElement;
  }
  return t;
}, Kee = function(e) {
  e.store.set(Zf, g0);
}, jee = function(e, r) {
  var t = e.store.get(Zf, g0);
  e.store.set(Zf, M(M({}, t), r));
}, Zee = function(e, r) {
  var t = e.store.get(Zf, g0);
  return t[r];
}, iL = (
  /** @class */
  function() {
    function e(r) {
      var t = this;
      this.displayFormattedValueMap = /* @__PURE__ */ new Map(), this.getFieldMeta = Oa(function(n, i) {
        return cr(t.meta || i, function(o) {
          return o.field === n;
        });
      }), this.spreadsheet = r;
    }
    return e.prototype.getFieldName = function(r) {
      var t = ge(this.getFieldMeta(r, this.meta), "name", r);
      return sE(t);
    }, e.prototype.getFieldFormatter = function(r) {
      return ge(this.getFieldMeta(r, this.meta), "formatter", dr);
    }, e.prototype.getFieldDescription = function(r) {
      return ge(this.getFieldMeta(r, this.meta), "description");
    }, e.prototype.setDataCfg = function(r) {
      this.getFieldMeta.cache.clear();
      var t = this.processDataCfg(r), n = t.fields, i = t.meta, o = t.data, a = t.totalData, l = t.sortParams, s = t.filterParams;
      this.fields = n, this.meta = i, this.originData = o, this.totalData = a, this.sortParams = l, this.filterParams = s, this.displayData = this.originData, this.indexesData = {};
    }, e.prototype.processMeta = function(r, t) {
      var n, i;
      return r === void 0 && (r = []), j(j([], W(r), !1), [
        GZ(r, (i = (n = this.spreadsheet) === null || n === void 0 ? void 0 : n.options) === null || i === void 0 ? void 0 : i.cornerExtraFieldText, t)
      ], !1);
    }, e.prototype.getDisplayDataSet = function() {
      return this.displayData || [];
    }, e.prototype.isEmpty = function() {
      return Q(this.getDisplayDataSet());
    }, e.prototype.getEmptyViewIndexes = function() {
      return [];
    }, e.prototype.getValueRangeByField = function(r) {
      var t, n = Zee(this.spreadsheet, r);
      if (n)
        return n;
      var i = Xn(We(this.originData, function(a) {
        var l = a[r];
        return Nt(l) ? null : Number.parseFloat(l);
      })), o = {
        maxValue: Gi(i),
        minValue: ng(i)
      };
      return jee(this.spreadsheet, (t = {}, t[r] = o, t)), o;
    }, e.prototype.moreThanOneValue = function() {
      var r, t;
      return ((t = (r = this.fields) === null || r === void 0 ? void 0 : r.values) === null || t === void 0 ? void 0 : t.length) > 1;
    }, e;
  }()
), Op = (
  /** @class */
  function() {
    function e(r) {
      this.extraField = r;
    }
    return e.createProxyData = function(r, t) {
      return new Proxy(r, new e(t));
    }, e.createProxyDataList = function(r, t) {
      return t.map(function(n) {
        return e.createProxyData(r, n);
      });
    }, e.prototype.get = function(r, t) {
      return t === h0 ? r : t === Ae ? this.extraField : t === Nr ? r[this.extraField] : r[t];
    }, e.prototype.has = function(r, t) {
      return t === Ae || t === Nr ? !0 : t in r;
    }, e.prototype.ownKeys = function(r) {
      return Object.keys(r).concat(Ae, Nr);
    }, e.prototype.getOwnPropertyDescriptor = function(r, t) {
      return t === Ae || t === Nr ? {
        configurable: !0,
        enumerable: !0
      } : Object.getOwnPropertyDescriptor(r, t);
    }, e;
  }()
), Ip = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.handleDimensionValuesSort = function() {
        xe(t.sortParams, function(n) {
          var i = n.sortFieldId, o = n.sortByMeasure;
          if (i) {
            var a = j([], W(t.sortedDimensionValues[i] || []), !1), l = vJ({
              dataSet: t,
              sortParam: n,
              originValues: a,
              isSortByMeasure: !Q(o)
            });
            t.sortedDimensionValues[i] = l, t.handlePivotMetaSort(i, l);
          }
        });
      }, t.getTotalStatus = function(n) {
        var i = t.fields, o = i.columns, a = i.rows, l = function(f, h) {
          if (h) {
            var d = cr(f, function(v) {
              return !ip(n, v);
            });
            return d && d !== xa(f);
          }
          return Gc(f, function(v) {
            return !ip(n, v);
          });
        }, s = function(f, h) {
          return h ? f.filter(function(d) {
            return d !== Ae;
          }) : f;
        };
        return {
          isRowTotal: l(s(a, !t.spreadsheet.isValueInCols())),
          isRowSubTotal: l(a, !0),
          isColTotal: l(s(o, t.spreadsheet.isValueInCols())),
          isColSubTotal: l(o, !0)
        };
      }, t;
    }
    return r.prototype.getExistValuesByDataItem = function(t, n) {
      return yE(t, n);
    }, r.prototype.setDataCfg = function(t) {
      e.prototype.setDataCfg.call(this, t);
      var n = this.fields.rows;
      this.sortedDimensionValues = {}, this.rowPivotMeta = /* @__PURE__ */ new Map(), this.colPivotMeta = /* @__PURE__ */ new Map(), this.dimensionValuesCache = /* @__PURE__ */ new Map(), this.transformIndexesData(this.originData.concat(this.totalData), n), this.handleDimensionValuesSort();
    }, r.prototype.transformIndexesData = function(t, n) {
      var i = this, o = this.fields, a = o.columns, l = o.values, s = o.valueInCols, f;
      return fi.getInstance().debugCallback(Mj, function() {
        f = kZ({
          rows: n,
          columns: a,
          values: l,
          valueInCols: s,
          data: t,
          indexesData: i.indexesData,
          sortedDimensionValues: i.sortedDimensionValues,
          rowPivotMeta: i.rowPivotMeta,
          colPivotMeta: i.colPivotMeta,
          getExistValuesByDataItem: i.getExistValuesByDataItem
        }), i.indexesData = f.indexesData, i.rowPivotMeta = f.rowPivotMeta, i.colPivotMeta = f.colPivotMeta, i.sortedDimensionValues = f.sortedDimensionValues;
      }), f;
    }, r.prototype.transformDrillDownData = function(t, n, i) {
      var o = this, a, l = Qt.getFieldPath(i, !0), s = j(j([], W(l), !1), [t], !1), f = this.spreadsheet.store, h = i == null ? void 0 : i.id, d = (a = f.get("drillDownIdPathMap")) !== null && a !== void 0 ? a : /* @__PURE__ */ new Map();
      d.has(h) && (xe(d.get(h), function(g) {
        hp(o.indexesData, g);
      }), ww(this.rowPivotMeta, h));
      var v = this.transformIndexesData(n, s).paths;
      d.set(h, v), f.set("drillDownIdPathMap", d);
    }, r.prototype.clearDrillDownData = function(t) {
      var n = this, i = this.spreadsheet.store, o = i.get("drillDownIdPathMap");
      if (!o)
        return !1;
      var a = i.get("drillDownDataCache", []);
      if (t) {
        var l = o.get(t);
        l && xe(l, function(g) {
          hp(n.indexesData, g);
        }), ww(this.rowPivotMeta, t), o.delete(t);
        var s = Qi(a, function(g) {
          return o.has(g == null ? void 0 : g.rowId);
        });
        i.set("drillDownDataCache", s);
        var f = s.map(function(g) {
          return g == null ? void 0 : g.drillLevel;
        }), h = i.get("drillDownFieldInLevel", []), d = h.filter(function(g) {
          return Sr(f, g == null ? void 0 : g.drillLevel);
        });
        i.set("drillDownFieldInLevel", d);
      } else {
        o.clear();
        var v = this.spreadsheet.store.get("originalDataCfg");
        Q(v) || this.spreadsheet.setDataCfg(v), this.spreadsheet.store.set("drillItemsNum", -1), this.spreadsheet.store.set("drillDownDataCache", []), this.spreadsheet.store.set("drillDownFieldInLevel", []);
      }
      return i.set("drillDownIdPathMap", o), !0;
    }, r.prototype.handlePivotMetaSort = function(t, n) {
      var i = this.fields, o = i.rows, a = i.columns;
      Sr(o, t) ? this.rowPivotMeta = Iw({
        pivotMeta: this.rowPivotMeta,
        dimensions: o,
        sortFieldId: t,
        sortedDimensionValues: n
      }) : Sr(a, t) && (this.colPivotMeta = Iw({
        pivotMeta: this.colPivotMeta,
        dimensions: a,
        sortFieldId: t,
        sortedDimensionValues: n
      }));
    }, r.prototype.processDataCfg = function(t) {
      var n = t.data, i = t.meta, o = i === void 0 ? [] : i, a = t.fields, l = t.sortParams, s = l === void 0 ? [] : l, f = t.totalData, h = a.columns, d = a.rows, v = a.values, g = a.valueInCols, y = a.customValueOrder, C = h, _ = d;
      g ? C = this.isCustomMeasuresPosition(y) ? this.handleCustomMeasuresOrder(y, C) : Ni(j(j([], W(h), !1), [Ae], !1)) : _ = this.isCustomMeasuresPosition(y) ? this.handleCustomMeasuresOrder(y, _) : Ni(j(j([], W(d), !1), [Ae], !1));
      var w = this.processMeta(o, Et("数值"));
      return {
        data: n,
        totalData: f,
        meta: w,
        fields: M(M({}, a), { rows: _, columns: C, values: v }),
        sortParams: s
      };
    }, r.prototype.getFieldsAndPivotMetaByField = function(t) {
      var n = this.fields || {}, i = n.rows, o = i === void 0 ? [] : i, a = n.columns, l = a === void 0 ? [] : a;
      return o.includes(t) ? {
        dimensions: o,
        pivotMeta: this.rowPivotMeta
      } : l.includes(t) ? {
        dimensions: l,
        pivotMeta: this.colPivotMeta
      } : {};
    }, r.prototype.getDimensionValues = function(t, n) {
      n === void 0 && (n = {});
      var i = this.getFieldsAndPivotMetaByField(t), o = i.pivotMeta, a = i.dimensions;
      if (!o || !a)
        return [];
      var l = Q(n);
      if (this.dimensionValuesCache.has(t) && l)
        return this.dimensionValuesCache.get(t);
      var s = ta(n, a, Mf), f = CE({
        pivotMeta: o,
        dimensionValues: s,
        fields: a,
        fieldIdx: Vc(a, t),
        queryType: wn.DetailOnly,
        sortedDimensionValues: this.sortedDimensionValues
      }), h = Ni(f.map(function(d) {
        return d.value;
      }));
      return l && this.dimensionValuesCache.set(t, h), h;
    }, r.prototype.getTotalValue = function(t, n) {
      var i, o = this.spreadsheet.options, a = RT(n), l = a ? n : this.getTotalStatus(t), s = zZ(l, o == null ? void 0 : o.totals) || {}, f = s.aggregation, h = s.calcFunc, d = Q(o == null ? void 0 : o.totals) && !this.spreadsheet.isHierarchyTreeType() ? la.SUM : "", v = Dee[f || d];
      if (v || h) {
        var g = this.getMultiData(t, {
          queryType: wn.DetailOnly
        }), y = void 0;
        return h ? y = h(t, g, this.spreadsheet) : v && (y = v(g, Nr)), M(M({}, t), (i = {}, i[Nr] = y, i[t[Ae]] = y, i));
      }
    }, r.prototype.getCellData = function(t) {
      var n, i, o, a = t || {}, l = a.query, s = l === void 0 ? {} : l, f = a.rowNode, h = a.isTotals, d = h === void 0 ? !1 : h, v = a.totalStatus, g = this.fields, y = g.rows, C = g.columns, _ = y, w = (n = this.spreadsheet) === null || n === void 0 ? void 0 : n.store.get("drillDownIdPathMap"), x = Array.from((i = w == null ? void 0 : w.keys()) !== null && i !== void 0 ? i : []).some(function($) {
        return f == null ? void 0 : f.id.startsWith($);
      });
      f && x && (_ = (o = Qt.getFieldPath(f, x)) !== null && o !== void 0 ? o : y);
      var S = ta(s, _), T = ta(s, C), R = cc({
        rowDimensionValues: S,
        colDimensionValues: T,
        rowPivotMeta: this.rowPivotMeta,
        colPivotMeta: this.colPivotMeta,
        rowFields: _,
        colFields: C,
        prefix: fc(_, C)
      }), B = ge(this.indexesData, R);
      if (B)
        return Op.createProxyData(B, s[Ae]);
      if (d)
        return this.getTotalValue(s, v);
    }, r.prototype.getQueryExtraFields = function(t) {
      var n = this.fields.values, i = t[Ae];
      return i ? Sr(n, i) ? [i] : [] : n;
    }, r.prototype.getMultiData = function(t, n, i, o, a) {
      var l, s, f, h;
      t === void 0 && (t = {}), o === void 0 && (o = []), a === void 0 && (a = !0), Q(t) && console.warn("query: ".concat(t, ` shouldn't be empty, you can get all data from dataCfg if you're intended.
 you should use { EXTRA_FIELD: xxx} as least if you want query all specific value data`));
      var d = rt(n) ? n : {
        queryType: a ? wn.All : wn.DetailOnly,
        drillDownFields: o
      }, v = d.drillDownFields, g = v === void 0 ? [] : v, y = d.queryType, C = y === void 0 ? wn.All : y, _ = this.fields, w = _.rows, x = _.columns, S = Q(g) ? w : w.concat(g), T = ta(t, S, Mf), R = ta(t, x, Mf), B = YZ({
        rowDimensionValues: T,
        colDimensionValues: R,
        rowPivotMeta: this.rowPivotMeta,
        colPivotMeta: this.colPivotMeta,
        rowFields: S,
        colFields: x,
        sortedDimensionValues: this.sortedDimensionValues,
        queryType: C
      }), $ = B.rowQueries, N = B.colQueries, z = fc(S, x), V = [];
      try {
        for (var X = br($), Z = X.next(); !Z.done; Z = X.next()) {
          var ne = Z.value;
          try {
            for (var se = (f = void 0, br(N)), q = se.next(); !q.done; q = se.next()) {
              for (var ee = q.value, Oe = cc({
                rowDimensionValues: ne,
                colDimensionValues: ee,
                rowPivotMeta: this.rowPivotMeta,
                colPivotMeta: this.colPivotMeta,
                rowFields: S,
                colFields: x,
                prefix: z
              }), me = !1, _e = this.indexesData, ke = function(Fe) {
                var Ge = Oe[Fe];
                me ? Hs(Ge) ? _e = XZ(_e, C) : _e = Xn(We(_e, function(ot) {
                  return ot == null ? void 0 : ot[Ge];
                })) : Hs(Ge) ? (me = !0, _e = Xn([_e]), Fe--) : _e = _e == null ? void 0 : _e[Ge], Ee = Fe;
              }, Ee, Ze = 0; Ze < Oe.length; Ze++)
                ke(Ze), Ze = Ee;
              le(_e) ? V.push.apply(V, j([], W(_e), !1)) : _e && V.push(_e);
            }
          } catch (Fe) {
            f = { error: Fe };
          } finally {
            try {
              q && !q.done && (h = se.return) && h.call(se);
            } finally {
              if (f) throw f.error;
            }
          }
        }
      } catch (Fe) {
        l = { error: Fe };
      } finally {
        try {
          Z && !Z.done && (s = X.return) && s.call(X);
        } finally {
          if (l) throw l.error;
        }
      }
      var ft = this.getQueryExtraFields(t);
      return ru(Ni(V), function(Fe) {
        return Fe ? Op.createProxyDataList(Fe, ft) : [];
      });
    }, r.prototype.getFieldFormatter = function(t, n) {
      return t === gi ? this.getFieldFormatterForTotalValue(n) : e.prototype.getFieldFormatter.call(this, t);
    }, r.prototype.getFieldFormatterForTotalValue = function(t) {
      var n;
      return !this.spreadsheet.isValueInCols() && t && (n = ge(t.rowQuery, Ae)), n = n ?? ge(this.fields.values, 0), e.prototype.getFieldFormatter.call(this, n);
    }, r.prototype.handleCustomMeasuresOrder = function(t, n) {
      var i = Ni(j([], W(n), !1));
      return n.length >= t ? (i.splice(t, 0, Ae), i) : j(j([], W(i), !1), [Ae], !1);
    }, r.prototype.isCustomMeasuresPosition = function(t) {
      return wr(t);
    }, r.prototype.getRowData = function(t) {
      return this.getMultiData(t.rowQuery);
    }, r;
  }(iL)
), Qee = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getCellData = function(t) {
      var n = t.query, i = this.fields, o = i.rows, a = i.columns, l = ta(n, o), s = ta(n, a), f = cc({
        rowDimensionValues: l,
        colDimensionValues: s,
        rowPivotMeta: this.rowPivotMeta,
        colPivotMeta: this.colPivotMeta,
        rowFields: o,
        colFields: a,
        prefix: fc(o, a)
      }), h = ge(this.indexesData, f);
      return h && Op.createProxyData(h, n[Ae]);
    }, r.prototype.processDataCfg = function(t) {
      var n = t.meta, i = this.processMeta(n, Et("指标"));
      return M(M({}, t), { meta: i, fields: M(M({}, t.fields), {
        // 1、rows配置必须是空，需要额外添加 $$extra$$ 定位数据（标记指标的id）
        rows: [Ae],
        valueInCols: !1
      }) });
    }, r;
  }(Ip)
), Jee = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.handleDimensionValueFilter = function() {
        xe(t.filterParams, function(n) {
          var i = n.filterKey, o = n.filteredValues, a = n.customFilter, l = new Set(o), s = function(h) {
            return !l.has(h[i]);
          }, f = Qi(t.displayData, function(h) {
            return a ? a(h) && s(h) : s(h);
          });
          t.displayData = t.getDisplayData(f);
        });
      }, t.handleDimensionValuesSort = function() {
        xe(t.sortParams, function(n) {
          var i, o = n.sortFieldId, a = n.sortBy, l = n.sortFunc, s = n.sortMethod, f = n.query;
          if (o) {
            var h = t.displayData, d = [];
            if (f) {
              var v = [];
              h.forEach(function(x) {
                for (var S = Object.keys(f), T = !0, R = 0; R < S.length; R++) {
                  var B = S[R];
                  if (x[B] !== f[B]) {
                    T = !1, d.push(x);
                    break;
                  }
                }
                T && v.push(x);
              }), h = v;
            }
            var g = h;
            if (l)
              g = l(M(M({}, n), { data: h }));
            else if (a && !Vt(a)) {
              var y = j([], W(a), !1).reverse();
              g = h.sort(function(x, S) {
                var T = y.indexOf(x[o]), R = y.indexOf(S[o]);
                return R - T;
              });
            } else if (Bl(s) || Mg(s)) {
              var C = Da(t.spreadsheet, (i = t.spreadsheet.options) === null || i === void 0 ? void 0 : i.placeholder), _ = Vt(a) ? a : null, w = function(x) {
                return x[o] === C ? Number.MIN_VALUE : x[o];
              };
              g = lg(h, [_ || w], [s.toLocaleLowerCase()]);
            }
            d.length && (g = j(j([], W(g), !1), W(d), !1)), t.displayData = t.getDisplayData(g);
          }
        });
      }, t;
    }
    return r.prototype.processDataCfg = function(t) {
      return t;
    }, r.prototype.setDataCfg = function(t) {
      e.prototype.setDataCfg.call(this, t), this.handleDimensionValueFilter(), this.handleDimensionValuesSort();
    }, r.prototype.getStartFrozenRows = function(t) {
      var n = (this.spreadsheet.options || {}).frozenRowCount;
      return n ? t.slice(0, n) : [];
    }, r.prototype.getEndFrozenRows = function(t) {
      var n = (this.spreadsheet.options || {}).frozenTrailingRowCount;
      return n ? t.slice(-n) : [];
    }, r.prototype.getDisplayData = function(t) {
      var n = this.getStartFrozenRows(t), i = this.getEndFrozenRows(t), o = t.slice(n.length || 0, -i.length || void 0);
      return j(j(j([], W(n), !1), W(o), !1), W(i), !1);
    }, r.prototype.getDimensionValues = function() {
      return [];
    }, r.prototype.getCellData = function(t) {
      var n = t.query;
      if (!(this.displayData.length === 0 && n.rowIndex === 0)) {
        var i = this.displayData[n.rowIndex];
        return !wa(n, "field") || !rt(i) ? i : i[n.field];
      }
    }, r.prototype.getMultiData = function(t) {
      if (!t)
        return this.displayData;
      var n = this.displayData[t.rowIndex] ? [this.displayData[t.rowIndex]] : this.displayData;
      return wa(t, "field") ? n.map(function(i) {
        return i[t.field];
      }) : n;
    }, r.prototype.getRowData = function(t) {
      return this.getCellData({
        query: {
          rowIndex: t.rowIndex
        }
      });
    }, r;
  }(iL)
);
function zg(e, r, t) {
  e.prototype = r.prototype = t, t.constructor = e;
}
function oL(e, r) {
  var t = Object.create(e.prototype);
  for (var n in r) t[n] = r[n];
  return t;
}
function hu() {
}
var Us = 0.7, yc = 1 / Us, fl = "\\s*([+-]?\\d+)\\s*", Ys = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*", vi = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*", ete = /^#([0-9a-f]{3,8})$/, tte = new RegExp("^rgb\\(" + [fl, fl, fl] + "\\)$"), rte = new RegExp("^rgb\\(" + [vi, vi, vi] + "\\)$"), nte = new RegExp("^rgba\\(" + [fl, fl, fl, Ys] + "\\)$"), ite = new RegExp("^rgba\\(" + [vi, vi, vi, Ys] + "\\)$"), ote = new RegExp("^hsl\\(" + [Ys, vi, vi] + "\\)$"), ate = new RegExp("^hsla\\(" + [Ys, vi, vi, Ys] + "\\)$"), Ww = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
zg(hu, Xs, {
  copy: function(e) {
    return Object.assign(new this.constructor(), this, e);
  },
  displayable: function() {
    return this.rgb().displayable();
  },
  hex: kw,
  // Deprecated! Use color.formatHex.
  formatHex: kw,
  formatHsl: lte,
  formatRgb: Gw,
  toString: Gw
});
function kw() {
  return this.rgb().formatHex();
}
function lte() {
  return aL(this).formatHsl();
}
function Gw() {
  return this.rgb().formatRgb();
}
function Xs(e) {
  var r, t;
  return e = (e + "").trim().toLowerCase(), (r = ete.exec(e)) ? (t = r[1].length, r = parseInt(r[1], 16), t === 6 ? Uw(r) : t === 3 ? new rn(r >> 8 & 15 | r >> 4 & 240, r >> 4 & 15 | r & 240, (r & 15) << 4 | r & 15, 1) : t === 8 ? Tf(r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, (r & 255) / 255) : t === 4 ? Tf(r >> 12 & 15 | r >> 8 & 240, r >> 8 & 15 | r >> 4 & 240, r >> 4 & 15 | r & 240, ((r & 15) << 4 | r & 15) / 255) : null) : (r = tte.exec(e)) ? new rn(r[1], r[2], r[3], 1) : (r = rte.exec(e)) ? new rn(r[1] * 255 / 100, r[2] * 255 / 100, r[3] * 255 / 100, 1) : (r = nte.exec(e)) ? Tf(r[1], r[2], r[3], r[4]) : (r = ite.exec(e)) ? Tf(r[1] * 255 / 100, r[2] * 255 / 100, r[3] * 255 / 100, r[4]) : (r = ote.exec(e)) ? Vw(r[1], r[2] / 100, r[3] / 100, 1) : (r = ate.exec(e)) ? Vw(r[1], r[2] / 100, r[3] / 100, r[4]) : Ww.hasOwnProperty(e) ? Uw(Ww[e]) : e === "transparent" ? new rn(NaN, NaN, NaN, 0) : null;
}
function Uw(e) {
  return new rn(e >> 16 & 255, e >> 8 & 255, e & 255, 1);
}
function Tf(e, r, t, n) {
  return n <= 0 && (e = r = t = NaN), new rn(e, r, t, n);
}
function ste(e) {
  return e instanceof hu || (e = Xs(e)), e ? (e = e.rgb(), new rn(e.r, e.g, e.b, e.opacity)) : new rn();
}
function Mp(e, r, t, n) {
  return arguments.length === 1 ? ste(e) : new rn(e, r, t, n ?? 1);
}
function rn(e, r, t, n) {
  this.r = +e, this.g = +r, this.b = +t, this.opacity = +n;
}
zg(rn, Mp, oL(hu, {
  brighter: function(e) {
    return e = e == null ? yc : Math.pow(yc, e), new rn(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  darker: function(e) {
    return e = e == null ? Us : Math.pow(Us, e), new rn(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  rgb: function() {
    return this;
  },
  displayable: function() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: Yw,
  // Deprecated! Use color.formatHex.
  formatHex: Yw,
  formatRgb: Xw,
  toString: Xw
}));
function Yw() {
  return "#" + av(this.r) + av(this.g) + av(this.b);
}
function Xw() {
  var e = this.opacity;
  return e = isNaN(e) ? 1 : Math.max(0, Math.min(1, e)), (e === 1 ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (e === 1 ? ")" : ", " + e + ")");
}
function av(e) {
  return e = Math.max(0, Math.min(255, Math.round(e) || 0)), (e < 16 ? "0" : "") + e.toString(16);
}
function Vw(e, r, t, n) {
  return n <= 0 ? e = r = t = NaN : t <= 0 || t >= 1 ? e = r = NaN : r <= 0 && (e = NaN), new li(e, r, t, n);
}
function aL(e) {
  if (e instanceof li) return new li(e.h, e.s, e.l, e.opacity);
  if (e instanceof hu || (e = Xs(e)), !e) return new li();
  if (e instanceof li) return e;
  e = e.rgb();
  var r = e.r / 255, t = e.g / 255, n = e.b / 255, i = Math.min(r, t, n), o = Math.max(r, t, n), a = NaN, l = o - i, s = (o + i) / 2;
  return l ? (r === o ? a = (t - n) / l + (t < n) * 6 : t === o ? a = (n - r) / l + 2 : a = (r - t) / l + 4, l /= s < 0.5 ? o + i : 2 - o - i, a *= 60) : l = s > 0 && s < 1 ? 0 : a, new li(a, l, s, e.opacity);
}
function ute(e, r, t, n) {
  return arguments.length === 1 ? aL(e) : new li(e, r, t, n ?? 1);
}
function li(e, r, t, n) {
  this.h = +e, this.s = +r, this.l = +t, this.opacity = +n;
}
zg(li, ute, oL(hu, {
  brighter: function(e) {
    return e = e == null ? yc : Math.pow(yc, e), new li(this.h, this.s, this.l * e, this.opacity);
  },
  darker: function(e) {
    return e = e == null ? Us : Math.pow(Us, e), new li(this.h, this.s, this.l * e, this.opacity);
  },
  rgb: function() {
    var e = this.h % 360 + (this.h < 0) * 360, r = isNaN(e) || isNaN(this.s) ? 0 : this.s, t = this.l, n = t + (t < 0.5 ? t : 1 - t) * r, i = 2 * t - n;
    return new rn(
      lv(e >= 240 ? e - 240 : e + 120, i, n),
      lv(e, i, n),
      lv(e < 120 ? e + 240 : e - 120, i, n),
      this.opacity
    );
  },
  displayable: function() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl: function() {
    var e = this.opacity;
    return e = isNaN(e) ? 1 : Math.max(0, Math.min(1, e)), (e === 1 ? "hsl(" : "hsla(") + (this.h || 0) + ", " + (this.s || 0) * 100 + "%, " + (this.l || 0) * 100 + "%" + (e === 1 ? ")" : ", " + e + ")");
  }
}));
function lv(e, r, t) {
  return (e < 60 ? r + (t - r) * e / 60 : e < 180 ? t : e < 240 ? r + (t - r) * (240 - e) / 60 : r) * 255;
}
function Wg(e) {
  return function() {
    return e;
  };
}
function fte(e, r) {
  return function(t) {
    return e + t * r;
  };
}
function cte(e, r, t) {
  return e = Math.pow(e, t), r = Math.pow(r, t) - e, t = 1 / t, function(n) {
    return Math.pow(e + n * r, t);
  };
}
function hte(e) {
  return (e = +e) == 1 ? lL : function(r, t) {
    return t - r ? cte(r, t, e) : Wg(isNaN(r) ? t : r);
  };
}
function lL(e, r) {
  var t = r - e;
  return t ? fte(e, t) : Wg(isNaN(e) ? r : e);
}
var qw = function e(r) {
  var t = hte(r);
  function n(i, o) {
    var a = t((i = Mp(i)).r, (o = Mp(o)).r), l = t(i.g, o.g), s = t(i.b, o.b), f = lL(i.opacity, o.opacity);
    return function(h) {
      return i.r = a(h), i.g = l(h), i.b = s(h), i.opacity = f(h), i + "";
    };
  }
  return n.gamma = e, n;
}(1);
function sL(e, r) {
  r || (r = []);
  var t = e ? Math.min(r.length, e.length) : 0, n = r.slice(), i;
  return function(o) {
    for (i = 0; i < t; ++i) n[i] = e[i] * (1 - o) + r[i] * o;
    return n;
  };
}
function uL(e) {
  return ArrayBuffer.isView(e) && !(e instanceof DataView);
}
function dte(e, r) {
  return (uL(r) ? sL : fL)(e, r);
}
function fL(e, r) {
  var t = r ? r.length : 0, n = e ? Math.min(t, e.length) : 0, i = new Array(n), o = new Array(t), a;
  for (a = 0; a < n; ++a) i[a] = cL(e[a], r[a]);
  for (; a < t; ++a) o[a] = r[a];
  return function(l) {
    for (a = 0; a < n; ++a) o[a] = i[a](l);
    return o;
  };
}
function vte(e, r) {
  var t = /* @__PURE__ */ new Date();
  return e = +e, r = +r, function(n) {
    return t.setTime(e * (1 - n) + r * n), t;
  };
}
function Bp(e, r) {
  return e = +e, r = +r, function(t) {
    return e * (1 - t) + r * t;
  };
}
function pte(e, r) {
  var t = {}, n = {}, i;
  (e === null || typeof e != "object") && (e = {}), (r === null || typeof r != "object") && (r = {});
  for (i in r)
    i in e ? t[i] = cL(e[i], r[i]) : n[i] = r[i];
  return function(o) {
    for (i in t) n[i] = t[i](o);
    return n;
  };
}
var Dp = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, sv = new RegExp(Dp.source, "g");
function gte(e) {
  return function() {
    return e;
  };
}
function yte(e) {
  return function(r) {
    return e(r) + "";
  };
}
function Cte(e, r) {
  var t = Dp.lastIndex = sv.lastIndex = 0, n, i, o, a = -1, l = [], s = [];
  for (e = e + "", r = r + ""; (n = Dp.exec(e)) && (i = sv.exec(r)); )
    (o = i.index) > t && (o = r.slice(t, o), l[a] ? l[a] += o : l[++a] = o), (n = n[0]) === (i = i[0]) ? l[a] ? l[a] += i : l[++a] = i : (l[++a] = null, s.push({ i: a, x: Bp(n, i) })), t = sv.lastIndex;
  return t < r.length && (o = r.slice(t), l[a] ? l[a] += o : l[++a] = o), l.length < 2 ? s[0] ? yte(s[0].x) : gte(r) : (r = s.length, function(f) {
    for (var h = 0, d; h < r; ++h) l[(d = s[h]).i] = d.x(f);
    return l.join("");
  });
}
function cL(e, r) {
  var t = typeof r, n;
  return r == null || t === "boolean" ? Wg(r) : (t === "number" ? Bp : t === "string" ? (n = Xs(r)) ? (r = n, qw) : Cte : r instanceof Xs ? qw : r instanceof Date ? vte : uL(r) ? sL : Array.isArray(r) ? fL : typeof r.valueOf != "function" && typeof r.toString != "function" || isNaN(r) ? pte : Bp)(e, r);
}
var da;
(function(e) {
  e.ScrollChange = "scroll-change", e.ScrollEnd = "scroll-end";
})(da || (da = {}));
var uv = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      n.isMobile = !1, n.eventHandlers = [], n.scrollFrameId = null, n.getCoordinatesName = function() {
        var g = n.isHorizontal ? "x1" : "y1", y = n.isHorizontal ? "x2" : "y2";
        return { from: g, to: y };
      }, n.getCoordinatesWithBBoxExtraPadding = function() {
        var g = n.theme.size, y = n.isHorizontal ? 0 : g / 2, C = n.isHorizontal ? g : g / 2;
        return {
          start: n.thumbOffset + y,
          end: n.thumbOffset + n.thumbLen - C
        };
      }, n.current = function() {
        var g = n.thumbLen / n.trackLen, y = n.thumbOffset / n.trackLen;
        return y / (1 - g);
      }, n.updateThumbLen = function(g) {
        if (n.thumbLen !== g) {
          n.thumbLen = g;
          var y = n.getCoordinatesName();
          n.thumbShape.attr(y.to, n.thumbOffset + g), n.emitScrollChange(n.thumbOffset / (n.trackLen - n.thumbLen) * n.scrollTargetMaxOffset, !1);
        }
      }, n.updateThumbOffset = function(g, y) {
        var C;
        y === void 0 && (y = !0);
        var _ = n.validateRange(g), w = n.thumbOffset === _ && _ !== 0;
        if (!w) {
          n.thumbOffset = _;
          var x = n.getCoordinatesName(), S = x.from, T = x.to, R = n.getCoordinatesWithBBoxExtraPadding(), B = R.start, $ = R.end;
          n.thumbShape.attr((C = {}, C[S] = B, C[T] = $, C)), y && n.emitScrollChange(_ / (n.trackLen - n.thumbLen) * n.scrollTargetMaxOffset, !1);
        }
      }, n.onlyUpdateThumbOffset = function(g) {
        var y;
        n.updateThumbOffset(g, !1), (y = n.get("canvas")) === null || y === void 0 || y.draw();
      }, n.emitScrollChange = function(g, y) {
        y === void 0 && (y = !0), cancelAnimationFrame(n.scrollFrameId), n.scrollFrameId = requestAnimationFrame(function() {
          n.emit(da.ScrollChange, {
            offset: g,
            updateThumbOffset: y
          });
        });
      }, n.addEventListener = function(g, y, C) {
        return g == null || g.addEventListener(y, C, !1), {
          remove: function() {
            g == null || g.removeEventListener(y, C, !1);
          }
        };
      }, n.addEvent = function(g, y, C) {
        g.on(y, C), n.eventHandlers.push({ target: g, type: y, handler: C });
      }, n.initScrollBar = function() {
        n.scrollBarGroup = n.createScrollBarGroup(), n.scrollBarGroup.move(n.position.x, n.position.y), n.bindEvents();
      }, n.createScrollBarGroup = function() {
        var g = n.addGroup({
          className: n.isHorizontal ? "horizontalBar" : "verticalBar"
        });
        return n.trackShape = n.createTrackShape(g), n.thumbShape = n.createThumbShape(g), g;
      }, n.createTrackShape = function(g) {
        var y = n.theme, C = y.lineCap, _ = C === void 0 ? "round" : C, w = y.trackColor, x = y.size, S = {
          lineWidth: x,
          stroke: w,
          lineCap: _
        };
        return n.isHorizontal ? g.addShape("line", {
          attrs: M(M({}, S), { x1: 0, y1: x / 2, x2: n.trackLen, y2: x / 2 })
        }) : g.addShape("line", {
          attrs: M(M({}, S), { x1: x / 2, y1: 0, x2: x / 2, y2: n.trackLen })
        });
      }, n.createThumbShape = function(g) {
        var y = n.theme, C = y.size, _ = y.lineCap, w = _ === void 0 ? "round" : _, x = y.thumbColor, S = {
          lineWidth: C,
          stroke: x,
          lineCap: w,
          cursor: "default"
        }, T = n.getCoordinatesWithBBoxExtraPadding(), R = T.start, B = T.end;
        return n.isHorizontal ? g.addShape("line", {
          attrs: M(M({}, S), { x1: R, y1: C / 2, x2: B, y2: C / 2 })
        }) : g.addShape("line", {
          attrs: M(M({}, S), { x1: C / 2, y1: R, x2: C / 2, y2: B })
        });
      }, n.bindEvents = function() {
        n.on("mousedown", n.onStartEvent(!1)), n.on("mouseup", n.onMouseUp), n.on("touchstart", n.onStartEvent(!0)), n.on("touchend", n.onMouseUp), n.trackShape.on("click", n.onTrackClick), n.thumbShape.on("mouseover", n.onTrackMouseOver), n.thumbShape.on("mouseout", n.onTrackMouseOut);
      }, n.onStartEvent = function(g) {
        return function(y) {
          y.preventDefault(), n.isMobile = g;
          var C = n.isMobile ? ge(y, "touches.0", y) : y, _ = C.clientX, w = C.clientY;
          n.startPos = n.isHorizontal ? _ : w, n.bindLaterEvent();
        };
      }, n.bindLaterEvent = function() {
        var g = n.get("canvas"), y = document.body, C = [];
        n.isMobile ? (C = [
          n.addEventListener(y, "touchmove", n.onMouseMove),
          n.addEventListener(y, "touchend", n.onMouseUp),
          n.addEventListener(y, "touchcancel", n.onMouseUp)
        ], n.addEvent(g, "touchend", n.onMouseUp), n.addEvent(g, "touchcancel", n.onMouseUp)) : (C = [
          n.addEventListener(y, "mousemove", n.onMouseMove),
          n.addEventListener(y, "mouseup", n.onMouseUp),
          // 为了保证划出 canvas containerDom 时还没触发 mouseup
          n.addEventListener(y, "mouseleave", n.onMouseUp)
        ], n.addEvent(g, "mouseup", n.onMouseUp)), n.clearEvents = function() {
          C.forEach(function(_) {
            _ == null || _.remove();
          }), xe(n.eventHandlers, function(_) {
            var w;
            (w = _.target) === null || w === void 0 || w.off(_.type, _.handler);
          }), n.eventHandlers.length = 0;
        };
      }, n.onTrackClick = function(g) {
        var y = n.isHorizontal ? g.x - n.position.x - n.thumbLen / 2 : g.y - n.position.y - n.thumbLen / 2, C = n.validateRange(y);
        n.updateThumbOffset(C);
      }, n.onMouseMove = function(g) {
        g.preventDefault();
        var y = n.isMobile ? ge(g, "touches.0", g) : g, C = y.clientX, _ = y.clientY, w = n.isHorizontal ? C : _, x = w - n.startPos;
        n.startPos = w, n.updateThumbOffset(n.thumbOffset + x);
      }, n.onMouseUp = function(g) {
        var y;
        n.emit(da.ScrollEnd, {}), g.preventDefault(), (y = n.clearEvents) === null || y === void 0 || y.call(n);
      }, n.onTrackMouseOver = function() {
        var g = n.theme, y = g.thumbHoverColor, C = g.hoverSize;
        n.thumbShape.attr("stroke", y), n.thumbShape.attr("lineWidth", C);
      }, n.onTrackMouseOut = function() {
        var g = n.theme, y = g.thumbColor, C = g.size;
        n.thumbShape.attr("stroke", y), n.thumbShape.attr("lineWidth", C);
      }, n.validateRange = function(g) {
        var y = g;
        return g + n.thumbLen > n.trackLen ? y = n.trackLen - n.thumbLen : g + n.thumbLen < n.thumbLen && (y = 0), y;
      };
      var i = t.isHorizontal, o = i === void 0 ? !1 : i, a = t.trackLen, l = t.thumbLen, s = t.position, f = t.thumbOffset, h = f === void 0 ? 0 : f, d = t.theme, v = t.scrollTargetMaxOffset;
      return n.isHorizontal = o, n.thumbOffset = h, n.trackLen = a, n.thumbLen = l, n.position = s, n.theme = d, n.scrollTargetMaxOffset = v, n.initScrollBar(), n;
    }
    return r;
  }(_i)
), hL = function(e, r, t) {
  if (t <= 0)
    return {
      start: 0,
      end: 0
    };
  var n = gl(e, function(o, a) {
    var l = r;
    return l >= o && l < e[a + 1];
  }, 0);
  n = Math.max(n, 0);
  var i = t === r ? n : gl(e, function(o, a) {
    var l = t;
    return l > o && l <= e[a + 1];
  }, n);
  return i = Math.min(i === -1 ? 1 / 0 : i, e.length - 2), {
    start: n,
    end: i
  };
}, mte = function(e, r) {
  var t = r.width, n = r.originalWidth, i = Math.min(n - t, e);
  return i < 0 ? 0 : i;
}, fv = function(e, r, t) {
  var n = Math.min(r - t, e);
  return n < 0 ? 0 : n;
}, ys = function(e, r) {
  if (e === void 0 && (e = []), Q(e))
    return [];
  var t = [];
  return e.forEach(function(n) {
    if (n instanceof r && t.push(n), n instanceof _i) {
      var i = n.getChildren();
      i.forEach(function(o) {
        o instanceof r && t.push(o);
      });
    }
  }), t;
}, dL = function(e, r, t) {
  return t.slice(e, r + 1).map(function(n) {
    return n.x + n.width;
  });
}, fh = function(e, r, t) {
  for (var n = [], i = e; i < r + 1; i++)
    n.push(t.getCellOffsetY(i + 1));
  return n;
}, _te = function(e, r, t, n) {
  var i = fh(e, r, n), o = n.getCellOffsetY(e);
  return i.map(function(a) {
    return a - o + t;
  });
}, Kw = function(e, r, t) {
  var n = W(t, 4), i = n[0], o = n[1], a = n[2], l = n[3];
  return e >= i && e <= o && r >= a && r <= l;
}, jw = function(e) {
  for (var r = W(e, 4), t = r[0], n = r[1], i = r[2], o = r[3], a = [], l = t; l <= n; l += 1)
    for (var s = i; s <= o; s += 1)
      a.push([l, s]);
  return a;
}, wte = function(e, r) {
  var t = [], n = [];
  if (Q(e))
    return Q(r) ? { add: t, remove: n } : { add: jw(r), remove: n };
  if (Q(r))
    return { add: t, remove: jw(e) };
  for (var i = W(e, 4), o = i[0], a = i[1], l = i[2], s = i[3], f = W(r, 4), h = f[0], d = f[1], v = f[2], g = f[3], y = o; y <= a; y++)
    for (var C = l; C <= s; C++)
      Kw(y, C, r) || n.push([y, C]);
  for (var y = h; y <= d; y += 1)
    for (var C = v; C <= g; C += 1)
      Kw(y, C, e) || t.push([y, C]);
  return {
    add: t,
    remove: n
  };
}, xte = function(e, r) {
  var t = [], n = [];
  return Object.keys(r).forEach(function(i) {
    var o = wte((e == null ? void 0 : e[i]) || [], r[i]), a = o.add, l = o.remove;
    t.push.apply(t, j([], W(a), !1)), n.push.apply(n, j([], W(l), !1));
  }), {
    add: t,
    remove: n
  };
}, vL = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(r, t) {
      t === void 0 && (t = !1), this.x = 0, this.y = 0, this.minX = 0, this.minY = 0, this.maxX = 0, this.maxY = 0, this.width = 0, this.height = 0, this.originalWidth = 0, this.originalHeight = 0, this.viewportHeight = 0, this.viewportWidth = 0, this.facet = r, this.spreadsheet = r.spreadsheet, this.layoutResult = r.layoutResult, t && this.calculateBBox();
    }
    return e;
  }()
), pL = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.calculateBBox = function() {
      var t = this.getCornerBBoxWidth(), n = this.getCornerBBoxHeight();
      this.width = t, this.height = n, this.maxX = t, this.maxY = n;
    }, r.prototype.getCornerBBoxOriginalHeight = function() {
      var t = this.layoutResult.colsHierarchy, n = this.spreadsheet.options.style.colCfg;
      return t.sampleNodeForLastLevel ? Math.floor(t.height) : n == null ? void 0 : n.height;
    }, r.prototype.getCornerBBoxHeight = function() {
      return this.originalHeight = this.getCornerBBoxOriginalHeight(), this.originalHeight;
    }, r.prototype.getCornerBBoxWidth = function() {
      var t = this.layoutResult.rowsHierarchy;
      return this.originalWidth = Math.floor(t.width + this.facet.getSeriesNumberWidth()), this.spreadsheet.isScrollContainsRowHeader() ? this.originalWidth : this.adjustCornerBBoxWidth();
    }, r.prototype.adjustCornerBBoxWidth = function() {
      var t = this.layoutResult.colsHierarchy, n = this.spreadsheet.options.width, i = n * MD, o = t == null ? void 0 : t.width, a = n - this.originalWidth;
      if (this.originalWidth <= i || o <= a)
        return this.originalWidth;
      var l = 0, s = n - i;
      return o <= s ? l = this.originalWidth - (o - a) : l = i, Math.floor(l);
    }, r;
  }(vL)
), Ste = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.calculateBBox = function() {
      this.originalWidth = this.facet.getRealWidth(), this.originalHeight = this.facet.getRealHeight();
      var t = this.facet.cornerBBox, n = {
        x: Math.floor(t.maxX),
        y: Math.floor(t.maxY)
      }, i = this.spreadsheet.theme.scrollBar.size, o = this.spreadsheet.options, a = o.width, l = o.height, s = Math.max(0, a - n.x), f = Math.max(0, l - n.y - i);
      this.x = n.x, this.y = n.y, this.width = s, this.height = f, this.viewportHeight = Math.abs(Math.floor(Math.min(f, this.originalHeight))), this.viewportWidth = Math.abs(Math.floor(Math.min(s, this.originalWidth))), this.maxX = n.x + this.viewportWidth, this.maxY = n.y + this.viewportHeight, this.minX = n.x, this.minY = n.y;
      var h = this.spreadsheet.options, d = h.frozenTrailingColCount, v = h.frozenTrailingRowCount;
      d > 0 && (this.viewportWidth = this.width, this.maxX = n.x + this.width), v > 0 && (this.viewportHeight = this.height, this.maxY = n.y + this.height);
    }, r;
  }(vL)
), kg = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      return n.isHeaderCellInViewport = function(i, o, a, l) {
        return i + o >= a && a + l >= i;
      }, n.headerConfig = t, n;
    }
    return r.prototype.getConfig = function() {
      return this.headerConfig;
    }, r.prototype.clearResizeAreaGroup = function(t) {
      var n = this.get("parent"), i = n == null ? void 0 : n.findById(t);
      i == null || i.clear();
    }, r.prototype.render = function(t) {
      this.clearResizeAreaGroup(t), this.clear(), this.layout(), this.offset(), this.clip();
    }, r.prototype.onScrollXY = function(t, n, i) {
      this.headerConfig.scrollX = t, this.headerConfig.scrollY = n, this.render(i);
    }, r.prototype.onRowScrollX = function(t, n) {
      this.headerConfig.scrollX = t, this.render(n);
    }, r.prototype.clear = function() {
      e.prototype.clear.call(this);
    }, r;
  }(_i)
), Gg = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      return n.scrollGroup = n.addGroup({
        name: TD,
        zIndex: e2
      }), n;
    }
    return r.prototype.onColScroll = function(t, n) {
      this.headerConfig.scrollX !== t && (this.headerConfig.scrollX = t, this.render(n));
    }, r.prototype.clip = function() {
      var t = this.headerConfig, n = t.width, i = t.height, o = t.scrollX, a = t.spreadsheet, l = a.isFrozenRowHeader();
      this.scrollGroup.setClip({
        type: "rect",
        attrs: {
          x: l ? o : 0,
          y: 0,
          width: l ? n : n + o,
          height: i
        }
      });
    }, r.prototype.clear = function() {
      var t, n;
      (t = this.scrollGroup) === null || t === void 0 || t.clear(), (n = this.background) === null || n === void 0 || n.remove(!0);
    }, r.prototype.getCellInstance = function(t, n, i) {
      return new ih(t, n, i);
    }, r.prototype.getCellGroup = function(t) {
      return this.scrollGroup;
    }, r.prototype.isColCellInRect = function(t) {
      var n = this.headerConfig, i = n.spreadsheet, o = n.cornerWidth, a = n.width, l = n.scrollX;
      return (
        // don't care about scrollY, because there is only freeze col-header exist
        a + l > t.x && l - (i.isFrozenRowHeader() ? 0 : o) < t.x + t.width
      );
    }, r.prototype.layout = function() {
      var t = this, n = this.headerConfig, i = n.data, o = n.spreadsheet, a = o.options.colCell;
      xe(i, function(l) {
        var s = l;
        if (t.isColCellInRect(s)) {
          var f = (a == null ? void 0 : a(s, o, t.headerConfig)) || t.getCellInstance(s, o, t.headerConfig);
          s.belongsCell = f;
          var h = t.getCellGroup(s);
          h.add(f);
        }
      });
    }, r.prototype.offset = function() {
      var t = this.headerConfig, n = t.position, i = t.scrollX;
      rh(this.scrollGroup, n.x - i);
    }, r;
  }(kg)
), bte = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      return e.call(this, t) || this;
    }
    return r.getCornerHeader = function(t, n, i, o, a, l) {
      var s = t.width, f = t.height, h = n.originalWidth, d = n.originalHeight, v = n.width, g = n.height, y = this.getCornerNodes({ x: n.x, y: n.y }, h, d, o.rows, o.columns, a.rowsHierarchy, a.colsHierarchy, o.dataSet, i, l);
      return new r({
        data: y,
        position: { x: n.x, y: n.y },
        width: v,
        height: g,
        originalHeight: d,
        originalWidth: h,
        viewportWidth: s,
        viewportHeight: f,
        hierarchyType: o.hierarchyType,
        hierarchyCollapse: o.hierarchyCollapse,
        rows: o.rows,
        columns: o.columns,
        seriesNumberWidth: i,
        spreadsheet: l
      });
    }, r.getCornerNodes = function(t, n, i, o, a, l, s, f, h, d) {
      var v, g, y, C = [], _ = d.options.style.colCfg, w = s == null ? void 0 : s.sampleNodeForLastLevel, x = (v = w == null ? void 0 : w.y) !== null && v !== void 0 ? v : 0, S = (y = (g = w == null ? void 0 : w.height) !== null && g !== void 0 ? g : _ == null ? void 0 : _.height) !== null && y !== void 0 ? y : 0;
      if (h) {
        var T = new Qt({
          id: "",
          key: OD,
          value: Et("序号")
        });
        T.x = t == null ? void 0 : t.x, T.y = x, T.width = h, T.height = S, T.isPivotMode = !0, T.spreadsheet = d, T.cornerType = xn.Series, C.push(T);
      }
      if (d.isHierarchyTreeType()) {
        var R = this.getTreeCornerText(d), B = new Qt({
          key: "",
          id: R,
          value: R
        });
        B.x = t.x + h, B.y = x, B.width = n - h, B.height = S, B.seriesNumberWidth = h, B.isPivotMode = !0, B.spreadsheet = d, B.cornerType = xn.Row, C.push(B);
      } else
        l.sampleNodesForAllLevels.forEach(function($) {
          var N = o[$.level], z = new Qt({
            key: N,
            id: N,
            value: f.getFieldName(N)
          });
          z.x = $.x + h, z.y = x, z.width = $.width, z.height = S, z.field = N, z.isPivotMode = !0, z.cornerType = xn.Row, z.spreadsheet = d, C.push(z);
        });
      return s.sampleNodesForAllLevels.forEach(function($) {
        if ($.level < s.maxLevel) {
          var N = a[$.level], z = new Qt({
            key: N,
            id: N,
            value: f.getFieldName(N)
          });
          z.x = t.x, z.y = $.y, z.width = n, z.height = $.height, z.field = N, z.isPivotMode = !0, z.cornerType = xn.Col, z.spreadsheet = d, C.push(z);
        }
      }), C;
    }, r.getTreeCornerText = function(t) {
      var n = t.dataSet.fields.rows, i = n === void 0 ? [] : n, o = t.options.cornerText;
      if (o)
        return o;
      var a = t.store.get("drillDownFieldInLevel", []), l = a.map(function(f) {
        return f.drillField;
      }), s = i.filter(function(f) {
        return !Sr(l, f);
      }).map(function(f) {
        return t.dataSet.getFieldName(f);
      }).join("/");
      return s;
    }, r.prototype.onCorScroll = function(t, n) {
      this.headerConfig.scrollX = t, this.render(n);
    }, r.prototype.destroy = function() {
      e.prototype.destroy.call(this);
    }, r.prototype.layout = function() {
      this.renderCells();
    }, r.prototype.renderCells = function() {
      var t = this, n, i, o, a, l = this.headerConfig, s = l.data, f = l.spreadsheet, h = (i = (n = f == null ? void 0 : f.facet) === null || n === void 0 ? void 0 : n.cfg) === null || i === void 0 ? void 0 : i.cornerHeader, d = (a = (o = f == null ? void 0 : f.facet) === null || o === void 0 ? void 0 : o.cfg) === null || a === void 0 ? void 0 : a.cornerCell;
      if (h) {
        h(this, f, this.headerConfig);
        return;
      }
      s.forEach(function(v) {
        var g;
        d && (g = d(v, t.headerConfig.spreadsheet, t.headerConfig)), Q(g) && (g = new pJ(v, t.headerConfig.spreadsheet, t.headerConfig)), t.add(g);
      });
    }, r.prototype.offset = function() {
      var t = this.headerConfig.scrollX;
      rh(this, -t);
    }, r.prototype.clip = function() {
      var t = this.headerConfig, n = t.width, i = t.height, o = t.scrollX;
      this.setClip({
        type: "rect",
        attrs: {
          x: o,
          y: 0,
          width: n,
          height: i
        }
      });
    }, r.prototype.getNodes = function() {
      return this.headerConfig.data || [];
    }, r;
  }(kg)
), Tte = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      return n.render(), n;
    }
    return r.prototype.layout = function() {
      this.addCornerBottomBorder(), this.addCornerRightBorder(), this.addSplitLineShadow();
    }, r.prototype.render = function() {
      this.clear(), this.layout();
    }, r.prototype.onBorderScroll = function(t) {
      this.cfg.scrollX = t;
      var n = this.cfg.position;
      Hi(this, n.x - t, 0), this.render();
    }, r.prototype.onChangeShadowVisibility = function(t, n) {
      this.cfg.showViewportLeftShadow = t > 0, this.cfg.showViewportRightShadow = Math.floor(t) < Math.floor(n), this.render();
    }, r.prototype.addCornerRightBorder = function() {
      var t, n = this.cfg, i = n.isPivotMode;
      if (i) {
        var o = n.width, a = n.height, l = n.viewportHeight, s = n.position, f = n.spreadsheet, h = (t = f.theme) === null || t === void 0 ? void 0 : t.splitLine, d = s.x + o, v = s.y, g = s.y + a + l;
        this.addShape("line", {
          attrs: {
            x1: d,
            y1: v,
            x2: d,
            y2: g,
            stroke: h.verticalBorderColor,
            lineWidth: h.verticalBorderWidth,
            opacity: h.verticalBorderColorOpacity,
            lineDash: h.borderDash
          }
        });
      }
    }, r.prototype.addCornerBottomBorder = function() {
      var t, n = this.cfg, i = n.width, o = n.height, a = n.viewportWidth, l = n.position, s = n.scrollX, f = n.scrollContainsRowHeader, h = n.spreadsheet, d = (t = h.theme) === null || t === void 0 ? void 0 : t.splitLine, v = l.x, g = v + i + a + (f ? s : 0), y = l.y + o - 1;
      this.addShape("line", {
        attrs: {
          x1: v,
          y1: y,
          x2: g,
          y2: y,
          stroke: d.horizontalBorderColor,
          lineWidth: d.horizontalBorderWidth,
          opacity: d.horizontalBorderColorOpacity,
          lineDash: d.borderDash
        }
      });
    }, r.prototype.addSplitLineShadow = function() {
      var t, n = this.cfg, i = n.isPivotMode, o = n.spreadsheet, a = (t = o.theme) === null || t === void 0 ? void 0 : t.splitLine;
      !i || !a.showShadow || !o.isFrozenRowHeader() || (this.addSplitLineLeftShadow(), this.addSplitLineRightShadow());
    }, r.prototype.addSplitLineLeftShadow = function() {
      var t, n, i;
      if (this.cfg.showViewportLeftShadow) {
        var o = this.cfg, a = o.width, l = o.height, s = o.viewportHeight, f = o.position, h = o.spreadsheet, d = (t = h.theme) === null || t === void 0 ? void 0 : t.splitLine, v = f.x + a, g = f.y;
        this.addShape("rect", {
          attrs: {
            x: v,
            y: g,
            width: d.shadowWidth,
            height: s + l,
            fill: "l (0) 0:".concat((n = d.shadowColors) === null || n === void 0 ? void 0 : n.left, " 1:").concat((i = d.shadowColors) === null || i === void 0 ? void 0 : i.right)
          }
        });
      }
    }, r.prototype.addSplitLineRightShadow = function() {
      var t, n, i;
      if (this.cfg.showViewportRightShadow) {
        var o = this.cfg, a = o.width, l = o.height, s = o.viewportHeight, f = o.viewportWidth, h = o.position, d = o.spreadsheet, v = (t = d.theme) === null || t === void 0 ? void 0 : t.splitLine, g = h.x + a + f - v.shadowWidth, y = h.y;
        this.addShape("rect", {
          attrs: {
            x: g,
            y,
            width: v.shadowWidth,
            height: s + l,
            fill: "l (0) 0:".concat((n = v.shadowColors) === null || n === void 0 ? void 0 : n.right, " 1:").concat((i = v.shadowColors) === null || i === void 0 ? void 0 : i.left)
          }
        });
      }
    }, r;
  }(_i)
), Ug = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      return e.call(this, t) || this;
    }
    return r.prototype.destroy = function() {
      e.prototype.destroy.call(this), this.gm && this.gm.destroy();
    }, r.prototype.rowCellInRect = function(t) {
      var n = this.headerConfig, i = n.width, o = n.viewportHeight, a = n.seriesNumberWidth, l = n.scrollY, s = n.scrollX;
      return o + l > t.y && // bottom
      l < t.y + t.height && // top
      i - a + s > t.x && // left
      s - a < t.x + t.width;
    }, r.prototype.createCellInstance = function(t) {
      return new cu(t, this.headerConfig.spreadsheet, this.headerConfig);
    }, r.prototype.getCellGroup = function(t) {
      return this;
    }, r.prototype.getCustomRowCell = function() {
      var t, n, i = this.headerConfig.spreadsheet;
      return (n = (t = i == null ? void 0 : i.facet) === null || t === void 0 ? void 0 : t.cfg) === null || n === void 0 ? void 0 : n.rowCell;
    }, r.prototype.layout = function() {
      var t = this, n = this.headerConfig, i = n.data, o = n.spreadsheet, a = this.getCustomRowCell();
      xe(i, function(l) {
        if (t.rowCellInRect(l) && l.height !== 0) {
          var s = void 0;
          a && (s = a(l, o, t.headerConfig)), Q(s) && o.isPivotMode() && (s = t.createCellInstance(l)), l.belongsCell = s;
          var f = t.getCellGroup(l);
          f.add(s);
        }
      });
    }, r.prototype.offset = function() {
      var t = this.headerConfig, n = t.scrollX, i = t.scrollY, o = t.position, a = t.seriesNumberWidth;
      Hi(this, o.x - n + a, o.y - i);
    }, r.prototype.clip = function() {
      var t = this.headerConfig, n = t.width, i = t.viewportHeight, o = t.scrollX, a = t.scrollY, l = t.seriesNumberWidth;
      this.setClip({
        type: "rect",
        attrs: {
          // 由于多移动了seriesNumberWidth跨度，所有需要向左切。 - 是反向剪裁（右 -> 左）
          x: o - l,
          y: a,
          width: n,
          height: i
        }
      });
    }, r;
  }(kg)
), gL = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      n.scrollGroup = n.addGroup({
        name: AD,
        zIndex: e2
      }), n.frozenHeadGroup = n.addGroup({
        name: RD,
        zIndex: Ls
      });
      var i = n.headerConfig, o = i.position, a = i.seriesNumberWidth;
      return Hi(n.frozenHeadGroup, o.x + a, o.y), n;
    }
    return r.prototype.rowCellInRectXDir = function(t) {
      var n = this.headerConfig, i = n.width, o = n.scrollX, a = n.seriesNumberWidth, l = t.x + a;
      return i + o > l && o < l + t.width;
    }, r.prototype.rowCellInRectYDir = function(t) {
      var n = this.headerConfig, i = n.viewportHeight, o = n.scrollY, a = t.y - this.getFrozenFirstRowHeight();
      return i + o > a && o < a + t.height;
    }, r.prototype.rowCellInRect = function(t) {
      var n = this.rowCellInRectXDir(t);
      return this.isFrozenRow(t) ? n : n && this.rowCellInRectYDir(t);
    }, r.prototype.getCellGroup = function(t) {
      return this.isFrozenRow(t) ? this.frozenHeadGroup : this.scrollGroup;
    }, r.prototype.offset = function() {
      var t = this.headerConfig, n = t.scrollX, i = t.scrollY, o = t.position, a = t.seriesNumberWidth, l = o.x - n + a;
      Hi(this.scrollGroup, l, o.y - i), rh(this.frozenHeadGroup, l);
    }, r.prototype.clip = function() {
      var t = this.headerConfig, n = t.width, i = t.viewportHeight, o = t.scrollX, a = t.scrollY, l = t.seriesNumberWidth, s = o - l;
      this.scrollGroup.setClip({
        type: "rect",
        attrs: {
          x: s,
          y: a + this.getFrozenFirstRowHeight(),
          width: n,
          height: i
        }
      }), this.frozenHeadGroup.setClip({
        type: "rect",
        attrs: {
          x: s,
          y: 0,
          width: this.headerConfig.width,
          height: this.getFrozenFirstRowHeight()
        }
      });
    }, r.prototype.isFrozenRow = function(t) {
      var n, i = this.headerConfig.spreadsheet, o = i.facet, a = Cl(i.options, (n = o.layoutResult) === null || n === void 0 ? void 0 : n.rowNodes).frozenRowCount;
      return a > 0 && t.rowIndex >= 0 && t.rowIndex < a;
    }, r.prototype.getFrozenFirstRowHeight = function() {
      var t, n = this.headerConfig.spreadsheet, i = n.facet, o = Cl(n.options, (t = i.layoutResult) === null || t === void 0 ? void 0 : t.rowNodes).frozenRowHeight;
      return o;
    }, r.prototype.clear = function() {
      this.frozenHeadGroup.clear(), this.scrollGroup.clear();
    }, r;
  }(Ug)
), yL = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.getSeriesNumberHeader = function(t) {
      var n, i = t.viewportBBox, o = t.seriesNumberWidth, a = t.leafNodes, l = t.spreadsheet, s = t.cornerWidth, f = i.height, h = i.viewportHeight, d = [], v = l.isHierarchyTreeType();
      a.forEach(function(x) {
        var S = new Qt({
          id: "",
          key: "",
          value: "".concat(d.length + 1)
        });
        S.x = x.x, S.y = x.y, S.height = v ? x.getTotalHeightForTreeHierarchy() : x.height, S.width = o, S.rowIndex = x.rowIndex, S.spreadsheet = l, S.isLeaf = !0, d.push(S);
      });
      var g = l.facet, y = Cl(l.options, (n = g.layoutResult) === null || n === void 0 ? void 0 : n.rowNodes), C = y.frozenRowCount, _ = y.frozenRowHeight, w = !!C;
      return new r({
        width: s,
        height: f,
        viewportWidth: s,
        viewportHeight: w ? h - _ : h,
        position: { x: 0, y: i.y },
        data: d,
        spreadsheet: l,
        // There are no other lines before the serial number row
        seriesNumberWidth: 0,
        hierarchyType: l.options.hierarchyType,
        linkFields: []
      });
    }, r.prototype.createCellInstance = function(t) {
      var n = this.isFrozenRow(t);
      return new zE(t, this.headerConfig.spreadsheet, M(M({}, this.headerConfig), { scrollY: n ? 0 : this.headerConfig.scrollY }), n);
    }, r.prototype.getCustomRowCell = function() {
      return null;
    }, r;
  }(gL)
), Ete = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.createCellInstance = function(t) {
      var n = this.headerConfig, i = n.spreadsheet, o = n.scrollY, a = this.isFrozenRow(t);
      return new cu(t, i, M(M({}, this.headerConfig), { scrollY: a ? 0 : o }), a);
    }, r;
  }(gL)
), Lte = (
  /** @class */
  function() {
    function e(r) {
      var t = this;
      this.scrollFrameId = null, this.hideScrollBar = function() {
        var n, i, o;
        (n = t.hRowScrollBar) === null || n === void 0 || n.hide(), (i = t.hScrollBar) === null || i === void 0 || i.hide(), (o = t.vScrollBar) === null || o === void 0 || o.hide();
      }, this.delayHideScrollBar = Bs(this.hideScrollBar, 1e3), this.delayHideScrollbarOnMobile = function() {
        Xt() && t.delayHideScrollBar();
      }, this.showVerticalScrollBar = function() {
        var n;
        (n = t.vScrollBar) === null || n === void 0 || n.show();
      }, this.showHorizontalScrollBar = function() {
        var n, i;
        (n = t.hRowScrollBar) === null || n === void 0 || n.show(), (i = t.hScrollBar) === null || i === void 0 || i.show();
      }, this.onContainerWheelForMobileCompatibility = function() {
        var n = t.spreadsheet.getCanvasElement(), i, o;
        n.addEventListener("touchstart", function(a) {
          i = a.touches[0].clientY;
        }), n.addEventListener("touchend", function(a) {
          o = a.changedTouches[0].clientY, o < i ? t.scrollDirection = Yt.SCROLL_UP : o > i && (t.scrollDirection = Yt.SCROLL_DOWN);
        });
      }, this.onContainerWheel = function() {
        t.onContainerWheelForPc(), t.onContainerWheelForMobile();
      }, this.getMobileWheelDeltaY = function(n) {
        return t.scrollDirection === Yt.SCROLL_UP ? Math.max(0, n) : t.scrollDirection === Yt.SCROLL_DOWN ? Math.min(0, n) : n;
      }, this.onContainerWheelForPc = function() {
        var n = t.spreadsheet.getCanvasElement();
        n == null || n.addEventListener("wheel", t.onWheel);
      }, this.onContainerWheelForMobile = function() {
        t.mobileWheel = new MJ(t.spreadsheet.container), t.mobileWheel.on("wheel", function(n) {
          t.spreadsheet.hideTooltip();
          var i = n.event, o = n.deltaX, a = n.deltaY, l = n.x, s = n.y, f = t.getMobileWheelDeltaY(a);
          t.onWheel(M(M({}, i), { deltaX: o, deltaY: f, offsetX: l, offsetY: s }));
        }), t.onContainerWheelForMobileCompatibility();
      }, this.bindEvents = function() {
        t.onContainerWheel(), t.emitPaginationEvent();
      }, this.setScrollOffset = function(n) {
        Object.keys(n).forEach(function(i) {
          var o = n[i];
          qc(o) || t.spreadsheet.store.set(i, Math.floor(o));
        });
      }, this.getScrollOffset = function() {
        var n = t.spreadsheet.store;
        return {
          scrollX: n.get("scrollX", 0),
          scrollY: n.get("scrollY", 0),
          rowHeaderScrollX: n.get("rowHeaderScrollX", 0)
        };
      }, this.emitPaginationEvent = function() {
        var n = t.cfg.pagination;
        if (n) {
          var i = n.current, o = i === void 0 ? pp : i, a = n.pageSize, l = t.viewCellHeights.getTotalLength(), s = Math.floor((l - 1) / a) + 1;
          t.cfg.spreadsheet.emit(I.LAYOUT_PAGINATION, {
            pageSize: a,
            pageCount: s,
            total: l,
            current: o
          });
        }
      }, this.unbindEvents = function() {
        var n = t.spreadsheet.getCanvasElement();
        n == null || n.removeEventListener("wheel", t.onWheel), t.mobileWheel.destroy();
      }, this.clipPanelGroup = function() {
        var n;
        t.foregroundGroup = t.spreadsheet.foregroundGroup, t.backgroundGroup = t.spreadsheet.backgroundGroup, t.panelGroup = t.spreadsheet.panelGroup;
        var i = t.panelBBox, o = i.width, a = i.height;
        (n = t.spreadsheet.panelScrollGroup) === null || n === void 0 || n.setClip({
          type: "rect",
          attrs: {
            x: 0,
            y: t.cornerBBox.height,
            width: o,
            height: a
          }
        });
      }, this.calculateCellWidthHeight = function() {
        var n = t.layoutResult.colLeafNodes, i = jc(n, function(o, a) {
          return o.push(ut(o) + a.width), o;
        }, [0]);
        t.viewCellWidths = i, t.viewCellHeights = t.getViewCellHeights(t.layoutResult);
      }, this.getRealScrollX = function(n, i) {
        return i === void 0 && (i = 0), t.cfg.spreadsheet.isScrollContainsRowHeader() ? n : i;
      }, this.calculatePanelBBox = function() {
        t.panelBBox = new Ste(t, !0);
      }, this.getRealWidth = function() {
        return ut(t.viewCellWidths);
      }, this.getRealHeight = function() {
        var n = t.cfg.pagination, i = t.viewCellHeights;
        if (n) {
          var o = t.getCellRange(), a = o.start, l = o.end;
          return i.getCellOffsetY(l + 1) - i.getCellOffsetY(a);
        }
        return i.getTotalHeight();
      }, this.clearAllGroup = function() {
        for (var n = t.panelGroup.getChildren() || [], i = n.length - 1; i >= 0; i--) {
          var o = n[i];
          o instanceof _i ? o.set("children", []) : n[i].remove();
        }
        t.foregroundGroup.set("children", []), t.backgroundGroup.set("children", []);
      }, this.scrollWithAnimation = function(n, i, o) {
        var a, l, s, f;
        n === void 0 && (n = {}), i === void 0 && (i = 200);
        var h = t.getAdjustedScrollOffset({
          scrollX: ((a = n.offsetX) === null || a === void 0 ? void 0 : a.value) || 0,
          scrollY: ((l = n.offsetY) === null || l === void 0 ? void 0 : l.value) || 0,
          rowHeaderScrollX: ((s = n.rowHeaderOffsetX) === null || s === void 0 ? void 0 : s.value) || 0
        }), d = h.scrollX, v = h.scrollY, g = h.rowHeaderScrollX;
        (f = t.timer) === null || f === void 0 || f.stop();
        var y = t.getScrollOffset(), C = [
          d ?? y.scrollX,
          v ?? y.scrollY,
          g ?? y.rowHeaderScrollX
        ], _ = dte(Object.values(y), C);
        t.timer = Qp(function(w) {
          try {
            var x = Math.min(w / i, 1), S = W(_(x), 3), T = S[0], R = S[1], B = S[2];
            t.setScrollOffset({
              rowHeaderScrollX: B,
              scrollX: T,
              scrollY: R
            }), t.startScroll(), w > i && (t.timer.stop(), o == null || o());
          } catch ($) {
            console.error($), t.timer.stop();
          }
        });
      }, this.scrollImmediately = function(n) {
        var i, o, a;
        n === void 0 && (n = {});
        var l = t.getAdjustedScrollOffset({
          scrollX: ((i = n.offsetX) === null || i === void 0 ? void 0 : i.value) || 0,
          scrollY: ((o = n.offsetY) === null || o === void 0 ? void 0 : o.value) || 0,
          rowHeaderScrollX: ((a = n.rowHeaderOffsetX) === null || a === void 0 ? void 0 : a.value) || 0
        }), s = l.scrollX, f = l.scrollY, h = l.rowHeaderScrollX;
        t.setScrollOffset({ scrollX: s, scrollY: f, rowHeaderScrollX: h }), t.startScroll();
      }, this.startScroll = function(n) {
        var i, o, a;
        n === void 0 && (n = !1);
        var l = t.getScrollOffset(), s = l.rowHeaderScrollX, f = l.scrollX, h = l.scrollY;
        (i = t.hRowScrollBar) === null || i === void 0 || i.onlyUpdateThumbOffset(t.getScrollBarOffset(s, t.hRowScrollBar)), (o = t.hScrollBar) === null || o === void 0 || o.onlyUpdateThumbOffset(t.getScrollBarOffset(f, t.hScrollBar)), (a = t.vScrollBar) === null || a === void 0 || a.onlyUpdateThumbOffset(t.getScrollBarOffset(h, t.vScrollBar)), t.dynamicRenderCell(n);
      }, this.getRendererHeight = function() {
        var n = t.getCellRange(), i = n.start, o = n.end;
        return t.viewCellHeights.getCellOffsetY(o + 1) - t.viewCellHeights.getCellOffsetY(i);
      }, this.getAdjustedScrollOffset = function(n) {
        var i = n.scrollX, o = n.scrollY, a = n.rowHeaderScrollX;
        return {
          scrollX: fv(i, t.layoutResult.colsHierarchy.width, t.panelBBox.width),
          scrollY: fv(o, t.getRendererHeight(), t.panelBBox.height),
          rowHeaderScrollX: mte(a, t.cornerBBox)
        };
      }, this.renderRowScrollBar = function(n) {
        if (!t.cfg.spreadsheet.isScrollContainsRowHeader() && t.cornerBBox.width < t.cornerBBox.originalWidth) {
          var i = t.cornerBBox.originalWidth - t.cornerBBox.width, o = t.getScrollbarPosition().maxY, a = t.spreadsheet.theme, l = a.splitLine, s = a.scrollBar, f = Math.max(t.cornerBBox.width * t.cornerBBox.width / t.cornerBBox.originalWidth, s == null ? void 0 : s.thumbHorizontalMinSize), h = f - (l == null ? void 0 : l.verticalBorderWidth);
          t.hRowScrollBar = new uv({
            isHorizontal: !0,
            trackLen: t.cornerBBox.width,
            thumbLen: h,
            position: {
              x: t.cornerBBox.minX + t.scrollBarSize / 2,
              y: o
            },
            thumbOffset: n * (t.cornerBBox.width - f) / i,
            theme: t.scrollBarTheme,
            scrollTargetMaxOffset: i
          }), t.hRowScrollBar.on(da.ScrollChange, function(d) {
            var v, g, y = d.offset, C = t.getValidScrollBarOffset(y, i), _ = Math.floor(C);
            t.setScrollOffset({ rowHeaderScrollX: _ }), (v = t.rowHeader) === null || v === void 0 || v.onRowScrollX(_, vl), (g = t.rowIndexHeader) === null || g === void 0 || g.onRowScrollX(_, qm), t.cornerHeader.onRowScrollX(_, Uv);
            var w = t.getScrollBarOffset(_, t.hRowScrollBar), x = t.getScrollOffset(), S = x.scrollX, T = x.scrollY, R = {
              scrollX: S,
              scrollY: T,
              rowHeaderScrollX: w
            };
            t.hRowScrollBar.updateThumbOffset(w, !1), t.spreadsheet.emit(I.ROW_CELL_SCROLL, R), t.spreadsheet.emit(I.GLOBAL_SCROLL, R);
          }), t.foregroundGroup.add(t.hRowScrollBar);
        }
      }, this.getValidScrollBarOffset = function(n, i) {
        return ic(n, 0, i);
      }, this.renderHScrollBar = function(n, i, o) {
        if (Math.floor(n) < Math.floor(i)) {
          var a = t.scrollBarSize / 2, l = t.getScrollbarPosition().maxY, s = n + (t.cfg.spreadsheet.isScrollContainsRowHeader() ? Math.min(t.cornerBBox.width, t.getCanvasHW().width) : 0), f = {
            x: t.panelBBox.minX + (t.cfg.spreadsheet.isScrollContainsRowHeader() ? -t.cornerBBox.width + a : a),
            y: l
          }, h = i + (t.cfg.spreadsheet.isScrollContainsRowHeader() ? t.cornerBBox.width : 0), d = t.spreadsheet.theme.scrollBar, v = h - s, g = Math.max(s / h * s, d == null ? void 0 : d.thumbHorizontalMinSize);
          t.hScrollBar = new uv({
            isHorizontal: !0,
            trackLen: s,
            thumbLen: g,
            position: f,
            thumbOffset: o * (s - g) / v,
            theme: t.scrollBarTheme,
            scrollTargetMaxOffset: v
          }), t.hScrollBar.on(da.ScrollChange, function(y) {
            var C = y.offset, _ = y.updateThumbOffset, w = t.getValidScrollBarOffset(C, v);
            _ && t.hScrollBar.updateThumbOffset(t.getScrollBarOffset(w, t.hScrollBar), !1), t.setScrollOffset({
              scrollX: w
            }), t.dynamicRenderCell();
          }), t.foregroundGroup.add(t.hScrollBar);
        }
      }, this.getScrollbarPosition = function() {
        var n = t.panelBBox, i = n.maxX, o = n.maxY, a = t.getCanvasHW(), l = a.width, s = a.height, f = t.spreadsheet.options.interaction.scrollbarPosition === Qf.CONTENT;
        return {
          maxX: (f ? i : l) - t.scrollBarSize,
          maxY: f ? o : s - t.scrollBarSize
        };
      }, this.renderVScrollBar = function(n, i, o) {
        if (n < i) {
          var a = t.spreadsheet.theme.scrollBar, l = Math.max(n / i * n, a == null ? void 0 : a.thumbVerticalMinSize), s = i - n, f = t.getScrollbarPosition().maxX;
          t.vScrollBar = new uv({
            isHorizontal: !1,
            trackLen: n,
            thumbLen: l,
            thumbOffset: o * (n - l) / s,
            position: {
              x: f,
              y: t.panelBBox.minY
            },
            theme: t.scrollBarTheme,
            scrollTargetMaxOffset: s
          }), t.vScrollBar.on(da.ScrollChange, function(h) {
            var d = h.offset, v = h.updateThumbOffset, g = t.getValidScrollBarOffset(d, s);
            v && t.vScrollBar.updateThumbOffset(t.getScrollBarOffset(g, t.vScrollBar), !1), t.setScrollOffset({ scrollY: g }), t.dynamicRenderCell();
          }), t.foregroundGroup.add(t.vScrollBar);
        }
      }, this.getScrollBarOffset = function(n, i) {
        var o = i.trackLen, a = i.thumbLen, l = i.scrollTargetMaxOffset;
        return n * (o - a) / l;
      }, this.isScrollOverThePanelArea = function(n) {
        var i = n.offsetX, o = n.offsetY;
        return i > t.panelBBox.minX && i < t.panelBBox.maxX && o > t.panelBBox.minY && o < t.panelBBox.maxY;
      }, this.isScrollOverTheCornerArea = function(n) {
        var i = n.offsetX, o = n.offsetY;
        return i > t.cornerBBox.minX && i < t.cornerBBox.maxX && o > t.cornerBBox.minY && o < t.cornerBBox.maxY + t.panelBBox.height;
      }, this.updateHorizontalRowScrollOffset = function(n) {
        var i, o = n.offset, a = n.offsetX, l = n.offsetY;
        t.isScrollOverTheCornerArea({ offsetX: a, offsetY: l }) && ((i = t.hRowScrollBar) === null || i === void 0 || i.emitScrollChange(o));
      }, this.updateHorizontalScrollOffset = function(n) {
        var i, o = n.offset, a = n.offsetX, l = n.offsetY;
        (!t.hRowScrollBar || t.isScrollOverThePanelArea({ offsetX: a, offsetY: l })) && ((i = t.hScrollBar) === null || i === void 0 || i.emitScrollChange(o));
      }, this.isScrollToLeft = function(n) {
        var i = n.deltaX, o = n.offsetX, a = n.offsetY;
        if (!t.hScrollBar && !t.hRowScrollBar)
          return !0;
        var l = !t.hRowScrollBar || t.isScrollOverThePanelArea({ offsetY: a, offsetX: o }) || t.hRowScrollBar.thumbOffset <= 0, s = !t.hScrollBar || t.hScrollBar.thumbOffset <= 0;
        return i <= 0 && s && l;
      }, this.isScrollToRight = function(n) {
        var i, o, a, l, s, f, h = n.deltaX, d = n.offsetX, v = n.offsetY;
        if (!t.hScrollBar && !t.hRowScrollBar)
          return !0;
        var g = t.spreadsheet.isFrozenRowHeader() ? (i = t.panelBBox) === null || i === void 0 ? void 0 : i.width : (o = t.panelBBox) === null || o === void 0 ? void 0 : o.maxX, y = !t.hRowScrollBar || t.isScrollOverThePanelArea({ offsetY: v, offsetX: d }) || ((a = t.hRowScrollBar) === null || a === void 0 ? void 0 : a.thumbOffset) + ((l = t.hRowScrollBar) === null || l === void 0 ? void 0 : l.thumbLen) >= t.cornerBBox.width, C = t.hRowScrollBar && t.isScrollOverTheCornerArea({ offsetX: d, offsetY: v }) || ((s = t.hScrollBar) === null || s === void 0 ? void 0 : s.thumbOffset) + ((f = t.hScrollBar) === null || f === void 0 ? void 0 : f.thumbLen) >= g;
        return h >= 0 && C && y;
      }, this.isScrollToTop = function(n) {
        var i;
        return t.vScrollBar ? n <= 0 && ((i = t.vScrollBar) === null || i === void 0 ? void 0 : i.thumbOffset) <= 0 : !0;
      }, this.isScrollToBottom = function(n) {
        var i, o, a;
        return t.vScrollBar ? n >= 0 && ((i = t.vScrollBar) === null || i === void 0 ? void 0 : i.thumbOffset) + ((o = t.vScrollBar) === null || o === void 0 ? void 0 : o.thumbLen) >= ((a = t.panelBBox) === null || a === void 0 ? void 0 : a.height) : !0;
      }, this.isVerticalScrollOverTheViewport = function(n) {
        return !t.isScrollToTop(n) && !t.isScrollToBottom(n);
      }, this.isHorizontalScrollOverTheViewport = function(n) {
        return !t.isScrollToLeft(n) && !t.isScrollToRight(n);
      }, this.isScrollOverTheViewport = function(n) {
        var i = n.deltaY, o = n.deltaX, a = n.offsetY, l = a <= t.cornerBBox.maxY;
        return l ? !1 : i !== 0 ? t.isVerticalScrollOverTheViewport(i) : o !== 0 ? t.isHorizontalScrollOverTheViewport(n) : !1;
      }, this.cancelScrollFrame = function() {
        return Xt() && t.scrollFrameId ? !1 : (cancelAnimationFrame(t.scrollFrameId), !0);
      }, this.clearScrollFrameIdOnMobile = function() {
        Xt() && (t.scrollFrameId = null);
      }, this.stopScrollChainingIfNeeded = function(n) {
        var i = t.spreadsheet.options.interaction;
        i.overscrollBehavior !== "auto" && (t.cancelScrollFrame(), t.stopScrollChaining(n));
      }, this.stopScrollChaining = function(n) {
        var i, o;
        n != null && n.cancelable && ((i = n == null ? void 0 : n.preventDefault) === null || i === void 0 || i.call(n));
        var a = n == null ? void 0 : n.originalEvent;
        a != null && a.cancelable && ((o = a == null ? void 0 : a.preventDefault) === null || o === void 0 || o.call(a));
      }, this.onWheel = function(n) {
        var i = t.spreadsheet.options.interaction, o = n.deltaX, a = n.deltaY, l = n.offsetX, s = n.offsetY, f = n.shiftKey;
        f && ZT() && (l = l - o + a, o = a, s -= a, a = 0);
        var h = W(iZ(o, a, i.scrollSpeedRatio), 2), d = h[0], v = h[1];
        if (t.spreadsheet.hideTooltip(), t.spreadsheet.interaction.clearHoverTimer(), !t.isScrollOverTheViewport({
          deltaX: d,
          deltaY: v,
          offsetX: l,
          offsetY: s
        })) {
          t.stopScrollChainingIfNeeded(n);
          return;
        }
        t.stopScrollChaining(n), t.spreadsheet.interaction.addIntercepts([Le.HOVER]), t.cancelScrollFrame() && (t.scrollFrameId = requestAnimationFrame(function() {
          var g, y = t.getScrollOffset(), C = y.scrollX, _ = y.scrollY, w = y.rowHeaderScrollX;
          d !== 0 && (t.showHorizontalScrollBar(), t.updateHorizontalRowScrollOffset({
            offsetX: l,
            offsetY: s,
            offset: d + w
          }), t.updateHorizontalScrollOffset({
            offsetX: l,
            offsetY: s,
            offset: d + C
          })), v !== 0 && (t.showVerticalScrollBar(), (g = t.vScrollBar) === null || g === void 0 || g.emitScrollChange(v + _)), t.delayHideScrollbarOnMobile(), t.clearScrollFrameIdOnMobile();
        }));
      }, this.addCell = function(n) {
        var i = t.spreadsheet.panelScrollGroup;
        i == null || i.add(n);
      }, this.realCellRender = function(n, i) {
        var o = t.calculateXYIndexes(n, i);
        fi.getInstance().logger("renderIndex:", t.preCellIndexes, o);
        var a = xte(t.preCellIndexes, o), l = a.add, s = a.remove;
        fi.getInstance().debugCallback(Dj, function() {
          xe(l, function(h) {
            var d = W(h, 2), v = d[0], g = d[1], y = t.layoutResult.getCellMeta(g, v);
            if (y) {
              var C = t.cfg.dataCell(y);
              C.set("name", "".concat(v, "-").concat(g)), t.addCell(C);
            }
          });
          var f = ys(t.panelGroup.getChildren(), No);
          xe(s, function(h) {
            var d = W(h, 2), v = d[0], g = d[1], y = cr(f, function(C) {
              return C.get("name") === "".concat(v, "-").concat(g);
            });
            y == null || y.remove(!0);
          }), fi.getInstance().logger("Render Cell Panel: ".concat(f == null ? void 0 : f.length, ", Add: ").concat(l == null ? void 0 : l.length, ", Remove: ").concat(s == null ? void 0 : s.length));
        }), t.preCellIndexes = o, t.spreadsheet.emit(I.LAYOUT_AFTER_REAL_DATA_CELL_RENDER, {
          add: l,
          remove: s,
          spreadsheet: t.spreadsheet
        });
      }, this.getGridInfo = function() {
        var n = W(t.preCellIndexes.center, 4), i = n[0], o = n[1], a = n[2], l = n[3], s = dL(i, o, t.layoutResult.colLeafNodes), f = fh(a, l, t.viewCellHeights);
        return {
          cols: s,
          rows: f
        };
      }, this.onAfterScroll = Bs(function() {
        var n = t.spreadsheet, i = n.interaction, o = n.container;
        if (!i.isSelectedState() && (i.removeIntercepts([Le.HOVER]), i.getHoverAfterScroll())) {
          var a = i.eventController.canvasMousemoveEvent;
          if (a) {
            var l = a.x, s = a.y, f = o.getShape(l, s);
            f && o.emit(mr.MOUSE_MOVE, M(M({}, a), { shape: f, target: f, timestamp: performance.now() }));
          }
        }
      }, 300), this.cfg = r, this.spreadsheet = r.spreadsheet, this.init();
    }
    return Object.defineProperty(e.prototype, "scrollBarTheme", {
      get: function() {
        return this.spreadsheet.theme.scrollBar;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "scrollBarSize", {
      get: function() {
        return this.scrollBarTheme.size;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getCellCustomWidth = function(r, t) {
      return Vt(t) ? t == null ? void 0 : t(r) : t;
    }, e.prototype.getCellDraggedWidth = function(r) {
      var t = this.cfg.colCfg;
      return ge(t == null ? void 0 : t.widthByFieldValue, "".concat(r.value));
    }, e.prototype.render = function() {
      hZ(this.spreadsheet.dataCfg.fields) || (this.adjustScrollOffset(), this.renderHeaders(), this.renderScrollBars(), this.renderBackground(), this.dynamicRenderCell(!0));
    }, e.prototype.adjustScrollOffset = function() {
      var r = this.getAdjustedScrollOffset(this.getScrollOffset());
      this.setScrollOffset(r);
    }, e.prototype.getSeriesNumberWidth = function() {
      var r = this.cfg.showSeriesNumber;
      return r ? this.spreadsheet.theme.rowCell.seriesNumberWidth : 0;
    }, e.prototype.getCanvasHW = function() {
      return {
        width: this.cfg.width,
        height: this.cfg.height
      };
    }, e.prototype.updateScrollOffset = function(r) {
      var t, n, i, o, a, l;
      if (((t = r.rowHeaderOffsetX) === null || t === void 0 ? void 0 : t.value) !== void 0) {
        !((n = r.rowHeaderOffsetX) === null || n === void 0) && n.animate ? this.scrollWithAnimation(r) : this.scrollImmediately(r);
        return;
      }
      if (((i = r.offsetX) === null || i === void 0 ? void 0 : i.value) !== void 0) {
        !((o = r.offsetX) === null || o === void 0) && o.animate ? this.scrollWithAnimation(r) : this.scrollImmediately(r);
        return;
      }
      ((a = r.offsetY) === null || a === void 0 ? void 0 : a.value) !== void 0 && (!((l = r.offsetY) === null || l === void 0) && l.animate ? this.scrollWithAnimation(r) : this.scrollImmediately(r));
    }, e.prototype.getPaginationScrollY = function() {
      var r = this.cfg.pagination;
      if (r) {
        var t = r.current, n = t === void 0 ? pp : t, i = r.pageSize, o = this.viewCellHeights, a = Math.max((n - 1) * i, 0);
        return o.getCellOffsetY(a);
      }
      return 0;
    }, e.prototype.destroy = function() {
      this.unbindEvents(), this.clearAllGroup(), this.preCellIndexes = null, cancelAnimationFrame(this.scrollFrameId);
    }, e.prototype.calculateXYIndexes = function(r, t) {
      var n = this.panelBBox, i = n.viewportHeight, o = n.viewportWidth, a = Sg(r, t, this.viewCellWidths, this.viewCellHeights, {
        width: o,
        height: i,
        x: 0,
        y: 0
      }, this.getRealScrollX(this.cornerBBox.width));
      return {
        center: a
      };
    }, e.prototype.calculateCornerBBox = function() {
      this.cornerBBox = new pL(this, !0);
    }, e.prototype.getCellRange = function() {
      var r = this.cfg.pagination;
      return uZ(this.viewCellHeights, r);
    }, e.prototype.panelScrollGroupClip = function(r, t) {
      var n, i = this.spreadsheet.isFrozenRowHeader();
      (n = this.spreadsheet.panelScrollGroup) === null || n === void 0 || n.setClip({
        type: "rect",
        attrs: {
          x: i ? r : 0,
          y: t,
          width: this.panelBBox.width + (i ? 0 : r),
          height: this.panelBBox.height
        }
      });
    }, e.prototype.clip = function(r, t) {
      this.panelScrollGroupClip(r, t);
    }, e.prototype.translateRelatedGroups = function(r, t, n) {
      var i, o, a, l, s, f;
      Hi(this.spreadsheet.panelScrollGroup, this.cornerBBox.width - r, this.cornerBBox.height - t), (i = this.rowHeader) === null || i === void 0 || i.onScrollXY(this.getRealScrollX(r, n), t, vl), (o = this.rowIndexHeader) === null || o === void 0 || o.onScrollXY(this.getRealScrollX(r, n), t, qm), (a = this.cornerHeader) === null || a === void 0 || a.onCorScroll(this.getRealScrollX(r, n), Uv), (l = this.centerFrame) === null || l === void 0 || l.onChangeShadowVisibility(r, this.getRealWidth() - this.panelBBox.width), (s = this.centerFrame) === null || s === void 0 || s.onBorderScroll(this.getRealScrollX(r)), (f = this.columnHeader) === null || f === void 0 || f.onColScroll(r, o2);
    }, e.prototype.init = function() {
      var r = this;
      fi.getInstance().debugCallback(Bj, function() {
        r.layoutResult = r.doLayout(), r.saveInitColumnLeafNodes(r.layoutResult.colLeafNodes), r.spreadsheet.emit(I.LAYOUT_AFTER_HEADER_LAYOUT, r.layoutResult);
      }), this.calculateCellWidthHeight(), this.calculateCornerBBox(), this.calculatePanelBBox(), this.clipPanelGroup(), this.bindEvents();
    }, e.prototype.renderBackground = function() {
      var r = this.getCanvasHW(), t = r.width, n = r.height, i = this.spreadsheet.theme.background, o = i.color, a = i.opacity;
      this.backgroundGroup.addShape("rect", {
        attrs: {
          fill: o,
          opacity: a,
          x: 0,
          y: 0,
          width: t,
          height: n
        }
      });
    }, e.prototype.renderScrollBars = function() {
      var r = this.getScrollOffset(), t = r.scrollX, n = r.scrollY, i = r.rowHeaderScrollX, o = this.panelBBox, a = o.width, l = o.height, s = this.layoutResult.colsHierarchy.width, f = this.getRealHeight();
      this.renderRowScrollBar(i), this.renderHScrollBar(a, s, t), this.renderVScrollBar(l, f, n);
    }, e.prototype.renderHeaders = function() {
      var r = this.getSeriesNumberWidth();
      this.rowHeader = this.getRowHeader(), this.columnHeader = this.getColHeader(), r > 0 && !this.rowIndexHeader && (this.rowIndexHeader = this.getSeriesNumberHeader()), this.cornerHeader = this.getCornerHeader(), this.centerFrame = this.getCenterFrame(), this.rowIndexHeader && this.foregroundGroup.add(this.rowIndexHeader), this.rowHeader && this.foregroundGroup.add(this.rowHeader), this.foregroundGroup.add(this.columnHeader), this.foregroundGroup.add(this.cornerHeader), this.foregroundGroup.add(this.centerFrame);
    }, e.prototype.getRowHeaderCfg = function() {
      var r, t, n, i = this.panelBBox, o = i.y, a = i.viewportHeight, l = i.viewportWidth, s = i.height, f = this.getSeriesNumberWidth();
      return {
        width: this.cornerBBox.width,
        height: s,
        viewportWidth: l,
        viewportHeight: a,
        position: { x: 0, y: o },
        data: this.layoutResult.rowNodes,
        hierarchyType: this.cfg.hierarchyType,
        linkFields: (n = (t = (r = this.cfg.spreadsheet.options) === null || r === void 0 ? void 0 : r.interaction) === null || t === void 0 ? void 0 : t.linkFields) !== null && n !== void 0 ? n : [],
        seriesNumberWidth: f,
        spreadsheet: this.spreadsheet
      };
    }, e.prototype.getRowHeader = function() {
      return this.rowHeader ? this.rowHeader : new Ug(this.getRowHeaderCfg());
    }, e.prototype.getColHeader = function() {
      if (!this.columnHeader) {
        var r = this.panelBBox, t = r.x, n = r.width, i = r.viewportHeight, o = r.viewportWidth;
        return new Gg({
          width: n,
          cornerWidth: this.cornerBBox.width,
          height: this.cornerBBox.height,
          viewportWidth: o,
          viewportHeight: i,
          position: { x: t, y: 0 },
          data: this.layoutResult.colNodes,
          scrollContainsRowHeader: this.cfg.spreadsheet.isScrollContainsRowHeader(),
          sortParam: this.cfg.spreadsheet.store.get("sortParam"),
          spreadsheet: this.spreadsheet
        });
      }
      return this.columnHeader;
    }, e.prototype.getCornerHeader = function() {
      return this.cornerHeader ? this.cornerHeader : bte.getCornerHeader(this.panelBBox, this.cornerBBox, this.getSeriesNumberWidth(), this.cfg, this.layoutResult, this.spreadsheet);
    }, e.prototype.getSeriesNumberHeader = function() {
      return yL.getSeriesNumberHeader({
        viewportBBox: this.panelBBox,
        seriesNumberWidth: this.getSeriesNumberWidth(),
        leafNodes: this.layoutResult.rowsHierarchy.getNodes(0),
        spreadsheet: this.spreadsheet,
        cornerWidth: this.cornerBBox.width
      });
    }, e.prototype.getCenterFrame = function() {
      var r;
      if (!this.centerFrame) {
        var t = this.panelBBox, n = t.viewportWidth, i = t.viewportHeight, o = this.cornerBBox.width, a = this.cornerBBox.height, l = (r = this.cfg) === null || r === void 0 ? void 0 : r.frame, s = {
          position: {
            x: this.cornerBBox.x,
            y: this.cornerBBox.y
          },
          width: o,
          height: a,
          viewportWidth: n,
          viewportHeight: i,
          showViewportLeftShadow: !1,
          showViewportRightShadow: !1,
          scrollContainsRowHeader: this.cfg.spreadsheet.isScrollContainsRowHeader(),
          isPivotMode: this.cfg.spreadsheet.isPivotMode(),
          spreadsheet: this.cfg.spreadsheet
        };
        return l ? l(s) : new Tte(s);
      }
      return this.centerFrame;
    }, e.prototype.updatePanelScrollGroup = function() {
      this.gridInfo = this.getGridInfo(), this.spreadsheet.panelScrollGroup.update(this.gridInfo);
    }, e.prototype.dynamicRenderCell = function(r) {
      var t = this.getScrollOffset(), n = t.scrollX, i = t.scrollY, o = t.rowHeaderScrollX, a = i + this.getPaginationScrollY(), l = fv(a, this.viewCellHeights.getTotalHeight(), this.panelBBox.viewportHeight);
      this.spreadsheet.hideTooltip(), this.spreadsheet.interaction.clearHoverTimer(), this.realCellRender(n, l), this.updatePanelScrollGroup(), this.translateRelatedGroups(n, l, o), this.clip(n, l), r || this.emitScrollEvent({ scrollX: n, scrollY: l, rowHeaderScrollX: o }), this.onAfterScroll();
    }, e.prototype.emitScrollEvent = function(r) {
      this.spreadsheet.emit(I.LAYOUT_CELL_SCROLL, r), this.spreadsheet.emit(I.GLOBAL_SCROLL, r);
    }, e.prototype.saveInitColumnLeafNodes = function(r) {
      r === void 0 && (r = []);
      var t = this.spreadsheet, n = t.store, i = t.options, o = i.interaction.hiddenColumnFields, a = r.length + o.length, l = n.get("initColumnLeafNodes", []);
      a !== l.length && n.set("initColumnLeafNodes", r);
    }, e.prototype.getHiddenColumnsInfo = function(r) {
      var t = this.spreadsheet.store.get("hiddenColumnsDetail", []);
      return Q(t) ? null : t.find(function(n) {
        var i;
        return (i = n == null ? void 0 : n.hideColumnNodes) === null || i === void 0 ? void 0 : i.some(function(o) {
          return o.id === r.id;
        });
      });
    }, e.prototype.getCornerNodes = function() {
      var r;
      return ((r = this.cornerHeader) === null || r === void 0 ? void 0 : r.getNodes()) || [];
    }, e;
  }()
), CL = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n, i = e.call(this, t) || this;
      return i.frozenGroupInfo = (n = {}, n[mn.FROZEN_COL] = {
        width: 0
      }, n[mn.FROZEN_ROW] = {
        height: 0
      }, n[mn.FROZEN_TRAILING_ROW] = {
        height: 0
      }, n[mn.FROZEN_TRAILING_COL] = {
        width: 0
      }, n), i.panelScrollGroupIndexes = [], i.initFrozenGroupPosition = function() {
        var o = i.getScrollOffset(), a = o.scrollY, l = o.scrollX, s = i.getPaginationScrollY();
        Hi(i.spreadsheet.frozenRowGroup, i.cornerBBox.width - l, i.cornerBBox.height - s), Hi(i.spreadsheet.frozenColGroup, i.cornerBBox.width, i.cornerBBox.height - a - s), Hi(i.spreadsheet.frozenTrailingColGroup, i.cornerBBox.width, i.cornerBBox.height - a - s), Hi(i.spreadsheet.frozenTopGroup, i.cornerBBox.width, i.cornerBBox.height - s);
      }, i.addCell = function(o) {
        var a = i.getBizRevisedFrozenOptions(), l = a.frozenRowCount, s = a.frozenColCount, f = a.frozenTrailingRowCount, h = a.frozenTrailingColCount, d = i.layoutResult.colsHierarchy.getLeaves().length, v = i.getCellRange(), g = i.getRealFrozenColumns(s, h), y = g.colCount, C = g.trailingColCount, _ = aZ(o.getMeta(), {
          frozenRowCount: l,
          frozenColCount: y,
          frozenTrailingRowCount: f,
          frozenTrailingColCount: C
        }, d, v), w = f2[_];
        w && i.spreadsheet[w] && i.spreadsheet[w].add(o);
      }, i.renderFrozenGroupSplitLine = function(o, a) {
        var l, s, f, h = i.panelBBox, d = h.width, v = h.height, g = h.viewportWidth, y = h.viewportHeight, C = i.cornerBBox.height, _ = i.layoutResult.colNodes.filter(function(ft) {
          return ci(ft);
        }), w = i.getCellRange(), x = w.end - w.start, S = So(i.getBizRevisedFrozenOptions(), _.length, x), T = S.frozenRowCount, R = T === void 0 ? 0 : T, B = S.frozenColCount, $ = B === void 0 ? 0 : B, N = S.frozenTrailingColCount, z = N === void 0 ? 0 : N, V = S.frozenTrailingRowCount, X = V === void 0 ? 0 : V, Z = Math.floor(a - i.getPaginationScrollY()), ne = Math.max(0, ((l = ut(i.viewCellWidths)) !== null && l !== void 0 ? l : 0) - g), se = Math.max(0, i.viewCellHeights.getCellOffsetY(w.end + 1) - i.viewCellHeights.getCellOffsetY(w.start) - y);
        (s = i.foregroundGroup.findById(jf)) === null || s === void 0 || s.remove();
        var q = ge(i.cfg, "spreadsheet.theme.splitLine"), ee = i.foregroundGroup.addGroup({
          id: jf,
          zIndex: Ls
        }), Oe = {
          lineWidth: q == null ? void 0 : q.verticalBorderWidth,
          stroke: q == null ? void 0 : q.verticalBorderColor,
          opacity: q == null ? void 0 : q.verticalBorderColorOpacity,
          lineDash: q == null ? void 0 : q.borderDash
        }, me = {
          lineWidth: q == null ? void 0 : q.horizontalBorderWidth,
          stroke: q == null ? void 0 : q.horizontalBorderColor,
          opacity: q == null ? void 0 : q.horizontalBorderColorOpacity,
          lineDash: q == null ? void 0 : q.borderDash
        };
        if ($ > 0) {
          var _e = _.reduce(function(ft, Fe, Ge) {
            return Ge < $ ? ft + Fe.width : ft;
          }, 0), ke = X > 0 ? v : y;
          Jt(ee, {
            x1: _e,
            x2: _e,
            y1: C,
            y2: C + ke
          }, M({}, Oe)), q.showShadow && o > 0 && ee.addShape("rect", {
            attrs: {
              x: _e,
              y: C,
              width: q.shadowWidth,
              height: ke,
              fill: i.getShadowFill(0)
            }
          });
        }
        if (R > 0) {
          var Ee = C + i.getTotalHeightForRange(w.start, w.start + R - 1), Ze = z > 0 ? d : g;
          Jt(ee, {
            x1: 0,
            x2: Ze,
            y1: Ee,
            y2: Ee
          }, M({}, me)), q.showShadow && Z > 0 && ee.addShape("rect", {
            attrs: {
              x: 0,
              y: Ee,
              width: Ze,
              height: q.shadowWidth,
              fill: i.getShadowFill(90)
            }
          });
        }
        if (z > 0) {
          var _e = _[_.length - z].x, ke = X ? v : y;
          Jt(ee, {
            x1: _e,
            x2: _e,
            y1: C,
            y2: C + ke
          }, M({}, Oe)), q.showShadow && Math.floor(o) < Math.floor(ne) && ee.addShape("rect", {
            attrs: {
              x: _e - ((f = q.shadowWidth) !== null && f !== void 0 ? f : 0),
              y: C,
              width: q.shadowWidth,
              height: ke,
              fill: i.getShadowFill(180)
            }
          });
        }
        if (X > 0) {
          var Ee = i.panelBBox.maxY - i.getTotalHeightForRange(w.end - X + 1, w.end), Ze = z > 0 ? d : g;
          Jt(ee, {
            x1: 0,
            x2: Ze,
            y1: Ee,
            y2: Ee
          }, M({}, me)), q.showShadow && Z < Math.floor(se) && ee.addShape("rect", {
            attrs: {
              x: 0,
              y: Ee - q.shadowWidth,
              width: Ze,
              height: q.shadowWidth,
              fill: i.getShadowFill(270)
            }
          });
        }
        i.foregroundGroup.sort();
      }, i.getRealFrozenColumns = function(o, a) {
        var l, s = o, f = a;
        if (o || a) {
          var h = i.layoutResult.colsHierarchy.getNodes();
          h = h.filter(function(d) {
            return ci(d);
          }), l = sc(h, o, a), s = l.colCount, f = l.trailingColCount;
        }
        return { colCount: s, trailingColCount: f };
      }, i.getTotalHeightForRange = function(o, a) {
        if (o < 0 || a < 0)
          return 0;
        if (i.rowOffsets)
          return i.rowOffsets[a + 1] - i.rowOffsets[o];
        for (var l = 0, s = o; s < a + 1; s++) {
          var f = i.getDefaultCellHeight();
          l += f;
        }
        return l;
      }, i.getShadowFill = function(o) {
        var a, l, s = ge(i.cfg, "spreadsheet.theme.splitLine");
        return "l (".concat(o, ") 0:").concat((a = s.shadowColors) === null || a === void 0 ? void 0 : a.left, " 1:").concat((l = s.shadowColors) === null || l === void 0 ? void 0 : l.right);
      }, i;
    }
    return r.prototype.calculateFrozenGroupInfo = function() {
      var t = this.getFrozenOptionsDirectly(), n = t.frozenColCount, i = t.frozenRowCount, o = t.frozenTrailingColCount, a = t.frozenTrailingRowCount, l = this.layoutResult.colNodes.filter(function(C) {
        return ci(C);
      }), s = this.viewCellHeights, f = this.getCellRange(), h = this.frozenGroupInfo, d = h.frozenCol, v = h.frozenTrailingCol, g = h.frozenRow, y = h.frozenTrailingRow;
      n > 0 && (d.width = l[n - 1].x + l[n - 1].width - 0, d.range = [0, n - 1]), i > 0 && (g.height = s.getCellOffsetY(f.start + i) - s.getCellOffsetY(f.start), g.range = [f.start, f.start + i - 1]), o > 0 && (v.width = l[l.length - 1].x - l[l.length - o].x + l[l.length - 1].width, v.range = [
        l.length - o,
        l.length - 1
      ]), a > 0 && (y.height = s.getCellOffsetY(f.end + 1) - s.getCellOffsetY(f.end + 1 - a), y.range = [
        f.end - a + 1,
        f.end
      ]);
    }, r.prototype.calculateXYIndexes = function(t, n) {
      var i, o, a, l = this.layoutResult.colLeafNodes.length, s = this.getCellRange(), f = this.panelBBox, h = f.viewportHeight, d = f.viewportWidth, v = this.getFrozenOptionsDirectly(), g = v.frozenColCount, y = g === void 0 ? 0 : g, C = v.frozenRowCount, _ = C === void 0 ? 0 : C, w = v.frozenTrailingColCount, x = w === void 0 ? 0 : w, S = v.frozenTrailingRowCount, T = S === void 0 ? 0 : S, R = {
        width: d,
        height: h,
        x: 0,
        y: 0
      };
      if (x > 0 || y > 0) {
        var B = this.frozenGroupInfo, $ = B.frozenTrailingCol, N = B.frozenCol;
        R.width -= $.width + N.width, R.x += (i = N.width) !== null && i !== void 0 ? i : 0;
      }
      if (T > 0 || _ > 0) {
        var z = this.frozenGroupInfo, V = z.frozenRow, X = z.frozenTrailingRow;
        R.height < V.height + X.height ? (R.height = 0, R.y = 0) : (R.height -= V.height + X.height, R.y += V.height);
      }
      var Z = this.spreadsheet.isTableMode() && (!((a = (o = this.spreadsheet.dataSet) === null || o === void 0 ? void 0 : o.isEmpty) === null || a === void 0) && a.call(o)) ? this.spreadsheet.dataSet.getEmptyViewIndexes() : Sg(t, n, this.viewCellWidths, this.viewCellHeights, R, this.getRealScrollX(this.cornerBBox.width));
      this.panelScrollGroupIndexes = Z;
      var ne = this.getRealFrozenColumns(y, x), se = ne.colCount, q = ne.trailingColCount;
      return sZ(Z, {
        frozenColCount: se,
        frozenRowCount: _,
        frozenTrailingColCount: q,
        frozenTrailingRowCount: T
      }, l, s);
    }, r.prototype.updateFrozenGroupGrid = function() {
      var t = this;
      [
        mn.FROZEN_COL,
        mn.FROZEN_ROW,
        mn.FROZEN_TRAILING_COL,
        mn.FROZEN_TRAILING_ROW
      ].forEach(function(n) {
        if (t.frozenGroupInfo[n].range) {
          var i = [], o = [];
          if (n.toLowerCase().includes("row")) {
            var a = W(t.frozenGroupInfo[n].range, 2), l = a[0], s = a[1];
            if (i = t.gridInfo.cols, o = fh(l, s, t.viewCellHeights), n === mn.FROZEN_TRAILING_ROW) {
              var f = t.spreadsheet.frozenTrailingRowGroup.getBBox().minY;
              o = _te(l, s, Math.ceil(f), t.viewCellHeights);
            }
          } else {
            var h = W(t.frozenGroupInfo[n].range, 2), d = h[0], v = h[1], g = t.layoutResult.colNodes.filter(function(y) {
              return ci(y);
            });
            i = dL(d, v, g), o = t.gridInfo.rows;
          }
          t.spreadsheet["".concat(n, "Group")].updateGrid({
            cols: i,
            rows: o
          }, "".concat(n, "Group"));
        }
      });
    }, r.prototype.updatePanelScrollGroup = function() {
      e.prototype.updatePanelScrollGroup.call(this), this.updateFrozenGroupGrid();
    }, r.prototype.translateRelatedGroups = function(t, n, i) {
      var o = this, a = this.spreadsheet, l = a.frozenColGroup, s = a.frozenTrailingColGroup, f = a.frozenRowGroup, h = a.frozenTrailingRowGroup;
      [f, h].forEach(function(d) {
        rh(d, o.cornerBBox.width - t);
      }), [l, s].forEach(function(d) {
        oZ(d, o.cornerBBox.height - n);
      }), e.prototype.translateRelatedGroups.call(this, t, n, i), this.updateRowResizeArea(), this.renderFrozenGroupSplitLine(t, n);
    }, r.prototype.updateRowResizeArea = function() {
    }, r.prototype.clip = function(t, n) {
      var i, o, a, l = this.getPaginationScrollY(), s = this.spreadsheet, f = s.frozenRowGroup, h = s.frozenColGroup, d = s.frozenTrailingColGroup, v = s.frozenTrailingRowGroup, g = s.panelScrollGroup, y = 0, C = 0, _ = 0;
      h && (y = h.getBBox().width), f && (C = f.getBBox().height);
      var w;
      d && (w = d.getBBox()), v && (_ = v.getBBox().height);
      var x = this.panelBBox.width - y - ((i = w == null ? void 0 : w.width) !== null && i !== void 0 ? i : 0), S = this.panelBBox.height - C - _;
      g.setClip({
        type: "rect",
        attrs: {
          x: t + y,
          y: n + C,
          width: x,
          height: S
        }
      }), f.setClip({
        type: "rect",
        attrs: {
          x: t + y,
          y: l,
          width: x,
          height: C
        }
      }), v == null || v.setClip({
        type: "rect",
        attrs: {
          x: t + y,
          y: v.getBBox().minY,
          width: x,
          height: _
        }
      });
      var T = {
        y: n + C,
        height: S
      };
      h == null || h.setClip({
        type: "rect",
        attrs: M(M({}, T), { x: 0, width: y })
      }), d == null || d.setClip({
        type: "rect",
        attrs: M(M({}, T), { x: (o = w == null ? void 0 : w.minX) !== null && o !== void 0 ? o : 0, width: (a = w == null ? void 0 : w.width) !== null && a !== void 0 ? a : 0 })
      });
    }, r.prototype.init = function() {
      e.prototype.init.call(this);
    }, r.prototype.render = function() {
      this.calculateFrozenGroupInfo(), e.prototype.render.call(this), this.initFrozenGroupPosition();
    }, r.prototype.getFrozenOptionsDirectly = function() {
      var t = this.layoutResult.colLeafNodes.length, n = this.getCellRange();
      return So(this.getBizRevisedFrozenOptions(), t, n.end - n.start + 1);
    }, r.prototype.getBizRevisedFrozenOptions = function() {
      var t = this.cfg, n = t.frozenColCount, i = t.frozenRowCount, o = t.frozenTrailingColCount, a = t.frozenTrailingRowCount;
      return {
        frozenColCount: n,
        frozenRowCount: i,
        frozenTrailingColCount: o,
        frozenTrailingRowCount: a
      };
    }, r.prototype.getDefaultCellHeight = function() {
      var t, n = this.cfg.cellCfg;
      return (t = n == null ? void 0 : n.height) !== null && t !== void 0 ? t : 0;
    }, r;
  }(Lte)
), mL = function(e) {
  var r, t, n, i = e.facetCfg, o = e.customTreeItems, a = o === void 0 ? [] : o, l = e.level, s = e.parentNode, f = e.hierarchy, h = i.spreadsheet, d = i.collapsedRows, v = i.hierarchyCollapse;
  try {
    for (var g = br(a), y = g.next(); !y.done; y = g.next()) {
      var C = y.value, _ = C.key, w = C.title, x = C.collapsed, S = C.children, T = xc(C, ["key", "title", "collapsed", "children"]), R = (n = {}, n[Ae] = _, n), B = Ns(s.id, w), $ = x ?? !1, N = ge(d, B), z = N ?? (v || $), V = new Qt({
        id: B,
        key: _,
        label: w,
        value: w,
        level: l,
        parent: s,
        field: _,
        isTotals: !1,
        isCollapsed: z,
        hierarchy: f,
        query: R,
        spreadsheet: h,
        extra: T
      });
      l > f.maxLevel && (f.maxLevel = l), Q(S) && (V.isLeaf = !0);
      var X = wg(i, s, V, f);
      !Q(S) && !z && X && mL({
        facetCfg: i,
        parentNode: V,
        level: l + 1,
        hierarchy: f,
        customTreeItems: S
      });
    }
  } catch (Z) {
    r = { error: Z };
  } finally {
    try {
      y && !y.done && (t = g.return) && t.call(g);
    } finally {
      if (r) throw r.error;
    }
  }
}, Ate = function(e, r, t) {
  var n = e.getTotalsConfig(r);
  if (n.showGrandTotals) {
    var i = n.reverseLayout ? "unshift" : "push";
    t[i](new yl({
      label: n.label,
      isSubTotals: !1,
      isGrandTotals: !0
    }));
  }
}, _L = function(e) {
  var r, t, n, i, o, a, l = e.parentNode, s = e.currentField, f = e.level, h = e.facetCfg, d = e.hierarchy, v = e.pivotMeta, g = h.spreadsheet, y = h.collapsedRows, C = h.hierarchyCollapse, _ = h.rowExpandDepth, w = l.query, x = l.id, S = ((i = g.dataCfg.fields.rows) === null || i === void 0 ? void 0 : i.length) <= f, T = PZ(Array.from(v.keys())), R = rE(T, h, l, s), B = g.store.get("drillItemsNum");
  S && B > 0 && (R = R.slice(0, B)), f === 0 && Ate(g, s, R);
  try {
    for (var $ = br(R), N = $.next(); !N.done; N = $.next()) {
      var z = N.value, V = z instanceof yl, X = V ? null : v.get(z), Z = void 0, ne = w, se = !1, q = !1;
      if (V) {
        var ee = z;
        se = ee.isGrandTotals, q = ee.isSubTotals, Z = Et(z.label), ne = w;
      } else
        Z = z, ne = M(M({}, w), (n = {}, n[s] = Z, n));
      var Oe = Ns(x, Z), me = y == null ? void 0 : y[Oe], _e = wr(_) ? f > _ : null, ke = (o = me ?? _e) !== null && o !== void 0 ? o : C, Ee = new Qt({
        id: Oe,
        key: s,
        label: Z,
        value: Z,
        level: f,
        parent: l,
        field: s,
        isTotals: V,
        isGrandTotals: se,
        isSubTotals: q,
        isCollapsed: ke,
        hierarchy: d,
        query: ne,
        spreadsheet: g
      });
      f > d.maxLevel && (d.maxLevel = f);
      var Ze = j([], W(((a = X == null ? void 0 : X.children) === null || a === void 0 ? void 0 : a.keys()) || []), !1).filter(function(Ge) {
        return Ge !== gi;
      }), ft = Q(Ze);
      (ft || V) && (Ee.isLeaf = !0), ft || (Ee.isTotals = !0);
      var Fe = wg(h, l, Ee, d);
      !ft && !ke && !V && Fe && _L({
        level: f + 1,
        currentField: X.childField,
        pivotMeta: X.children,
        facetCfg: h,
        parentNode: Ee,
        hierarchy: d
      });
    }
  } catch (Ge) {
    r = { error: Ge };
  } finally {
    try {
      N && !N.done && (t = $.return) && t.call($);
    } finally {
      if (r) throw r.error;
    }
  }
}, wL = function(e) {
  var r = e.isValueInCols, t = e.moreThanOneValue, n = e.rootNode, i = e.facetCfg, o = e.hierarchy, a = e.fields, l = e.isRowHeader, s, f;
  l ? (s = !r && t, f = !r && !t) : (s = r && t, f = r && !t), oE({
    addTotalMeasureInTotal: s,
    addMeasureInTotalQuery: f,
    parentNode: n,
    currentField: a[0],
    fields: a,
    facetCfg: i,
    hierarchy: o
  });
}, Rte = function(e) {
  var r = e.facetCfg, t = e.rootNode, n = e.hierarchy, i = r.dataSet.fields.customTreeItems;
  mL({
    customTreeItems: i,
    facetCfg: r,
    level: 0,
    parentNode: t,
    hierarchy: n
  });
}, Ote = function(e) {
  var r = e.facetCfg, t = e.rootNode, n = e.hierarchy, i = r.hierarchyType, o = r.rows, a = r.dataSet;
  i === "tree" ? _L({
    level: 0,
    currentField: o[0],
    pivotMeta: a.rowPivotMeta,
    facetCfg: r,
    parentNode: t,
    hierarchy: n
  }) : Rte(e);
}, Ite = function(e) {
  var r = e.spreadsheet;
  r.isHierarchyTreeType() ? Ote(e) : wL(e);
}, Mte = function(e) {
  var r = e.isPivotMode, t = e.hierarchy, n = e.rootNode, i = e.facetCfg;
  r ? wL(e) : dZ({
    parentNode: n,
    hierarchy: t,
    facetCfg: i
  });
}, $p = function(e) {
  var r = e.isRowHeader, t = e.facetCfg, n = t.spreadsheet, i = t.rows, o = i === void 0 ? [] : i, a = t.columns, l = a === void 0 ? [] : a, s = n.dataCfg.fields.valueInCols, f = n.isPivotMode(), h = t.dataSet.moreThanOneValue(), d = Qt.rootNode(), v = new QT(), g = {
    isValueInCols: s,
    isPivotMode: f,
    moreThanOneValue: h,
    rootNode: d,
    hierarchy: v,
    spreadsheet: n,
    facetCfg: t,
    fields: r ? o : l,
    isRowHeader: r
  };
  r ? Ite(g) : Mte(g);
  var y = function() {
    return r && n.isHierarchyTreeType() ? v.getNodes() : v.getLeaves();
  };
  return {
    hierarchy: v,
    leafNodes: y()
  };
}, Bte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.renderFrozenGroupSplitLine = function(n, i) {
        var o;
        if ((o = t.foregroundGroup.findById(jf)) === null || o === void 0 || o.remove(), t.enableFrozenFirstRow()) {
          var a = Math.floor(i - t.getPaginationScrollY()), l = t.foregroundGroup.addGroup({
            id: jf,
            zIndex: Ls
          }), s = ge(t.cfg, "spreadsheet.theme.splitLine"), f = {
            lineWidth: s == null ? void 0 : s.horizontalBorderWidth,
            stroke: s == null ? void 0 : s.horizontalBorderColor,
            opacity: s == null ? void 0 : s.horizontalBorderColorOpacity
          }, h = t.cornerBBox.height, d = t.getCellRange(), v = h + t.getTotalHeightForRange(d.start, d.start), g = t.panelBBox.viewportWidth + t.layoutResult.rowsHierarchy.width + t.getSeriesNumberWidth();
          Jt(l, {
            x1: 0,
            x2: g,
            y1: v,
            y2: v
          }, M({}, f)), s.showShadow && a > 0 && l.addShape("rect", {
            attrs: {
              x: 0,
              y: v,
              width: g,
              height: s.shadowWidth,
              fill: t.getShadowFill(90)
            }
          });
        }
      }, t;
    }
    return r.prototype.updateFrozenGroupGrid = function() {
      var t = this;
      [mn.FROZEN_ROW].forEach(function(n) {
        if (t.frozenGroupInfo[n].range) {
          var i = [], o = [];
          if (n.toLowerCase().includes("row")) {
            var a = W(t.frozenGroupInfo[n].range, 2), l = a[0], s = a[1];
            i = t.gridInfo.cols, o = fh(l, s, t.viewCellHeights);
          }
          t.spreadsheet["".concat(n, "Group")].updateGrid({
            cols: i,
            rows: o
          }, "".concat(n, "Group"));
        }
      });
    }, r.prototype.getBizRevisedFrozenOptions = function() {
      return Cl(this.cfg, this.layoutResult.rowNodes);
    }, r.prototype.clip = function(t, n) {
      var i = this.spreadsheet, o = i.isFrozenRowHeader, a = i.frozenRowGroup;
      if (!o.call(this.spreadsheet)) {
        if (this.panelScrollGroupClip(t, n), this.enableFrozenFirstRow()) {
          var l = this.getPaginationScrollY();
          a.setClip({
            type: "rect",
            attrs: {
              x: 0,
              y: l,
              width: this.panelBBox.width + t,
              height: a.getBBox().height
            }
          });
        }
        return;
      }
      e.prototype.clip.call(this, t, n);
    }, Object.defineProperty(r.prototype, "rowCellTheme", {
      get: function() {
        return this.spreadsheet.theme.rowCell.cell;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.getContentHeight = function() {
      var t = this.layoutResult, n = t.rowsHierarchy, i = t.colsHierarchy;
      return n.height + i.height;
    }, r.prototype.doLayout = function() {
      var t = this, n = $p({
        isRowHeader: !0,
        facetCfg: this.cfg
      }), i = n.leafNodes, o = n.hierarchy, a = $p({
        isRowHeader: !1,
        facetCfg: this.cfg
      }), l = a.leafNodes, s = a.hierarchy;
      this.calculateNodesCoordinate(i, o, l, s);
      var f = this.cfg, h = f.dataSet, d = f.spreadsheet, v = function(y, C) {
        var _ = y || 0, w = C || 0, x = i[_], S = l[w];
        if (!x || !S)
          return null;
        var T = x.query, R = S.query, B = x.isTotals || x.isTotalMeasure || S.isTotals || S.isTotalMeasure, $ = t.getMeasureInfo(), N = Ds({}, T, R, $), z = ps(x, S), V = h.getCellData({
          query: N,
          rowNode: x,
          isTotals: B,
          totalStatus: z
        }), X = N[Ae], Z = ge(V, Nr, null);
        return {
          spreadsheet: d,
          x: S.x,
          y: x.y,
          width: S.width,
          height: x.height,
          data: V,
          rowIndex: _,
          colIndex: w,
          isTotals: B,
          valueField: X,
          fieldValue: Z,
          rowQuery: T,
          colQuery: R,
          rowId: x.id,
          colId: S.id,
          id: uu(x.id, S.id)
        };
      }, g = {
        colNodes: s.getNodes(),
        colsHierarchy: s,
        rowNodes: o.getNodes(),
        rowsHierarchy: o,
        rowLeafNodes: i,
        colLeafNodes: l,
        getCellMeta: v,
        spreadsheet: d
      };
      return rZ(this.cfg, g);
    }, r.prototype.getMeasureInfo = function() {
      var t, n, i, o = this.cfg, a = o.dataSet, l = o.spreadsheet, s = l.options.hierarchyType, f = (n = ge(l, "facet.cfg.colCfg.hideMeasureColumn")) !== null && n !== void 0 ? n : !1;
      return f && s !== "customTree" ? (t = {}, t[Ae] = (i = a.fields.values) === null || i === void 0 ? void 0 : i[0], t) : {};
    }, r.prototype.calculateNodesCoordinate = function(t, n, i, o) {
      this.calculateRowNodesCoordinate(t, n, i), this.calculateColNodesCoordinate(i, o, t, n.width);
    }, r.prototype.calculateColNodesCoordinate = function(t, n, i, o) {
      for (var a, l, s, f = Qt.blankNode(), h = n.getNodes(), d = n.sampleNodesForAllLevels, v = 0; v < d.length; v++) {
        var g = d[v];
        if (g.height = this.getColNodeHeight(g), n.height += g.height, g.level === 0)
          g.y = 0;
        else {
          var y = d[v - 1];
          g.y = (a = (y == null ? void 0 : y.y) + (y == null ? void 0 : y.height)) !== null && a !== void 0 ? a : 0;
        }
      }
      for (var C = 0, _ = function(S) {
        var T = h[S];
        if (T.isLeaf && (T.colIndex = C, C += 1, T.x = f.x + f.width, T.width = w.calculateColLeafNodesWidth(T, t, i, o), n.width += T.width, f = T), T.level === 0)
          T.y = 0;
        else {
          var R = n.sampleNodesForAllLevels.find(function(B) {
            return B.level === T.level - 1;
          });
          T.y = (l = (R == null ? void 0 : R.y) + (R == null ? void 0 : R.height)) !== null && l !== void 0 ? l : 0;
        }
        T.height = w.getColNodeHeight(T), yp(w.cfg, null, T);
      }, w = this, x = 0; x < h.length; x++)
        _(x);
      this.autoCalculateColNodeWidthAndX(t), Q((s = this.spreadsheet.options.totals) === null || s === void 0 ? void 0 : s.col) || (this.adjustTotalNodesCoordinate({
        hierarchy: n,
        isRowHeader: !1,
        isSubTotal: !0
      }), this.adjustTotalNodesCoordinate({
        hierarchy: n,
        isRowHeader: !1,
        isSubTotal: !1
      }));
    }, r.prototype.autoCalculateColNodeWidthAndX = function(t) {
      for (var n, i = null, o = 0, a = t.slice(0); o < a.length; ) {
        var l = a[o++], s = l.parent;
        if (i !== s && s) {
          a.push(s);
          var f = (n = s.children) === null || n === void 0 ? void 0 : n.find(function(v) {
            return v.width;
          }), h = f == null ? void 0 : f.x, d = DT(s.children, "width");
          s.x = h, s.width = d, i = s;
        }
      }
    }, r.prototype.calculateColLeafNodesWidth = function(t, n, i, o) {
      var a, l, s, f, h, d = this.cfg, v = d.colCfg, g = d.dataSet, y = d.filterDisplayDataItem, C = this.getCellDraggedWidth(t);
      if (wr(C))
        return C;
      var _ = this.getCellCustomWidth(t, v == null ? void 0 : v.width);
      if (wr(_))
        return _;
      if (this.spreadsheet.getLayoutWidthType() === ya.Compact) {
        for (var w = this.spreadsheet.theme.colCell, x = w.bolderText, S = w.cell, T = w.icon, R = this.spreadsheet.theme.dataCell.text, B = this.spreadsheet.dataSet.getFieldFormatter(t.field), $ = (a = B == null ? void 0 : B(t.value)) !== null && a !== void 0 ? a : t.label, N = this.getExpectedCellIconWidth(J.COL_CELL, this.spreadsheet.isValueInCols() && this.spreadsheet.options.showDefaultHeaderActionIcon, T), z = this.spreadsheet.measureTextWidth($, x) + N, V = this.getMeasureInfo(), X = void 0, Z = 0, ne = 0, se = 0; se < qd; se++) {
          var q = i[se];
          if (q) {
            var ee = g.getCellData({
              query: M(M({}, t.query), q.query),
              rowNode: q,
              isTotals: t.isTotals || t.isTotalMeasure || q.isTotals || q.isTotalMeasure,
              totalStatus: ps(q, t)
            });
            if (ee) {
              var Oe = LE(ee, y), me = (s = (l = this.spreadsheet.dataSet.getFieldFormatter(ee[Ae])) === null || l === void 0 ? void 0 : l(Oe)) !== null && s !== void 0 ? s : Oe, _e = "".concat(me), ke = Ds({}, q.query, t.query, V), Ee = ke[Ae], Ze = fE(this.spreadsheet.options.conditions, this.spreadsheet.theme.dataCell.icon, Ee), ft = Ze.size, Fe = Ze.margin, Ge = Fe.left, ot = Fe.right, nr = ft + Ge + ot, vr = this.spreadsheet.measureTextWidth(_e, R) + nr;
              vr > Z && (X = _e, Z = vr, ne = nr);
            }
          }
        }
        var Kt = z > Z, io = Kt ? $ : X, ri = Kt ? N : ne;
        fi.getInstance().logger("Max Label In Col:", t.field, io, Z);
        var oo = this.spreadsheet.measureTextWidth(io, M(M({}, x), { fontSize: Math.max(R.fontSize, x.fontSize) }));
        return oo + ((f = S.padding) === null || f === void 0 ? void 0 : f.left) + ((h = S.padding) === null || h === void 0 ? void 0 : h.right) + ri;
      }
      return this.spreadsheet.isHierarchyTreeType() ? this.getAdaptTreeColWidth(t, n, i) : this.getAdaptGridColWidth(n, o);
    }, r.prototype.getColNodeHeight = function(t) {
      var n = this.cfg.colCfg, i = ge(n, ["heightByField", t.key]);
      return i ?? (n == null ? void 0 : n.height);
    }, r.prototype.getExpectedCellIconWidth = function(t, n, i) {
      var o, a = 0;
      if (n)
        a = 1;
      else {
        var l = Ig(We(this.spreadsheet.options.headerActionIcons, function(s) {
          return M(M({}, s), {
            // ignore condition func when layout calc
            displayCondition: function() {
              return !0;
            }
          });
        }), null, t);
        a = (o = l == null ? void 0 : l.iconNames.length) !== null && o !== void 0 ? o : 0;
      }
      return a ? a * (i.size + i.margin.left) + i.margin.right : 0;
    }, r.prototype.calculateRowNodesCoordinate = function(t, n, i) {
      var o, a, l, s, f, h, d, v, g, y, C = this.cfg, _ = C.cellCfg, w = C.spreadsheet, x = w.isHierarchyTreeType(), S = ge(w, "options.style.rowCfg.heightByField", {}), T = (l = n.sampleNodesForAllLevels) !== null && l !== void 0 ? l : [];
      if (x)
        n.width = this.getTreeRowHeaderWidth();
      else
        try {
          for (var R = br(n.sampleNodesForAllLevels), B = R.next(); !B.done; B = R.next()) {
            var $ = B.value;
            $.width = this.calculateGridRowNodesWidth($, i), n.width += $.width;
            var N = (s = T[$.level - 1]) !== null && s !== void 0 ? s : {
              x: 0,
              width: 0
            };
            $.x = (N == null ? void 0 : N.x) + (N == null ? void 0 : N.width);
          }
        } catch (q) {
          o = { error: q };
        } finally {
          try {
            B && !B.done && (a = R.return) && a.call(R);
          } finally {
            if (o) throw o.error;
          }
        }
      for (var z = Qt.blankNode(), V = n.getNodes(), X = 0; X < V.length; X++) {
        var Z = V[X], ne = x || !x && Z.isLeaf;
        if (ne && ((f = Z.rowIndex) !== null && f !== void 0 || (Z.rowIndex = X), (h = Z.colIndex) !== null && h !== void 0 || (Z.colIndex = X), Z.y = z.y + z.height, Z.height = ((d = S == null ? void 0 : S[Z.id]) !== null && d !== void 0 ? d : _ == null ? void 0 : _.height) + ((v = this.rowCellTheme.padding) === null || v === void 0 ? void 0 : v.top) + ((g = this.rowCellTheme.padding) === null || g === void 0 ? void 0 : g.bottom), z = Z, n.height += Z.height), x || Z.level === 0)
          Z.x = 0;
        else {
          var N = T[Z.level - 1];
          Z.x = (N == null ? void 0 : N.x) + (N == null ? void 0 : N.width);
        }
        if (x)
          Z.width = this.getTreeRowHeaderWidth();
        else {
          var se = T[Z.level];
          Z.width = se == null ? void 0 : se.width;
        }
        yp(this.cfg, Z, null);
      }
      x || (this.autoCalculateRowNodeHeightAndY(t), Q((y = w.options.totals) === null || y === void 0 ? void 0 : y.row) || (this.adjustTotalNodesCoordinate({
        hierarchy: n,
        isRowHeader: !0,
        isSubTotal: !1
      }), this.adjustTotalNodesCoordinate({
        hierarchy: n,
        isRowHeader: !0,
        isSubTotal: !0
      })));
    }, r.prototype.autoCalculateRowNodeHeightAndY = function(t) {
      for (var n = null, i = 0, o = t.slice(0); i < o.length; ) {
        var a = o[i++], l = a.parent;
        n !== l && l && (o.push(l), l.y = l.children[0].y, l.height = l.children.reduce(function(s, f) {
          return s + f.height;
        }, 0), n = l);
      }
    }, r.prototype.getMultipleMap = function(t, n, i) {
      for (var o = t.maxLevel, a = this.cfg, l = a.totals, s = a.dataSet, f = s.moreThanOneValue(), h = s.fields, d = h.rows, v = h.columns, g = n ? d : v, y = n ? l.row : l.col, C = i ? y.subTotalsGroupDimensions || [] : y.totalsGroupDimensions || [], _ = s.isEmpty() ? [] : C, w = Array.from({ length: o + 1 }, function() {
        return 1;
      }), x = o; x > 0; x--) {
        var S = g[x], T = S === Ae && f;
        _.includes(S) || T || (w[x - 1] += w[x], w[x] = 0);
      }
      return w;
    }, r.prototype.adjustTotalNodesCoordinate = function(t) {
      var n = t.hierarchy, i = t.isRowHeader, o = t.isSubTotal, a = this.getMultipleMap(n, i, o), l = Qi(n.getNodes(), function(f) {
        return o ? f.isSubTotals : f.isGrandTotals;
      }), s = i ? "width" : "height";
      xe(l, function(f) {
        var h, d = a[f.level];
        if (!d && o)
          for (var v = 1; d < 1; )
            d = a[f.level - v] - v, v++;
        for (var g = 0, y = function(_) {
          g += ((h = n.sampleNodesForAllLevels.find(function(w) {
            return w.level === f.level + _;
          })) === null || h === void 0 ? void 0 : h[s]) || 0;
        }, C = 0; C < d; C++)
          y(C);
        f[s] = g;
      });
    }, r.prototype.calculateGridRowNodesWidth = function(t, n) {
      var i = this.cfg, o = i.rowCfg, a = i.spreadsheet, l = ge(o, ["widthByField", t.key]);
      if (wr(l))
        return l;
      var s = this.getCellCustomWidth(t, o == null ? void 0 : o.width);
      return wr(s) ? s : a.getLayoutWidthType() !== ya.Adaptive ? this.getCompactGridRowWidth(t) : this.getAdaptGridColWidth(n);
    }, r.prototype.getAdaptTreeColWidth = function(t, n, i) {
      var o = this.getCanvasHW().width, a = o - this.getSeriesNumberWidth(), l = Math.min(a / 2, this.getTreeRowHeaderWidth()), s = Math.max(1, n.length), f = this.cfg.cellCfg;
      return Math.max(iv(f, this.getColLabelLength(t, i)), (a - l) / s);
    }, r.prototype.getColLabelLength = function(t, n) {
      var i, o = gE(t == null ? void 0 : t.value);
      if (le(o))
        return o.length;
      for (var a = 1, l = 0; l < qd; l++) {
        var s = n[l];
        if (!s)
          return a;
        for (var f = this.cfg.dataSet.getCellData({
          query: M(M({}, t.query), s.query),
          rowNode: s,
          isTotals: t.isTotals || t.isTotalMeasure || s.isTotals || s.isTotalMeasure,
          totalStatus: ps(s, t)
        }), h = Rt(f == null ? void 0 : f[h0]), d = 0; d < h.length; d++) {
          var v = f[h[d]], g = aa((i = v == null ? void 0 : v.values) === null || i === void 0 ? void 0 : i[0]);
          g > a && (a = g);
        }
      }
      return a;
    }, r.prototype.getAdaptGridColWidth = function(t, n) {
      var i = this.cfg, o = i.rows, a = i.cellCfg, l = o.length, s = t.length, f = this.getCanvasHW().width, h = f - this.getSeriesNumberWidth(), d = Math.max(1, l + s);
      return n ? Math.max(iv(a), (h - n) / s) : Math.max(iv(a), h / d);
    }, r.prototype.getTreeRowHeaderWidth = function() {
      var t, n, i, o, a = this.cfg, l = a.rows, s = a.dataSet, f = a.rowCfg, h = a.treeRowsWidth, d = h ?? (f == null ? void 0 : f.treeRowsWidth);
      if (wr(d))
        return d;
      var v = this.getCellCustomWidth(null, f == null ? void 0 : f.width);
      if (wr(v))
        return v;
      var g = l.map(function(S) {
        return s.getFieldName(S);
      }).join("/"), y = this.spreadsheet.theme.cornerCell, C = y.bolderText, _ = y.icon, w = 1 + this.spreadsheet.measureTextWidth(g, C) + _.size * 2 + ((t = _.margin) === null || t === void 0 ? void 0 : t.left) + ((n = _.margin) === null || n === void 0 ? void 0 : n.right) + ((i = this.rowCellTheme.padding) === null || i === void 0 ? void 0 : i.left) + ((o = this.rowCellTheme.padding) === null || o === void 0 ? void 0 : o.right), x = Math.max(d ?? t_, w);
      return Number.isNaN(x) ? t_ : x;
    }, r.prototype.getCompactGridRowWidth = function(t) {
      var n = this, i, o = this.cfg, a = o.dataSet, l = o.spreadsheet, s = l.theme.rowCell, f = s.bolderText, h = s.icon, d = s.cell, v = l.theme.cornerCell, g = v.bolderText, y = v.icon, C = v.cell, _ = t.field, w = t.isLeaf, x = this.getExpectedCellIconWidth(J.ROW_CELL, !l.isValueInCols() && w && l.options.showDefaultHeaderActionIcon, h), S = (i = a.getDimensionValues(_)) === null || i === void 0 ? void 0 : i.slice(0, qd).map(function(z) {
        var V, X;
        return (X = (V = n.spreadsheet.dataSet.getFieldFormatter(_)) === null || V === void 0 ? void 0 : V(z)) !== null && X !== void 0 ? X : z;
      }), T = tg(S, function(z) {
        return "".concat(z).length;
      }), R = l.measureTextWidth(T, f) + x + d.padding.left + d.padding.right, B = a.getFieldName(_), $ = this.getExpectedCellIconWidth(J.CORNER_CELL, !1, y), N = l.measureTextWidth(B, g) + $ + C.padding.left + C.padding.right;
      return fi.getInstance().logger("Max Label In Row:", _, R > N ? T : B), Math.max(R, N);
    }, r.prototype.getViewCellHeights = function(t) {
      var n = t.rowLeafNodes, i = jc(n, function(o, a) {
        return o.push(ut(o) + a.height), o;
      }, [0]);
      return {
        getTotalHeight: function() {
          return ut(i) || 0;
        },
        getCellOffsetY: function(o) {
          return i[o] || 0;
        },
        getTotalLength: function() {
          return i.length - 1;
        },
        getIndexRange: function(o, a) {
          return hL(i, o, a);
        }
      };
    }, r.prototype.getRowHeader = function() {
      if (!this.rowHeader) {
        var t = this.getRowHeaderCfg(), n = t.viewportHeight, i = xc(t, ["viewportHeight"]), o = Cl(this.cfg, this.layoutResult.rowNodes).frozenRowHeight;
        return new Ete(M(M({}, i), { viewportHeight: n - o }));
      }
    }, r.prototype.enableFrozenFirstRow = function() {
      return !!this.getBizRevisedFrozenOptions().frozenRowCount;
    }, r;
  }(CL)
), Dte = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = this, i, o, a;
      n = e.call(this, t) || this, n.getScrollGroupClipBBox = function() {
        var y, C = n.headerConfig, _ = C.width, w = C.height, x = C.scrollX, S = C.spreadsheet, T = S.options;
        if (!T.frozenColCount && !T.frozenTrailingColCount)
          return {
            x,
            y: 0,
            width: _,
            height: w
          };
        for (var R = (y = S.facet) === null || y === void 0 ? void 0 : y.layoutResult.colLeafNodes, B = So(S.options, R.length), $ = B.frozenColCount, N = B.frozenTrailingColCount, z = 0, V = 0, X = 0; X < $; X++)
          z += R[X].width;
        for (var X = 0; X < N; X++)
          V += R[R.length - 1 - X].width;
        var Z = _ - z - V;
        return {
          x: x + z,
          y: 0,
          width: Z,
          height: w
        };
      };
      var l = (i = n.headerConfig.spreadsheet) === null || i === void 0 ? void 0 : i.options, s = l.frozenColCount, f = l.frozenTrailingColCount, h = (a = (o = n.headerConfig.spreadsheet) === null || o === void 0 ? void 0 : o.facet) === null || a === void 0 ? void 0 : a.layoutResult.colNodes.filter(function(y) {
        return ci(y);
      }), d = sc(h, s, f), v = d.colCount, g = d.trailingColCount;
      return n.finalColCount = v, n.finalTrailingColCount = g, v && (n.frozenColGroup = n.addGroup({
        name: ED,
        zIndex: Ls
      })), g && (n.frozenTrailingColGroup = n.addGroup({
        name: LD,
        zIndex: Ls
      })), n;
    }
    return r.prototype.isFrozenCell = function(t) {
      var n = this.headerConfig.spreadsheet, i = n == null ? void 0 : n.options, o = i.frozenColCount, a = i.frozenTrailingColCount, l = t.colIndex, s = n == null ? void 0 : n.facet.layoutResult.colLeafNodes;
      return ca(l, o) || ha(l, a, s.length);
    }, r.prototype.clear = function() {
      var t, n, i = this.headerConfig.spreadsheet;
      e.prototype.clear.call(this), (t = this.frozenTrailingColGroup) === null || t === void 0 || t.clear(), (n = this.frozenColGroup) === null || n === void 0 || n.clear();
      var o = i == null ? void 0 : i.foregroundGroup.findById(a2);
      o == null || o.clear();
    }, r.prototype.getCellInstance = function(t, n, i) {
      return t.field === ga ? new CJ(t, n, i) : new FE(t, n, i);
    }, r.prototype.getCellGroup = function(t) {
      var n, i = this.headerConfig.spreadsheet, o = Cp(t).colIndex;
      return ca(o, this.finalColCount) ? this.frozenColGroup : ha(o, this.finalTrailingColCount, (n = i == null ? void 0 : i.facet) === null || n === void 0 ? void 0 : n.layoutResult.colLeafNodes.length) ? this.frozenTrailingColGroup : this.scrollGroup;
    }, r.prototype.isColCellInRect = function(t) {
      var n, i = this.headerConfig.spreadsheet, o = (n = i == null ? void 0 : i.facet) === null || n === void 0 ? void 0 : n.layoutResult.colLeafNodes.length, a = Cp(t).colIndex;
      return ca(a, this.finalColCount) || ha(a, this.finalTrailingColCount, o) ? !0 : e.prototype.isColCellInRect.call(this, t);
    }, r.prototype.clip = function() {
      this.scrollGroup.setClip({
        type: "rect",
        attrs: this.getScrollGroupClipBBox()
      });
    }, r;
  }(Gg)
), $te = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      n.onSortHandler = function(o) {
        var a = n.spreadsheet, l = o;
        Array.isArray(o) || (l = [o]);
        var s = a.dataCfg.sortParams || [];
        l = l.map(function(h) {
          var d, v, g = M(M({}, h), {
            // 兼容之前 sortKey 的用法
            sortFieldId: (d = h.sortKey) !== null && d !== void 0 ? d : h.sortFieldId
          }), y = (v = s.find(function(C) {
            return C.sortFieldId === g.sortFieldId;
          })) !== null && v !== void 0 ? v : {};
          return M(M({}, y), g);
        });
        var f = s.filter(function(h) {
          var d = l.find(function(v) {
            return v.sortFieldId === h.sortFieldId;
          });
          return !d;
        });
        $s(a.dataCfg, "sortParams", j(j([], W(f), !1), W(l), !1)), a.setDataCfg(a.dataCfg), a.render(!0), a.emit(I.RANGE_SORTED, a.dataSet.getDisplayDataSet());
      }, n.onFilterHandler = function(o) {
        var a = n.spreadsheet, l = !o.filteredValues || o.filteredValues.length === 0, s = a.dataCfg.filterParams || [], f = s.findIndex(function(h) {
          return h.filterKey === o.filterKey;
        });
        f !== -1 ? l ? s.splice(f, 1) : s[f] = o : s.push(o), $s(a.dataCfg, "filterParams", s), a.render(!0), a.emit(I.RANGE_FILTERED, a.dataSet.getDisplayDataSet());
      }, n.renderFrozenPanelCornerGroup = function() {
        var o = n.layoutResult.colNodes.filter(function(_) {
          return ci(_);
        }), a = n.getCellRange(), l = So(n.spreadsheet.options, o.length, a.end - a.start + 1), s = l.frozenRowCount, f = l.frozenColCount, h = l.frozenTrailingRowCount, d = l.frozenTrailingColCount, v = sc(o, f, d), g = v.colCount, y = v.trailingColCount, C = lZ({
          frozenRowCount: s,
          frozenColCount: g,
          frozenTrailingRowCount: h,
          frozenTrailingColCount: y
        }, n.layoutResult.colLeafNodes.length, a);
        Object.keys(C).forEach(function(_) {
          var w = C[_], x = n.spreadsheet[f2[_]];
          x && w.forEach(function(S) {
            n.addFrozenCell(S.x, S.y, x);
          });
        });
      }, n.addFrozenCell = function(o, a, l) {
        var s = n.layoutResult.getCellMeta(a, o);
        if (s.isFrozenCorner = !0, s) {
          var f = n.cfg.dataCell(s);
          l.add(f);
        }
      };
      var i = n.spreadsheet;
      return i.on(I.RANGE_SORT, n.onSortHandler), i.on(I.RANGE_FILTER, n.onFilterHandler), n;
    }
    return r.prototype.updateRowResizeArea = function() {
      var t = this.spreadsheet, n = t.foregroundGroup, i = t.options, o = ge(i, "interaction.resize"), a = ui(o) ? o : o == null ? void 0 : o.rowCellVertical;
      if (a) {
        var l = n.findById(vl), s = n.findById(i2);
        l && l.set("children", []), s && s.set("children", []);
        var f = ys(this.panelGroup.getChildren(), oh).filter(function(h) {
          return h.shouldDrawResizeArea();
        });
        f == null || f.forEach(function(h) {
          h.drawResizeArea();
        });
      }
    }, r.prototype.clip = function(t, n) {
      e.prototype.clip.call(this, t, n), this.clipResizeAreaGroup();
    }, r.prototype.clipResizeAreaGroup = function() {
      var t, n, i = this.spreadsheet.foregroundGroup.findById(vl);
      if (i) {
        var o = this.layoutResult.colLeafNodes, a = this.spreadsheet, l = a.frozenRowGroup, s = a.frozenTrailingRowGroup, f = 0, h = 0;
        l && (f = l.getBBox().height), s && (h = s.getBBox().height);
        var d = this.panelBBox.height - f - h;
        i.setClip({
          type: "rect",
          attrs: {
            x: 0,
            y: f + this.cornerBBox.height,
            width: (n = (t = o == null ? void 0 : o[0]) === null || t === void 0 ? void 0 : t.width) !== null && n !== void 0 ? n : 0,
            height: d
          }
        });
      }
    }, r.prototype.getContentHeight = function() {
      var t = this.getViewCellHeights().getTotalHeight, n = this.layoutResult.colsHierarchy;
      return t() + n.height;
    }, Object.defineProperty(r.prototype, "dataCellTheme", {
      get: function() {
        return this.spreadsheet.theme.dataCell.cell;
      },
      enumerable: !1,
      configurable: !0
    }), r.prototype.destroy = function() {
      var t = this.spreadsheet;
      t.off(I.RANGE_SORT, this.onSortHandler), t.off(I.RANGE_FILTER, this.onFilterHandler), e.prototype.destroy.call(this);
    }, r.prototype.calculateCornerBBox = function() {
      var t = this.layoutResult.colsHierarchy, n = Math.floor(t.height);
      this.cornerBBox = new pL(this), this.cornerBBox.height = n, this.cornerBBox.maxY = n;
    }, r.prototype.doLayout = function() {
      var t = this, n = this.cfg, i = n.dataSet, o = n.spreadsheet, a = new QT(), l = $p({
        isRowHeader: !1,
        facetCfg: this.cfg
      }), s = l.leafNodes, f = l.hierarchy;
      this.calculateColNodesCoordinate(s, f);
      var h = function(v, g) {
        var y, C = t.cfg.showSeriesNumber, _ = s[g], w = t.getCellHeight(v), x = t.getCellRange(), S = So(t.cfg, s.length, x.end - x.start + 1).frozenTrailingRowCount, T, R = _.x, B = t.viewCellHeights.getCellOffsetY(v);
        return lu(v, x.end, S) && (B = t.panelBBox.maxY - t.getTotalHeightForRange(v, x.end)), C && _.field === ga ? T = "".concat(v + 1) : T = i.getCellData({
          query: {
            field: _.field,
            rowIndex: v
          }
        }), {
          spreadsheet: o,
          x: R,
          y: B,
          width: _.width,
          height: w,
          data: (y = {}, y[_.field] = T, y),
          rowIndex: v,
          colIndex: g,
          isTotals: !1,
          colId: _.id,
          rowId: String(v),
          valueField: _.field,
          fieldValue: T,
          id: uu(String(v), _.id)
        };
      }, d = {
        colNodes: f.getNodes(),
        colsHierarchy: f,
        rowNodes: a.getNodes(),
        rowsHierarchy: a,
        rowLeafNodes: a.getLeaves(),
        colLeafNodes: s,
        getCellMeta: h,
        spreadsheet: o
      };
      return d;
    }, r.prototype.getAdaptiveColWidth = function(t) {
      var n = this.cfg.cellCfg, i = this.cfg.showSeriesNumber;
      if (this.spreadsheet.getLayoutWidthType() !== ya.Compact) {
        var o = this.getSeriesNumberWidth(), a = t.length - (i ? 1 : 0), l = this.getCanvasHW().width - o;
        return Math.max(n == null ? void 0 : n.width, l / Math.max(1, a));
      }
      return n == null ? void 0 : n.width;
    }, r.prototype.getColNodeHeight = function(t, n) {
      var i = this.cfg.colCfg, o = Ji(i == null ? void 0 : i.heightByField)[0], a = o || (i == null ? void 0 : i.height);
      if (!n || t.children && t.children.length)
        return a;
      for (; t.parent; )
        n -= ci(t) ? 0 : a, t = t.parent;
      return n;
    }, r.prototype.calculateColNodesCoordinate = function(t, n) {
      var i, o, a, l, s, f, h = Qt.blankNode(), d = n.getNodes();
      try {
        for (var v = br(n.sampleNodesForAllLevels), g = v.next(); !g.done; g = v.next()) {
          var y = g.value;
          y.height = this.getColNodeHeight(y), n.height += y.height;
        }
      } catch (N) {
        i = { error: N };
      } finally {
        try {
          g && !g.done && (o = v.return) && o.call(v);
        } finally {
          if (i) throw i.error;
        }
      }
      for (var C = this.getAdaptiveColWidth(t), _ = 0, w = 0; w < d.length; w++) {
        var x = d[w];
        x.isLeaf && (x.colIndex = _, _ += 1, x.x = h.x + h.width, x.width = this.calculateColLeafNodesWidth(x, C), yp(this.cfg, null, x), n.width += x.width, h = x), x.level === 0 ? x.y = 0 : x.y = (s = ((a = x.parent) === null || a === void 0 ? void 0 : a.y) + ((l = x.parent) === null || l === void 0 ? void 0 : l.height)) !== null && s !== void 0 ? s : 0, x.height = this.getColNodeHeight(x, n.height);
      }
      var S = d.filter(function(N) {
        return ci(N);
      }), T = So((f = this.spreadsheet) === null || f === void 0 ? void 0 : f.options, S.length).frozenTrailingColCount;
      h = Qt.blankNode();
      var R = this.getCanvasHW().width;
      if (T > 0)
        for (var B = sc(S, 0, T).trailingColCount, $ = d.filter(function(N) {
          return N.isLeaf;
        }), w = 1; w <= B; w++) {
          var x = $[$.length - w];
          w === 1 ? x.x = R - x.width : x.x = h.x - x.width, h = x;
        }
      this.autoCalculateColNodeWidthAndX(t);
    }, r.prototype.autoCalculateColNodeWidthAndX = function(t) {
      for (var n = null, i = t.slice(0); i.length; ) {
        var o = i.shift(), a = o.parent;
        n !== a && a && (i.push(a), a.x = a.children[0].x, a.width = a.children.map(function(l) {
          return l.width;
        }).reduce(function(l, s) {
          return l + s;
        }, 0), n = a);
      }
    }, r.prototype.calculateColLeafNodesWidth = function(t, n) {
      var i = this.cfg, o = i.colCfg, a = i.dataSet, l = i.spreadsheet, s = this.spreadsheet.getLayoutWidthType(), f = this.getCellDraggedWidth(t);
      if (wr(f))
        return f;
      var h = this.getCellCustomWidth(t, o == null ? void 0 : o.width);
      if (wr(h))
        return h;
      var d;
      if (s === ya.Compact) {
        var v = a.getDisplayDataSet(), g = a.getFieldFormatter(t.field), y = tg(v == null ? void 0 : v.slice(0, 50).map(function(B) {
          var $;
          return "".concat(($ = g == null ? void 0 : g(B[t.field])) !== null && $ !== void 0 ? $ : B[t.field]);
        }), function(B) {
          return l.measureTextWidthRoughly(B);
        });
        fi.getInstance().logger("Max Label In Col:", t.field, y);
        var C = l.theme.colCell.bolderText, _ = l.theme.dataCell, w = _.text, x = _.cell, S = 1, T = l.measureTextWidth(y, w) + x.padding.left + x.padding.right + S, R = l.measureTextWidth(t.label, C) + yJ(this.spreadsheet, t, l.theme.colCell);
        d = Math.max(R, T);
      } else
        d = n;
      return t.field === ga && (d = this.getSeriesNumberWidth()), d;
    }, r.prototype.initRowOffsets = function() {
      var t = this, n, i = this.cfg.dataSet, o = (((n = this.spreadsheet.options.style) === null || n === void 0 ? void 0 : n.rowCfg) || {}).heightByField, a = o === void 0 ? {} : o;
      if (Object.keys(a).length) {
        var l = i.getDisplayDataSet();
        this.rowOffsets = [0];
        var s = 0;
        l.forEach(function(f, h) {
          var d, v = (d = a == null ? void 0 : a[String(h)]) !== null && d !== void 0 ? d : t.getDefaultCellHeight(), g = s + v;
          t.rowOffsets.push(g), s = g;
        });
      }
    }, r.prototype.getCellHeight = function(t) {
      var n;
      if (this.rowOffsets) {
        var i = (((n = this.spreadsheet.options.style) === null || n === void 0 ? void 0 : n.rowCfg) || {}).heightByField, o = i === void 0 ? {} : i, a = o == null ? void 0 : o[String(t)];
        if (wr(a))
          return a;
      }
      return this.getDefaultCellHeight();
    }, r.prototype.getViewCellHeights = function() {
      var t = this, n = this.cfg.dataSet, i = this.getDefaultCellHeight();
      return {
        getTotalHeight: function() {
          return t.rowOffsets ? ut(t.rowOffsets) : i * n.getDisplayDataSet().length;
        },
        getCellOffsetY: function(o) {
          if (o <= 0)
            return 0;
          if (t.rowOffsets)
            return t.rowOffsets[o];
          for (var a = 0, l = 0; l < o; l++)
            a += i;
          return a;
        },
        getTotalLength: function() {
          return n.getDisplayDataSet().length;
        },
        getIndexRange: function(o, a) {
          if (t.rowOffsets)
            return hL(t.rowOffsets, o, a);
          var l = Math.floor(o / i), s = a % i === 0 ? a / i - 1 : Math.floor(a / i);
          return {
            start: Math.max(0, l),
            end: Math.max(0, s)
          };
        }
      };
    }, r.prototype.init = function() {
      this.initRowOffsets(), e.prototype.init.call(this);
      var t = this.panelBBox, n = t.width, i = t.height;
      this.spreadsheet.panelGroup.setClip({
        type: "rect",
        attrs: {
          x: 0,
          y: this.cornerBBox.height,
          width: n,
          height: i
        }
      });
    }, r.prototype.getColHeader = function() {
      if (!this.columnHeader) {
        var t = this.panelBBox, n = t.x, i = t.width, o = t.viewportHeight, a = t.viewportWidth;
        return new Dte({
          width: i,
          height: this.cornerBBox.height,
          viewportWidth: a,
          viewportHeight: o,
          cornerWidth: this.cornerBBox.width,
          position: { x: n, y: 0 },
          data: this.layoutResult.colNodes,
          scrollContainsRowHeader: this.cfg.spreadsheet.isScrollContainsRowHeader(),
          sortParam: this.cfg.spreadsheet.store.get("sortParam"),
          spreadsheet: this.spreadsheet
        });
      }
      return this.columnHeader;
    }, r.prototype.render = function() {
      this.renderFrozenPanelCornerGroup(), e.prototype.render.call(this);
    }, r.prototype.getRowHeader = function() {
      return null;
    }, r.prototype.getSeriesNumberHeader = function() {
      return null;
    }, r;
  }(CL)
), xL = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      return n.gridInfo = {
        cols: [],
        rows: []
      }, n.updateGrid = function(i, o) {
        o === void 0 && (o = Km);
        var a = n.getBBox(), l = n.s2, s = l.theme, f = l.isTableMode, h = s.dataCell.cell, d = f() && (o === Km || o === n2);
        (!n.gridGroup || !n.findById(o)) && (n.gridGroup = n.addGroup({
          id: o
        })), n.gridGroup.clear(), n.gridInfo = i, d && n.gridInfo.cols.unshift(0);
        var v = h.verticalBorderWidth, g = h.verticalBorderWidth / 2;
        n.gridInfo.cols.forEach(function(_) {
          Jt(n.gridGroup, {
            x1: _,
            x2: _,
            y1: Math.ceil(a.minY + g),
            y2: Math.floor(a.maxY - g)
          }, {
            stroke: h.verticalBorderColor,
            strokeOpacity: h.verticalBorderColorOpacity,
            lineWidth: v,
            lineCap: Qm,
            lineDash: h.borderDash
          });
        });
        var y = h.horizontalBorderWidth, C = h.horizontalBorderWidth / 2;
        n.gridInfo.rows.forEach(function(_) {
          Jt(n.gridGroup, {
            x1: Math.ceil(a.minX + C),
            x2: Math.floor(a.maxX - C),
            y1: _,
            y2: _
          }, {
            stroke: h.horizontalBorderColor,
            strokeOpacity: h.horizontalBorderColorOpacity,
            lineWidth: y,
            lineCap: Qm,
            lineDash: h.borderDash
          });
        }), n.gridGroup.toFront();
      }, n.s2 = t.s2, n;
    }
    return r;
  }(_i)
), SL = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r;
  }(xL)
), Fte = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      var n = e.call(this, t) || this;
      return n.initMergedCellsGroup(), n;
    }
    return r.prototype.initMergedCellsGroup = function() {
      this.mergedCellsGroup && this.findById(Vm) || (this.mergedCellsGroup = this.addGroup({
        id: Vm
      }));
    }, r.prototype.updateMergedCells = function() {
      this.initMergedCellsGroup(), tJ(this.s2, this.mergedCellsGroup), this.mergedCellsGroup.toFront();
    }, r.prototype.addMergeCell = function(t) {
      var n;
      (n = this.mergedCellsGroup) === null || n === void 0 || n.add(t);
    }, r.prototype.update = function(t) {
      this.updateGrid(t), this.updateMergedCells();
    }, r;
  }(xL)
), ei = (
  /** @class */
  function() {
    function e(r) {
      var t = this;
      this.isLinkFieldText = function(n) {
        var i = t.getCellAppendInfo(n);
        return i == null ? void 0 : i.isLinkFieldText;
      }, this.spreadsheet = r, this.bindEvents();
    }
    return e.prototype.getCellAppendInfo = function(r) {
      var t, n;
      return ((t = r == null ? void 0 : r.attr) === null || t === void 0 ? void 0 : t.call(r, "appendInfo")) || ((n = r == null ? void 0 : r.attrs) === null || n === void 0 ? void 0 : n.appendInfo) || {};
    }, e.prototype.reset = function() {
    }, e;
  }()
), Pte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.bindEvents = function() {
      this.bindDataCellClick();
    }, r.prototype.bindDataCellClick = function() {
      var t = this;
      this.spreadsheet.on(I.DATA_CELL_CLICK, function(n) {
        var i;
        n.stopPropagation();
        var o = t.spreadsheet.interaction;
        if (o.clearHoverTimer(), !o.hasIntercepts([Le.CLICK])) {
          if (t.isLinkFieldText(n.target)) {
            t.emitLinkFieldClickEvent(n);
            return;
          }
          var a = t.spreadsheet.getCell(n.target), l = a.getMeta();
          if (l) {
            if (o.addIntercepts([Le.HOVER]), o.isSelectedCell(a)) {
              ((i = n.originalEvent) === null || i === void 0 ? void 0 : i.detail) === 1 && (o.reset(), t.spreadsheet.emit(I.GLOBAL_SELECTED, o.getActiveCells()));
              return;
            }
            o.changeState({
              cells: [di(a)],
              stateName: ae.SELECTED,
              onUpdateCells: Dg
            }), t.spreadsheet.emit(I.GLOBAL_SELECTED, [a]), t.showTooltip(n, l);
            var s = l.rowId, f = l.colId, h = l.spreadsheet, d = o.getSelectedCellHighlight(), v = d.colHeader, g = d.rowHeader;
            if (v && EE(f, o.getAllColHeaderCells(), ae.SELECTED), g && s) {
              var y = FJ(l, h);
              xe(y, function(C) {
                C.updateByState(ae.SELECTED);
              });
            }
          }
        }
      });
    }, r.prototype.getTooltipOperator = function(t, n) {
      var i = this, o = Tj(), a = this.spreadsheet.getCell(t.target), l = Hg(this.spreadsheet, t).operation, s = l.trend && M(M({}, o), { onClick: function() {
        i.spreadsheet.emit(I.DATA_CELL_TREND_ICON_CLICK, M(M({}, n), {
          // record 只有明细模式下存在
          record: i.spreadsheet.isTableMode() ? i.spreadsheet.dataSet.getCellData({
            query: { rowIndex: n.rowIndex }
          }) : void 0
        })), i.spreadsheet.hideTooltip();
      } });
      return nL(l, {
        defaultMenus: [s],
        cell: a
      });
    }, r.prototype.showTooltip = function(t, n) {
      var i = n.data, o = n.isTotals, a = o === void 0 ? !1 : o, l = n.value, s = n.fieldValue, f = n.field, h = n.valueField, d = i, v = this.spreadsheet.isTableMode(), g = v ? M(M({}, d), { value: l || s, valueField: f || h }) : d, y = [
        g || M(M({}, n.rowQuery), n.colQuery)
      ], C = this.getTooltipOperator(t, n);
      this.spreadsheet.showTooltipWithInfo(t, y, {
        isTotals: a,
        operator: C,
        enterable: !0,
        hideSummary: !0,
        showSingleTips: v
      });
    }, r.prototype.emitLinkFieldClickEvent = function(t) {
      var n = this.getCellAppendInfo(t.target).cellData, i = n.valueField, o = n.data;
      this.spreadsheet.emit(I.GLOBAL_LINK_FIELD_JUMP, {
        key: i,
        cellData: n,
        record: Object.assign({ rowIndex: n.rowIndex }, o)
      });
    }, r;
  }(ei)
), Nte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.bindEvents = function() {
      this.bindDataCellClick();
    }, r.prototype.bindDataCellClick = function() {
      var t = this;
      this.spreadsheet.on(I.MERGED_CELLS_CLICK, function(n) {
        n.stopPropagation();
        var i = t.spreadsheet.interaction;
        i.hasIntercepts([Le.CLICK]) || i.addIntercepts([Le.HOVER]);
      });
    }, r;
  }(ei)
), Hte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.isMultiSelection = !1, t.handleRowColClick = function(n) {
        if (n.stopPropagation(), !t.isLinkFieldText(n.target)) {
          var i = t.spreadsheet, o = i.interaction, a = i.options, l = t.spreadsheet.getCell(n.target), s = a.interaction.multiSelection, f = !!(s && t.isMultiSelection), h = o.selectHeaderCell({
            cell: l,
            isMultiSelection: f
          });
          h && t.showTooltip(n);
        }
      }, t.getHideColumnField = function(n) {
        return t.spreadsheet.isTableMode() ? n.field : n.id;
      }, t;
    }
    return r.prototype.bindEvents = function() {
      this.bindKeyboardDown(), this.bindKeyboardUp(), this.bindColCellClick(), this.bindRowCellClick(), this.bindTableColExpand(), this.bindMouseMove();
    }, r.prototype.reset = function() {
      this.isMultiSelection = !1, this.spreadsheet.interaction.removeIntercepts([Le.CLICK]);
    }, r.prototype.bindKeyboardDown = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_KEYBOARD_DOWN, function(n) {
        dc(n) && (t.isMultiSelection = !0);
      });
    }, r.prototype.bindKeyboardUp = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_KEYBOARD_UP, function(n) {
        dc(n) && t.reset();
      });
    }, r.prototype.bindMouseMove = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_MOUSE_MOVE, function(n) {
        t.isMultiSelection && !WE(n) && t.reset();
      });
    }, r.prototype.bindRowCellClick = function() {
      var t = this;
      this.spreadsheet.on(I.ROW_CELL_CLICK, function(n) {
        t.handleRowColClick(n);
      });
    }, r.prototype.bindColCellClick = function() {
      var t = this;
      this.spreadsheet.on(I.COL_CELL_CLICK, function(n) {
        t.handleRowColClick(n);
      });
    }, r.prototype.showTooltip = function(t) {
      var n = Hg(this.spreadsheet, t), i = n.operation, o = n.showTooltip;
      if (o) {
        var a = this.spreadsheet.interaction, l = a.isSelectedState() ? Xee(a.getActiveCells()) : [], s = this.getTooltipOperator(t, i);
        this.spreadsheet.showTooltipWithInfo(t, l, {
          showSingleTips: !0,
          operator: s
        });
      }
    }, r.prototype.getTooltipOperator = function(t, n) {
      var i = this, o = this.spreadsheet.getCell(t.target), a = o.getMeta(), l = o.cellType === J.COL_CELL, s = this.spreadsheet.getColumnLeafNodes().length === 1, f = bj(), h = l && !s && a.isLeaf && n.hiddenColumns, d = h && M(M({}, f), { onClick: function() {
        i.hideSelectedColumns();
      } });
      return nL(n, {
        defaultMenus: [d],
        cell: o
      });
    }, r.prototype.bindTableColExpand = function() {
      var t = this;
      this.spreadsheet.on(I.LAYOUT_COLS_EXPANDED, function(n) {
        t.handleExpandIconClick(n);
      });
    }, r.prototype.hideSelectedColumns = function() {
      var t = this.spreadsheet.interaction, n = t.getActiveCells().map(function(o) {
        return o.getMeta();
      }), i = n.map(this.getHideColumnField);
      Rg(this.spreadsheet, i, !0);
    }, r.prototype.handleExpandIconClick = function(t) {
      var n = this.spreadsheet.store.get("hiddenColumnsDetail", []), i = (Uc(n, function(h) {
        var d = h.displaySiblingNode;
        return xp(d, t.id);
      }) || {}).hideColumnNodes, o = i === void 0 ? [] : i, a = this.spreadsheet.options.interaction.hiddenColumnFields, l = o.map(this.getHideColumnField), s = Pb(a, l), f = n.filter(function(h) {
        var d = h.displaySiblingNode;
        return !xp(d, t.id);
      });
      this.spreadsheet.setOptions({
        interaction: {
          hiddenColumnFields: s
        }
      }), this.spreadsheet.store.set("hiddenColumnsDetail", f), this.spreadsheet.interaction.reset(), this.spreadsheet.render(!1);
    }, r;
  }(ei)
), zte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.getRowData = function(n) {
        var i, o = n.getHeadLeafChild(), a = t.spreadsheet.dataSet.getMultiData(o == null ? void 0 : o.query)[0];
        return M(M({}, a), { rowIndex: (i = n.rowIndex) !== null && i !== void 0 ? i : o.rowIndex });
      }, t;
    }
    return r.prototype.bindEvents = function() {
      this.bindRowCellClick();
    }, r.prototype.bindRowCellClick = function() {
      var t = this;
      this.spreadsheet.on(I.ROW_CELL_CLICK, function(n) {
        if (!t.spreadsheet.interaction.hasIntercepts([Le.CLICK]) && t.isLinkFieldText(n.target)) {
          var i = t.getCellAppendInfo(n.target).cellData, o = i.key, a = t.getRowData(i);
          t.spreadsheet.emit(I.GLOBAL_LINK_FIELD_JUMP, {
            key: o,
            cellData: i,
            record: a
          });
        }
      });
    }, r;
  }(ei)
), Wte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.bindEvents = function() {
      this.bindCornerCellClick();
    }, r.prototype.bindCornerCellClick = function() {
      var t = this;
      this.spreadsheet.on(I.CORNER_CELL_CLICK, function(n) {
        var i, o = t.spreadsheet.interaction, a = t.spreadsheet.getCell(n.target);
        if (a) {
          var l = a.getMeta(), s = t.getRowNodesByField(l == null ? void 0 : l.field), f = (i = s[0]) === null || i === void 0 ? void 0 : i.belongsCell, h = t.getRowCells(s);
          if (f && o.isSelectedCell(f)) {
            o.reset(), t.spreadsheet.emit(I.GLOBAL_SELECTED, o.getActiveCells());
            return;
          }
          Q(s) || Q(h) || (o.addIntercepts([Le.HOVER]), o.changeState({
            cells: h,
            stateName: ae.SELECTED
          }), o.highlightNodes(s), t.showTooltip(n), t.spreadsheet.emit(I.GLOBAL_SELECTED, o.getActiveCells()));
        }
      });
    }, r.prototype.getRowNodesByField = function(t) {
      return this.spreadsheet.getRowNodes().filter(function(n) {
        return n.field === t;
      });
    }, r.prototype.getRowCells = function(t) {
      return t.map(function(n) {
        return {
          id: n.id,
          // 选中角头而高亮的行头, 不需要联动数值单元格, 所以索引设置为 -1
          colIndex: -1,
          rowIndex: -1,
          type: J.ROW_CELL
        };
      });
    }, r.prototype.showTooltip = function(t) {
      var n = this.spreadsheet.interaction.getActiveCells();
      this.spreadsheet.showTooltipWithInfo(t, [], {
        data: {
          summaries: [
            {
              selectedData: n,
              name: "",
              value: null
            }
          ]
        }
      });
    }, r;
  }(ei)
), kte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.bindEvents = function() {
      this.bindCornerCellHover(), this.bindDataCellHover(), this.bindRowCellHover(), this.bindColCellHover();
    }, r.prototype.updateRowColCells = function(t) {
      var n = t.rowId, i = t.colId, o = this.spreadsheet.interaction, a = o.getHoverHighlight(), l = a.rowHeader, s = a.colHeader;
      if (s && EE(i, o.getAllColHeaderCells(), ae.HOVER), l && n) {
        var f = Lg(n, o.getAllRowHeaderCells(), this.spreadsheet.isHierarchyTreeType());
        xe(f, function(h) {
          h.updateByState(ae.HOVER);
        });
      }
    }, r.prototype.changeStateToHoverFocus = function(t, n, i) {
      var o = this, a, l = this.spreadsheet.interaction, s = this.spreadsheet.options.interaction, f = s.hoverFocus;
      l.clearHoverTimer();
      var h = function() {
        if (!l.hasIntercepts([Le.HOVER])) {
          l.changeState({
            cells: [di(t)],
            stateName: ae.HOVER_FOCUS
          });
          var g = o.spreadsheet.isTableMode(), y = {
            isTotals: i.isTotals,
            enterable: !0,
            hideSummary: !0,
            showSingleTips: g
          }, C = l.getHoverHighlight(), _ = C.rowHeader, w = C.colHeader;
          (_ || w) && o.updateRowColCells(i);
          var x = o.getCellData(i, g);
          o.spreadsheet.showTooltipWithInfo(n, x, y);
        }
      }, d = Vv;
      if (ui(f) || (d = (a = f == null ? void 0 : f.duration) !== null && a !== void 0 ? a : Vv), d === 0)
        h();
      else {
        var v = window.setTimeout(function() {
          return h();
        }, d);
        l.setHoverTimer(v);
      }
    }, r.prototype.handleHeaderHover = function(t) {
      var n = this.spreadsheet.getCell(t.target);
      if (!Q(n)) {
        var i = this.spreadsheet.interaction;
        i.clearHoverTimer(), !i.isActiveCell(n) && (i.changeState({
          cells: [di(n)],
          stateName: ae.HOVER
        }), n.update(), this.showEllipsisTooltip(t, n));
      }
    }, r.prototype.showEllipsisTooltip = function(t, n) {
      if (!n || !n.isTextOverflowing()) {
        this.spreadsheet.hideTooltip();
        return;
      }
      var i = n.getMeta(), o = !0, a = {
        isTotals: i.isTotals,
        enterable: !0,
        hideSummary: !0,
        showSingleTips: o,
        enableFormat: !0
      }, l = this.getCellData(i, o);
      this.spreadsheet.showTooltipWithInfo(t, l, a);
    }, r.prototype.getCellData = function(t, n) {
      t === void 0 && (t = {});
      var i = t.data, o = t.query, a = t.value, l = t.field, s = t.fieldValue, f = t.valueField, h = t.rowQuery, d = t.colQuery, v = i, g = n ? [
        M(M({}, o), { value: a || s, valueField: l || f })
      ] : [v || M(M({}, h), d)];
      return g;
    }, r.prototype.bindDataCellHover = function() {
      var t = this;
      this.spreadsheet.on(I.DATA_CELL_HOVER, function(n) {
        var i = t.spreadsheet.getCell(n.target);
        if (!Q(i)) {
          var o = t.spreadsheet, a = o.interaction, l = o.options, s = l.interaction, f = i == null ? void 0 : i.getMeta();
          if (!a.isActiveCell(i)) {
            a.changeState({
              cells: [di(i)],
              stateName: ae.HOVER
            });
            var h = a.getHoverHighlight(), d = h.rowHeader, v = h.colHeader;
            (d || v) && t.updateRowColCells(f), s.hoverFocus && t.changeStateToHoverFocus(i, n, f);
          }
        }
      });
    }, r.prototype.bindRowCellHover = function() {
      var t = this;
      this.spreadsheet.on(I.ROW_CELL_HOVER, function(n) {
        t.handleHeaderHover(n);
      });
    }, r.prototype.bindColCellHover = function() {
      var t = this;
      this.spreadsheet.on(I.COL_CELL_HOVER, function(n) {
        t.handleHeaderHover(n);
      });
    }, r.prototype.bindCornerCellHover = function() {
      var t = this;
      this.spreadsheet.on(I.CORNER_CELL_HOVER, function(n) {
        t.handleHeaderHover(n);
      });
    }, r;
  }(ei)
), Yg = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.displayedCells = [], t.brushRangeCells = [], t.brushSelectionStage = ar.UN_DRAGGED, t.brushSelectionMinimumMoveDistance = 5, t.scrollAnimationComplete = !0, t.mouseMoveDistanceFromCanvas = 0, t.setMoveDistanceFromCanvas = function(n, i, o) {
        var a = 0;
        if (i && (a = n.x), o) {
          var l = n.y;
          i ? a = Math.max(l, a) : a = l;
        }
        t.mouseMoveDistanceFromCanvas = Math.abs(a);
      }, t.formatBrushPointForScroll = function(n, i) {
        var o, a, l, s;
        i === void 0 && (i = !1);
        var f = n.x, h = n.y, d = t.spreadsheet.facet, v = i ? d.cornerBBox : d.panelBBox, g = v.minX, y = v.maxX, C = d.panelBBox, _ = C.minY, w = C.maxY, x = ((o = t.endBrushPoint) === null || o === void 0 ? void 0 : o.x) + f, S = ((a = t.endBrushPoint) === null || a === void 0 ? void 0 : a.y) + h, T = !0, R = !0, B = (s = (l = d.vScrollBar) === null || l === void 0 ? void 0 : l.getBBox()) === null || s === void 0 ? void 0 : s.width, $ = 2;
        return x > y ? x = y - B - $ : x < g ? x = g + $ : T = !1, S > w ? S = w - $ : S <= _ ? S = _ + $ : R = !1, {
          x: {
            value: x,
            needScroll: T
          },
          y: {
            value: S,
            needScroll: R
          }
        };
      }, t.rectanglesIntersect = function(n, i) {
        return n.maxX > i.minX && n.minX < i.maxX && n.minY < i.maxY && n.maxY > i.minY;
      }, t.autoScrollIntervalId = null, t.autoScrollConfig = tp(e_), t.validateYIndex = function(n) {
        var i, o, a = t.spreadsheet.facet, l = a.frozenGroupInfo, s = 0, f = (i = l == null ? void 0 : l.frozenRow) === null || i === void 0 ? void 0 : i.range;
        if (f && (s = f[1] + 1), n < s)
          return null;
        var h = a.getCellRange().end, d = (o = l == null ? void 0 : l.frozenTrailingRow) === null || o === void 0 ? void 0 : o.range;
        return d && (h = d[0] - 1), n > h ? null : n;
      }, t.validateXIndex = function(n) {
        var i, o, a = t.spreadsheet.facet, l = a.frozenGroupInfo, s = 0, f = (i = l == null ? void 0 : l.frozenCol) === null || i === void 0 ? void 0 : i.range;
        if (f && (s = f[1] + 1), n < s)
          return null;
        var h = a.layoutResult.colLeafNodes.length - 1, d = (o = l == null ? void 0 : l.frozenTrailingCol) === null || o === void 0 ? void 0 : o.range;
        return d && (h = d[0] - 1), n > h ? null : n;
      }, t.adjustNextColIndexWithFrozen = function(n, i) {
        var o = t.spreadsheet, a = o.facet, l = o.dataSet, s = o.options, f = l.getDisplayDataSet().length, h = a.layoutResult.colLeafNodes.length, d = So(s, h, f), v = d.frozenTrailingColCount, g = d.frozenColCount, y = a.panelScrollGroupIndexes;
        return v > 0 && i === Yt.SCROLL_DOWN && ha(n, v, h) ? y[1] : g > 0 && i === Yt.SCROLL_UP && ca(n, g) ? y[0] : n;
      }, t.adjustNextRowIndexWithFrozen = function(n, i) {
        var o = t.spreadsheet, a = o.facet, l = o.dataSet, s = o.options, f = l.getDisplayDataSet().length, h = a.layoutResult.colLeafNodes.length, d = a.getCellRange(), v = So(s, h, f), g = v.frozenTrailingRowCount, y = v.frozenRowCount, C = a.panelScrollGroupIndexes;
        return g > 0 && i === Yt.SCROLL_DOWN && lu(n, d.end, g) ? C[3] : y > 0 && i === Yt.SCROLL_UP && th(n, d.start, y) ? C[2] : n;
      }, t.getWillScrollRowIndexDiff = function(n) {
        return n === Yt.SCROLL_DOWN ? Jf.SCROLL_DOWN : Jf.SCROLL_UP;
      }, t.getDefaultWillScrollToRowIndex = function(n) {
        var i = t.adjustNextRowIndexWithFrozen(t.endBrushPoint.rowIndex, n), o = i + t.getWillScrollRowIndexDiff(n);
        return t.validateYIndex(o);
      }, t.getWillScrollToRowIndex = function(n) {
        return t.getDefaultWillScrollToRowIndex(n);
      }, t.getNextScrollDelta = function(n) {
        var i = t.spreadsheet.facet.getScrollOffset(), o = i.scrollX, a = i.scrollY, l = 0, s = 0;
        if (n.y.scroll) {
          var f = n.y.value > 0 ? Yt.SCROLL_DOWN : Yt.SCROLL_UP, h = t.getWillScrollToRowIndex(f), d = HJ(h, f, t.spreadsheet) - a, v = Nt(h) || Nt(d) || Number.isNaN(d);
          s = v ? 0 : d;
        }
        if (n.x.scroll) {
          var f = n.x.value > 0 ? Yt.SCROLL_DOWN : Yt.SCROLL_UP, g = t.adjustNextColIndexWithFrozen(t.endBrushPoint.colIndex, f), y = t.validateXIndex(g + (n.x.value > 0 ? 1 : -1));
          l = Nt(y) ? 0 : NJ(y, f, t.spreadsheet) - o;
        }
        return {
          x: l,
          y: s
        };
      }, t.onScrollAnimationComplete = function() {
        t.scrollAnimationComplete = !0, t.brushSelectionStage !== ar.UN_DRAGGED && t.renderPrepareSelected(t.endBrushPoint);
      }, t.autoScroll = function(n) {
        if (n === void 0 && (n = !1), !(t.brushSelectionStage === ar.UN_DRAGGED || !t.scrollAnimationComplete)) {
          var i = t.autoScrollConfig, o = t.spreadsheet.facet.getScrollOffset(), a = n ? "rowHeaderOffsetX" : "offsetX", l = {
            rowHeaderOffsetX: {
              value: o.rowHeaderScrollX,
              animate: !0
            },
            offsetX: {
              value: o.scrollX,
              animate: !0
            },
            offsetY: {
              value: o.scrollY,
              animate: !0
            }
          }, s = t.getNextScrollDelta(i), f = s.x, h = s.y;
          if (h === 0 && f === 0) {
            t.clearAutoScroll();
            return;
          }
          if (i.y.scroll && (l.offsetY.value += h), i.x.scroll) {
            var d = l[a];
            d.value += f, d.value < 0 && (d.value = 0);
          }
          t.scrollAnimationComplete = !1;
          var v = i.x.scroll ? 1 : 3, g = Math.max(16, 300 - t.mouseMoveDistanceFromCanvas * v);
          t.spreadsheet.facet.scrollWithAnimation(l, g, t.onScrollAnimationComplete);
        }
      }, t.handleScroll = vg(function(n, i, o) {
        if (o === void 0 && (o = !1), t.brushSelectionStage !== ar.UN_DRAGGED) {
          var a = t.formatBrushPointForScroll({ x: n, y: i }, o), l = a.x, s = l.value, f = l.needScroll, h = a.y, d = h.value, v = h.needScroll, g = t.autoScrollConfig;
          v && (g.y.value = i, g.y.scroll = !0), f && (g.x.value = n, g.x.scroll = !0), t.setMoveDistanceFromCanvas({ x: n, y: i }, f, v), t.renderPrepareSelected({
            x: s,
            y: d
          }), (v || f) && (t.clearAutoScroll(), t.autoScroll(o), t.autoScrollIntervalId = setInterval(function() {
            t.autoScroll(o);
          }, 16));
        }
      }, 30), t.clearAutoScroll = function() {
        t.autoScrollIntervalId && (clearInterval(t.autoScrollIntervalId), t.autoScrollIntervalId = null, t.resetScrollDelta());
      }, t.onUpdateCells = function(n, i) {
        return i();
      }, t.showPrepareSelectedCells = function() {
        t.brushRangeCells = t.getBrushRangeCells(), t.spreadsheet.interaction.changeState({
          cells: We(t.brushRangeCells, function(n) {
            return di(n);
          }),
          stateName: ae.PREPARE_SELECT,
          // 刷选首先会经过 hover => mousedown => mousemove, hover时会将当前行全部高亮 (row cell + data cell)
          // 如果是有效刷选, 更新时会重新渲染, hover 高亮的格子 会正常重置
          // 如果是无效刷选(全部都是没数据的格子), brushRangeDataCells = [], 更新时会跳过, 需要强制重置 hover 高亮
          force: !0,
          onUpdateCells: t.onUpdateCells
        });
      }, t.renderPrepareSelected = function(n) {
        var i = n.x, o = n.y, a = t.spreadsheet.container.getShape(i, o), l = t.spreadsheet.getCell(a), s = l instanceof No || l instanceof cu || l instanceof ih;
        if (!(!l || !s)) {
          var f = l.getMeta(), h = f.rowIndex, d = f.colIndex;
          t.endBrushPoint = {
            x: i,
            y: o,
            rowIndex: h,
            colIndex: d
          };
          var v = t.spreadsheet.interaction;
          v.addIntercepts([Le.HOVER]), v.clearStyleIndependent(), t.isValidBrushSelection() && (t.showPrepareSelectedCells(), t.updatePrepareSelectMask());
        }
      }, t;
    }
    return r.prototype.bindEvents = function() {
      this.bindMouseDown(), this.bindMouseMove(), this.bindMouseUp();
    }, r.prototype.getPrepareSelectMaskTheme = function() {
      var t;
      return (t = this.spreadsheet.theme) === null || t === void 0 ? void 0 : t.prepareSelectMask;
    }, r.prototype.initPrepareSelectMaskShape = function() {
      var t = this.spreadsheet.foregroundGroup;
      if (t) {
        t.removeChild(this.prepareSelectMaskShape);
        var n = this.getPrepareSelectMaskTheme();
        this.prepareSelectMaskShape = t.addShape("rect", {
          visible: !1,
          attrs: {
            width: 0,
            height: 0,
            x: 0,
            y: 0,
            fill: n == null ? void 0 : n.backgroundColor,
            fillOpacity: n == null ? void 0 : n.backgroundOpacity,
            zIndex: vD
          },
          capture: !1
        });
      }
    }, r.prototype.setBrushSelectionStage = function(t) {
      this.brushSelectionStage = t;
    }, r.prototype.isPointInCanvas = function(t) {
      var n = this.spreadsheet.facet.getCanvasHW(), i = n.height, o = n.width, a = this.spreadsheet.facet.panelBBox, l = a.minX, s = a.minY;
      return t.x > l && t.x < o && t.y > s && t.y < i;
    }, r.prototype.resetDrag = function() {
      this.hidePrepareSelectMaskShape(), this.setBrushSelectionStage(ar.UN_DRAGGED);
    }, r.prototype.isValidBrushSelection = function() {
      var t = this.getBrushRange(), n = t.start, i = t.end, o = i.x - n.x > this.brushSelectionMinimumMoveDistance || i.y - n.y > this.brushSelectionMinimumMoveDistance;
      return o;
    }, r.prototype.setDisplayedCells = function() {
      this.displayedCells = this.spreadsheet.interaction.getPanelGroupAllDataCells();
    }, r.prototype.updatePrepareSelectMask = function() {
      var t = this.getBrushRange(), n = this.getPrepareSelectMaskPosition(t), i = n.x, o = n.y;
      this.prepareSelectMaskShape.attr({
        x: i,
        y: o,
        width: t.width,
        height: t.height
      }), this.prepareSelectMaskShape.show();
    }, r.prototype.hidePrepareSelectMaskShape = function() {
      var t;
      (t = this.prepareSelectMaskShape) === null || t === void 0 || t.hide();
    }, r.prototype.resetScrollDelta = function() {
      this.autoScrollConfig = tp(e_);
    }, r.prototype.getBrushPoint = function(t) {
      var n = this.spreadsheet.facet.getScrollOffset(), i = n.scrollY, o = n.scrollX, a = {
        x: t == null ? void 0 : t.x,
        y: t == null ? void 0 : t.y
      }, l = this.spreadsheet.getCell(t.target), s = l.getMeta(), f = s.colIndex, h = s.rowIndex;
      return M(M({}, a), { rowIndex: h, colIndex: f, scrollY: i, scrollX: o });
    }, r.prototype.getBrushRange = function() {
      var t, n, i, o, a, l, s, f, h = this.spreadsheet.facet.getScrollOffset(), d = h.scrollX, v = h.scrollY, g = Math.min(this.startBrushPoint.rowIndex, (t = this.endBrushPoint) === null || t === void 0 ? void 0 : t.rowIndex), y = Math.max(this.startBrushPoint.rowIndex, (n = this.endBrushPoint) === null || n === void 0 ? void 0 : n.rowIndex), C = Math.min(this.startBrushPoint.colIndex, (i = this.endBrushPoint) === null || i === void 0 ? void 0 : i.colIndex), _ = Math.max(this.startBrushPoint.colIndex, (o = this.endBrushPoint) === null || o === void 0 ? void 0 : o.colIndex), w = this.startBrushPoint.x + this.startBrushPoint.scrollX - d, x = this.startBrushPoint.y + this.startBrushPoint.scrollY - v, S = Math.min(w, (a = this.endBrushPoint) === null || a === void 0 ? void 0 : a.x), T = Math.max(w, (l = this.endBrushPoint) === null || l === void 0 ? void 0 : l.x), R = Math.min(x, (s = this.endBrushPoint) === null || s === void 0 ? void 0 : s.y), B = Math.max(x, (f = this.endBrushPoint) === null || f === void 0 ? void 0 : f.y);
      return {
        start: {
          rowIndex: g,
          colIndex: C,
          x: S,
          y: R
        },
        end: {
          rowIndex: y,
          colIndex: _,
          x: T,
          y: B
        },
        width: T - S,
        height: B - R
      };
    }, r.prototype.getBrushRangeCells = function() {
      var t = this;
      return this.setDisplayedCells(), this.displayedCells.filter(function(n) {
        var i = n.getMeta();
        return t.isInBrushRange(i);
      });
    }, r.prototype.mouseDown = function(t) {
      var n;
      (n = t == null ? void 0 : t.preventDefault) === null || n === void 0 || n.call(t), !this.spreadsheet.interaction.hasIntercepts([Le.CLICK]) && (this.setBrushSelectionStage(ar.CLICK), this.initPrepareSelectMaskShape(), this.setDisplayedCells(), this.startBrushPoint = this.getBrushPoint(t));
    }, r.prototype.addBrushIntercepts = function() {
      this.spreadsheet.interaction.addIntercepts([Le.BRUSH_SELECTION]);
    }, r.prototype.bindMouseUp = function(t) {
      var n = this;
      t === void 0 && (t = !1), this.spreadsheet.on(I.GLOBAL_MOUSE_UP, function(i) {
        if (n.brushSelectionStage !== ar.DRAGGED) {
          n.resetDrag();
          return;
        }
        if (t && n.clearAutoScroll(), n.isValidBrushSelection()) {
          n.addBrushIntercepts(), n.updateSelectedCells();
          var o = Ng(n.spreadsheet);
          n.spreadsheet.showTooltipWithInfo(i, o);
        }
        n.spreadsheet.interaction.getCurrentStateName() === ae.PREPARE_SELECT && n.spreadsheet.interaction.reset(), n.resetDrag();
      }), this.spreadsheet.on(I.GLOBAL_CONTEXT_MENU, function() {
        n.brushSelectionStage !== ar.UN_DRAGGED && (n.spreadsheet.interaction.removeIntercepts([Le.HOVER]), n.resetDrag());
      });
    }, r.prototype.autoBrushScroll = function(t, n) {
      var i, o;
      if (n === void 0 && (n = !1), this.clearAutoScroll(), !this.isPointInCanvas(t)) {
        var a = (t == null ? void 0 : t.x) - ((i = this.endBrushPoint) === null || i === void 0 ? void 0 : i.x), l = (t == null ? void 0 : t.y) - ((o = this.endBrushPoint) === null || o === void 0 ? void 0 : o.y);
        return this.handleScroll(a, l, n), !0;
      }
      return !1;
    }, r.prototype.emitBrushSelectionEvent = function(t, n) {
      this.spreadsheet.emit(t, n), this.spreadsheet.emit(I.GLOBAL_SELECTED, n), Q(n) && this.spreadsheet.interaction.removeIntercepts([Le.HOVER]);
    }, r.prototype.getVisibleBrushRangeCells = function(t) {
      return this.brushRangeCells.find(function(n) {
        var i = n.getMeta();
        return (i == null ? void 0 : i.id) === t;
      });
    }, r.prototype.isInBrushRange = function(t) {
      return !1;
    }, r.prototype.bindMouseDown = function() {
    }, r.prototype.bindMouseMove = function() {
    }, r.prototype.updateSelectedCells = function() {
    }, r.prototype.getPrepareSelectMaskPosition = function(t) {
      return {
        x: t.start.x,
        y: t.start.y
      };
    }, r;
  }(ei)
), Gte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.displayedCells = [], t.brushRangeCells = [], t.onUpdateCells = function(n) {
        return n.updateCells(n.getAllColHeaderCells());
      }, t;
    }
    return r.prototype.bindEvents = function() {
      this.bindMouseDown(), this.bindMouseMove(), this.bindMouseUp();
    }, r.prototype.bindMouseDown = function() {
      var t = this;
      this.spreadsheet.on(I.COL_CELL_MOUSE_DOWN, function(n) {
        t.spreadsheet.interaction.getBrushSelection().col && e.prototype.mouseDown.call(t, n);
      });
    }, r.prototype.isPointInCanvas = function(t) {
      var n = this.spreadsheet.facet.getCanvasHW().width, i = this.spreadsheet.facet.cornerBBox, o = i.width, a = i.minY, l = i.maxY;
      return t.x >= o && t.x <= n && t.y >= a && t.y <= l;
    }, r.prototype.bindMouseMove = function() {
      var t = this;
      this.spreadsheet.on(I.COL_CELL_MOUSE_MOVE, function(n) {
        if (t.brushSelectionStage !== ar.UN_DRAGGED) {
          t.setBrushSelectionStage(ar.DRAGGED);
          var i = t.spreadsheet.container.getPointByEvent(n.originalEvent);
          t.isPointInCanvas(i) && t.renderPrepareSelected(i);
        }
      });
    }, r.prototype.setDisplayedCells = function() {
      this.displayedCells = this.spreadsheet.interaction.getAllColHeaderCells();
    }, r.prototype.isInBrushRange = function(t) {
      var n = this.getBrushRange(), i = n.start, o = n.end, a = this.spreadsheet.facet.getScrollOffset().scrollX, l = this.spreadsheet.facet.cornerBBox, s = t.x, f = s === void 0 ? 0 : s, h = t.y, d = h === void 0 ? 0 : h, v = t.width, g = v === void 0 ? 0 : v, y = t.height, C = y === void 0 ? 0 : y;
      return this.rectanglesIntersect({
        // 由于刷选的时候，是以列头的左上角为起点，所以需要减去角头的宽度，在滚动后需要加上滚动条的偏移量
        minX: i.x - l.width + a,
        minY: i.y,
        maxX: o.x - l.width + a,
        maxY: o.y
      }, {
        minX: f,
        maxX: f + g,
        minY: d,
        maxY: d + C
      });
    }, r.prototype.updateSelectedCells = function() {
      var t = this.spreadsheet.interaction;
      t.changeState({
        cells: We(this.brushRangeCells, di),
        stateName: ae.BRUSH_SELECTED,
        onUpdateCells: this.onUpdateCells
      }), this.spreadsheet.emit(I.COL_CELL_BRUSH_SELECTION, this.brushRangeCells), this.spreadsheet.emit(I.GLOBAL_SELECTED, this.brushRangeCells), Q(this.brushRangeCells) && t.removeIntercepts([Le.HOVER]);
    }, r.prototype.addBrushIntercepts = function() {
      this.spreadsheet.interaction.addIntercepts([
        Le.COL_BRUSH_SELECTION
      ]);
    }, r;
  }(Yg)
), Ute = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.displayedCells = [], t.brushRangeCells = [], t.getSelectedCellMetas = function(n) {
        var i = [], o = t.spreadsheet.facet.layoutResult, a = o.rowLeafNodes, l = a === void 0 ? [] : a, s = o.colLeafNodes, f = s === void 0 ? [] : s, h = ul(n.start.rowIndex, n.end.rowIndex + 1), d = ul(n.start.colIndex, n.end.colIndex + 1);
        return h.forEach(function(v) {
          d.forEach(function(g) {
            var y = String(f[g].id), C = Q(l) ? String(v) : String(l[v].id);
            i.push({
              colIndex: g,
              rowIndex: v,
              id: uu(C, y),
              type: J.DATA_CELL,
              rowId: C,
              colId: y,
              spreadsheet: t.spreadsheet
            });
          });
        }), i;
      }, t;
    }
    return r.prototype.bindMouseDown = function() {
      var t = this;
      this.spreadsheet.on(I.DATA_CELL_MOUSE_DOWN, function(n) {
        t.spreadsheet.interaction.getBrushSelection().data && (e.prototype.mouseDown.call(t, n), t.resetScrollDelta());
      });
    }, r.prototype.bindMouseMove = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_MOUSE_MOVE, function(n) {
        if (t.brushSelectionStage !== ar.UN_DRAGGED) {
          t.setBrushSelectionStage(ar.DRAGGED);
          var i = t.spreadsheet.container.getPointByEvent(n);
          t.autoBrushScroll(i) || t.renderPrepareSelected(i);
        }
      });
    }, r.prototype.isInBrushRange = function(t) {
      var n = this.getBrushRange(), i = n.start, o = n.end, a = t.rowIndex, l = t.colIndex;
      return a >= i.rowIndex && a <= o.rowIndex && l >= i.colIndex && l <= o.colIndex;
    }, r.prototype.updateSelectedCells = function() {
      var t = this.getBrushRange(), n = this.getSelectedCellMetas(t);
      this.spreadsheet.interaction.changeState({
        cells: n,
        // TODO: 怕上层有直接消费 stateName, 暂时保留, 2.0 版本改成 InteractionStateName.BRUSH_SELECTED
        stateName: ae.SELECTED,
        onUpdateCells: Dg
      });
      var i = this.getScrollBrushRangeCells(n);
      this.emitBrushSelectionEvent(I.DATA_CELL_BRUSH_SELECTION, i);
    }, r.prototype.getScrollBrushRangeCells = function(t) {
      var n = this;
      return t.map(function(i) {
        var o = n.getVisibleBrushRangeCells(i.id);
        if (o)
          return o;
        var a = n.spreadsheet.facet.layoutResult.getCellMeta(i.rowIndex, i.colIndex), l = n.spreadsheet.isTableMode() ? oh : No;
        return new l(a, n.spreadsheet);
      });
    }, r.prototype.bindMouseUp = function() {
      e.prototype.bindMouseUp.call(this, !0);
    }, r.prototype.getPrepareSelectMaskPosition = function(t) {
      var n = this.spreadsheet.facet.panelBBox, i = n.minX, o = n.minY, a = Math.max(t.start.x, i), l = Math.max(t.start.y, o);
      return {
        x: a,
        y: l
      };
    }, r;
  }(Yg)
), Yte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.isInBrushRange = function(n) {
        var i = t.getBrushRange(), o = i.start, a = i.end, l = t.spreadsheet.facet.getScrollOffset(), s = l.scrollY, f = l.rowHeaderScrollX, h = t.spreadsheet.facet.cornerBBox, d = n.x, v = d === void 0 ? 0 : d, g = n.y, y = g === void 0 ? 0 : g, C = n.width, _ = C === void 0 ? 0 : C, w = n.height, x = w === void 0 ? 0 : w;
        return t.rectanglesIntersect({
          // 行头过长时，可以单独进行滚动，所以需要加上滚动的距离
          minX: o.x + f,
          // 由于刷选的时候，是以行头的左上角为起点，所以需要减去角头的宽度，在滚动后需要加上滚动条的偏移量
          minY: o.y - h.height + s,
          maxX: a.x + f,
          maxY: a.y - h.height + s
        }, {
          minX: v,
          maxX: v + _,
          minY: y,
          maxY: y + x
        });
      }, t.onUpdateCells = function(n) {
        return n.updateCells(n.getAllRowHeaderCells());
      }, t.getSelectedRowNodes = function() {
        return t.spreadsheet.getRowNodes().filter(t.isInBrushRange);
      }, t.getVisibleRowLeafCellByScrollDirection = function(n) {
        var i = t.spreadsheet.interaction.getAllRowHeaderCells();
        return n === Yt.SCROLL_DOWN ? ut(i) : i.find(function(o) {
          var a = o.getMeta();
          return a.isLeaf;
        });
      }, t.getWillScrollToRowIndex = function(n) {
        var i, o;
        if (!Nt(t.endBrushPoint.rowIndex))
          return t.getDefaultWillScrollToRowIndex(n);
        var a = t.getVisibleRowLeafCellByScrollDirection(n), l = (o = (i = a == null ? void 0 : a.getMeta()) === null || i === void 0 ? void 0 : i.rowIndex) !== null && o !== void 0 ? o : 0, s = l + t.getWillScrollRowIndexDiff(n);
        return t.validateYIndex(s);
      }, t;
    }
    return r.prototype.bindMouseDown = function() {
      var t = this;
      this.spreadsheet.on(I.ROW_CELL_MOUSE_DOWN, function(n) {
        t.spreadsheet.interaction.getBrushSelection().row && e.prototype.mouseDown.call(t, n);
      });
    }, r.prototype.isPointInCanvas = function(t) {
      var n = this.spreadsheet.facet.getCanvasHW().height, i = this.spreadsheet.facet.cornerBBox, o = i.minX, a = i.height, l = i.maxX;
      return t.x >= o && t.x <= l && t.y >= a && t.y <= n;
    }, r.prototype.bindMouseMove = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_MOUSE_MOVE, function(n) {
        if (t.brushSelectionStage !== ar.UN_DRAGGED) {
          t.setBrushSelectionStage(ar.DRAGGED);
          var i = t.spreadsheet.container.getPointByEvent(n);
          t.autoBrushScroll(i, !0) || t.renderPrepareSelected(i);
        }
      });
    }, r.prototype.setDisplayedCells = function() {
      this.displayedCells = this.spreadsheet.interaction.getAllRowHeaderCells();
    }, r.prototype.updateSelectedCells = function() {
      var t = this.getSelectedRowNodes(), n = this.getScrollBrushRangeCells(t), i = We(n, di);
      this.spreadsheet.interaction.changeState({
        cells: i,
        stateName: ae.BRUSH_SELECTED,
        onUpdateCells: this.onUpdateCells
      }), this.emitBrushSelectionEvent(I.ROW_CELL_BRUSH_SELECTION, n);
    }, r.prototype.addBrushIntercepts = function() {
      this.spreadsheet.interaction.addIntercepts([
        Le.ROW_BRUSH_SELECTION
      ]);
    }, r.prototype.getScrollBrushRangeCells = function(t) {
      var n = this;
      return t.map(function(i) {
        var o = n.getVisibleBrushRangeCells(i.id);
        return o || n.spreadsheet.facet.rowHeader.createCellInstance(i);
      });
    }, r.prototype.getPrepareSelectMaskPosition = function(t) {
      var n = this.spreadsheet.facet.panelBBox.minY, i = t.start.x, o = Math.max(t.start.y, n);
      return {
        x: i,
        y: o
      };
    }, r;
  }(Yg)
), Xte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.isMultiSelection = !1, t;
    }
    return r.prototype.bindEvents = function() {
      this.bindKeyboardDown(), this.bindDataCellClick(), this.bindKeyboardUp(), this.bindMouseMove();
    }, r.prototype.reset = function() {
      this.isMultiSelection = !1, this.spreadsheet.interaction.removeIntercepts([Le.CLICK]);
    }, r.prototype.bindKeyboardDown = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_KEYBOARD_DOWN, function(n) {
        dc(n) && (t.isMultiSelection = !0, t.spreadsheet.interaction.addIntercepts([Le.CLICK]));
      });
    }, r.prototype.bindKeyboardUp = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_KEYBOARD_UP, function(n) {
        dc(n) && t.reset();
      });
    }, r.prototype.bindMouseMove = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_MOUSE_MOVE, function(n) {
        t.isMultiSelection && !WE(n) && t.reset();
      });
    }, r.prototype.getSelectedCells = function(t) {
      var n = t.getMeta().id, i = this.spreadsheet.interaction, o = i.getCells([J.DATA_CELL]), a = [];
      return i.getCurrentStateName() !== ae.SELECTED && (o = []), o.find(function(l) {
        return l.id === n;
      }) ? a = o.filter(function(l) {
        return l.id !== n;
      }) : a = j(j([], W(o), !1), [di(t)], !1), a;
    }, r.prototype.bindDataCellClick = function() {
      var t = this;
      this.spreadsheet.on(I.DATA_CELL_CLICK, function(n) {
        n.stopPropagation();
        var i = t.spreadsheet.getCell(n.target), o = i.getMeta(), a = t.spreadsheet.interaction;
        if (t.isMultiSelection && o) {
          var l = t.getSelectedCells(i);
          if (Q(l)) {
            a.clearState(), t.spreadsheet.hideTooltip(), t.spreadsheet.emit(I.GLOBAL_SELECTED, a.getActiveCells());
            return;
          }
          a.addIntercepts([Le.CLICK, Le.HOVER]), t.spreadsheet.hideTooltip(), a.changeState({
            cells: l,
            stateName: ae.SELECTED,
            onUpdateCells: Dg
          }), t.spreadsheet.emit(I.GLOBAL_SELECTED, a.getActiveCells()), t.spreadsheet.showTooltipWithInfo(n, Ng(t.spreadsheet));
        }
      });
    }, r;
  }(ei)
), Vte = (
  /** @class */
  function() {
    function e(r) {
      var t = this;
      this.canvasEventHandlers = [], this.s2EventHandlers = [], this.domEventListeners = [], this.isCanvasEffect = !1, this.isGuiIconShape = function(n) {
        return n instanceof f0 && n.attrs.type === Ps.type;
      }, this.onCanvasMousedown = function(n) {
        if (t.target = n.target, t.spreadsheet.interaction.clearHoverTimer(), t.isResizeArea(n)) {
          t.spreadsheet.emit(I.LAYOUT_RESIZE_MOUSE_DOWN, n);
          var i = function(a) {
            if (!t.spreadsheet.getCanvasElement())
              return !1;
            t.spreadsheet.getCanvasElement() !== a.target && (n.clientX = a.clientX, n.clientY = a.clientY, n.originalEvent = a, t.spreadsheet.emit(I.LAYOUT_RESIZE_MOUSE_MOVE, n));
          };
          window.addEventListener("mousemove", i), window.addEventListener("mouseup", function() {
            window.removeEventListener("mousemove", i);
          }, { once: !0 });
          return;
        }
        var o = t.spreadsheet.getCellType(n.target);
        switch (o) {
          case J.DATA_CELL:
            t.spreadsheet.emit(I.DATA_CELL_MOUSE_DOWN, n);
            break;
          case J.ROW_CELL:
            t.spreadsheet.emit(I.ROW_CELL_MOUSE_DOWN, n);
            break;
          case J.COL_CELL:
            t.spreadsheet.emit(I.COL_CELL_MOUSE_DOWN, n);
            break;
          case J.CORNER_CELL:
            t.spreadsheet.emit(I.CORNER_CELL_MOUSE_DOWN, n);
            break;
          case J.MERGED_CELL:
            t.spreadsheet.emit(I.MERGED_CELLS_MOUSE_DOWN, n);
            break;
        }
      }, this.onCanvasMousemove = function(n) {
        if (t.canvasMousemoveEvent = n, t.isResizeArea(n)) {
          t.activeResizeArea(n), t.spreadsheet.emit(I.LAYOUT_RESIZE_MOUSE_MOVE, n);
          return;
        }
        t.resetResizeArea();
        var i = t.spreadsheet.getCell(n.target);
        if (i) {
          var o = i.cellType;
          switch (o) {
            case J.DATA_CELL:
              t.spreadsheet.emit(I.DATA_CELL_MOUSE_MOVE, n);
              break;
            case J.ROW_CELL:
              t.spreadsheet.emit(I.ROW_CELL_MOUSE_MOVE, n);
              break;
            case J.COL_CELL:
              t.spreadsheet.emit(I.COL_CELL_MOUSE_MOVE, n);
              break;
            case J.CORNER_CELL:
              t.spreadsheet.emit(I.CORNER_CELL_MOUSE_MOVE, n);
              break;
            case J.MERGED_CELL:
              t.spreadsheet.emit(I.MERGED_CELLS_MOUSE_MOVE, n);
              break;
          }
          if (!t.hasBrushSelectionIntercepts())
            switch (t.spreadsheet.emit(I.GLOBAL_HOVER, n), o) {
              case J.DATA_CELL:
                t.spreadsheet.emit(I.DATA_CELL_HOVER, n);
                break;
              case J.ROW_CELL:
                t.spreadsheet.emit(I.ROW_CELL_HOVER, n);
                break;
              case J.COL_CELL:
                t.spreadsheet.emit(I.COL_CELL_HOVER, n);
                break;
              case J.CORNER_CELL:
                t.spreadsheet.emit(I.CORNER_CELL_HOVER, n);
                break;
              case J.MERGED_CELL:
                t.spreadsheet.emit(I.MERGED_CELLS_HOVER, n);
                break;
            }
        }
      }, this.onCanvasMouseup = function(n) {
        if (t.isResizeArea(n)) {
          t.spreadsheet.emit(I.LAYOUT_RESIZE_MOUSE_UP, n);
          return;
        }
        var i = t.spreadsheet.getCell(n.target);
        if (i) {
          var o = i.cellType;
          if (t.target === n.target) {
            var a = t.isGuiIconShape(n.target);
            switch (o) {
              case J.DATA_CELL:
                t.spreadsheet.emit(I.DATA_CELL_CLICK, n);
                break;
              case J.ROW_CELL:
                if (a)
                  break;
                t.spreadsheet.emit(I.ROW_CELL_CLICK, n);
                break;
              case J.COL_CELL:
                if (a)
                  break;
                t.spreadsheet.emit(I.COL_CELL_CLICK, n);
                break;
              case J.CORNER_CELL:
                if (a)
                  break;
                t.spreadsheet.emit(I.CORNER_CELL_CLICK, n);
                break;
              case J.MERGED_CELL:
                t.spreadsheet.emit(I.MERGED_CELLS_CLICK, n);
                break;
            }
          }
          switch (o) {
            case J.DATA_CELL:
              t.spreadsheet.emit(I.DATA_CELL_MOUSE_UP, n);
              break;
            case J.ROW_CELL:
              t.spreadsheet.emit(I.ROW_CELL_MOUSE_UP, n);
              break;
            case J.COL_CELL:
              t.spreadsheet.emit(I.COL_CELL_MOUSE_UP, n);
              break;
            case J.CORNER_CELL:
              t.spreadsheet.emit(I.CORNER_CELL_MOUSE_UP, n);
              break;
            case J.MERGED_CELL:
              t.spreadsheet.emit(I.MERGED_CELLS_MOUSE_UP, n);
              break;
          }
        }
      }, this.onCanvasClick = function(n) {
        t.spreadsheet.emit(I.GLOBAL_CLICK, n);
      }, this.onCanvasDoubleClick = function(n) {
        var i = t.spreadsheet;
        if (t.isResizeArea(n)) {
          i.emit(I.LAYOUT_RESIZE_MOUSE_UP, n);
          return;
        }
        i.emit(I.GLOBAL_DOUBLE_CLICK, n);
        var o = i.getCell(n.target);
        if (o) {
          var a = o.cellType;
          if (t.target === n.target)
            switch (a) {
              case J.DATA_CELL:
                i.emit(I.DATA_CELL_DOUBLE_CLICK, n);
                break;
              case J.ROW_CELL:
                i.emit(I.ROW_CELL_DOUBLE_CLICK, n);
                break;
              case J.COL_CELL:
                i.emit(I.COL_CELL_DOUBLE_CLICK, n);
                break;
              case J.CORNER_CELL:
                i.emit(I.CORNER_CELL_DOUBLE_CLICK, n);
                break;
              case J.MERGED_CELL:
                i.emit(I.MERGED_CELLS_DOUBLE_CLICK, n);
                break;
            }
        }
      }, this.onCanvasMouseout = function(n) {
        if (!(!t.isAutoResetSheetStyle || n != null && n.shape)) {
          var i = t.spreadsheet.interaction;
          !i.isSelectedState() && !(i.intercepts.size > 0) && i.reset();
        }
      }, this.onCanvasContextMenu = function(n) {
        var i = t.spreadsheet;
        if (t.isResizeArea(n)) {
          i.emit(I.LAYOUT_RESIZE_MOUSE_UP, n);
          return;
        }
        i.emit(I.GLOBAL_CONTEXT_MENU, n);
        var o = t.spreadsheet.getCellType(n.target);
        switch (o) {
          case J.DATA_CELL:
            t.spreadsheet.emit(I.DATA_CELL_CONTEXT_MENU, n);
            break;
          case J.ROW_CELL:
            t.spreadsheet.emit(I.ROW_CELL_CONTEXT_MENU, n);
            break;
          case J.COL_CELL:
            t.spreadsheet.emit(I.COL_CELL_CONTEXT_MENU, n);
            break;
          case J.CORNER_CELL:
            t.spreadsheet.emit(I.CORNER_CELL_CONTEXT_MENU, n);
            break;
          case J.MERGED_CELL:
            t.spreadsheet.emit(I.MERGED_CELLS_CONTEXT_MENU, n);
            break;
        }
      }, this.spreadsheet = r, this.bindEvents();
    }
    return Object.defineProperty(e.prototype, "canvasContainer", {
      get: function() {
        return this.spreadsheet.container;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "isAutoResetSheetStyle", {
      get: function() {
        return this.spreadsheet.options.interaction.autoResetSheetStyle;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.bindEvents = function() {
      var r = this;
      this.clearAllEvents(), this.addCanvasEvent(mr.CLICK, this.onCanvasClick), this.addCanvasEvent(mr.MOUSE_DOWN, this.onCanvasMousedown), this.addCanvasEvent(mr.MOUSE_MOVE, this.onCanvasMousemove), this.addCanvasEvent(mr.MOUSE_OUT, this.onCanvasMouseout), this.addCanvasEvent(mr.MOUSE_UP, this.onCanvasMouseup), this.addCanvasEvent(mr.DOUBLE_CLICK, this.onCanvasDoubleClick), this.addCanvasEvent(mr.CONTEXT_MENU, this.onCanvasContextMenu), this.addS2Event(I.GLOBAL_ACTION_ICON_CLICK, function() {
        r.spreadsheet.interaction.addIntercepts([Le.HOVER]), r.spreadsheet.interaction.clearState();
      }), this.addDomEventListener(window, mr.CLICK, function(t) {
        r.resetSheetStyle(t), r.isCanvasEffect = r.isMouseOnTheCanvasContainer(t);
      }), this.addDomEventListener(window, mr.KEY_DOWN, function(t) {
        r.onKeyboardCopy(t), r.onKeyboardEsc(t), r.spreadsheet.emit(I.GLOBAL_KEYBOARD_DOWN, t);
      }), this.addDomEventListener(window, mr.KEY_UP, function(t) {
        r.spreadsheet.emit(I.GLOBAL_KEYBOARD_UP, t);
      }), this.addDomEventListener(window, mr.MOUSE_UP, function(t) {
        r.spreadsheet.emit(I.GLOBAL_MOUSE_UP, t);
      }), this.addDomEventListener(window, mr.MOUSE_MOVE, function(t) {
        r.spreadsheet.emit(I.GLOBAL_MOUSE_MOVE, t);
      });
    }, e.prototype.onKeyboardCopy = function(r) {
      if (this.isCanvasEffect && this.spreadsheet.options.interaction.enableCopy && // todo: 在copy header 时有问题
      Sw(r.key, lr.COPY) && (r.metaKey || r.ctrlKey)) {
        var t = wQ(this.spreadsheet);
        Nt(t) || this.spreadsheet.emit(I.GLOBAL_COPIED, t);
      }
    }, e.prototype.onKeyboardEsc = function(r) {
      this.isCanvasEffect && Sw(r.key, lr.ESC) && this.resetSheetStyle(r);
    }, e.prototype.resetSheetStyle = function(r) {
      if (!(!this.isAutoResetSheetStyle || !this.spreadsheet)) {
        var t = this.spreadsheet.interaction;
        if (t.hasIntercepts([
          Le.BRUSH_SELECTION,
          Le.COL_BRUSH_SELECTION,
          Le.ROW_BRUSH_SELECTION
        ])) {
          t.removeIntercepts([
            Le.BRUSH_SELECTION,
            Le.ROW_BRUSH_SELECTION,
            Le.COL_BRUSH_SELECTION
          ]);
          return;
        }
        this.isMouseOnTheTooltip(r) || this.isMouseOnTheCanvasContainer(r) || (t.reset(), this.spreadsheet.emit(I.GLOBAL_RESET, r), this.spreadsheet.emit(I.GLOBAL_SELECTED, t.getActiveCells()));
      }
    }, e.prototype.isMouseEvent = function(r) {
      return wa(r, "clientX") && wa(r, "clientY");
    }, e.prototype.isMouseOnTheCanvasContainer = function(r) {
      if (this.isMouseEvent(r)) {
        var t = this.spreadsheet.getCanvasElement();
        if (!t)
          return !1;
        var n = t.getBoundingClientRect() || {}, i = n.x, o = n.y, a = this.getContainerRect(), l = a.width, s = a.height;
        return t.contains(r.target) && r.clientX <= i + l && r.clientY <= o + s;
      }
      return !1;
    }, e.prototype.getContainerRect = function() {
      var r, t = this.spreadsheet, n = t.facet, i = t.options, o = (n == null ? void 0 : n.hRowScrollBar) || (n == null ? void 0 : n.hScrollBar), a = (n == null ? void 0 : n.panelBBox) || {}, l = a.maxX, s = a.maxY, f = i.width, h = i.height, d = ((r = o == null ? void 0 : o.theme) === null || r === void 0 ? void 0 : r.size) || 0;
      return {
        width: Math.min(f, l),
        height: Math.min(h, s + d)
      };
    }, e.prototype.isMouseOnTheTooltip = function(r) {
      var t, n, i, o, a = this.spreadsheet.tooltip;
      if (!(a != null && a.visible))
        return !1;
      var l = ((i = (n = (t = this.spreadsheet.tooltip) === null || t === void 0 ? void 0 : t.container) === null || n === void 0 ? void 0 : n.getBoundingClientRect) === null || i === void 0 ? void 0 : i.call(n)) || {}, s = l.x, f = l.y, h = l.width, d = l.height;
      return r.target instanceof Node ? qee((o = this.spreadsheet.tooltip) === null || o === void 0 ? void 0 : o.container, r.target) : this.isMouseEvent(r) ? r.clientX >= s && r.clientX <= s + h && r.clientY >= f && r.clientY <= f + d : !1;
    }, e.prototype.isResizeArea = function(r) {
      var t = ge(r.target, "attrs.appendInfo");
      return t == null ? void 0 : t.isResizeArea;
    }, e.prototype.activeResizeArea = function(r) {
      this.resetResizeArea();
      var t = r.target;
      this.spreadsheet.store.set("activeResizeArea", t), t.attr(tn.backgroundOpacity, this.spreadsheet.theme.resizeArea.interactionState.hover.backgroundOpacity);
    }, e.prototype.resetResizeArea = function() {
      var r = this.spreadsheet.store.get("activeResizeArea");
      Q(r) || r.attr(tn.backgroundOpacity, this.spreadsheet.theme.resizeArea.backgroundOpacity), this.spreadsheet.store.set("activeResizeArea", r);
    }, e.prototype.hasBrushSelectionIntercepts = function() {
      return this.spreadsheet.interaction.hasIntercepts([
        Le.HOVER,
        Le.BRUSH_SELECTION,
        Le.ROW_BRUSH_SELECTION,
        Le.COL_BRUSH_SELECTION
      ]);
    }, e.prototype.clear = function() {
      this.unbindEvents();
    }, e.prototype.unbindEvents = function() {
      this.clearAllEvents();
    }, e.prototype.addCanvasEvent = function(r, t) {
      var n;
      (n = this.canvasContainer) === null || n === void 0 || n.on(r, t), this.canvasEventHandlers.push({ type: r, handler: t });
    }, e.prototype.addS2Event = function(r, t) {
      this.spreadsheet.on(r, t), this.s2EventHandlers.push({
        type: r,
        handler: t
      });
    }, e.prototype.addDomEventListener = function(r, t, n) {
      if (r.addEventListener) {
        var i = this.spreadsheet.options.interaction.eventListenerOptions;
        r.addEventListener(t, n, i), this.domEventListeners.push({
          target: r,
          type: t,
          handler: n,
          options: i
        });
      } else
        console.error("Please make sure ".concat(r, " has addEventListener function"));
    }, e.prototype.clearAllEvents = function() {
      var r = this;
      xe(this.canvasEventHandlers, function(t) {
        var n, i = t.type, o = t.handler;
        (n = r.canvasContainer) === null || n === void 0 || n.off(i, o);
      }), xe(this.s2EventHandlers, function(t) {
        var n = t.type, i = t.handler;
        r.spreadsheet.off(n, i);
      }), xe(this.domEventListeners, function(t) {
        t.target.removeEventListener(t.type, t.handler, t.options);
      }), this.canvasEventHandlers = [], this.s2EventHandlers = [], this.domEventListeners = [];
    }, e;
  }()
), qte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.isRangeSelection = !1, t.handleColClick = function(n) {
        n.stopPropagation();
        var i = t.spreadsheet.interaction, o = t.spreadsheet.getCell(n.target), a = o == null ? void 0 : o.getMeta();
        if (!Nt(a == null ? void 0 : a.x)) {
          i.addIntercepts([Le.HOVER]);
          var l = [di(o)], s = t.spreadsheet.store.get("lastClickedCell");
          if (t.isRangeSelection && s && s.cellType === o.cellType && s.getMeta().level === o.getMeta().level) {
            var f = W([
              t.spreadsheet.facet.layoutResult.rowsHierarchy.maxLevel,
              t.spreadsheet.facet.layoutResult.colsHierarchy.maxLevel
            ], 2), h = f[0], d = f[1], v = Sp(s.getMeta(), o.getMeta()), g = v.start, y = v.end;
            o instanceof No ? l = t.handleSeriesNumberRowSelected(g.rowIndex, y.rowIndex, o) : o.cellType === J.ROW_CELL && o.getMeta().level === h ? l = t.handleRowSelected(g.rowIndex, y.rowIndex, o) : o.cellType === J.COL_CELL && o.getMeta().level === d && (l = t.handleColSelected(g.colIndex, y.colIndex, o)), i.changeState({
              cells: l,
              stateName: ae.SELECTED
            });
          } else
            Q(i.getCells()) && i.removeIntercepts([Le.HOVER]), t.spreadsheet.store.set("lastClickedCell", o);
          var C = l.map(function(_) {
            var w = _.id;
            return w;
          });
          i.updateCells(i.getRowColActiveCells(C)), t.spreadsheet.emit(I.GLOBAL_SELECTED, i.getActiveCells());
        }
      }, t;
    }
    return r.prototype.bindEvents = function() {
      this.bindKeyboardDown(), this.bindDataCellClick(), this.bindColCellClick(), this.bindKeyboardUp(), this.bindMouseMove();
    }, r.prototype.reset = function() {
      this.isRangeSelection = !1, this.spreadsheet.interaction.removeIntercepts([Le.CLICK]);
    }, r.prototype.bindKeyboardDown = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_KEYBOARD_DOWN, function(n) {
        n.key === lr.SHIFT && (t.isRangeSelection = !0, t.spreadsheet.interaction.addIntercepts([Le.CLICK]));
      });
    }, r.prototype.bindKeyboardUp = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_KEYBOARD_UP, function(n) {
        n.key === lr.SHIFT && t.reset();
      });
    }, r.prototype.bindMouseMove = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_MOUSE_MOVE, function(n) {
        t.isRangeSelection && !n.shiftKey && t.reset();
      });
    }, r.prototype.bindColCellClick = function() {
      var t = this;
      this.spreadsheet.isTableMode() && this.spreadsheet.on(I.ROW_CELL_CLICK, function(n) {
        t.handleColClick(n);
      }), this.spreadsheet.on(I.COL_CELL_CLICK, function(n) {
        t.handleColClick(n);
      });
    }, r.prototype.bindDataCellClick = function() {
      var t = this;
      this.spreadsheet.on(I.DATA_CELL_CLICK, function(n) {
        n.stopPropagation();
        var i = t.spreadsheet.getCell(n.target), o = i.getMeta(), a = t.spreadsheet.interaction;
        if (o) {
          var l = t.spreadsheet.store.get("lastClickedCell"), s = t.isRangeSelection && (l == null ? void 0 : l.cellType) === i.cellType;
          if (!s) {
            t.spreadsheet.store.set("lastClickedCell", i);
            return;
          }
          var f = Sp(l.getMeta(), i.getMeta()), h = f.start, d = f.end, v = ul(h.colIndex, d.colIndex + 1).flatMap(function(g) {
            var y = t.spreadsheet.facet.layoutResult.colLeafNodes[g].id;
            return ul(h.rowIndex, d.rowIndex + 1).map(function(C) {
              var _ = t.spreadsheet.facet.getSeriesNumberWidth() || t.spreadsheet.isTableMode() ? String(C) : t.spreadsheet.facet.layoutResult.rowLeafNodes[C].id;
              return {
                id: _ + "-" + y,
                colIndex: g,
                rowIndex: C,
                type: i.cellType
              };
            });
          });
          a.addIntercepts([Le.CLICK, Le.HOVER]), a.changeState({
            cells: v,
            stateName: ae.SELECTED
          }), t.spreadsheet.showTooltipWithInfo(n, Ng(t.spreadsheet)), t.spreadsheet.emit(I.GLOBAL_SELECTED, a.getActiveCells());
        }
      });
    }, r.prototype.handleSeriesNumberRowSelected = function(t, n, i) {
      var o = this.spreadsheet.facet.layoutResult.colLeafNodes[0].id;
      return ul(t, n + 1).map(function(a) {
        var l = String(a);
        return {
          id: l + "-" + o,
          colIndex: 0,
          rowIndex: a,
          type: i.cellType
        };
      });
    }, r.prototype.handleRowSelected = function(t, n, i) {
      return this.spreadsheet.facet.layoutResult.rowNodes.filter(function(o) {
        var a = o.rowIndex;
        return op(a, t, n + 1);
      }).map(function(o) {
        return {
          id: o.id,
          colIndex: o.colIndex,
          rowIndex: o.rowIndex,
          type: i.cellType
        };
      });
    }, r.prototype.handleColSelected = function(t, n, i) {
      return this.spreadsheet.facet.layoutResult.colLeafNodes.filter(function(o) {
        var a = o.colIndex;
        return op(a, t, n + 1);
      }).map(function(o) {
        return {
          id: o.id,
          colIndex: o.colIndex,
          rowIndex: o.rowIndex,
          type: i.cellType
        };
      });
    }, r;
  }(ei)
), Kte = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.resizeStartPosition = {}, t.resizeMouseMove = function(n) {
        var i, o;
        if (!((i = t.resizeReferenceGroup) === null || i === void 0) && i.get("visible")) {
          (o = n == null ? void 0 : n.preventDefault) === null || o === void 0 || o.call(n);
          var a = n.originalEvent, l = t.getResizeInfo(), s = t.resizeReferenceGroup.getChildren() || [];
          if (!Q(s)) {
            var f = W(s, 2), h = f[1], d = W(Ol(h.attr("path")), 2), v = d[0], g = d[1];
            l.type === Sn.Horizontal ? t.updateHorizontalResizingEndGuideLinePosition(a, l, v, g) : t.updateVerticalResizingEndGuideLinePosition(a, l, v, g), t.updateResizeGuideLineTheme(h), h.attr("path", [v, g]);
          }
        }
      }, t;
    }
    return r.prototype.bindEvents = function() {
      this.bindMouseDown(), this.bindMouseMove(), this.bindMouseUp();
    }, r.prototype.initResizeGroup = function() {
      if (!this.resizeReferenceGroup) {
        this.resizeReferenceGroup = this.spreadsheet.foregroundGroup.addGroup();
        var t = this.spreadsheet.options, n = t.width, i = t.height, o = this.getResizeAreaTheme(), a = o.guideLineColor, l = o.guideLineDash, s = o.size, f = {
          path: "",
          lineDash: l,
          stroke: a,
          lineWidth: s
        };
        this.resizeReferenceGroup.addShape("path", {
          id: $D,
          attrs: f
        }), this.resizeReferenceGroup.addShape("path", {
          id: FD,
          attrs: f
        }), this.resizeReferenceGroup.addShape("rect", {
          id: PD,
          attrs: {
            appendInfo: {
              isResizeArea: !0
            },
            x: 0,
            y: 0,
            width: n,
            height: i,
            fill: "transparent"
          }
        });
      }
    }, r.prototype.getResizeAreaTheme = function() {
      return this.spreadsheet.theme.resizeArea;
    }, r.prototype.setResizeTarget = function(t) {
      this.resizeTarget = t;
    }, r.prototype.getGuideLineWidthAndHeight = function() {
      var t = this.spreadsheet.options, n = t.width, i = t.height, o = this.spreadsheet.facet.panelBBox, a = o.maxY, l = o.maxX, s = Math.min(l, n), f = Math.min(a, i);
      return {
        width: s,
        height: f
      };
    }, r.prototype.getResizeShapes = function() {
      var t;
      return ((t = this.resizeReferenceGroup) === null || t === void 0 ? void 0 : t.get("children")) || [];
    }, r.prototype.setResizeMaskCursor = function(t) {
      var n = W(this.getResizeShapes(), 3), i = n[2];
      i == null || i.attr("cursor", t);
    }, r.prototype.updateResizeGuideLinePosition = function(t, n) {
      var i = this.getResizeShapes();
      if (!Q(i)) {
        var o = W(i, 2), a = o[0], l = o[1], s = n.type, f = n.offsetX, h = n.offsetY, d = n.width, v = n.height, g = this.getGuideLineWidthAndHeight(), y = g.width, C = g.height;
        if (this.setResizeMaskCursor("".concat(s, "-resize")), s === Sn.Horizontal) {
          a.attr("path", [
            ["M", f, h],
            ["L", f, C]
          ]), l.attr("path", [
            ["M", f + d, h],
            ["L", f + d, C]
          ]), this.resizeStartPosition.offsetX = t.offsetX, this.resizeStartPosition.clientX = t.clientX;
          return;
        }
        a.attr("path", [
          ["M", f, h],
          ["L", y, h]
        ]), l.attr("path", [
          ["M", f, h + v],
          ["L", y, h + v]
        ]), this.resizeStartPosition.offsetY = t.offsetY, this.resizeStartPosition.clientY = t.clientY;
      }
    }, r.prototype.bindMouseDown = function() {
      var t = this;
      this.spreadsheet.on(I.LAYOUT_RESIZE_MOUSE_DOWN, function(n) {
        var i;
        (i = n == null ? void 0 : n.preventDefault) === null || i === void 0 || i.call(n);
        var o = n.target, a = n.originalEvent, l = t.getCellAppendInfo(n.target);
        t.spreadsheet.store.set("resized", !1), l != null && l.isResizeArea && (t.spreadsheet.interaction.reset(), t.spreadsheet.interaction.addIntercepts([Le.RESIZE]), t.setResizeTarget(o), t.showResizeGroup(), t.updateResizeGuideLinePosition(a, l));
      });
    }, r.prototype.bindMouseMove = function() {
      var t = this;
      this.spreadsheet.on(I.LAYOUT_RESIZE_MOUSE_MOVE, function(n) {
        vg(t.resizeMouseMove, 33)(n);
      });
    }, r.prototype.getResizeGuideLinePosition = function() {
      var t = W(this.resizeReferenceGroup.getChildren() || [], 2), n = t[0], i = t[1], o = (n == null ? void 0 : n.attr("path")) || [], a = (i == null ? void 0 : i.attr("path")) || [], l = W(o[0] || [], 3), s = l[1], f = s === void 0 ? 0 : s, h = l[2], d = h === void 0 ? 0 : h, v = W(a[0] || [], 3), g = v[1], y = g === void 0 ? 0 : g, C = v[2], _ = C === void 0 ? 0 : C;
      return {
        start: {
          x: f,
          y: d
        },
        end: {
          x: y,
          y: _
        }
      };
    }, r.prototype.getDisAllowResizeInfo = function() {
      var t, n = this.getResizeInfo(), i = this.spreadsheet.options.interaction.resize, o = n.width, a = n.height, l = n.resizedWidth, s = n.resizedHeight, f = (t = i == null ? void 0 : i.disable) === null || t === void 0 ? void 0 : t.call(i, n), h = f ? o : l, d = f ? a : s;
      return {
        displayWidth: h,
        displayHeight: d,
        isDisabled: f
      };
    }, r.prototype.getResizeWidthDetail = function() {
      var t, n, i = this.getResizeInfo(), o = this.getDisAllowResizeInfo().displayWidth;
      switch (i.effect) {
        case _r.Field:
          return {
            eventType: I.LAYOUT_RESIZE_ROW_WIDTH,
            style: {
              rowCfg: {
                widthByField: (t = {}, t[i.id] = o, t)
              }
            }
          };
        case _r.Tree:
          return {
            eventType: I.LAYOUT_RESIZE_TREE_WIDTH,
            style: {
              treeRowsWidth: o,
              rowCfg: {
                /**
                 * @deprecated 已废弃, 以 style.treeRowsWidth 为准, 保持兼容, 暂时保留
                 */
                treeRowsWidth: o
              }
            }
          };
        case _r.Cell:
          return {
            eventType: I.LAYOUT_RESIZE_COL_WIDTH,
            style: {
              colCfg: {
                widthByFieldValue: (n = {}, n[i.id] = o, n)
              }
            }
          };
        case _r.Series:
          return {
            eventType: I.LAYOUT_RESIZE_SERIES_WIDTH,
            seriesNumberWidth: o
          };
        default:
          return null;
      }
    }, r.prototype.getResizeHeightDetail = function() {
      var t, n, i = this.spreadsheet.options, o = i.interaction.resize, a = i.style.rowCfg.heightByField, l = this.spreadsheet.theme.rowCell.cell.padding, s = this.getResizeInfo(), f = this.getDisAllowResizeInfo().displayHeight, h = f - l.top - l.bottom, d;
      switch (s.effect) {
        case _r.Field:
          return {
            eventType: I.LAYOUT_RESIZE_COL_HEIGHT,
            style: {
              colCfg: {
                heightByField: (t = {}, t[s.id] = f, t)
              }
            }
          };
        case _r.Cell:
          return a != null && a[String(s.id)] || (o == null ? void 0 : o.rowResizeType) === ec.CURRENT ? d = {
            rowCfg: {
              heightByField: (n = {}, n[s.id] = h, n)
            }
          } : d = {
            cellCfg: {
              height: h
            }
          }, {
            eventType: I.LAYOUT_RESIZE_ROW_HEIGHT,
            style: d
          };
        default:
          return null;
      }
    }, r.prototype.getResizeDetail = function() {
      var t = this.getResizeInfo();
      return t.type === Sn.Horizontal ? this.getResizeWidthDetail() : this.getResizeHeightDetail();
    }, r.prototype.showResizeGroup = function() {
      this.initResizeGroup(), this.resizeReferenceGroup.set("visible", !0);
    }, r.prototype.hideResizeGroup = function() {
      this.resizeReferenceGroup.set("visible", !1);
    }, r.prototype.bindMouseUp = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_MOUSE_UP, function() {
        var n;
        t.setResizeMaskCursor("default"), !(!t.resizeReferenceGroup || Q((n = t.resizeReferenceGroup) === null || n === void 0 ? void 0 : n.getChildren())) && (t.hideResizeGroup(), t.renderResizedResult());
      });
    }, r.prototype.updateResizeGuideLineTheme = function(t) {
      var n = this.getResizeAreaTheme(), i = n.guideLineColor, o = n.guideLineDisableColor, a = this.getDisAllowResizeInfo().isDisabled;
      t.attr("stroke", a ? o : i), this.setResizeMaskCursor(a ? "no-drop" : "default");
    }, r.prototype.updateHorizontalResizingEndGuideLinePosition = function(t, n, i, o) {
      var a = t.clientX - this.resizeStartPosition.clientX;
      n.width + a < jm && (a = -(n.width - jm));
      var l = n.offsetX + n.width + a;
      i[1] = l, o[1] = l, this.resizeTarget.attr({
        x: l - n.size / 2
      });
    }, r.prototype.updateVerticalResizingEndGuideLinePosition = function(t, n, i, o) {
      var a = t.clientY - this.resizeStartPosition.clientY;
      n.height + a < Zm && (a = -(n.height - Zm));
      var l = n.offsetY + n.height + a;
      i[2] = l, o[2] = l, this.resizeTarget.attr({
        y: l - n.size / 2
      });
    }, r.prototype.renderResizedResult = function() {
      var t = this.getResizeInfo(), n = this.getResizeDetail() || {}, i = n.style, o = n.seriesNumberWidth, a = n.eventType, l = {
        info: t,
        style: i
      };
      this.spreadsheet.emit(I.LAYOUT_RESIZE, l), this.spreadsheet.emit(a, l), i && this.spreadsheet.setOptions({ style: i }), o && this.spreadsheet.setTheme({
        rowCell: {
          seriesNumberWidth: o
        }
      }), this.spreadsheet.store.set("resized", !0), this.render();
    }, r.prototype.getResizeInfo = function() {
      var t = this.getCellAppendInfo(this.resizeTarget), n = this.getResizeGuideLinePosition(), i = n.start, o = n.end, a = Math.floor(o.x - i.x), l = Math.floor(o.y - i.y);
      return M(M({}, t), { resizedWidth: a, resizedHeight: l });
    }, r.prototype.render = function() {
      this.resizeStartPosition = {}, this.resizeTarget = null, this.resizeReferenceGroup = null, this.spreadsheet.render(!1);
    }, r;
  }(ei)
), jte = [
  lr.ARROW_LEFT,
  lr.ARROW_RIGHT,
  lr.ARROW_UP,
  lr.ARROW_DOWN
], Zte = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t) {
      return e.call(this, t) || this;
    }
    return r.prototype.isCanvasEffect = function() {
      return this.spreadsheet.interaction.eventController.isCanvasEffect;
    }, r.prototype.bindEvents = function() {
      var t = this;
      this.spreadsheet.on(I.GLOBAL_KEYBOARD_DOWN, function(n) {
        if (t.isCanvasEffect()) {
          var i = n.shiftKey, o = n.metaKey, a = jte.includes(n.key), l = !1, s = !1, f = !1;
          a && (o && i ? (l = !1, s = !0, f = !1) : o ? (l = !0, s = !0, f = !0) : i ? (l = !1, s = !1, f = !1) : (l = !0, s = !1, f = !0), t.handleMove({
            event: n,
            changeStartCell: l,
            isJumpMode: s,
            isSingleSelection: f
          }));
        }
      }), this.spreadsheet.on(I.DATA_CELL_CLICK, function(n) {
        var i = t.spreadsheet.getCell(n.target).getMeta();
        i && (t.startCell = t.getCellMetaFromViewMeta(i), t.endCell = t.startCell);
      });
    }, r.prototype.getCellMetaFromViewMeta = function(t) {
      return {
        rowIndex: t.rowIndex,
        colIndex: t.colIndex,
        id: t.id,
        type: J.DATA_CELL
      };
    }, r.prototype.handleMove = function(t) {
      var n = t.event, i = t.changeStartCell, o = t.isJumpMode, a = t.isSingleSelection, l = this, s = l.spreadsheet, f = l.startCell, h = l.endCell, d = i ? f : h, v = this.getMoveInfo(n.key, d, o);
      if (v) {
        var g = W([v.row, v.col], 2), y = g[0], C = g[1];
        this.scrollToActiveCell(s, y, C);
        var _ = this.generateCellMeta(s, y, C), w = a ? [_] : this.getRangeCells(s, f, _);
        $J(s, w), i && (this.startCell = _), this.endCell = _, this.spreadsheet.emit(I.DATA_CELL_SELECT_MOVE, w);
      }
    }, r.prototype.generateCellMeta = function(t, n, i) {
      var o = t.isTableMode, a = t.facet.layoutResult, l = a.colLeafNodes, s = a.rowLeafNodes, f = o() ? String(n) : s[n].id, h = l[i].id;
      return {
        rowIndex: n,
        colIndex: i,
        id: uu(f, h),
        type: J.DATA_CELL
      };
    }, r.prototype.getRangeCells = function(t, n, i) {
      for (var o = Sp(n, i), a = o.start, l = a.rowIndex, s = a.colIndex, f = o.end, h = f.rowIndex, d = f.colIndex, v = [], g = l; g <= h; g++)
        for (var y = s; y <= d; y++)
          v.push(this.generateCellMeta(t, g, y));
      return v;
    }, r.prototype.getMoveInfo = function(t, n, i) {
      var o = this.spreadsheet, a = o.options, l = a.frozenColCount, s = l === void 0 ? 0 : l, f = a.frozenRowCount, h = f === void 0 ? 0 : f, d = a.frozenTrailingColCount, v = d === void 0 ? 0 : d, g = a.frozenTrailingRowCount, y = g === void 0 ? 0 : g, C = o.facet.layoutResult, _ = C.rowLeafNodes, w = C.colLeafNodes, x = W([
        0 + s,
        w.length - v - 1
      ], 2), S = x[0], T = x[1], R = W([
        0 + h,
        (o.isTableMode() ? o.dataSet.getDisplayDataSet().length : _.length) - y - 1
      ], 2), B = R[0], $ = R[1];
      if (n)
        switch (t) {
          case lr.ARROW_RIGHT:
            return n.colIndex + 1 > T ? void 0 : {
              row: n.rowIndex,
              col: i ? T : n.colIndex + 1
            };
          case lr.ARROW_LEFT:
            return n.colIndex - 1 < S ? void 0 : {
              row: n.rowIndex,
              col: i ? S : n.colIndex - 1
            };
          case lr.ARROW_UP:
            return n.rowIndex - 1 < B ? void 0 : {
              row: i ? B : n.rowIndex - 1,
              col: n.colIndex
            };
          case lr.ARROW_DOWN:
            return n.rowIndex + 1 > $ ? void 0 : {
              row: i ? $ : n.rowIndex + 1,
              col: n.colIndex
            };
        }
    }, r.prototype.calculateOffset = function(t, n, i) {
      var o = t.options, a = o.frozenRowCount, l = a === void 0 ? 0 : a, s = o.frozenTrailingRowCount, f = s === void 0 ? 0 : s, h = t.facet, d = t.frozenColGroup, v = t.frozenTrailingColGroup, g = t.frozenRowGroup, y = t.frozenTrailingRowGroup, C = h.layoutResult.colLeafNodes, _ = h.getScrollOffset(), w = _.scrollX, x = _.scrollY, S = h.panelBBox, T = S.viewportHeight, R = S.viewportWidth, B = ge(t, "theme.splitLine"), $ = d ? Math.floor(d.getBBox().width - B.verticalBorderWidth / 2) : 0, N = v ? Math.floor(v.getBBox().width) : 0, z = g ? Math.floor(g.getBBox().height - B.horizontalBorderWidth / 2) : 0, V = y ? Math.floor(y.getBBox().height) : 0, X = Sg(w, x, h.viewCellWidths, h.viewCellHeights, {
        width: R - $ - N,
        height: T - z - V,
        x: $,
        y: z
      }, h.getRealScrollX(h.cornerBBox.width)), Z = -1, ne = -1, se = C.find(function(ee) {
        return ee.colIndex === i;
      });
      if (i <= X[0] ? Z = se.x - $ : i >= X[1] && i < C.length - f && (Z = se.x + se.width - R + N), n <= X[2])
        ne = h.viewCellHeights.getCellOffsetY(n - l);
      else if (n >= X[3]) {
        var q = h.viewCellHeights.getCellOffsetY(n + 1);
        ne = q + V - T;
      }
      return { offsetX: Z, offsetY: ne };
    }, r.prototype.scrollToActiveCell = function(t, n, i) {
      var o = this.calculateOffset(t, n, i), a = o.offsetX, l = o.offsetY, s = t.facet, f = t.facet.getScrollOffset(), h = f.scrollX, d = f.scrollY;
      s.scrollWithAnimation({
        offsetX: { value: a > -1 ? a : h },
        offsetY: { value: l > -1 ? l : d }
      });
    }, r;
  }(ei)
), Qte = (
  /** @class */
  function() {
    function e(r) {
      var t = this;
      this.interactions = /* @__PURE__ */ new Map(), this.intercepts = /* @__PURE__ */ new Set(), this.hoverTimer = null, this.defaultState = {
        cells: [],
        force: !1
      }, this.onTriggerInteractionsResetEffect = function() {
        t.interactions.forEach(function(n) {
          n.reset();
        });
      }, this.selectAll = function() {
        t.changeState({
          stateName: ae.ALL_SELECTED
        });
      }, this.getCellChildrenNodes = function(n) {
        var i, o = (i = n == null ? void 0 : n.getMeta) === null || i === void 0 ? void 0 : i.call(n), a = (n == null ? void 0 : n.cellType) === J.ROW_CELL, l = t.spreadsheet.isHierarchyTreeType();
        return l && a ? Qt.getAllLeaveNodes(o).filter(function(s) {
          return s.rowIndex === o.rowIndex;
        }) : Qt.getAllChildrenNodes(o);
      }, this.selectHeaderCell = function(n) {
        var i;
        n === void 0 && (n = {});
        var o = n.cell;
        if (!Q(o)) {
          var a = (i = o == null ? void 0 : o.getMeta) === null || i === void 0 ? void 0 : i.call(o);
          if (!(!a || Nt(a == null ? void 0 : a.x))) {
            t.addIntercepts([Le.HOVER]);
            var l = t.spreadsheet.isHierarchyTreeType(), s = (o == null ? void 0 : o.cellType) === J.COL_CELL, f = t.getState(), h = t.isSelectedCell(o), d = (n == null ? void 0 : n.isMultiSelection) && t.isSelectedState(), v = h ? [] : t.getCellChildrenNodes(o), g = h ? [] : [di(o)];
            if (d && (g = tl(f == null ? void 0 : f.cells, g), v = tl(f == null ? void 0 : f.nodes, v), h && (g = g.filter(function(C) {
              var _ = C.id;
              return _ !== a.id;
            }), v = v.filter(function(C) {
              return !(C != null && C.id.includes(a.id));
            }))), Q(g)) {
              t.reset(), t.spreadsheet.emit(I.GLOBAL_SELECTED, t.getActiveCells());
              return;
            }
            t.changeState({
              cells: g,
              nodes: v,
              stateName: ae.SELECTED
            });
            var y = g.map(function(C) {
              var _ = C.id;
              return _;
            });
            return t.updateCells(t.getRowColActiveCells(y)), (!l || s) && t.highlightNodes(v), t.spreadsheet.emit(I.GLOBAL_SELECTED, t.getActiveCells()), !0;
          }
        }
      }, this.highlightNodes = function(n) {
        n === void 0 && (n = []), n.forEach(function(i) {
          var o;
          (o = i == null ? void 0 : i.belongsCell) === null || o === void 0 || o.updateByState(ae.SELECTED, i.belongsCell);
        });
      }, this.mergeCells = function(n, i) {
        ZQ(t.spreadsheet, n, i);
      }, this.unmergeCell = function(n) {
        JQ(t.spreadsheet, n);
      }, this.spreadsheet = r, this.registerEventController(), this.registerInteractions(), window.addEventListener("visibilitychange", this.onTriggerInteractionsResetEffect);
    }
    return e.prototype.destroy = function() {
      this.interactions.clear(), this.intercepts.clear(), this.eventController.clear(), this.clearHoverTimer(), this.resetState(), window.removeEventListener("visibilitychange", this.onTriggerInteractionsResetEffect);
    }, e.prototype.reset = function() {
      this.clearState(), this.clearHoverTimer(), this.intercepts.clear(), this.spreadsheet.hideTooltip();
    }, e.prototype.setState = function(r) {
      PJ(this.spreadsheet, r);
    }, e.prototype.getState = function() {
      return this.spreadsheet.store.get(qv) || this.defaultState;
    }, e.prototype.setInteractedCells = function(r) {
      var t = this.getInteractedCells().concat([r]), n = this.getState();
      n.interactedCells = t, this.setState(n);
    }, e.prototype.getInteractedCells = function() {
      var r = this.getState();
      return (r == null ? void 0 : r.interactedCells) || [];
    }, e.prototype.resetState = function() {
      this.spreadsheet.store.set(qv, this.defaultState);
    }, e.prototype.getCurrentStateName = function() {
      return this.getState().stateName;
    }, e.prototype.isEqualStateName = function(r) {
      return this.getCurrentStateName() === r;
    }, e.prototype.isStateOf = function(r) {
      var t = this.getState();
      return (t == null ? void 0 : t.stateName) === r;
    }, e.prototype.isSelectedState = function() {
      return this.isStateOf(ae.SELECTED) || this.isStateOf(ae.BRUSH_SELECTED);
    }, e.prototype.isAllSelectedState = function() {
      return this.isStateOf(ae.ALL_SELECTED);
    }, e.prototype.isHoverFocusState = function() {
      return this.isStateOf(ae.HOVER_FOCUS);
    }, e.prototype.isHoverState = function() {
      return this.isStateOf(ae.HOVER);
    }, e.prototype.isActiveCell = function(r) {
      return !!this.getCells().find(function(t) {
        return r.getMeta().id === t.id;
      });
    }, e.prototype.isSelectedCell = function(r) {
      return this.isSelectedState() && this.isActiveCell(r);
    }, e.prototype.getCells = function(r) {
      var t = this.getState(), n = (t == null ? void 0 : t.cells) || [];
      return Nt(r) ? n : n.filter(function(i) {
        return r.includes(i.type);
      });
    }, e.prototype.getActiveCells = function() {
      var r = this.getCells().map(function(n) {
        return n.id;
      }), t = this.getAllCells();
      return We(r, function(n) {
        return cr(t, function(i) {
          var o;
          return ((o = i == null ? void 0 : i.getMeta()) === null || o === void 0 ? void 0 : o.id) === n;
        });
      }).filter(function(n) {
        return n;
      });
    }, e.prototype.clearStyleIndependent = function() {
      !this.isSelectedState() && !this.isHoverState() && !this.isAllSelectedState() || this.getPanelGroupAllDataCells().forEach(function(r) {
        r.hideInteractionShape();
      });
    }, e.prototype.getPanelGroupAllUnSelectedDataCells = function() {
      var r = this;
      return this.getPanelGroupAllDataCells().filter(function(t) {
        return !r.isActiveCell(t);
      });
    }, e.prototype.getPanelGroupAllDataCells = function() {
      var r;
      return ys((r = this.spreadsheet.panelGroup) === null || r === void 0 ? void 0 : r.getChildren(), No);
    }, e.prototype.getAllRowHeaderCells = function() {
      var r, t, n = ((r = this.spreadsheet.foregroundGroup) === null || r === void 0 ? void 0 : r.getChildren()) || [], i = n.find(function(a) {
        return a instanceof Ug && !(a instanceof yL);
      }), o = ((t = i == null ? void 0 : i.cfg) === null || t === void 0 ? void 0 : t.children) || [];
      return ys(o, cu).filter(function(a) {
        return a.cellType === J.ROW_CELL;
      });
    }, e.prototype.getAllColHeaderCells = function() {
      var r, t, n = ((r = this.spreadsheet.foregroundGroup) === null || r === void 0 ? void 0 : r.getChildren()) || [], i = n.find(function(a) {
        return a instanceof Gg;
      }), o = ((t = i == null ? void 0 : i.cfg) === null || t === void 0 ? void 0 : t.children) || [];
      return ys(o, ih).filter(function(a) {
        return a.cellType === J.COL_CELL;
      });
    }, e.prototype.getRowColActiveCells = function(r) {
      return tl(this.getAllRowHeaderCells(), this.getAllColHeaderCells()).filter(function(t) {
        return r.includes(t.getMeta().id);
      });
    }, e.prototype.getAllCells = function() {
      return tl(this.getPanelGroupAllDataCells(), this.getAllRowHeaderCells(), this.getAllColHeaderCells());
    }, e.prototype.hideColumns = function(r, t) {
      r === void 0 && (r = []), t === void 0 && (t = !0), Rg(this.spreadsheet, r, t);
    }, e.prototype.getBrushSelectionInfo = function(r) {
      var t, n, i;
      return ui(r) ? {
        dataBrushSelection: r,
        rowBrushSelection: r,
        colBrushSelection: r
      } : {
        dataBrushSelection: (t = r == null ? void 0 : r.data) !== null && t !== void 0 ? t : !1,
        rowBrushSelection: (n = r == null ? void 0 : r.row) !== null && n !== void 0 ? n : !1,
        colBrushSelection: (i = r == null ? void 0 : r.col) !== null && i !== void 0 ? i : !1
      };
    }, e.prototype.getDefaultInteractions = function() {
      var r = this.spreadsheet.options.interaction, t = r.resize, n = r.brushSelection, i = r.multiSelection, o = r.rangeSelection, a = r.selectedCellMove, l = this.getBrushSelectionInfo(n), s = l.dataBrushSelection, f = l.rowBrushSelection, h = l.colBrushSelection;
      return [
        {
          key: Cr.CORNER_CELL_CLICK,
          interaction: Wte
        },
        {
          key: Cr.DATA_CELL_CLICK,
          interaction: Pte
        },
        {
          key: Cr.ROW_COLUMN_CLICK,
          interaction: Hte
        },
        {
          key: Cr.ROW_TEXT_CLICK,
          interaction: zte
        },
        {
          key: Cr.MERGED_CELLS_CLICK,
          interaction: Nte
        },
        {
          key: Cr.HOVER,
          interaction: kte,
          enable: !Xt()
        },
        {
          key: Cr.BRUSH_SELECTION,
          interaction: Ute,
          enable: !Xt() && s
        },
        {
          key: Cr.ROW_BRUSH_SELECTION,
          interaction: Yte,
          enable: !Xt() && f
        },
        {
          key: Cr.COL_BRUSH_SELECTION,
          interaction: Gte,
          enable: !Xt() && h
        },
        {
          key: Cr.COL_ROW_RESIZE,
          interaction: Kte,
          enable: !Xt() && t
        },
        {
          key: Cr.DATA_CELL_MULTI_SELECTION,
          interaction: Xte,
          enable: !Xt() && i
        },
        {
          key: Cr.RANGE_SELECTION,
          interaction: qte,
          enable: !Xt() && o
        },
        {
          key: Cr.SELECTED_CELL_MOVE,
          interaction: Zte,
          enable: !Xt() && a
        }
      ];
    }, e.prototype.registerInteractions = function() {
      var r = this, t = this.spreadsheet.options.interaction.customInteractions;
      this.interactions.clear();
      var n = this.getDefaultInteractions();
      n.forEach(function(i) {
        var o = i.key, a = i.interaction, l = i.enable;
        l !== !1 && r.interactions.set(o, new a(r.spreadsheet));
      }), Q(t) || xe(t, function(i) {
        var o = i.interaction;
        r.interactions.set(i.key, new o(r.spreadsheet));
      });
    }, e.prototype.registerEventController = function() {
      this.eventController = new Vte(this.spreadsheet);
    }, e.prototype.draw = function() {
      this.spreadsheet.container.draw();
    }, e.prototype.clearState = function() {
      kE(this.spreadsheet) && this.draw();
    }, e.prototype.changeState = function(r) {
      var t = this, n = this.spreadsheet.interaction, i = r.cells, o = i === void 0 ? [] : i, a = r.force, l = r.stateName, s = r.onUpdateCells;
      if (Q(o) && l === ae.SELECTED) {
        a && n.changeState({
          cells: [],
          stateName: ae.UNSELECTED
        });
        return;
      }
      this.getCurrentStateName() === ae.ALL_SELECTED && this.clearStyleIndependent(), this.clearState(), this.setState(r);
      var f = function() {
        t.updatePanelGroupAllDataCells();
      };
      s ? s(this, f) : f(), this.draw();
    }, e.prototype.updatePanelGroupAllDataCells = function() {
      this.updateCells(this.getPanelGroupAllDataCells());
    }, e.prototype.updateCells = function(r) {
      r === void 0 && (r = []), r.forEach(function(t) {
        t.update();
      });
    }, e.prototype.addIntercepts = function(r) {
      var t = this;
      r === void 0 && (r = []), r.forEach(function(n) {
        t.intercepts.add(n);
      });
    }, e.prototype.hasIntercepts = function(r) {
      var t = this;
      return r === void 0 && (r = []), r.some(function(n) {
        return t.intercepts.has(n);
      });
    }, e.prototype.removeIntercepts = function(r) {
      var t = this;
      r === void 0 && (r = []), r.forEach(function(n) {
        t.intercepts.delete(n);
      });
    }, e.prototype.clearHoverTimer = function() {
      clearTimeout(this.hoverTimer);
    }, e.prototype.setHoverTimer = function(r) {
      this.hoverTimer = r;
    }, e.prototype.getHoverTimer = function() {
      return this.hoverTimer;
    }, e.prototype.getSelectedCellHighlight = function() {
      var r = this.spreadsheet.options.interaction.selectedCellHighlight;
      if (ui(r))
        return {
          rowHeader: r,
          colHeader: r,
          currentRow: !1,
          currentCol: !1
        };
      var t = r ?? {}, n = t.rowHeader, i = n === void 0 ? !1 : n, o = t.colHeader, a = o === void 0 ? !1 : o, l = t.currentRow, s = l === void 0 ? !1 : l, f = t.currentCol, h = f === void 0 ? !1 : f;
      return {
        rowHeader: i,
        colHeader: a,
        currentRow: s,
        currentCol: h
      };
    }, e.prototype.getHoverAfterScroll = function() {
      return this.spreadsheet.options.interaction.hoverAfterScroll;
    }, e.prototype.getHoverHighlight = function() {
      var r = this.spreadsheet.options.interaction.hoverHighlight;
      if (ui(r))
        return {
          rowHeader: r,
          colHeader: r,
          currentRow: r,
          currentCol: r
        };
      var t = r ?? {}, n = t.rowHeader, i = n === void 0 ? !1 : n, o = t.colHeader, a = o === void 0 ? !1 : o, l = t.currentRow, s = l === void 0 ? !1 : l, f = t.currentCol, h = f === void 0 ? !1 : f;
      return {
        rowHeader: i,
        colHeader: a,
        currentRow: s,
        currentCol: h
      };
    }, e.prototype.getBrushSelection = function() {
      var r = this.spreadsheet.options.interaction.brushSelection;
      if (ui(r))
        return {
          data: r,
          row: r,
          col: r
        };
      var t = r ?? {}, n = t.data, i = n === void 0 ? !1 : n, o = t.row, a = o === void 0 ? !1 : o, l = t.col, s = l === void 0 ? !1 : l;
      return {
        data: i,
        row: a,
        col: s
      };
    }, e;
  }()
), Jte = (
  /** @class */
  function() {
    function e(r) {
      var t = this;
      this.viewport = window, this.isDevicePixelRatioChange = !1, this.init = function() {
        t.initDevicePixelRatioListener(), t.initDeviceZoomListener();
      }, this.destroy = function() {
        t.removeDevicePixelRatioListener(), t.removeDeviceZoomListener();
      }, this.removeDevicePixelRatioListener = function() {
        var n;
        !((n = t.devicePixelRatioMedia) === null || n === void 0) && n.removeEventListener ? t.devicePixelRatioMedia.removeEventListener("change", t.renderByDevicePixelRatioChanged) : t.devicePixelRatioMedia.removeListener(t.renderByDevicePixelRatioChanged);
      }, this.initDeviceZoomListener = function() {
        var n, i;
        Xt() || (i = (n = t.viewport) === null || n === void 0 ? void 0 : n.visualViewport) === null || i === void 0 || i.addEventListener("resize", t.renderByZoomScaleWithoutResizeEffect);
      }, this.removeDeviceZoomListener = function() {
        var n, i;
        Xt() || (i = (n = t.viewport) === null || n === void 0 ? void 0 : n.visualViewport) === null || i === void 0 || i.removeEventListener("resize", t.renderByZoomScaleWithoutResizeEffect);
      }, this.renderByZoomScaleWithoutResizeEffect = function(n) {
        t.isDevicePixelRatioChange = !1, t.renderByZoomScale(n);
      }, this.renderByDevicePixelRatioChanged = function() {
        t.isDevicePixelRatioChange = !0, t.renderByDevicePixelRatio();
      }, this.renderByDevicePixelRatio = function(n) {
        n === void 0 && (n = window.devicePixelRatio);
        var i = t.spreadsheet, o = i.container, a = i.options, l = a.width, s = a.height, f = a.devicePixelRatio, h = t.spreadsheet.getCanvasElement(), d = o.get("pixelRatio");
        if (!(d === n || !h)) {
          var v = Math.max(n, f, c2);
          o.set("pixelRatio", v), o.changeSize(l, s), t.spreadsheet.render(!1);
        }
      }, this.renderByZoomScale = Bs(function(n) {
        var i = Math.ceil(n.target.scale);
        i >= 1 && !t.isDevicePixelRatioChange && t.renderByDevicePixelRatio(i);
      }, 350), this.spreadsheet = r;
    }
    return e.prototype.initDevicePixelRatioListener = function() {
      var r;
      this.devicePixelRatioMedia = window.matchMedia("(resolution: ".concat(window.devicePixelRatio, "dppx)")), !((r = this.devicePixelRatioMedia) === null || r === void 0) && r.addEventListener ? this.devicePixelRatioMedia.addEventListener("change", this.renderByDevicePixelRatioChanged) : this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged);
    }, e;
  }()
), Fp = (
  /** @class */
  function() {
    function e(r) {
      this.visible = !1, this.position = { x: 0, y: 0 }, this.spreadsheet = r;
    }
    return e.prototype.show = function(r) {
      var t, n, i, o = r.position, a = r.options, l = r.content, s = r.event, f = rL(a).enterable, h = this.spreadsheet.options.tooltip || {}, d = h.autoAdjustBoundary, v = h.adjustPosition;
      this.visible = !0, this.options = r;
      var g = this.getContainer();
      this.renderContent(l);
      var y = Fee({
        spreadsheet: this.spreadsheet,
        position: o,
        tooltipContainer: g,
        autoAdjustBoundary: d
      }), C = y.x, _ = y.y;
      this.position = (t = v == null ? void 0 : v({ position: { x: C, y: _ }, event: s })) !== null && t !== void 0 ? t : {
        x: C,
        y: _
      }, bf(g, {
        style: {
          left: "".concat((n = this.position) === null || n === void 0 ? void 0 : n.x, "px"),
          top: "".concat((i = this.position) === null || i === void 0 ? void 0 : i.y, "px"),
          pointerEvents: f ? "all" : "none"
        },
        visible: !0
      });
    }, e.prototype.hide = function() {
      this.visible = !1, this.container && (bf(this.container, {
        style: {
          pointerEvents: "none"
        },
        visible: !1
      }), this.resetPosition());
    }, e.prototype.destroy = function() {
      var r, t;
      this.visible = !1, this.container && (this.resetPosition(), (t = (r = this.container).remove) === null || t === void 0 || t.call(r), this.container = null);
    }, e.prototype.renderContent = function(r) {
      if (this.container) {
        this.clearContent();
        var t = (this.spreadsheet.options.tooltip || {}).content, n = r ?? t;
        if (!Nt(n)) {
          if (typeof n == "string") {
            this.container.innerHTML = n;
            return;
          }
          n instanceof Element && this.container.appendChild(n);
        }
      }
    }, e.prototype.clearContent = function() {
      this.container && (this.container.innerHTML = "");
    }, e.prototype.disablePointerEvent = function() {
      this.container && this.container.style.pointerEvents !== "none" && bf(this.container, {
        style: {
          pointerEvents: "none"
        }
      });
    }, e.prototype.resetPosition = function() {
      this.position = { x: 0, y: 0 };
    }, e.prototype.getContainer = function() {
      var r;
      if (!this.container) {
        var t = this.spreadsheet.options.tooltip, n = ((r = t.getContainer) === null || r === void 0 ? void 0 : r.call(t)) || document.body, i = document.createElement("div");
        return bf(i, {
          style: t.style,
          className: [_g].concat(t.className)
        }), n.appendChild(i), this.container = i, this.container;
      }
      return this.container;
    }, e;
  }()
), bL = (
  /** @class */
  function(e) {
    te(r, e);
    function r(t, n, i) {
      var o = e.call(this) || this;
      return o.store = new tZ(), o.untypedOn = o.on, o.untypedEmit = o.emit, o.on = function(a, l) {
        return o.untypedOn(a, l);
      }, o.emit = function(a) {
        for (var l = [], s = 1; s < arguments.length; s++)
          l[s - 1] = arguments[s];
        return o.untypedEmit.apply(o, j([a], W(l), !1));
      }, o.initHiddenColumnsDetail = function() {
        var a = o.options.interaction.hiddenColumnFields, l = o.store.get("hiddenColumnsDetail");
        Q(a) && Q(l) || Rg(o, a, !0);
      }, o.measureText = Oa(function(a, l) {
        var s;
        if (a === void 0 && (a = ""), !l)
          return null;
        var f = (s = o.getCanvasElement()) === null || s === void 0 ? void 0 : s.getContext("2d"), h = l, d = h.fontSize, v = h.fontFamily, g = h.fontWeight, y = h.fontStyle, C = h.fontVariant;
        return f.font = [
          y,
          C,
          g,
          "".concat(d, "px"),
          v
        ].join(" ").trim(), f.measureText(String(a));
      }, function(a, l) {
        return j([a], W(Ji(l)), !1).join("");
      }), o.measureTextWidth = function(a, l) {
        a === void 0 && (a = "");
        var s = o.measureText(a, l);
        return (s == null ? void 0 : s.width) || 0;
      }, o.measureTextHeight = function(a, l) {
        a === void 0 && (a = "");
        var s = o.measureText(a, l);
        return s ? s.actualBoundingBoxAscent + s.actualBoundingBoxDescent : 0;
      }, o.measureTextWidthRoughly = function(a, l) {
        var s, f;
        l === void 0 && (l = {});
        var h = o.measureTextWidth("a", l), d = o.measureTextWidth("蚂", l), v = 0;
        if (!a)
          return v;
        try {
          for (var g = br(a), y = g.next(); !y.done; y = g.next()) {
            var C = y.value, _ = C.charCodeAt(0);
            v += _ >= 0 && _ <= 255 ? h : d;
          }
        } catch (w) {
          s = { error: w };
        } finally {
          try {
            y && !y.done && (f = g.return) && f.call(g);
          } finally {
            if (s) throw s.error;
          }
        }
        return v;
      }, o.dataCfg = ov(n), o.options = Tw(i), o.dataSet = o.getDataSet(o.options), o.setDebug(), o.initTooltip(), o.initGroups(t), o.bindEvents(), o.initInteraction(), o.initTheme(), o.initHdAdapter(), o.registerIcons(), o.setOverscrollBehavior(), o.mountSheetInstance(), o;
    }
    return r.prototype.setOverscrollBehavior = function() {
      var t = this.options.interaction.overscrollBehavior, n = window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior"), i = n && n !== "auto";
      i ? this.store.set("initOverscrollBehavior", n) : t && (document.body.style.overscrollBehavior = t);
    }, r.prototype.restoreOverscrollBehavior = function() {
      document.body.style.overscrollBehavior = this.store.get("initOverscrollBehavior") || "";
    }, r.prototype.setDebug = function() {
      fi.getInstance().setDebug(this.options.debug);
    }, r.prototype.initTheme = function() {
      this.setThemeCfg({
        name: "default"
      });
    }, r.prototype.getMountContainer = function(t) {
      var n = Il(t) ? document.querySelector(t) : t;
      if (!n)
        throw new Error("Target mount container is not a DOM element");
      return n;
    }, r.prototype.initHdAdapter = function() {
      this.options.hdAdapter && (this.hdAdapter = new Jte(this), this.hdAdapter.init());
    }, r.prototype.initInteraction = function() {
      var t, n;
      (n = (t = this.interaction) === null || t === void 0 ? void 0 : t.destroy) === null || n === void 0 || n.call(t), this.interaction = new Qte(this);
    }, r.prototype.initTooltip = function() {
      var t, n, i, o;
      (n = (t = this.tooltip) === null || t === void 0 ? void 0 : t.destroy) === null || n === void 0 || n.call(t), this.tooltip = this.renderTooltip(), this.tooltip instanceof Fp || console.warn("[Custom Tooltip]: ".concat((o = (i = this.tooltip) === null || i === void 0 ? void 0 : i.constructor) === null || o === void 0 ? void 0 : o.toString(), " should be extends from BaseTooltip"));
    }, r.prototype.renderTooltip = function() {
      var t, n;
      return ((n = (t = this.options.tooltip) === null || t === void 0 ? void 0 : t.renderTooltip) === null || n === void 0 ? void 0 : n.call(t, this)) || new Fp(this);
    }, r.prototype.showTooltip = function(t) {
      var n, i, o = t.content, a = t.event, l = this.getCell(a == null ? void 0 : a.target), s = Vt(o) ? o(l, t) : o;
      (i = (n = this.tooltip).show) === null || i === void 0 || i.call(n, M(M({}, t), { content: s }));
    }, r.prototype.showTooltipWithInfo = function(t, n, i) {
      var o, a = Hg(this, t), l = a.showTooltip, s = a.content;
      if (l) {
        var f = this.getCell(t == null ? void 0 : t.target), h = (o = i == null ? void 0 : i.data) !== null && o !== void 0 ? o : Yee({
          spreadsheet: this,
          cellInfos: n,
          targetCell: f,
          options: M({ enableFormat: !0 }, i)
        });
        this.showTooltip({
          data: h,
          position: {
            x: t.clientX,
            y: t.clientY
          },
          options: M({ enterable: !0 }, i),
          event: t,
          content: s
        });
      }
    }, r.prototype.hideTooltip = function() {
      var t, n;
      (n = (t = this.tooltip).hide) === null || n === void 0 || n.call(t);
    }, r.prototype.destroyTooltip = function() {
      var t, n;
      (n = (t = this.tooltip).destroy) === null || n === void 0 || n.call(t);
    }, r.prototype.registerIcons = function() {
      var t = this.options.customSVGIcons;
      Q(t) || xe(t, function(n) {
        eE(n.name, n.svg);
      });
    }, r.prototype.setDataCfg = function(t, n) {
      this.store.set("originalDataCfg", t), n ? this.dataCfg = ov(t) : this.dataCfg = ov(this.dataCfg, t), Kee(this);
    }, r.prototype.setOptions = function(t, n) {
      var i;
      this.hideTooltip(), n ? this.options = Tw(t) : this.options = zn(this.options, t), (n || !((i = t.tooltip) === null || i === void 0) && i.renderTooltip) && this.initTooltip(), this.resetHiddenColumnsDetailInfoIfNeeded(), this.registerIcons();
    }, r.prototype.resetHiddenColumnsDetailInfoIfNeeded = function() {
      var t;
      Q((t = this.options.interaction) === null || t === void 0 ? void 0 : t.hiddenColumnFields) || this.store.set("hiddenColumnsDetail", []);
    }, r.prototype.render = function(t, n) {
      if (t === void 0 && (t = !0), n === void 0 && (n = {}), !!this.getCanvasElement()) {
        var i = n.reBuildDataSet, o = i === void 0 ? !1 : i, a = n.reBuildHiddenColumnsDetail, l = a === void 0 ? !0 : a;
        this.emit(I.LAYOUT_BEFORE_RENDER), o && (this.dataSet = this.getDataSet(this.options)), t && (this.clearDrillDownData("", !0), this.dataSet.setDataCfg(this.dataCfg)), this.buildFacet(), l && this.initHiddenColumnsDetail(), this.emit(I.LAYOUT_AFTER_RENDER);
      }
    }, r.prototype.mountSheetInstance = function() {
      var t = this.getCanvasElement();
      t && (t.__s2_instance__ = this);
    }, r.prototype.unmountSheetInstance = function() {
      var t = this.getCanvasElement();
      t && delete t.__s2_instance__;
    }, r.prototype.destroy = function() {
      var t, n, i, o, a;
      this.restoreOverscrollBehavior(), this.emit(I.LAYOUT_DESTROY), (t = this.facet) === null || t === void 0 || t.destroy(), (n = this.hdAdapter) === null || n === void 0 || n.destroy(), (i = this.interaction) === null || i === void 0 || i.destroy(), (o = this.store) === null || o === void 0 || o.clear(), this.destroyTooltip(), this.clearCanvasEvent(), this.unmountSheetInstance(), (a = this.container) === null || a === void 0 || a.destroy(), mZ();
    }, r.prototype.setThemeCfg = function(t) {
      t === void 0 && (t = {});
      var n = (t == null ? void 0 : t.theme) || {}, i = Oj(M(M({}, t), { spreadsheet: this }));
      this.theme = zn(i, n);
    }, r.prototype.setTheme = function(t) {
      this.theme = zn(this.theme, t);
    }, r.prototype.updatePagination = function(t) {
      this.options = zn(this.options, {
        pagination: t
      }), this.store.set("scrollX", 0), this.store.set("scrollY", 0);
    }, r.prototype.getContentHeight = function() {
      return this.facet.getContentHeight();
    }, r.prototype.changeSize = function(t, n) {
      t === void 0 && (t = this.options.width), n === void 0 && (n = this.options.height), this.changeSheetSize(t, n);
    }, r.prototype.changeSheetSize = function(t, n) {
      t === void 0 && (t = this.options.width), n === void 0 && (n = this.options.height);
      var i = this.getCanvasElement(), o = this.container.get("width"), a = this.container.get("height"), l = t !== o || n !== a;
      !l || !i || (this.options = zn(this.options, { width: t, height: n }), this.container.changeSize(t, n));
    }, r.prototype.getCanvasElement = function() {
      return this.container.get("el");
    }, r.prototype.getLayoutWidthType = function() {
      return this.options.style.layoutWidthType;
    }, r.prototype.getRowNodes = function(t) {
      return t === void 0 && (t = -1), t === -1 ? this.facet.layoutResult.rowNodes : this.facet.layoutResult.rowNodes.filter(function(n) {
        return n.level === t;
      });
    }, r.prototype.getRowLeafNodes = function() {
      var t;
      return ((t = this.facet) === null || t === void 0 ? void 0 : t.layoutResult.rowLeafNodes) || [];
    }, r.prototype.getColumnNodes = function(t) {
      var n;
      t === void 0 && (t = -1);
      var i = ((n = this.facet) === null || n === void 0 ? void 0 : n.layoutResult.colNodes) || [];
      return t === -1 ? i : i.filter(function(o) {
        return o.level === t;
      });
    }, r.prototype.getColumnLeafNodes = function() {
      var t;
      return ((t = this.facet) === null || t === void 0 ? void 0 : t.layoutResult.colLeafNodes) || [];
    }, r.prototype.updateScrollOffset = function(t) {
      var n = {
        offsetX: {
          value: void 0,
          animate: !1
        },
        offsetY: {
          value: void 0,
          animate: !1
        },
        rowHeaderOffsetX: {
          value: void 0,
          animate: !1
        }
      };
      this.facet.updateScrollOffset(zn(n, t));
    }, r.prototype.getTooltipDataItemMappingCallback = function() {
      var t;
      return (t = this.options) === null || t === void 0 ? void 0 : t.mappingDisplayDataItem;
    }, r.prototype.isCellType = function(t) {
      return t instanceof nh;
    }, r.prototype.getCell = function(t) {
      for (var n, i = t; i && !(i instanceof Ym); ) {
        if (this.isCellType(i))
          return i;
        i = (n = i.get) === null || n === void 0 ? void 0 : n.call(i, "parent");
      }
      return null;
    }, r.prototype.getCellType = function(t) {
      var n = this.getCell(t);
      return n == null ? void 0 : n.cellType;
    }, r.prototype.getTotalsConfig = function(t) {
      var n = this.options.totals, i = this.dataSet.fields.rows, o = ge(n, Sr(i, t) ? "row" : "col", {}), a = o.showSubTotals && Sr(o.subTotalsDimensions, t) ? o.showSubTotals : !1;
      return M(M({ label: Et("总计"), subLabel: Et("小计"), totalsGroupDimensions: [], subTotalsGroupDimensions: [] }, o), { showSubTotals: a });
    }, r.prototype.initGroups = function(t) {
      var n = this.options, i = n.width, o = n.height, a = n.supportCSSTransform, l = n.devicePixelRatio;
      this.container = new Ym({
        container: this.getMountContainer(t),
        width: i,
        height: o,
        localRefresh: !1,
        supportCSSTransform: a,
        pixelRatio: Math.max(l, c2)
      }), this.backgroundGroup = this.container.addGroup({
        name: yD,
        zIndex: cD
      }), this.panelGroup = this.container.addGroup({
        name: mD,
        zIndex: pD
      }), this.foregroundGroup = this.container.addGroup({
        name: CD,
        zIndex: hD
      }), this.initPanelGroupChildren(), this.updateContainerStyle();
    }, r.prototype.updateContainerStyle = function() {
      var t = this.getCanvasElement();
      t && (t.style.display = "block");
    }, r.prototype.initPanelGroupChildren = function() {
      this.panelScrollGroup = new Fte({
        name: _D,
        zIndex: gD,
        s2: this
      }), this.panelGroup.add(this.panelScrollGroup);
    }, r.prototype.getInitColumnLeafNodes = function() {
      return this.store.get("initColumnLeafNodes", []);
    }, r.prototype.clearColumnLeafNodes = function() {
      this.clearInitColumnLeafNodes();
    }, r.prototype.clearInitColumnLeafNodes = function() {
      this.store.set("initColumnLeafNodes", void 0);
    }, r.prototype.clearCanvasEvent = function() {
      var t = this, n = this.getEvents();
      eT(n, function(i, o) {
        t.off(o);
      });
    }, r.prototype.updateSortMethodMap = function(t, n, i) {
      var o;
      i === void 0 && (i = !1);
      var a = i ? null : this.store.get("sortMethodMap");
      this.store.set("sortMethodMap", M(M({}, a), (o = {}, o[t] = n, o)));
    }, r.prototype.getMenuDefaultSelectedKeys = function(t) {
      var n = this.store.get("sortMethodMap"), i = ge(n, t);
      return i ? [i] : [];
    }, r;
  }(bc)
), ere = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return r.prototype.getDataSet = function(t) {
      var n = t.dataSet, i = t.hierarchyType;
      if (n)
        return n(this);
      var o = i === "customTree" ? new Qee(this) : new Ip(this);
      return o;
    }, r.prototype.getContentHeight = function() {
      return this.facet.getContentHeight();
    }, r.prototype.isPivotMode = function() {
      return !0;
    }, r.prototype.isTableMode = function() {
      return !1;
    }, r.prototype.isHierarchyTreeType = function() {
      var t = this.options.hierarchyType;
      return t === "tree" || t === "customTree";
    }, r.prototype.isScrollContainsRowHeader = function() {
      return !this.isFrozenRowHeader();
    }, r.prototype.isFrozenRowHeader = function() {
      var t;
      return (t = this.options) === null || t === void 0 ? void 0 : t.frozenRowHeader;
    }, r.prototype.isValueInCols = function() {
      var t, n;
      return (n = (t = this.dataSet) === null || t === void 0 ? void 0 : t.fields) === null || n === void 0 ? void 0 : n.valueInCols;
    }, r.prototype.clearDrillDownData = function(t, n) {
      if (this.dataSet instanceof Ip) {
        var i = this.dataSet.clearDrillDownData(t);
        i && !n && (this.interaction.reset(), this.render(!1));
      }
    }, r.prototype.getFacetCfgFromDataSetAndOptions = function() {
      var t = this, n = this.dataSet, i = n.fields, o = n.meta, a = this.options, l = a.style, s = a.dataCell, f = function(h) {
        return new No(h, t);
      };
      return M(M(M(M({}, this.options), i), l), { meta: o, spreadsheet: this, dataSet: this.dataSet, dataCell: s ?? f });
    }, r.prototype.buildFacet = function() {
      var t, n = this.getFacetCfgFromDataSetAndOptions();
      (t = this.facet) === null || t === void 0 || t.destroy(), this.facet = new Bte(n), this.facet.render();
    }, r.prototype.bindEvents = function() {
      this.off(I.ROW_CELL_COLLAPSE_TREE_ROWS), this.off(I.LAYOUT_TREE_ROWS_COLLAPSE_ALL), this.on(I.ROW_CELL_COLLAPSE_TREE_ROWS, this.handleRowCellCollapseTreeRows), this.on(I.LAYOUT_TREE_ROWS_COLLAPSE_ALL, this.handleTreeRowsCollapseAll);
    }, r.prototype.handleRowCellCollapseTreeRows = function(t) {
      var n, i = t.id, o = t.isCollapsed, a = {
        style: {
          collapsedRows: (n = {}, n[i] = o, n)
        }
      };
      this.emit(I.LAYOUT_COLLAPSE_ROWS, {
        collapsedRows: a.style.collapsedRows,
        meta: t == null ? void 0 : t.node
      }), this.setOptions(a), this.render(!1), this.emit(I.LAYOUT_AFTER_COLLAPSE_ROWS, {
        collapsedRows: a.style.collapsedRows,
        meta: t == null ? void 0 : t.node
      });
    }, r.prototype.handleTreeRowsCollapseAll = function(t) {
      var n = {
        style: {
          hierarchyCollapse: !t,
          collapsedRows: null,
          rowExpandDepth: null
        }
      };
      this.setOptions(n), this.render(!1);
    }, r.prototype.groupSortByMethod = function(t, n) {
      var i = this.dataCfg.fields, o = i.rows, a = i.columns, l = this.options.style.colCfg.hideMeasureColumn, s = this.isValueInCols() ? ut(o) : ut(a), f = n.query, h = n.value, d = Ol(f), v = h;
      l && this.isValueInCols() && (v = this.dataSet.fields.values[0], d[Ae] = v);
      var g = {
        sortFieldId: s,
        sortMethod: t,
        sortByMeasure: v,
        query: d
      }, y = this.dataCfg.sortParams.filter(function(_) {
        return (_ == null ? void 0 : _.sortFieldId) !== s;
      });
      this.updateSortMethodMap(n.id, t, !0);
      var C = j(j([], W(y), !1), [g], !1);
      this.emit(I.RANGE_SORT, C), this.setDataCfg(M(M({}, this.dataCfg), { sortParams: C })), this.render();
    }, r.prototype.handleGroupSort = function(t, n) {
      var i = this;
      t.stopPropagation(), this.interaction.addIntercepts([Le.HOVER]);
      var o = this.getMenuDefaultSelectedKeys(n == null ? void 0 : n.id), a = {
        onClick: function(l) {
          var s = l.key, f = s;
          i.groupSortByMethod(f, n), i.emit(I.RANGE_SORTED, t);
        },
        menus: Ej(),
        defaultSelectedKeys: o
      };
      this.showTooltipWithInfo(t, [], {
        operator: a,
        onlyMenu: !0,
        // 确保 tooltip 内容更新 https://github.com/antvis/S2/issues/1716
        forceRender: !0
      });
    }, r.prototype.initPanelGroupChildren = function() {
      e.prototype.initPanelGroupChildren.call(this);
      var t = {
        zIndex: t2,
        s2: this
      };
      this.frozenRowGroup = new SL(M({ KEY_GROUP_PANEL_FROZEN_ROW: r2 }, t)), this.panelGroup.add(this.frozenRowGroup);
    }, r.prototype.isCellType = function(t) {
      return t instanceof nh && !(t instanceof zE);
    }, r;
  }(bL)
), tre = (
  /** @class */
  function(e) {
    te(r, e);
    function r() {
      var t = e !== null && e.apply(this, arguments) || this;
      return t.onSortTooltipClick = function(n, i) {
        var o = n.key, a = i.field, l = {
          sortFieldId: a,
          sortMethod: o
        };
        t.updateSortMethodMap(i.id, o), t.emit(I.RANGE_SORT, [l]);
      }, t;
    }
    return r.prototype.getDataSet = function(t) {
      var n = t.dataSet;
      return n ? n(this) : new Jee(this);
    }, r.prototype.isPivotMode = function() {
      return !1;
    }, r.prototype.isTableMode = function() {
      return !0;
    }, r.prototype.isHierarchyTreeType = function() {
      return !1;
    }, r.prototype.isScrollContainsRowHeader = function() {
      return !1;
    }, r.prototype.isFrozenRowHeader = function() {
      return !1;
    }, r.prototype.clearDrillDownData = function() {
    }, r.prototype.isValueInCols = function() {
      return !1;
    }, r.prototype.bindEvents = function() {
    }, r.prototype.initPanelGroupChildren = function() {
      var t, n = this;
      e.prototype.initPanelGroupChildren.call(this);
      var i = {
        zIndex: t2,
        s2: this
      };
      t = W([
        r2,
        n2,
        wD,
        xD,
        SD,
        bD
      ].map(function(o) {
        var a = new SL(M({ name: o }, i));
        return n.panelGroup.add(a), a;
      }), 6), this.frozenRowGroup = t[0], this.frozenColGroup = t[1], this.frozenTrailingRowGroup = t[2], this.frozenTrailingColGroup = t[3], this.frozenTopGroup = t[4], this.frozenBottomGroup = t[5];
    }, r.prototype.getFacetCfgFromDataSetAndOptions = function() {
      var t = this, n = this.dataSet, i = n.fields, o = n.meta, a = this.options, l = a.style, s = a.dataCell, f = function(h) {
        return t.options.showSeriesNumber && h.colIndex === 0 ? new PE(h, t) : new oh(h, t);
      };
      return M(M(M(M({}, this.options), i), l), { meta: o, spreadsheet: this, dataSet: this.dataSet, dataCell: s ?? f });
    }, r.prototype.buildFacet = function() {
      var t, n = this.getFacetCfgFromDataSetAndOptions();
      (t = this.facet) === null || t === void 0 || t.destroy(), this.facet = new $te(n), this.facet.render();
    }, r.prototype.clearFrozenGroups = function() {
      this.frozenRowGroup.set("children", []), this.frozenColGroup.set("children", []), this.frozenTrailingRowGroup.set("children", []), this.frozenTrailingColGroup.set("children", []), this.frozenTopGroup.set("children", []), this.frozenBottomGroup.set("children", []);
    }, r.prototype.destroy = function() {
      e.prototype.destroy.call(this), this.clearFrozenGroups(), this.off(I.RANGE_SORT), this.off(I.RANGE_FILTER);
    }, r.prototype.handleGroupSort = function(t, n) {
      var i = this;
      t.stopPropagation(), this.interaction.addIntercepts([Le.HOVER]);
      var o = this.getMenuDefaultSelectedKeys(n == null ? void 0 : n.id), a = {
        onClick: function(l) {
          var s = l.key, f = s;
          i.onSortTooltipClick({ key: f }, n);
        },
        menus: Lj(),
        defaultSelectedKeys: o
      };
      this.showTooltipWithInfo(t, [], {
        operator: a,
        onlyMenu: !0,
        forceRender: !0
      });
    }, r;
  }(bL)
);
const rre = {
  选择分析信息: "Select Analysis Information",
  切换指标: "Switch indicator",
  确定: "Ok",
  取消: "Cancel",
  重置: "Reset",
  请输入关键字搜索: "Please enter a keyword search",
  搜索: "Search",
  恢复: "Recover",
  "已选 {} 项": "selected {} item",
  所选项: "selected items",
  选择下钻维度: "Select drill down dimension",
  恢复默认: "Restore default",
  搜索字段: "Search field",
  行列切换: "Switch Dimensions",
  行头: "Rows",
  列头: "Cols",
  值: "Values",
  展开子项: "Expand Children",
  首字母: "Alphabetical order",
  手动排序: "Custom order",
  其他字段: "Other field",
  高级排序: "Advanced order",
  设置顺序: "SetManual",
  可选字段: "Fields",
  "按以下规则进行排序（优先级由低到高）": "Order according to the following rules (from low to high priority)",
  按: "By",
  说明: "Description: ",
  复制原始数据: "Copy raw data",
  复制格式化数据: "Copy formatted data",
  下载原始数据: "Download raw data",
  下载格式化数据: "Download formatted data",
  操作成功: "Operation successful",
  操作失败: "Operation failed",
  时间: "Date",
  指标: "Measure",
  目标值: "Target Value"
}, nre = {
  选择分析信息: "选择分析信息",
  切换指标: "切换指标",
  确定: "确定",
  取消: "取消",
  重置: "重置",
  请输入关键字搜索: "请输入关键字搜索",
  搜索: "搜索",
  恢复: "恢复",
  "已选 {} 项": "已选 {} 项",
  所选项: "所选项",
  选择下钻维度: "选择下钻维度",
  恢复默认: "恢复默认",
  搜索字段: "搜索字段",
  行列切换: "行列切换",
  行头: "行头",
  列头: "列头",
  值: "值",
  展开子项: "展开子项",
  首字母: "首字母",
  手动排序: "手动排序",
  其他字段: "其他字段",
  高级排序: "高级排序",
  设置顺序: "设置顺序",
  可选字段: "可选字段",
  "按以下规则进行排序（优先级由低到高）": "按以下规则进行排序（优先级由低到高）",
  按: "按",
  说明: "说明：",
  复制原始数据: "复制原始数据",
  复制格式化数据: "复制格式化数据",
  下载原始数据: "下载原始数据",
  下载格式化数据: "下载格式化数据",
  操作成功: "操作成功",
  操作失败: "操作失败",
  时间: "时间",
  指标: "指标",
  目标值: "目标值"
}, ire = {
  zh_CN: nre,
  en_US: rre
}, ore = {
  tooltip: {
    showTooltip: !0,
    autoAdjustBoundary: "body",
    operation: {
      hiddenColumns: !0,
      trend: !1,
      sort: !0
    }
  },
  showDefaultHeaderActionIcon: !0
}, are = 200, lre = "s2-drill-down", sre = (...e) => zn(h2, ore, ...e);
var ure = typeof global == "object" && global && global.Object === Object && global, TL = ure, fre = typeof self == "object" && self && self.Object === Object && self, cre = TL || fre || Function("return this")(), ti = cre, hre = ti.Symbol, On = hre, EL = Object.prototype, dre = EL.hasOwnProperty, vre = EL.toString, rs = On ? On.toStringTag : void 0;
function pre(e) {
  var r = dre.call(e, rs), t = e[rs];
  try {
    e[rs] = void 0;
    var n = !0;
  } catch {
  }
  var i = vre.call(e);
  return n && (r ? e[rs] = t : delete e[rs]), i;
}
var gre = Object.prototype, yre = gre.toString;
function Cre(e) {
  return yre.call(e);
}
var mre = "[object Null]", _re = "[object Undefined]", Zw = On ? On.toStringTag : void 0;
function to(e) {
  return e == null ? e === void 0 ? _re : mre : Zw && Zw in Object(e) ? pre(e) : Cre(e);
}
function Zn(e) {
  return e != null && typeof e == "object";
}
var wre = "[object Symbol]";
function ch(e) {
  return typeof e == "symbol" || Zn(e) && to(e) == wre;
}
function LL(e, r) {
  for (var t = -1, n = e == null ? 0 : e.length, i = Array(n); ++t < n; )
    i[t] = r(e[t], t, e);
  return i;
}
var xre = Array.isArray, Er = xre, Sre = 1 / 0, Qw = On ? On.prototype : void 0, Jw = Qw ? Qw.toString : void 0;
function AL(e) {
  if (typeof e == "string")
    return e;
  if (Er(e))
    return LL(e, AL) + "";
  if (ch(e))
    return Jw ? Jw.call(e) : "";
  var r = e + "";
  return r == "0" && 1 / e == -Sre ? "-0" : r;
}
var bre = /\s/;
function Tre(e) {
  for (var r = e.length; r-- && bre.test(e.charAt(r)); )
    ;
  return r;
}
var Ere = /^\s+/;
function Lre(e) {
  return e && e.slice(0, Tre(e) + 1).replace(Ere, "");
}
function Yi(e) {
  var r = typeof e;
  return e != null && (r == "object" || r == "function");
}
var ex = NaN, Are = /^[-+]0x[0-9a-f]+$/i, Rre = /^0b[01]+$/i, Ore = /^0o[0-7]+$/i, Ire = parseInt;
function tx(e) {
  if (typeof e == "number")
    return e;
  if (ch(e))
    return ex;
  if (Yi(e)) {
    var r = typeof e.valueOf == "function" ? e.valueOf() : e;
    e = Yi(r) ? r + "" : r;
  }
  if (typeof e != "string")
    return e === 0 ? e : +e;
  e = Lre(e);
  var t = Rre.test(e);
  return t || Ore.test(e) ? Ire(e.slice(2), t ? 2 : 8) : Are.test(e) ? ex : +e;
}
function RL(e) {
  return e;
}
var Mre = "[object AsyncFunction]", Bre = "[object Function]", Dre = "[object GeneratorFunction]", $re = "[object Proxy]";
function OL(e) {
  if (!Yi(e))
    return !1;
  var r = to(e);
  return r == Bre || r == Dre || r == Mre || r == $re;
}
var Fre = ti["__core-js_shared__"], cv = Fre, rx = function() {
  var e = /[^.]+$/.exec(cv && cv.keys && cv.keys.IE_PROTO || "");
  return e ? "Symbol(src)_1." + e : "";
}();
function Pre(e) {
  return !!rx && rx in e;
}
var Nre = Function.prototype, Hre = Nre.toString;
function $a(e) {
  if (e != null) {
    try {
      return Hre.call(e);
    } catch {
    }
    try {
      return e + "";
    } catch {
    }
  }
  return "";
}
var zre = /[\\^$.*+?()[\]{}|]/g, Wre = /^\[object .+?Constructor\]$/, kre = Function.prototype, Gre = Object.prototype, Ure = kre.toString, Yre = Gre.hasOwnProperty, Xre = RegExp(
  "^" + Ure.call(Yre).replace(zre, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function Vre(e) {
  if (!Yi(e) || Pre(e))
    return !1;
  var r = OL(e) ? Xre : Wre;
  return r.test($a(e));
}
function qre(e, r) {
  return e == null ? void 0 : e[r];
}
function Fa(e, r) {
  var t = qre(e, r);
  return Vre(t) ? t : void 0;
}
var Kre = Fa(ti, "WeakMap"), Pp = Kre, nx = Object.create, jre = /* @__PURE__ */ function() {
  function e() {
  }
  return function(r) {
    if (!Yi(r))
      return {};
    if (nx)
      return nx(r);
    e.prototype = r;
    var t = new e();
    return e.prototype = void 0, t;
  };
}(), Zre = jre;
function Qre(e, r, t) {
  switch (t.length) {
    case 0:
      return e.call(r);
    case 1:
      return e.call(r, t[0]);
    case 2:
      return e.call(r, t[0], t[1]);
    case 3:
      return e.call(r, t[0], t[1], t[2]);
  }
  return e.apply(r, t);
}
function Jre(e, r) {
  var t = -1, n = e.length;
  for (r || (r = Array(n)); ++t < n; )
    r[t] = e[t];
  return r;
}
var ene = 800, tne = 16, rne = Date.now;
function nne(e) {
  var r = 0, t = 0;
  return function() {
    var n = rne(), i = tne - (n - t);
    if (t = n, i > 0) {
      if (++r >= ene)
        return arguments[0];
    } else
      r = 0;
    return e.apply(void 0, arguments);
  };
}
function ine(e) {
  return function() {
    return e;
  };
}
var one = function() {
  try {
    var e = Fa(Object, "defineProperty");
    return e({}, "", {}), e;
  } catch {
  }
}(), Cc = one, ane = Cc ? function(e, r) {
  return Cc(e, "toString", {
    configurable: !0,
    enumerable: !1,
    value: ine(r),
    writable: !0
  });
} : RL, lne = ane, sne = nne(lne), une = sne;
function fne(e, r) {
  for (var t = -1, n = e == null ? 0 : e.length; ++t < n && r(e[t], t, e) !== !1; )
    ;
  return e;
}
var cne = 9007199254740991, hne = /^(?:0|[1-9]\d*)$/;
function IL(e, r) {
  var t = typeof e;
  return r = r ?? cne, !!r && (t == "number" || t != "symbol" && hne.test(e)) && e > -1 && e % 1 == 0 && e < r;
}
function ML(e, r, t) {
  r == "__proto__" && Cc ? Cc(e, r, {
    configurable: !0,
    enumerable: !0,
    value: t,
    writable: !0
  }) : e[r] = t;
}
function Xg(e, r) {
  return e === r || e !== e && r !== r;
}
var dne = Object.prototype, vne = dne.hasOwnProperty;
function BL(e, r, t) {
  var n = e[r];
  (!(vne.call(e, r) && Xg(n, t)) || t === void 0 && !(r in e)) && ML(e, r, t);
}
function du(e, r, t, n) {
  var i = !t;
  t || (t = {});
  for (var o = -1, a = r.length; ++o < a; ) {
    var l = r[o], s = void 0;
    s === void 0 && (s = e[l]), i ? ML(t, l, s) : BL(t, l, s);
  }
  return t;
}
var ix = Math.max;
function pne(e, r, t) {
  return r = ix(r === void 0 ? e.length - 1 : r, 0), function() {
    for (var n = arguments, i = -1, o = ix(n.length - r, 0), a = Array(o); ++i < o; )
      a[i] = n[r + i];
    i = -1;
    for (var l = Array(r + 1); ++i < r; )
      l[i] = n[i];
    return l[r] = t(a), Qre(e, this, l);
  };
}
var gne = 9007199254740991;
function Vg(e) {
  return typeof e == "number" && e > -1 && e % 1 == 0 && e <= gne;
}
function vu(e) {
  return e != null && Vg(e.length) && !OL(e);
}
var yne = Object.prototype;
function hh(e) {
  var r = e && e.constructor, t = typeof r == "function" && r.prototype || yne;
  return e === t;
}
function Cne(e, r) {
  for (var t = -1, n = Array(e); ++t < e; )
    n[t] = r(t);
  return n;
}
var mne = "[object Arguments]";
function ox(e) {
  return Zn(e) && to(e) == mne;
}
var DL = Object.prototype, _ne = DL.hasOwnProperty, wne = DL.propertyIsEnumerable, xne = ox(/* @__PURE__ */ function() {
  return arguments;
}()) ? ox : function(e) {
  return Zn(e) && _ne.call(e, "callee") && !wne.call(e, "callee");
}, dh = xne;
function Sne() {
  return !1;
}
var $L = typeof exports == "object" && exports && !exports.nodeType && exports, ax = $L && typeof module == "object" && module && !module.nodeType && module, bne = ax && ax.exports === $L, lx = bne ? ti.Buffer : void 0, Tne = lx ? lx.isBuffer : void 0, Ene = Tne || Sne, Vs = Ene, Lne = "[object Arguments]", Ane = "[object Array]", Rne = "[object Boolean]", One = "[object Date]", Ine = "[object Error]", Mne = "[object Function]", Bne = "[object Map]", Dne = "[object Number]", $ne = "[object Object]", Fne = "[object RegExp]", Pne = "[object Set]", Nne = "[object String]", Hne = "[object WeakMap]", zne = "[object ArrayBuffer]", Wne = "[object DataView]", kne = "[object Float32Array]", Gne = "[object Float64Array]", Une = "[object Int8Array]", Yne = "[object Int16Array]", Xne = "[object Int32Array]", Vne = "[object Uint8Array]", qne = "[object Uint8ClampedArray]", Kne = "[object Uint16Array]", jne = "[object Uint32Array]", xt = {};
xt[kne] = xt[Gne] = xt[Une] = xt[Yne] = xt[Xne] = xt[Vne] = xt[qne] = xt[Kne] = xt[jne] = !0;
xt[Lne] = xt[Ane] = xt[zne] = xt[Rne] = xt[Wne] = xt[One] = xt[Ine] = xt[Mne] = xt[Bne] = xt[Dne] = xt[$ne] = xt[Fne] = xt[Pne] = xt[Nne] = xt[Hne] = !1;
function Zne(e) {
  return Zn(e) && Vg(e.length) && !!xt[to(e)];
}
function qg(e) {
  return function(r) {
    return e(r);
  };
}
var FL = typeof exports == "object" && exports && !exports.nodeType && exports, Cs = FL && typeof module == "object" && module && !module.nodeType && module, Qne = Cs && Cs.exports === FL, hv = Qne && TL.process, Jne = function() {
  try {
    var e = Cs && Cs.require && Cs.require("util").types;
    return e || hv && hv.binding && hv.binding("util");
  } catch {
  }
}(), wl = Jne, sx = wl && wl.isTypedArray, eie = sx ? qg(sx) : Zne, Kg = eie, tie = Object.prototype, rie = tie.hasOwnProperty;
function PL(e, r) {
  var t = Er(e), n = !t && dh(e), i = !t && !n && Vs(e), o = !t && !n && !i && Kg(e), a = t || n || i || o, l = a ? Cne(e.length, String) : [], s = l.length;
  for (var f in e)
    (r || rie.call(e, f)) && !(a && (f == "length" || i && (f == "offset" || f == "parent") || o && (f == "buffer" || f == "byteLength" || f == "byteOffset") || IL(f, s))) && l.push(f);
  return l;
}
function NL(e, r) {
  return function(t) {
    return e(r(t));
  };
}
var nie = NL(Object.keys, Object), iie = nie, oie = Object.prototype, aie = oie.hasOwnProperty;
function jg(e) {
  if (!hh(e))
    return iie(e);
  var r = [];
  for (var t in Object(e))
    aie.call(e, t) && t != "constructor" && r.push(t);
  return r;
}
function pu(e) {
  return vu(e) ? PL(e) : jg(e);
}
function lie(e) {
  var r = [];
  if (e != null)
    for (var t in Object(e))
      r.push(t);
  return r;
}
var sie = Object.prototype, uie = sie.hasOwnProperty;
function fie(e) {
  if (!Yi(e))
    return lie(e);
  var r = hh(e), t = [];
  for (var n in e)
    n == "constructor" && (r || !uie.call(e, n)) || t.push(n);
  return t;
}
function Zg(e) {
  return vu(e) ? PL(e, !0) : fie(e);
}
var cie = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, hie = /^\w*$/;
function Qg(e, r) {
  if (Er(e))
    return !1;
  var t = typeof e;
  return t == "number" || t == "symbol" || t == "boolean" || e == null || ch(e) ? !0 : hie.test(e) || !cie.test(e) || r != null && e in Object(r);
}
var die = Fa(Object, "create"), qs = die;
function vie() {
  this.__data__ = qs ? qs(null) : {}, this.size = 0;
}
function pie(e) {
  var r = this.has(e) && delete this.__data__[e];
  return this.size -= r ? 1 : 0, r;
}
var gie = "__lodash_hash_undefined__", yie = Object.prototype, Cie = yie.hasOwnProperty;
function mie(e) {
  var r = this.__data__;
  if (qs) {
    var t = r[e];
    return t === gie ? void 0 : t;
  }
  return Cie.call(r, e) ? r[e] : void 0;
}
var _ie = Object.prototype, wie = _ie.hasOwnProperty;
function xie(e) {
  var r = this.__data__;
  return qs ? r[e] !== void 0 : wie.call(r, e);
}
var Sie = "__lodash_hash_undefined__";
function bie(e, r) {
  var t = this.__data__;
  return this.size += this.has(e) ? 0 : 1, t[e] = qs && r === void 0 ? Sie : r, this;
}
function Ta(e) {
  var r = -1, t = e == null ? 0 : e.length;
  for (this.clear(); ++r < t; ) {
    var n = e[r];
    this.set(n[0], n[1]);
  }
}
Ta.prototype.clear = vie;
Ta.prototype.delete = pie;
Ta.prototype.get = mie;
Ta.prototype.has = xie;
Ta.prototype.set = bie;
function Tie() {
  this.__data__ = [], this.size = 0;
}
function vh(e, r) {
  for (var t = e.length; t--; )
    if (Xg(e[t][0], r))
      return t;
  return -1;
}
var Eie = Array.prototype, Lie = Eie.splice;
function Aie(e) {
  var r = this.__data__, t = vh(r, e);
  if (t < 0)
    return !1;
  var n = r.length - 1;
  return t == n ? r.pop() : Lie.call(r, t, 1), --this.size, !0;
}
function Rie(e) {
  var r = this.__data__, t = vh(r, e);
  return t < 0 ? void 0 : r[t][1];
}
function Oie(e) {
  return vh(this.__data__, e) > -1;
}
function Iie(e, r) {
  var t = this.__data__, n = vh(t, e);
  return n < 0 ? (++this.size, t.push([e, r])) : t[n][1] = r, this;
}
function ro(e) {
  var r = -1, t = e == null ? 0 : e.length;
  for (this.clear(); ++r < t; ) {
    var n = e[r];
    this.set(n[0], n[1]);
  }
}
ro.prototype.clear = Tie;
ro.prototype.delete = Aie;
ro.prototype.get = Rie;
ro.prototype.has = Oie;
ro.prototype.set = Iie;
var Mie = Fa(ti, "Map"), Ks = Mie;
function Bie() {
  this.size = 0, this.__data__ = {
    hash: new Ta(),
    map: new (Ks || ro)(),
    string: new Ta()
  };
}
function Die(e) {
  var r = typeof e;
  return r == "string" || r == "number" || r == "symbol" || r == "boolean" ? e !== "__proto__" : e === null;
}
function ph(e, r) {
  var t = e.__data__;
  return Die(r) ? t[typeof r == "string" ? "string" : "hash"] : t.map;
}
function $ie(e) {
  var r = ph(this, e).delete(e);
  return this.size -= r ? 1 : 0, r;
}
function Fie(e) {
  return ph(this, e).get(e);
}
function Pie(e) {
  return ph(this, e).has(e);
}
function Nie(e, r) {
  var t = ph(this, e), n = t.size;
  return t.set(e, r), this.size += t.size == n ? 0 : 1, this;
}
function no(e) {
  var r = -1, t = e == null ? 0 : e.length;
  for (this.clear(); ++r < t; ) {
    var n = e[r];
    this.set(n[0], n[1]);
  }
}
no.prototype.clear = Bie;
no.prototype.delete = $ie;
no.prototype.get = Fie;
no.prototype.has = Pie;
no.prototype.set = Nie;
var Hie = "Expected a function";
function Jg(e, r) {
  if (typeof e != "function" || r != null && typeof r != "function")
    throw new TypeError(Hie);
  var t = function() {
    var n = arguments, i = r ? r.apply(this, n) : n[0], o = t.cache;
    if (o.has(i))
      return o.get(i);
    var a = e.apply(this, n);
    return t.cache = o.set(i, a) || o, a;
  };
  return t.cache = new (Jg.Cache || no)(), t;
}
Jg.Cache = no;
var zie = 500;
function Wie(e) {
  var r = Jg(e, function(n) {
    return t.size === zie && t.clear(), n;
  }), t = r.cache;
  return r;
}
var kie = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, Gie = /\\(\\)?/g, Uie = Wie(function(e) {
  var r = [];
  return e.charCodeAt(0) === 46 && r.push(""), e.replace(kie, function(t, n, i, o) {
    r.push(i ? o.replace(Gie, "$1") : n || t);
  }), r;
}), Yie = Uie;
function Xie(e) {
  return e == null ? "" : AL(e);
}
function gh(e, r) {
  return Er(e) ? e : Qg(e, r) ? [e] : Yie(Xie(e));
}
var Vie = 1 / 0;
function gu(e) {
  if (typeof e == "string" || ch(e))
    return e;
  var r = e + "";
  return r == "0" && 1 / e == -Vie ? "-0" : r;
}
function e1(e, r) {
  r = gh(r, e);
  for (var t = 0, n = r.length; e != null && t < n; )
    e = e[gu(r[t++])];
  return t && t == n ? e : void 0;
}
function qie(e, r, t) {
  var n = e == null ? void 0 : e1(e, r);
  return n === void 0 ? t : n;
}
function t1(e, r) {
  for (var t = -1, n = r.length, i = e.length; ++t < n; )
    e[i + t] = r[t];
  return e;
}
var ux = On ? On.isConcatSpreadable : void 0;
function Kie(e) {
  return Er(e) || dh(e) || !!(ux && e && e[ux]);
}
function jie(e, r, t, n, i) {
  var o = -1, a = e.length;
  for (t || (t = Kie), i || (i = []); ++o < a; ) {
    var l = e[o];
    t(l) ? t1(i, l) : i[i.length] = l;
  }
  return i;
}
function Zie(e) {
  var r = e == null ? 0 : e.length;
  return r ? jie(e) : [];
}
function Qie(e) {
  return une(pne(e, void 0, Zie), e + "");
}
var Jie = NL(Object.getPrototypeOf, Object), r1 = Jie, eoe = "[object Object]", toe = Function.prototype, roe = Object.prototype, HL = toe.toString, noe = roe.hasOwnProperty, ioe = HL.call(Object);
function ooe(e) {
  if (!Zn(e) || to(e) != eoe)
    return !1;
  var r = r1(e);
  if (r === null)
    return !0;
  var t = noe.call(r, "constructor") && r.constructor;
  return typeof t == "function" && t instanceof t && HL.call(t) == ioe;
}
function aoe(e, r, t) {
  var n = -1, i = e.length;
  r < 0 && (r = -r > i ? 0 : i + r), t = t > i ? i : t, t < 0 && (t += i), i = r > t ? 0 : t - r >>> 0, r >>>= 0;
  for (var o = Array(i); ++n < i; )
    o[n] = e[n + r];
  return o;
}
var loe = "\\ud800-\\udfff", soe = "\\u0300-\\u036f", uoe = "\\ufe20-\\ufe2f", foe = "\\u20d0-\\u20ff", coe = soe + uoe + foe, hoe = "\\ufe0e\\ufe0f", doe = "\\u200d", voe = RegExp("[" + doe + loe + coe + hoe + "]");
function poe(e) {
  return voe.test(e);
}
function goe(e, r, t, n) {
  var i = -1, o = e == null ? 0 : e.length;
  for (n && o && (t = e[++i]); ++i < o; )
    t = r(t, e[i], i, e);
  return t;
}
function yoe() {
  this.__data__ = new ro(), this.size = 0;
}
function Coe(e) {
  var r = this.__data__, t = r.delete(e);
  return this.size = r.size, t;
}
function moe(e) {
  return this.__data__.get(e);
}
function _oe(e) {
  return this.__data__.has(e);
}
var woe = 200;
function xoe(e, r) {
  var t = this.__data__;
  if (t instanceof ro) {
    var n = t.__data__;
    if (!Ks || n.length < woe - 1)
      return n.push([e, r]), this.size = ++t.size, this;
    t = this.__data__ = new no(n);
  }
  return t.set(e, r), this.size = t.size, this;
}
function pi(e) {
  var r = this.__data__ = new ro(e);
  this.size = r.size;
}
pi.prototype.clear = yoe;
pi.prototype.delete = Coe;
pi.prototype.get = moe;
pi.prototype.has = _oe;
pi.prototype.set = xoe;
function Soe(e, r) {
  return e && du(r, pu(r), e);
}
function boe(e, r) {
  return e && du(r, Zg(r), e);
}
var zL = typeof exports == "object" && exports && !exports.nodeType && exports, fx = zL && typeof module == "object" && module && !module.nodeType && module, Toe = fx && fx.exports === zL, cx = Toe ? ti.Buffer : void 0, hx = cx ? cx.allocUnsafe : void 0;
function Eoe(e, r) {
  if (r)
    return e.slice();
  var t = e.length, n = hx ? hx(t) : new e.constructor(t);
  return e.copy(n), n;
}
function WL(e, r) {
  for (var t = -1, n = e == null ? 0 : e.length, i = 0, o = []; ++t < n; ) {
    var a = e[t];
    r(a, t, e) && (o[i++] = a);
  }
  return o;
}
function kL() {
  return [];
}
var Loe = Object.prototype, Aoe = Loe.propertyIsEnumerable, dx = Object.getOwnPropertySymbols, Roe = dx ? function(e) {
  return e == null ? [] : (e = Object(e), WL(dx(e), function(r) {
    return Aoe.call(e, r);
  }));
} : kL, n1 = Roe;
function Ooe(e, r) {
  return du(e, n1(e), r);
}
var Ioe = Object.getOwnPropertySymbols, Moe = Ioe ? function(e) {
  for (var r = []; e; )
    t1(r, n1(e)), e = r1(e);
  return r;
} : kL, GL = Moe;
function Boe(e, r) {
  return du(e, GL(e), r);
}
function UL(e, r, t) {
  var n = r(e);
  return Er(e) ? n : t1(n, t(e));
}
function Np(e) {
  return UL(e, pu, n1);
}
function YL(e) {
  return UL(e, Zg, GL);
}
var Doe = Fa(ti, "DataView"), Hp = Doe, $oe = Fa(ti, "Promise"), zp = $oe, Foe = Fa(ti, "Set"), Wp = Foe, vx = "[object Map]", Poe = "[object Object]", px = "[object Promise]", gx = "[object Set]", yx = "[object WeakMap]", Cx = "[object DataView]", Noe = $a(Hp), Hoe = $a(Ks), zoe = $a(zp), Woe = $a(Wp), koe = $a(Pp), Jo = to;
(Hp && Jo(new Hp(new ArrayBuffer(1))) != Cx || Ks && Jo(new Ks()) != vx || zp && Jo(zp.resolve()) != px || Wp && Jo(new Wp()) != gx || Pp && Jo(new Pp()) != yx) && (Jo = function(e) {
  var r = to(e), t = r == Poe ? e.constructor : void 0, n = t ? $a(t) : "";
  if (n)
    switch (n) {
      case Noe:
        return Cx;
      case Hoe:
        return vx;
      case zoe:
        return px;
      case Woe:
        return gx;
      case koe:
        return yx;
    }
  return r;
});
var Ea = Jo, Goe = Object.prototype, Uoe = Goe.hasOwnProperty;
function Yoe(e) {
  var r = e.length, t = new e.constructor(r);
  return r && typeof e[0] == "string" && Uoe.call(e, "index") && (t.index = e.index, t.input = e.input), t;
}
var Xoe = ti.Uint8Array, mc = Xoe;
function i1(e) {
  var r = new e.constructor(e.byteLength);
  return new mc(r).set(new mc(e)), r;
}
function Voe(e, r) {
  var t = r ? i1(e.buffer) : e.buffer;
  return new e.constructor(t, e.byteOffset, e.byteLength);
}
var qoe = /\w*$/;
function Koe(e) {
  var r = new e.constructor(e.source, qoe.exec(e));
  return r.lastIndex = e.lastIndex, r;
}
var mx = On ? On.prototype : void 0, _x = mx ? mx.valueOf : void 0;
function joe(e) {
  return _x ? Object(_x.call(e)) : {};
}
function Zoe(e, r) {
  var t = r ? i1(e.buffer) : e.buffer;
  return new e.constructor(t, e.byteOffset, e.length);
}
var Qoe = "[object Boolean]", Joe = "[object Date]", eae = "[object Map]", tae = "[object Number]", rae = "[object RegExp]", nae = "[object Set]", iae = "[object String]", oae = "[object Symbol]", aae = "[object ArrayBuffer]", lae = "[object DataView]", sae = "[object Float32Array]", uae = "[object Float64Array]", fae = "[object Int8Array]", cae = "[object Int16Array]", hae = "[object Int32Array]", dae = "[object Uint8Array]", vae = "[object Uint8ClampedArray]", pae = "[object Uint16Array]", gae = "[object Uint32Array]";
function yae(e, r, t) {
  var n = e.constructor;
  switch (r) {
    case aae:
      return i1(e);
    case Qoe:
    case Joe:
      return new n(+e);
    case lae:
      return Voe(e, t);
    case sae:
    case uae:
    case fae:
    case cae:
    case hae:
    case dae:
    case vae:
    case pae:
    case gae:
      return Zoe(e, t);
    case eae:
      return new n();
    case tae:
    case iae:
      return new n(e);
    case rae:
      return Koe(e);
    case nae:
      return new n();
    case oae:
      return joe(e);
  }
}
function Cae(e) {
  return typeof e.constructor == "function" && !hh(e) ? Zre(r1(e)) : {};
}
var mae = "[object Map]";
function _ae(e) {
  return Zn(e) && Ea(e) == mae;
}
var wx = wl && wl.isMap, wae = wx ? qg(wx) : _ae, xae = wae, Sae = "[object Set]";
function bae(e) {
  return Zn(e) && Ea(e) == Sae;
}
var xx = wl && wl.isSet, Tae = xx ? qg(xx) : bae, Eae = Tae, Lae = 1, Aae = 2, Rae = 4, XL = "[object Arguments]", Oae = "[object Array]", Iae = "[object Boolean]", Mae = "[object Date]", Bae = "[object Error]", VL = "[object Function]", Dae = "[object GeneratorFunction]", $ae = "[object Map]", Fae = "[object Number]", qL = "[object Object]", Pae = "[object RegExp]", Nae = "[object Set]", Hae = "[object String]", zae = "[object Symbol]", Wae = "[object WeakMap]", kae = "[object ArrayBuffer]", Gae = "[object DataView]", Uae = "[object Float32Array]", Yae = "[object Float64Array]", Xae = "[object Int8Array]", Vae = "[object Int16Array]", qae = "[object Int32Array]", Kae = "[object Uint8Array]", jae = "[object Uint8ClampedArray]", Zae = "[object Uint16Array]", Qae = "[object Uint32Array]", Ct = {};
Ct[XL] = Ct[Oae] = Ct[kae] = Ct[Gae] = Ct[Iae] = Ct[Mae] = Ct[Uae] = Ct[Yae] = Ct[Xae] = Ct[Vae] = Ct[qae] = Ct[$ae] = Ct[Fae] = Ct[qL] = Ct[Pae] = Ct[Nae] = Ct[Hae] = Ct[zae] = Ct[Kae] = Ct[jae] = Ct[Zae] = Ct[Qae] = !0;
Ct[Bae] = Ct[VL] = Ct[Wae] = !1;
function ms(e, r, t, n, i, o) {
  var a, l = r & Lae, s = r & Aae, f = r & Rae;
  if (t && (a = i ? t(e, n, i, o) : t(e)), a !== void 0)
    return a;
  if (!Yi(e))
    return e;
  var h = Er(e);
  if (h) {
    if (a = Yoe(e), !l)
      return Jre(e, a);
  } else {
    var d = Ea(e), v = d == VL || d == Dae;
    if (Vs(e))
      return Eoe(e, l);
    if (d == qL || d == XL || v && !i) {
      if (a = s || v ? {} : Cae(e), !l)
        return s ? Boe(e, boe(a, e)) : Ooe(e, Soe(a, e));
    } else {
      if (!Ct[d])
        return i ? e : {};
      a = yae(e, d, l);
    }
  }
  o || (o = new pi());
  var g = o.get(e);
  if (g)
    return g;
  o.set(e, a), Eae(e) ? e.forEach(function(_) {
    a.add(ms(_, r, t, _, e, o));
  }) : xae(e) && e.forEach(function(_, w) {
    a.set(w, ms(_, r, t, w, e, o));
  });
  var y = f ? s ? YL : Np : s ? Zg : pu, C = h ? void 0 : y(e);
  return fne(C || e, function(_, w) {
    C && (w = _, _ = e[w]), BL(a, w, ms(_, r, t, w, e, o));
  }), a;
}
var Jae = 4;
function ele(e) {
  return ms(e, Jae);
}
var tle = "__lodash_hash_undefined__";
function rle(e) {
  return this.__data__.set(e, tle), this;
}
function nle(e) {
  return this.__data__.has(e);
}
function _c(e) {
  var r = -1, t = e == null ? 0 : e.length;
  for (this.__data__ = new no(); ++r < t; )
    this.add(e[r]);
}
_c.prototype.add = _c.prototype.push = rle;
_c.prototype.has = nle;
function ile(e, r) {
  for (var t = -1, n = e == null ? 0 : e.length; ++t < n; )
    if (r(e[t], t, e))
      return !0;
  return !1;
}
function ole(e, r) {
  return e.has(r);
}
var ale = 1, lle = 2;
function KL(e, r, t, n, i, o) {
  var a = t & ale, l = e.length, s = r.length;
  if (l != s && !(a && s > l))
    return !1;
  var f = o.get(e), h = o.get(r);
  if (f && h)
    return f == r && h == e;
  var d = -1, v = !0, g = t & lle ? new _c() : void 0;
  for (o.set(e, r), o.set(r, e); ++d < l; ) {
    var y = e[d], C = r[d];
    if (n)
      var _ = a ? n(C, y, d, r, e, o) : n(y, C, d, e, r, o);
    if (_ !== void 0) {
      if (_)
        continue;
      v = !1;
      break;
    }
    if (g) {
      if (!ile(r, function(w, x) {
        if (!ole(g, x) && (y === w || i(y, w, t, n, o)))
          return g.push(x);
      })) {
        v = !1;
        break;
      }
    } else if (!(y === C || i(y, C, t, n, o))) {
      v = !1;
      break;
    }
  }
  return o.delete(e), o.delete(r), v;
}
function sle(e) {
  var r = -1, t = Array(e.size);
  return e.forEach(function(n, i) {
    t[++r] = [i, n];
  }), t;
}
function ule(e) {
  var r = -1, t = Array(e.size);
  return e.forEach(function(n) {
    t[++r] = n;
  }), t;
}
var fle = 1, cle = 2, hle = "[object Boolean]", dle = "[object Date]", vle = "[object Error]", ple = "[object Map]", gle = "[object Number]", yle = "[object RegExp]", Cle = "[object Set]", mle = "[object String]", _le = "[object Symbol]", wle = "[object ArrayBuffer]", xle = "[object DataView]", Sx = On ? On.prototype : void 0, dv = Sx ? Sx.valueOf : void 0;
function Sle(e, r, t, n, i, o, a) {
  switch (t) {
    case xle:
      if (e.byteLength != r.byteLength || e.byteOffset != r.byteOffset)
        return !1;
      e = e.buffer, r = r.buffer;
    case wle:
      return !(e.byteLength != r.byteLength || !o(new mc(e), new mc(r)));
    case hle:
    case dle:
    case gle:
      return Xg(+e, +r);
    case vle:
      return e.name == r.name && e.message == r.message;
    case yle:
    case mle:
      return e == r + "";
    case ple:
      var l = sle;
    case Cle:
      var s = n & fle;
      if (l || (l = ule), e.size != r.size && !s)
        return !1;
      var f = a.get(e);
      if (f)
        return f == r;
      n |= cle, a.set(e, r);
      var h = KL(l(e), l(r), n, i, o, a);
      return a.delete(e), h;
    case _le:
      if (dv)
        return dv.call(e) == dv.call(r);
  }
  return !1;
}
var ble = 1, Tle = Object.prototype, Ele = Tle.hasOwnProperty;
function Lle(e, r, t, n, i, o) {
  var a = t & ble, l = Np(e), s = l.length, f = Np(r), h = f.length;
  if (s != h && !a)
    return !1;
  for (var d = s; d--; ) {
    var v = l[d];
    if (!(a ? v in r : Ele.call(r, v)))
      return !1;
  }
  var g = o.get(e), y = o.get(r);
  if (g && y)
    return g == r && y == e;
  var C = !0;
  o.set(e, r), o.set(r, e);
  for (var _ = a; ++d < s; ) {
    v = l[d];
    var w = e[v], x = r[v];
    if (n)
      var S = a ? n(x, w, v, r, e, o) : n(w, x, v, e, r, o);
    if (!(S === void 0 ? w === x || i(w, x, t, n, o) : S)) {
      C = !1;
      break;
    }
    _ || (_ = v == "constructor");
  }
  if (C && !_) {
    var T = e.constructor, R = r.constructor;
    T != R && "constructor" in e && "constructor" in r && !(typeof T == "function" && T instanceof T && typeof R == "function" && R instanceof R) && (C = !1);
  }
  return o.delete(e), o.delete(r), C;
}
var Ale = 1, bx = "[object Arguments]", Tx = "[object Array]", Ef = "[object Object]", Rle = Object.prototype, Ex = Rle.hasOwnProperty;
function Ole(e, r, t, n, i, o) {
  var a = Er(e), l = Er(r), s = a ? Tx : Ea(e), f = l ? Tx : Ea(r);
  s = s == bx ? Ef : s, f = f == bx ? Ef : f;
  var h = s == Ef, d = f == Ef, v = s == f;
  if (v && Vs(e)) {
    if (!Vs(r))
      return !1;
    a = !0, h = !1;
  }
  if (v && !h)
    return o || (o = new pi()), a || Kg(e) ? KL(e, r, t, n, i, o) : Sle(e, r, s, t, n, i, o);
  if (!(t & Ale)) {
    var g = h && Ex.call(e, "__wrapped__"), y = d && Ex.call(r, "__wrapped__");
    if (g || y) {
      var C = g ? e.value() : e, _ = y ? r.value() : r;
      return o || (o = new pi()), i(C, _, t, n, o);
    }
  }
  return v ? (o || (o = new pi()), Lle(e, r, t, n, i, o)) : !1;
}
function o1(e, r, t, n, i) {
  return e === r ? !0 : e == null || r == null || !Zn(e) && !Zn(r) ? e !== e && r !== r : Ole(e, r, t, n, o1, i);
}
var Ile = 1, Mle = 2;
function Ble(e, r, t, n) {
  var i = t.length, o = i;
  if (e == null)
    return !o;
  for (e = Object(e); i--; ) {
    var a = t[i];
    if (a[2] ? a[1] !== e[a[0]] : !(a[0] in e))
      return !1;
  }
  for (; ++i < o; ) {
    a = t[i];
    var l = a[0], s = e[l], f = a[1];
    if (a[2]) {
      if (s === void 0 && !(l in e))
        return !1;
    } else {
      var h = new pi(), d;
      if (!(d === void 0 ? o1(f, s, Ile | Mle, n, h) : d))
        return !1;
    }
  }
  return !0;
}
function jL(e) {
  return e === e && !Yi(e);
}
function Dle(e) {
  for (var r = pu(e), t = r.length; t--; ) {
    var n = r[t], i = e[n];
    r[t] = [n, i, jL(i)];
  }
  return r;
}
function ZL(e, r) {
  return function(t) {
    return t == null ? !1 : t[e] === r && (r !== void 0 || e in Object(t));
  };
}
function $le(e) {
  var r = Dle(e);
  return r.length == 1 && r[0][2] ? ZL(r[0][0], r[0][1]) : function(t) {
    return t === e || Ble(t, e, r);
  };
}
function Fle(e, r) {
  return e != null && r in Object(e);
}
function Ple(e, r, t) {
  r = gh(r, e);
  for (var n = -1, i = r.length, o = !1; ++n < i; ) {
    var a = gu(r[n]);
    if (!(o = e != null && t(e, a)))
      break;
    e = e[a];
  }
  return o || ++n != i ? o : (i = e == null ? 0 : e.length, !!i && Vg(i) && IL(a, i) && (Er(e) || dh(e)));
}
function Nle(e, r) {
  return e != null && Ple(e, r, Fle);
}
var Hle = 1, zle = 2;
function Wle(e, r) {
  return Qg(e) && jL(r) ? ZL(gu(e), r) : function(t) {
    var n = qie(t, e);
    return n === void 0 && n === r ? Nle(t, e) : o1(r, n, Hle | zle);
  };
}
function QL(e) {
  return function(r) {
    return r == null ? void 0 : r[e];
  };
}
function kle(e) {
  return function(r) {
    return e1(r, e);
  };
}
function Gle(e) {
  return Qg(e) ? QL(gu(e)) : kle(e);
}
function JL(e) {
  return typeof e == "function" ? e : e == null ? RL : typeof e == "object" ? Er(e) ? Wle(e[0], e[1]) : $le(e) : Gle(e);
}
function Ule(e) {
  return function(r, t, n) {
    for (var i = -1, o = Object(r), a = n(r), l = a.length; l--; ) {
      var s = a[++i];
      if (t(o[s], s, o) === !1)
        break;
    }
    return r;
  };
}
var Yle = Ule(), Xle = Yle;
function Vle(e, r) {
  return e && Xle(e, r, pu);
}
function qle(e, r) {
  return function(t, n) {
    if (t == null)
      return t;
    if (!vu(t))
      return e(t, n);
    for (var i = t.length, o = -1, a = Object(t); ++o < i && n(a[o], o, a) !== !1; )
      ;
    return t;
  };
}
var Kle = qle(Vle), eA = Kle, jle = function() {
  return ti.Date.now();
}, vv = jle, Zle = "Expected a function", Qle = Math.max, Jle = Math.min;
function ese(e, r, t) {
  var n, i, o, a, l, s, f = 0, h = !1, d = !1, v = !0;
  if (typeof e != "function")
    throw new TypeError(Zle);
  r = tx(r) || 0, Yi(t) && (h = !!t.leading, d = "maxWait" in t, o = d ? Qle(tx(t.maxWait) || 0, r) : o, v = "trailing" in t ? !!t.trailing : v);
  function g(B) {
    var $ = n, N = i;
    return n = i = void 0, f = B, a = e.apply(N, $), a;
  }
  function y(B) {
    return f = B, l = setTimeout(w, r), h ? g(B) : a;
  }
  function C(B) {
    var $ = B - s, N = B - f, z = r - $;
    return d ? Jle(z, o - N) : z;
  }
  function _(B) {
    var $ = B - s, N = B - f;
    return s === void 0 || $ >= r || $ < 0 || d && N >= o;
  }
  function w() {
    var B = vv();
    if (_(B))
      return x(B);
    l = setTimeout(w, C(B));
  }
  function x(B) {
    return l = void 0, v && n ? g(B) : (n = i = void 0, a);
  }
  function S() {
    l !== void 0 && clearTimeout(l), f = 0, n = s = i = l = void 0;
  }
  function T() {
    return l === void 0 ? a : x(vv());
  }
  function R() {
    var B = vv(), $ = _(B);
    if (n = arguments, i = this, s = B, $) {
      if (l === void 0)
        return y(s);
      if (d)
        return clearTimeout(l), l = setTimeout(w, r), g(s);
    }
    return l === void 0 && (l = setTimeout(w, r)), a;
  }
  return R.cancel = S, R.flush = T, R;
}
function tse(e) {
  var r = e == null ? 0 : e.length;
  return r ? e[r - 1] : void 0;
}
function rse(e, r) {
  var t = [];
  return eA(e, function(n, i, o) {
    r(n, i, o) && t.push(n);
  }), t;
}
function nse(e, r) {
  var t = Er(e) ? WL : rse;
  return t(e, JL(r));
}
var ise = "[object String]";
function ose(e) {
  return typeof e == "string" || !Er(e) && Zn(e) && to(e) == ise;
}
function ase(e, r) {
  return r.length < 2 ? e : e1(e, aoe(r, 0, -1));
}
var lse = "[object Boolean]";
function kp(e) {
  return e === !0 || e === !1 || Zn(e) && to(e) == lse;
}
var sse = "[object Map]", use = "[object Set]", fse = Object.prototype, cse = fse.hasOwnProperty;
function Ui(e) {
  if (e == null)
    return !0;
  if (vu(e) && (Er(e) || typeof e == "string" || typeof e.splice == "function" || Vs(e) || Kg(e) || dh(e)))
    return !e.length;
  var r = Ea(e);
  if (r == sse || r == use)
    return !e.size;
  if (hh(e))
    return !jg(e).length;
  for (var t in e)
    if (cse.call(e, t))
      return !1;
  return !0;
}
function hse(e, r) {
  return r = gh(r, e), e = ase(e, r), e == null || delete e[gu(tse(r))];
}
function dse(e) {
  return ooe(e) ? void 0 : e;
}
var vse = 1, pse = 2, gse = 4, yse = Qie(function(e, r) {
  var t = {};
  if (e == null)
    return t;
  var n = !1;
  r = LL(r, function(o) {
    return o = gh(o, e), n || (n = o.length > 1), o;
  }), du(e, YL(e), t), n && (t = ms(t, vse | pse | gse, dse));
  for (var i = r.length; i--; )
    hse(t, r[i]);
  return t;
}), Cse = yse, mse = QL("length"), _se = mse, tA = "\\ud800-\\udfff", wse = "\\u0300-\\u036f", xse = "\\ufe20-\\ufe2f", Sse = "\\u20d0-\\u20ff", bse = wse + xse + Sse, Tse = "\\ufe0e\\ufe0f", Ese = "[" + tA + "]", Gp = "[" + bse + "]", Up = "\\ud83c[\\udffb-\\udfff]", Lse = "(?:" + Gp + "|" + Up + ")", rA = "[^" + tA + "]", nA = "(?:\\ud83c[\\udde6-\\uddff]){2}", iA = "[\\ud800-\\udbff][\\udc00-\\udfff]", Ase = "\\u200d", oA = Lse + "?", aA = "[" + Tse + "]?", Rse = "(?:" + Ase + "(?:" + [rA, nA, iA].join("|") + ")" + aA + oA + ")*", Ose = aA + oA + Rse, Ise = "(?:" + [rA + Gp + "?", Gp, nA, iA, Ese].join("|") + ")", Lx = RegExp(Up + "(?=" + Up + ")|" + Ise + Ose, "g");
function Mse(e) {
  for (var r = Lx.lastIndex = 0; Lx.test(e); )
    ++r;
  return r;
}
function Bse(e) {
  return poe(e) ? Mse(e) : _se(e);
}
function Dse(e, r, t, n, i) {
  return i(e, function(o, a, l) {
    t = n ? (n = !1, o) : r(t, o, a, l);
  }), t;
}
function $se(e, r, t) {
  var n = Er(e) ? goe : Dse, i = arguments.length < 3;
  return n(e, JL(r), t, i, eA);
}
var Fse = "[object Map]", Pse = "[object Set]";
function Nse(e) {
  if (e == null)
    return 0;
  if (vu(e))
    return ose(e) ? Bse(e) : e.length;
  var r = Ea(e);
  return r == Fse || r == Pse ? e.size : jg(e).length;
}
const Hse = (e, r) => {
  var t, n, i;
  return kp(r) ? {
    container: e,
    adaptiveWidth: !0,
    adaptiveHeight: !1
  } : {
    container: ((t = r == null ? void 0 : r.getContainer) == null ? void 0 : t.call(r)) || e,
    adaptiveWidth: (n = r == null ? void 0 : r.width) != null ? n : !0,
    adaptiveHeight: (i = r == null ? void 0 : r.height) != null ? i : !0
  };
}, zse = (e) => {
  let r = !0;
  const { s2: t, adaptive: n, container: i, wrapper: o } = e, {
    container: a,
    adaptiveWidth: l,
    adaptiveHeight: s
  } = Hse(o, n);
  if (!a || !i || !n || !t)
    return;
  const f = (g, y) => {
    t == null || t.changeSheetSize(g, y), t == null || t.render(!1);
  }, h = ese(f, are), d = () => {
    const { clientWidth: g, clientHeight: y } = i, C = l ? Math.floor(g ?? t.options.width) : t.options.width, _ = s ? Math.floor(y ?? t.options.height) : t.options.height;
    if (!(!l && !s)) {
      if (r) {
        f(C, _), r = !1;
        return;
      }
      h(C, _);
    }
  }, v = new ResizeObserver(
    ([g] = []) => {
      g && d();
    }
  );
  return v.observe(a, {
    box: "border-box"
  }), () => {
    v.unobserve(a);
  };
}, lA = (e, r) => {
  const t = e.store.get(
    "drillDownDataCache",
    []
  ), n = t == null ? void 0 : t.find((i) => i.rowId === r.id);
  return {
    drillDownDataCache: t,
    drillDownCurrentCache: n
  };
}, Wse = (e) => {
  const { meta: r, event: t, callback: n } = e, { spreadsheet: i } = r;
  i.store.set("drillDownNode", r);
  const { drillDownDataCache: o, drillDownCurrentCache: a } = lA(
    i,
    r
  ), l = a != null && a.drillField ? [a == null ? void 0 : a.drillField] : [], s = [];
  o.forEach((f) => {
    r.id.includes(f.rowId) && r.id !== f.rowId && s.push(f.drillField);
  }), t && i.emit(I.GLOBAL_ACTION_ICON_CLICK, t), n({
    sheetInstance: i,
    cacheDrillFields: l,
    disabledFields: s,
    event: t
  });
}, kse = (e) => {
  var r;
  const t = e.spreadsheet, { fields: n } = t.dataCfg, i = ((r = n.rows) == null ? void 0 : r.length) - 1, o = Ui(n.values) ? !0 : t.isValueInCols();
  return i <= e.level && t.isHierarchyTreeType() && o && !e.isGrandTotals;
}, Gse = (e, r, t) => {
  var n;
  const i = (n = e == null ? void 0 : e.headerActionIcons) != null && n.length ? [...e.headerActionIcons] : [];
  if (!Ui(r)) {
    const o = {
      belongsCell: "rowCell",
      iconNames: ["DrillDownIcon"],
      defaultHide: !0,
      displayCondition: r.displayCondition || kse,
      action: (a) => {
        const { iconName: l, meta: s, event: f } = a;
        l === "DrillDownIcon" && (s.spreadsheet.store.set("drillDownNode", s), Wse({
          meta: s,
          event: f,
          callback: t
        }));
      }
    };
    i.push(o);
  }
  return {
    ...e,
    headerActionIcons: i
  };
}, Use = (e) => {
  const { fetchData: r, spreadsheet: t, drillFields: n, drillItemsNum: i = -1 } = e;
  t.store.set("drillItemsNum", i);
  const o = t.store.get("drillDownNode"), { drillDownDataCache: a, drillDownCurrentCache: l } = lA(
    t,
    o
  );
  let s = ele(a);
  l && (s = nse(
    a,
    (f) => f.rowId !== o.id
  )), r && r(o, n).then((f) => {
    const { drillData: h, drillField: d } = f;
    if (t.dataSet.transformDrillDownData(
      d,
      h,
      o
    ), !Ui(h)) {
      const v = o.level + 1, g = {
        rowId: o.id,
        drillLevel: v,
        drillData: h,
        drillField: d
      };
      s.push(g), t.store.set("drillDownDataCache", s);
    }
    t.interaction.reset(), t.render(!1);
  });
};
wj(ire);
const a1 = (e) => {
  const r = jp();
  return e({
    get instance() {
      var t;
      return (t = r.value) == null ? void 0 : t.instance;
    }
  }), r;
};
var Or = (e, r) => {
  const t = e.__vccOpts || e;
  for (const [n, i] of r)
    t[n] = i;
  return t;
};
const Yse = Lr({
  name: "TooltipDetail",
  props: ["list"],
  setup() {
    return {
      TOOLTIP_PREFIX_CLS: eo
    };
  }
});
function Xse(e, r, t, n, i, o) {
  return fe(!0), Ke(Hr, null, Wi(e.list, (a, l) => (fe(), Ke("div", {
    key: `${a.value}-${l}`,
    class: je(`${e.TOOLTIP_PREFIX_CLS}-detail-list`)
  }, [
    we("div", {
      class: je(`${e.TOOLTIP_PREFIX_CLS}-detail-item`)
    }, [
      we("span", {
        class: je(`${e.TOOLTIP_PREFIX_CLS}-detail-item-key`)
      }, Qe(a.name), 3),
      we("span", {
        class: je(`${e.TOOLTIP_PREFIX_CLS}-detail-item-val ${e.TOOLTIP_PREFIX_CLS}-highlight`)
      }, Qe(a.value), 3)
    ], 2)
  ], 2))), 128);
}
var Vse = /* @__PURE__ */ Or(Yse, [["render", Xse]]);
const qse = Lr({
  name: "TooltipHeadInfo",
  props: ["rows", "cols"],
  setup() {
    return {
      TOOLTIP_PREFIX_CLS: eo
    };
  },
  components: {}
}), Kse = { key: 0 };
function jse(e, r, t, n, i, o) {
  var a, l, s, f;
  return (a = e.cols) != null && a.length || (l = e.rows) != null && l.length ? (fe(), Ke("div", {
    key: 0,
    class: je(`${e.TOOLTIP_PREFIX_CLS}-head-info-list`)
  }, [
    (fe(!0), Ke(Hr, null, Wi(e.cols, (h) => (fe(), Ke("span", {
      key: h.value
    }, Qe(h.value) + "/", 1))), 128)),
    ((s = e.cols) == null ? void 0 : s.length) > 0 && ((f = e.rows) == null ? void 0 : f.length) > 0 ? (fe(), Ke("span", Kse, "，")) : xr("", !0),
    (fe(!0), Ke(Hr, null, Wi(e.rows, (h) => (fe(), Ke("span", {
      key: h.value
    }, Qe(h.value) + "/", 1))), 128))
  ], 2)) : xr("", !0);
}
var Zse = /* @__PURE__ */ Or(qse, [["render", jse]]);
const Qse = Lr({
  name: "TooltipInfos",
  props: ["infos"],
  setup() {
    return {
      TOOLTIP_PREFIX_CLS: eo
    };
  },
  components: {}
});
function Jse(e, r, t, n, i, o) {
  return fe(), Ke("div", {
    class: je(`${e.TOOLTIP_PREFIX_CLS}-infos`)
  }, Qe(e.infos), 3);
}
var eue = /* @__PURE__ */ Or(Qse, [["render", Jse]]);
const tue = Lr({
  name: "TooltipSimpleTips",
  props: ["name", "tips"],
  setup() {
    return {
      TOOLTIP_PREFIX_CLS: eo
    };
  },
  components: {}
});
function rue(e, r, t, n, i, o) {
  return fe(), Ke(Hr, null, [
    e.name ? (fe(), Ke("div", {
      key: 0,
      class: je(`${e.TOOLTIP_PREFIX_CLS}-name`)
    }, Qe(e.name), 3)) : xr("", !0),
    e.tips ? (fe(), Ke("div", {
      key: 1,
      class: je(`${e.TOOLTIP_PREFIX_CLS}-tips`)
    }, Qe(e.tips), 3)) : xr("", !0)
  ], 64);
}
var nue = /* @__PURE__ */ Or(tue, [["render", rue]]);
const iue = Lr({
  name: "TooltipSummary",
  props: ["summaries"],
  setup(e) {
    return {
      summaryInfo: Mo(
        () => $se(
          e.summaries,
          (t, n) => (t.count += Nse(n == null ? void 0 : n.selectedData), (n.value || n.name) && t.summaries.push(n), t),
          { count: 0, summaries: [] }
        )
      ),
      i18n: Et,
      TOOLTIP_PREFIX_CLS: eo
    };
  },
  components: {}
});
function oue(e, r, t, n, i, o) {
  return fe(), Ke("div", {
    class: je(`${e.TOOLTIP_PREFIX_CLS}-summary`)
  }, [
    we("div", {
      class: je(`${e.TOOLTIP_PREFIX_CLS}-summary-item`)
    }, [
      we("span", {
        class: je(`${e.TOOLTIP_PREFIX_CLS}-selected`)
      }, Qe(e.summaryInfo.count) + " " + Qe(e.i18n("项")), 3),
      _n(" " + Qe(e.i18n("已选择")), 1)
    ], 2),
    (fe(!0), Ke(Hr, null, Wi(e.summaryInfo.summaries, (a) => (fe(), Ke("div", {
      key: `${a.name}-${a.value}`,
      class: je(`${e.TOOLTIP_PREFIX_CLS}-summary-item`)
    }, [
      we("span", {
        class: je(`${e.TOOLTIP_PREFIX_CLS}-summary-key`)
      }, Qe(a.name) + " " + Qe(e.i18n("总和")), 3),
      we("span", {
        class: je(`${e.TOOLTIP_PREFIX_CLS}-summary-val ${e.TOOLTIP_PREFIX_CLS}-bold`)
      }, Qe(a.value), 3)
    ], 2))), 128))
  ], 2);
}
var aue = /* @__PURE__ */ Or(iue, [["render", oue]]);
const lue = Lr({
  name: "TooltipOperatorTitle",
  props: ["menu"],
  setup(e) {
    const r = Mo(() => tE(e.menu.icon));
    return {
      TOOLTIP_PREFIX_CLS: eo,
      icon: r
    };
  }
}), sue = ["innerHTML"];
function uue(e, r, t, n, i, o) {
  return fe(), Ke("span", null, [
    e.icon ? (fe(), Ke("span", {
      key: 0,
      innerHTML: e.icon,
      class: je(`${e.TOOLTIP_PREFIX_CLS}-operator-icon`)
    }, null, 10, sue)) : xr("", !0),
    we("span", {
      class: je(`${e.TOOLTIP_PREFIX_CLS}-operator-text`)
    }, Qe(e.menu.text), 3)
  ]);
}
var sA = /* @__PURE__ */ Or(lue, [["render", uue]]);
const fue = Lr({
  name: "TooltipOperatorMenu",
  props: ["menu", "cell"],
  setup(e) {
    return {
      onMenuTitleClick: () => {
        var t, n;
        (n = (t = e.menu).onClick) == null || n.call(t, e.cell);
      },
      isEmpty: Ui,
      TOOLTIP_PREFIX_CLS: eo
    };
  },
  components: {
    MenuItem: zf.Item,
    SubMenu: zf.SubMenu,
    TooltipOperatorTitle: sA
  }
});
function cue(e, r, t, n, i, o) {
  const a = qe("TooltipOperatorTitle"), l = qe("TooltipOperatorMenu"), s = qe("MenuItem"), f = qe("SubMenu");
  return fe(), Ke(Hr, null, [
    e.isEmpty(e.menu.children) ? xr("", !0) : (fe(), mt(f, {
      key: e.menu.key,
      popupClassName: `${e.TOOLTIP_PREFIX_CLS}-operator-submenu-popup`,
      onTitleClick: e.onMenuTitleClick
    }, {
      title: $t(() => [
        He(a, {
          menu: e.menu,
          onClick: e.onMenuTitleClick
        }, null, 8, ["menu", "onClick"])
      ]),
      default: $t(() => [
        (fe(!0), Ke(Hr, null, Wi(e.menu.children, (h) => {
          var d;
          return fe(), Ke(Hr, {
            key: h.key
          }, [
            (d = h == null ? void 0 : h.children) != null && d.length ? (fe(), mt(l, {
              key: 0,
              menu: h,
              cell: e.cell
            }, null, 8, ["menu", "cell"])) : (fe(), mt(s, {
              title: h.text,
              key: h.key
            }, {
              default: $t(() => [
                He(a, {
                  menu: h,
                  onClick: e.onMenuTitleClick
                }, null, 8, ["menu", "onClick"])
              ]),
              _: 2
            }, 1032, ["title"]))
          ], 64);
        }), 128))
      ]),
      _: 1
    }, 8, ["popupClassName", "onTitleClick"])),
    e.isEmpty(e.menu.children) ? (fe(), mt(s, {
      title: e.menu.text,
      key: e.menu.key
    }, {
      default: $t(() => [
        He(a, {
          menu: e.menu,
          onClick: e.onMenuTitleClick
        }, null, 8, ["menu", "onClick"])
      ]),
      _: 1
    }, 8, ["title"])) : xr("", !0)
  ], 64);
}
var hue = /* @__PURE__ */ Or(fue, [["render", cue]]);
const due = Lr({
  name: "TooltipOperator",
  props: [
    "menus",
    "onlyMenu",
    "onClick",
    "cell"
  ],
  setup(e, { emit: r }) {
    return {
      TOOLTIP_PREFIX_CLS: eo,
      onMenuClick: (...n) => {
        r("click", ...n);
      }
    };
  },
  components: {
    Menu: zf,
    Dropdown: r5,
    TooltipOperatorTitle: sA,
    TooltipOperatorMenu: hue
  }
});
function vue(e, r, t, n, i, o) {
  const a = qe("TooltipOperatorMenu"), l = qe("Menu"), s = qe("TooltipOperatorTitle"), f = qe("Dropdown");
  return fe(), Ke("div", {
    class: je(`${e.TOOLTIP_PREFIX_CLS}-operator`)
  }, [
    e.onlyMenu ? (fe(), mt(l, {
      key: 0,
      class: je(`${e.TOOLTIP_PREFIX_CLS}-operator-menus`),
      onClick: e.onMenuClick
    }, {
      default: $t(() => [
        (fe(!0), Ke(Hr, null, Wi(e.menus, (h) => (fe(), mt(a, {
          key: h.key,
          menu: h,
          cell: e.cell
        }, null, 8, ["menu", "cell"]))), 128))
      ]),
      _: 1
    }, 8, ["class", "onClick"])) : (fe(!0), Ke(Hr, { key: 1 }, Wi(e.menus, (h) => (fe(), mt(f, {
      key: h.key,
      class: je(`${e.TOOLTIP_PREFIX_CLS}-operator-dropdown`)
    }, {
      overlay: $t(() => {
        var d;
        return [
          (d = h == null ? void 0 : h.children) != null && d.length ? (fe(), mt(l, {
            key: 0,
            class: je(`${e.TOOLTIP_PREFIX_CLS}-operator-menus`),
            onClick: e.onMenuClick
          }, {
            default: $t(() => [
              (fe(!0), Ke(Hr, null, Wi(e.menus, (v) => (fe(), mt(a, {
                key: v.key,
                menu: v,
                cell: e.cell
              }, null, 8, ["menu", "cell"]))), 128))
            ]),
            _: 2
          }, 1032, ["class", "onClick"])) : xr("", !0)
        ];
      }),
      default: $t(() => [
        He(s, {
          menu: h,
          onClick: (d) => {
            var v;
            return (v = h.onClick) == null ? void 0 : v.call(h, e.cell);
          }
        }, null, 8, ["menu", "onClick"])
      ]),
      _: 2
    }, 1032, ["class"]))), 128))
  ], 2);
}
var pue = /* @__PURE__ */ Or(due, [["render", vue]]);
const gue = Lr({
  name: "TooltipComponent",
  props: [
    "data",
    "options",
    "cell",
    "position",
    "event",
    "content"
  ],
  setup(e) {
    const { operator: r, onlyMenu: t } = rL(e.options);
    return {
      operator: r,
      onlyMenu: t
    };
  },
  components: {
    TooltipDetail: Vse,
    TooltipHeadInfo: Zse,
    TooltipInfos: eue,
    TooltipSimpleTips: nue,
    TooltipSummary: aue,
    TooltipOperator: pue
  }
});
function yue(e, r, t, n, i, o) {
  var a, l, s, f, h, d, v, g, y, C, _, w, x, S, T, R;
  const B = qe("TooltipOperator"), $ = qe("TooltipSimpleTips"), N = qe("TooltipSummary"), z = qe("TooltipHeadInfo"), V = qe("TooltipDetail"), X = qe("TooltipInfos");
  return e.onlyMenu ? (fe(), mt(B, {
    key: 0,
    menus: ((a = e.operator) == null ? void 0 : a.menus) || [],
    onlyMenu: !0,
    cell: e.cell,
    onClick: (l = e.operator) == null ? void 0 : l.onClick
  }, null, 8, ["menus", "cell", "onClick"])) : (fe(), Ke(Hr, { key: 1 }, [
    He(B, {
      menus: ((s = e.operator) == null ? void 0 : s.menus) || [],
      onlyMenu: !1,
      cell: e.cell,
      onClick: (f = e.operator) == null ? void 0 : f.onClick
    }, null, 8, ["menus", "cell", "onClick"]),
    e.content ? Zx(e.$slots, "content", { key: 0 }) : (fe(), Ke(Hr, { key: 1 }, [
      He($, {
        name: (h = e.data) == null ? void 0 : h.name,
        tips: (d = e.data) == null ? void 0 : d.tips
      }, null, 8, ["name", "tips"]),
      (g = (v = e.data) == null ? void 0 : v.summaries) != null && g.length ? (fe(), mt(N, {
        key: 0,
        summaries: (y = e.data) == null ? void 0 : y.summaries
      }, null, 8, ["summaries"])) : xr("", !0),
      He(z, {
        rows: ((_ = (C = e.data) == null ? void 0 : C.headInfo) == null ? void 0 : _.rows) || [],
        cols: ((x = (w = e.data) == null ? void 0 : w.headInfo) == null ? void 0 : x.cols) || []
      }, null, 8, ["rows", "cols"]),
      He(V, {
        list: ((S = e.data) == null ? void 0 : S.details) || []
      }, null, 8, ["list"]),
      (T = e.data) != null && T.infos ? (fe(), mt(X, {
        key: 1,
        infos: (R = e.data) == null ? void 0 : R.infos
      }, null, 8, ["infos"])) : xr("", !0)
    ], 64))
  ], 64));
}
var Cue = /* @__PURE__ */ Or(gue, [["render", yue]]);
class mue extends Fp {
  constructor(r) {
    super(r);
  }
  renderContent() {
    var r, t;
    const { tooltip: n } = this.spreadsheet.options, i = this.options, o = this.spreadsheet.getCell(
      (r = i.event) == null ? void 0 : r.target
    ), a = (t = i.content) != null ? t : n == null ? void 0 : n.content, l = {
      ...i,
      cell: o,
      content: a
    }, s = He(
      Cue,
      l,
      {
        content: () => a
      }
    );
    zd(null, this.container), zd(s, this.container);
  }
  destroy() {
    super.destroy(), this.container && zd(null, this.container);
  }
}
const Yp = 1, Xp = 10, _ue = (e, r) => {
  var t, n;
  const {
    options: { pagination: i },
    showPagination: o
  } = r, a = Un((t = i == null ? void 0 : i.current) != null ? t : Yp), l = Un((n = i == null ? void 0 : i.pageSize) != null ? n : Xp), s = Un(0), f = (v) => {
    a.value = v;
  }, h = (v) => {
    l.value = v;
  }, d = Mo(() => o && !Ui(i));
  return si([a, l], () => {
    if (!e.value)
      return;
    const v = Ui(i) ? null : {
      current: a.value,
      pageSize: l.value
    };
    e.value.updatePagination(v), e.value.render(!1);
  }), si(
    [() => i, e],
    () => {
      var v, g, y, C, _;
      a.value = (v = i == null ? void 0 : i.current) != null ? v : Yp, l.value = (g = i == null ? void 0 : i.pageSize) != null ? g : Xp, s.value = (_ = (C = (y = e.value) == null ? void 0 : y.facet) == null ? void 0 : C.viewCellHeights.getTotalLength()) != null ? _ : 0;
    },
    {
      immediate: !0
    }
  ), si(e, (v, g, y) => {
    if (!e.value)
      return;
    const C = (_) => {
      Ui(i) || (s.value = _.total);
    };
    e.value.on(I.LAYOUT_PAGINATION, C), y(() => {
      var _;
      (_ = e.value) == null || _.off(I.LAYOUT_PAGINATION, C);
    });
  }), {
    customOptions: Cse(i, ["current", "pageSize", "total"]),
    visible: d,
    current: a,
    pageSize: l,
    total: s,
    change: f,
    showSizeChange: h
  };
}, wue = `${p0}-pagination`, xue = Lr({
  name: "s2-pagination",
  props: {
    current: {
      type: Number,
      default: Yp
    },
    total: {
      type: Number,
      default: 0
    },
    pageSize: {
      type: Number,
      default: Xp
    },
    customOptions: Object
  },
  emits: ["change", "showSizeChange"],
  setup: (e) => ({
    showQuickJumper: Mo(() => e.total / e.pageSize > 5),
    PRE_CLASS: wue,
    i18n: Et
  }),
  components: {
    AntDPagination: n5
  }
});
function Sue(e, r, t, n, i, o) {
  const a = qe("AntDPagination");
  return fe(), Ke("div", {
    class: je(e.PRE_CLASS)
  }, [
    He(a, jx({
      size: "small",
      "default-current": 1,
      showSizeChanger: !0,
      showQuickJumper: e.showQuickJumper
    }, e.customOptions, {
      current: e.current,
      total: e.total,
      pageSize: e.pageSize,
      onShowSizeChange: r[0] || (r[0] = (l, s) => e.$emit("showSizeChange", s)),
      onChange: r[1] || (r[1] = (l) => e.$emit("change", l))
    }), null, 16, ["showQuickJumper", "current", "total", "pageSize"]),
    we("span", {
      class: je(`${e.PRE_CLASS}-count`)
    }, Qe(e.i18n("共计")) + " " + Qe(e.total || " - ") + " " + Qe(e.i18n("条")), 3)
  ], 2);
}
var bue = /* @__PURE__ */ Or(xue, [["render", Sue]]);
const Tue = {
  tooltip: {
    renderTooltip: (e) => new mue(e)
  }
}, Eue = (...e) => sre(Tue, ...e), Ve = (e, r, t, n) => {
  var i;
  const o = (a) => {
    const l = $Q(a);
    r(n, l);
  };
  (i = e.value) == null || i.on(t, o);
}, Se = (e, r, t, n) => {
  var i;
  const o = (a) => {
    r(n, a);
  };
  (i = e.value) == null || i.on(t, o);
}, Lue = (e, r) => {
  qx(() => {
    e.value && (Ve(e, r, I.ROW_CELL_HOVER, "rowCellHover"), Ve(e, r, I.ROW_CELL_CLICK, "rowCellClick"), Ve(
      e,
      r,
      I.ROW_CELL_DOUBLE_CLICK,
      "rowCellDoubleClick"
    ), Ve(
      e,
      r,
      I.ROW_CELL_CONTEXT_MENU,
      "rowCellContextMenu"
    ), Ve(e, r, I.ROW_CELL_MOUSE_DOWN, "rowCellMouseDown"), Ve(e, r, I.ROW_CELL_MOUSE_UP, "rowCellMouseUp"), Ve(e, r, I.ROW_CELL_MOUSE_MOVE, "rowCellMouseMove"), Se(
      e,
      r,
      I.ROW_CELL_COLLAPSE_TREE_ROWS,
      "rowCellCollapseTreeRows"
    ), Se(e, r, I.ROW_CELL_SCROLL, "rowCellScroll"), Ve(e, r, I.COL_CELL_HOVER, "colCellHover"), Ve(e, r, I.COL_CELL_CLICK, "colCellClick"), Ve(
      e,
      r,
      I.COL_CELL_DOUBLE_CLICK,
      "colCellDoubleClick"
    ), Ve(
      e,
      r,
      I.COL_CELL_CONTEXT_MENU,
      "colCellContextMenu"
    ), Ve(e, r, I.COL_CELL_MOUSE_DOWN, "colCellMouseDown"), Ve(e, r, I.COL_CELL_MOUSE_UP, "colCellMouseUp"), Ve(e, r, I.COL_CELL_MOUSE_MOVE, "colCellMouseMove"), Ve(e, r, I.DATA_CELL_HOVER, "dataCellHover"), Ve(e, r, I.DATA_CELL_CLICK, "dataCellClick"), Ve(
      e,
      r,
      I.DATA_CELL_DOUBLE_CLICK,
      "dataCellDoubleClick"
    ), Ve(
      e,
      r,
      I.DATA_CELL_CONTEXT_MENU,
      "dataCellContextMenu"
    ), Ve(
      e,
      r,
      I.DATA_CELL_MOUSE_DOWN,
      "dataCellMouseDown"
    ), Ve(e, r, I.DATA_CELL_MOUSE_UP, "dataCellMouseUp"), Ve(
      e,
      r,
      I.DATA_CELL_MOUSE_MOVE,
      "dataCellMouseMove"
    ), Se(
      e,
      r,
      I.DATA_CELL_TREND_ICON_CLICK,
      "dataCellTrendIconClick"
    ), Se(
      e,
      r,
      I.DATA_CELL_BRUSH_SELECTION,
      "dataCellBrushSelection"
    ), Se(
      e,
      r,
      I.DATA_CELL_SELECT_MOVE,
      "dataCellSelectMove"
    ), Ve(e, r, I.CORNER_CELL_HOVER, "cornerCellHover"), Ve(e, r, I.CORNER_CELL_CLICK, "cornerCellClick"), Ve(
      e,
      r,
      I.CORNER_CELL_DOUBLE_CLICK,
      "cornerCellDoubleClick"
    ), Ve(
      e,
      r,
      I.CORNER_CELL_CONTEXT_MENU,
      "cornerCellContextMenu"
    ), Ve(
      e,
      r,
      I.CORNER_CELL_MOUSE_DOWN,
      "cornerCellMouseDown"
    ), Ve(
      e,
      r,
      I.CORNER_CELL_MOUSE_UP,
      "cornerCellMouseUp"
    ), Ve(
      e,
      r,
      I.CORNER_CELL_MOUSE_MOVE,
      "cornerCellMouseMove"
    ), Ve(e, r, I.MERGED_CELLS_HOVER, "mergedCellsHover"), Ve(e, r, I.MERGED_CELLS_CLICK, "mergedCellsClick"), Ve(
      e,
      r,
      I.MERGED_CELLS_DOUBLE_CLICK,
      "mergedCellsDoubleClick"
    ), Ve(
      e,
      r,
      I.MERGED_CELLS_CONTEXT_MENU,
      "mergedCellsContextMenu"
    ), Ve(
      e,
      r,
      I.MERGED_CELLS_MOUSE_DOWN,
      "mergedCellsMouseDown"
    ), Ve(
      e,
      r,
      I.MERGED_CELLS_MOUSE_UP,
      "mergedCellsMouseUp"
    ), Ve(
      e,
      r,
      I.MERGED_CELLS_MOUSE_MOVE,
      "mergedCellsMouseMove"
    ), Se(e, r, I.RANGE_SORT, "rangeSort"), Se(e, r, I.RANGE_SORTED, "rangeSorted"), Se(e, r, I.RANGE_FILTER, "rangeFilter"), Se(e, r, I.RANGE_FILTERED, "rangeFiltered"), Se(
      e,
      r,
      I.LAYOUT_AFTER_HEADER_LAYOUT,
      "layoutAfterHeaderLayout"
    ), Se(e, r, I.LAYOUT_PAGINATION, "layoutPagination"), Se(e, r, I.LAYOUT_CELL_SCROLL, "layoutCellScroll"), Se(
      e,
      r,
      I.LAYOUT_AFTER_COLLAPSE_ROWS,
      "layoutAfterCollapseRows"
    ), Se(
      e,
      r,
      I.LAYOUT_TREE_ROWS_COLLAPSE_ALL,
      "collapseRowsAll"
    ), Se(e, r, I.LAYOUT_COLS_EXPANDED, "layoutColsExpanded"), Se(e, r, I.LAYOUT_COLS_HIDDEN, "layoutColsHidden"), Se(e, r, I.LAYOUT_BEFORE_RENDER, "beforeRender"), Se(e, r, I.LAYOUT_AFTER_RENDER, "afterRender"), Se(e, r, I.LAYOUT_DESTROY, "destroy"), Se(e, r, I.LAYOUT_RESIZE, "layoutResize"), Se(
      e,
      r,
      I.LAYOUT_RESIZE_SERIES_WIDTH,
      "layoutResizeSeriesWidth"
    ), Se(
      e,
      r,
      I.LAYOUT_RESIZE_ROW_WIDTH,
      "layoutResizeRowWidth"
    ), Se(
      e,
      r,
      I.LAYOUT_RESIZE_ROW_HEIGHT,
      "layoutResizeRowHeight"
    ), Se(
      e,
      r,
      I.LAYOUT_RESIZE_COL_WIDTH,
      "layoutResizeColWidth"
    ), Se(
      e,
      r,
      I.LAYOUT_RESIZE_COL_HEIGHT,
      "layoutResizeColHeight"
    ), Se(
      e,
      r,
      I.LAYOUT_RESIZE_TREE_WIDTH,
      "layoutResizeTreeWidth"
    ), Se(
      e,
      r,
      I.LAYOUT_RESIZE_MOUSE_DOWN,
      "layoutResizeMouseDown"
    ), Se(
      e,
      r,
      I.LAYOUT_RESIZE_MOUSE_UP,
      "layoutResizeMouseUp"
    ), Se(
      e,
      r,
      I.LAYOUT_RESIZE_MOUSE_MOVE,
      "layoutResizeMouseMove"
    ), Se(e, r, I.GLOBAL_KEYBOARD_DOWN, "keyBoardDown"), Se(e, r, I.GLOBAL_KEYBOARD_UP, "keyBoardUp"), Se(e, r, I.GLOBAL_COPIED, "copied"), Se(
      e,
      r,
      I.GLOBAL_ACTION_ICON_HOVER,
      "actionIconHover"
    ), Se(
      e,
      r,
      I.GLOBAL_ACTION_ICON_CLICK,
      "actionIconClick"
    ), Se(e, r, I.GLOBAL_CONTEXT_MENU, "contextMenu"), Se(e, r, I.GLOBAL_HOVER, "mouseHover"), Se(e, r, I.GLOBAL_CLICK, "click"), Se(e, r, I.GLOBAL_DOUBLE_CLICK, "doubleClick"), Se(e, r, I.GLOBAL_SELECTED, "selected"), Se(e, r, I.GLOBAL_MOUSE_UP, "mouseUp"), Se(e, r, I.GLOBAL_RESET, "reset"), Se(e, r, I.GLOBAL_LINK_FIELD_JUMP, "linkFieldJump"), Se(e, r, I.GLOBAL_SCROLL, "scroll"), Se(
      e,
      r,
      I.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,
      "layoutAfterRealDataCellRender"
    ), Se(
      e,
      r,
      I.ROW_CELL_BRUSH_SELECTION,
      "rowCellBrushSelection"
    ), Se(
      e,
      r,
      I.COL_CELL_BRUSH_SELECTION,
      "colCellBrushSelection"
    ));
  });
}, Aue = (e, r = !1) => {
  const t = Un(r), n = (i) => {
    t.value = i;
  };
  return si(e, (i) => {
    i == null || i.on(I.LAYOUT_BEFORE_RENDER, () => {
      n(!0);
    }), i == null || i.on(I.LAYOUT_AFTER_RENDER, () => {
      n(!1);
    });
  }), { loading: t, setLoading: n };
}, Rue = (e, r) => {
  const t = Kx({
    rerender: !1,
    reloadData: !1,
    rebuildDataset: !1
  });
  si(
    () => r.options,
    (n, i) => {
      var o, a;
      t.rerender = !0, Object.is(i == null ? void 0 : i.hierarchyType, n == null ? void 0 : n.hierarchyType) || (t.reloadData = !0, t.rebuildDataset = !0), (o = e.value) == null || o.setOptions(n), (a = e.value) == null || a.changeSheetSize(n == null ? void 0 : n.width, n == null ? void 0 : n.height);
    },
    { deep: Hd(r.options) }
  ), si(
    () => r.dataCfg,
    (n, i) => {
      var o, a, l, s, f, h;
      ((a = (o = i == null ? void 0 : i.fields) == null ? void 0 : o.columns) == null ? void 0 : a.length) !== ((s = (l = n == null ? void 0 : n.fields) == null ? void 0 : l.columns) == null ? void 0 : s.length) && ((f = e.value) == null || f.clearInitColumnLeafNodes()), t.rerender = !0, t.reloadData = !0, (h = e.value) == null || h.setDataCfg(n);
    },
    { deep: Hd(r.dataCfg) }
  ), si(
    () => r.themeCfg,
    (n) => {
      var i;
      t.rerender = !0, (i = e.value) == null || i.setThemeCfg(n);
    },
    {
      deep: Hd(r.themeCfg)
    }
  ), si(t, (n) => {
    var i;
    n.rerender && ((i = e.value) == null || i.render(n.reloadData, {
      reBuildDataSet: n.rebuildDataset
    }), n.rerender = !1, n.reloadData = !1, n.rebuildDataset = !1);
  });
}, Oue = (e, r, t) => {
  const n = Un();
  si(
    [e, () => r.adaptive],
    ([i, o], a, l) => {
      i && (n.value = zse({
        s2: i,
        adaptive: o,
        wrapper: t.wrapperRef.value,
        container: t.containerRef.value
      }), l(() => {
        var s;
        (s = n.value) == null || s.call(n);
      }));
    },
    { deep: !0 }
  );
};
function Iue(e, r) {
  const {
    dataCfg: t,
    options: n,
    themeCfg: i,
    loading: o,
    sheetType: a,
    onSpreadsheet: l,
    onMounted: s,
    onGetSpreadSheet: f
  } = e, h = Un(), d = Un(), v = jp(), { loading: g, setLoading: y } = Aue(v, o), C = _ue(v, e), _ = (x) => {
    const S = Of(t), T = Of(n), R = Eue(T);
    return l ? l(x, S, R) : a === "table" ? new tre(x, S, R) : new ere(x, S, R);
  };
  return qx(() => {
    y(!0), v.value = _(d.value), v.value.setThemeCfg(Of(i)), v.value.render(), y(!1), f == null || f(v.value), s == null || s(v.value);
  }), Lue(v, r), Rue(v, e), Oue(v, e, { wrapperRef: h, containerRef: d }), Z3(() => {
    var x;
    (x = v.value) == null || x.destroy();
  }), {
    wrapperRef: h,
    containerRef: d,
    s2Ref: v,
    loading: g,
    setLoading: y,
    pagination: C
  };
}
const uA = () => ({
  sheetType: String,
  dataCfg: Object,
  themeCfg: Object,
  showPagination: {
    type: [Object, Boolean],
    default: !1
  },
  loading: Boolean,
  partDrillDown: Object,
  header: Object,
  options: {
    type: Object,
    default: {}
  },
  adaptive: {
    type: [Object, Boolean],
    default: !1
  },
  onSpreadsheet: Function,
  onGetSpreadSheet: Function,
  onMounted: Function
}), Mue = () => ({
  className: String,
  titleText: {
    type: String,
    default: Et("选择下钻维度")
  },
  searchText: {
    type: String,
    default: Et("搜索字段")
  },
  clearButtonText: {
    type: String,
    default: Et("恢复默认")
  },
  extra: Node,
  dataSet: {
    type: Array,
    default: []
  },
  drillFields: Array,
  disabledFields: Array,
  getDrillFields: Function,
  setDrillFields: Function
}), Bue = () => ["getDrillFields", "setDrillFields"], Due = () => [
  "spreadsheet",
  "getSpreadSheet",
  "rowCellHover",
  "rowCellClick",
  "rowCellDoubleClick",
  "rowCellContextMenu",
  "rowCellMouseDown",
  "rowCellMouseUp",
  "rowCellMouseMove",
  "rowCellCollapseTreeRows",
  "rowCellScroll",
  "colCellHover",
  "colCellClick",
  "colCellDoubleClick",
  "colCellContextMenu",
  "colCellMouseDown",
  "colCellMouseUp",
  "colCellMouseMove",
  "dataCellHover",
  "dataCellClick",
  "dataCellDoubleClick",
  "dataCellContextMenu",
  "dataCellMouseDown",
  "dataCellMouseUp",
  "dataCellMouseMove",
  "dataCellTrendIconClick",
  "dataCellBrushSelection",
  "dataCellSelectMove",
  "cornerCellHover",
  "cornerCellClick",
  "cornerCellDoubleClick",
  "cornerCellContextMenu",
  "cornerCellMouseDown",
  "cornerCellMouseUp",
  "cornerCellMouseMove",
  "mergedCellsHover",
  "mergedCellsClick",
  "mergedCellsDoubleClick",
  "mergedCellsContextMenu",
  "mergedCellsMouseDown",
  "mergedCellsMouseUp",
  "mergedCellsMouseMove",
  "rangeSort",
  "rangeSorted",
  "rangeFilter",
  "rangeFiltered",
  "layoutAfterHeaderLayout",
  "layoutPagination",
  "layoutCellScroll",
  "layoutCollapseRows",
  "layoutAfterCollapseRows",
  "collapseRowsAll",
  "layoutColsExpanded",
  "layoutColsHidden",
  "beforeRender",
  "afterRender",
  "mounted",
  "destroy",
  "layoutResize",
  "layoutResizeSeriesWidth",
  "layoutResizeRowWidth",
  "layoutResizeRowHeight",
  "layoutResizeColWidth",
  "layoutResizeColHeight",
  "layoutResizeTreeWidth",
  "layoutResizeMouseDown",
  "layoutResizeMouseUp",
  "layoutResizeMouseMove",
  "keyBoardDown",
  "keyBoardUp",
  "copied",
  "actionIconHover",
  "actionIconClick",
  "contextMenu",
  "mouseHover",
  "mouseUp",
  "mouseMove",
  "mouseDown",
  "selected",
  "reset",
  "linkFieldJump",
  "click",
  "doubleClick",
  "scroll",
  "hover",
  "layoutAfterRealDataCellRender",
  "rowCellBrushSelection",
  "colCellBrushSelection"
], $ue = Lr({
  name: "BaseSheet",
  props: uA(),
  emits: Due(),
  setup(e, r) {
    const { wrapperRef: t, containerRef: n, s2Ref: i, loading: o, pagination: a } = Iue(e, r.emit);
    return r.expose({
      get instance() {
        return i.value;
      }
    }), {
      S2_PREFIX_CLS: p0,
      wrapperRef: t,
      containerRef: n,
      s2Ref: i,
      loading: o,
      pagination: a,
      handlePageChange: (f) => {
        var h, d;
        e.showPagination && !kp(e.showPagination) && ((d = (h = e.showPagination).onChange) == null || d.call(h, f)), a.change(f);
      },
      handlePageSizeChange: (f) => {
        var h, d;
        e.showPagination && !kp(e.showPagination) && ((d = (h = e.showPagination).onShowSizeChange) == null || d.call(h, f)), a.showSizeChange(f);
      }
    };
  },
  components: {
    Spin: i5,
    S2Pagination: bue
  }
});
function Fue(e, r, t, n, i, o) {
  const a = qe("S2Pagination"), l = qe("Spin");
  return fe(), mt(l, {
    wrapperClassName: e.S2_PREFIX_CLS + "-spin",
    spinning: e.loading
  }, {
    default: $t(() => [
      we("div", {
        ref: "wrapperRef",
        class: je(e.S2_PREFIX_CLS + "-wrapper")
      }, [
        we("div", {
          ref: "containerRef",
          class: je(e.S2_PREFIX_CLS + "-container")
        }, null, 2),
        e.pagination.visible.value ? (fe(), mt(a, {
          key: 0,
          current: e.pagination.current.value,
          pageSize: e.pagination.pageSize.value,
          total: e.pagination.total.value,
          customOptions: e.pagination.customOptions,
          onChange: e.handlePageChange,
          onShowSizeChange: e.handlePageSizeChange
        }, null, 8, ["current", "pageSize", "total", "customOptions", "onChange", "onShowSizeChange"])) : xr("", !0)
      ], 2)
    ]),
    _: 1
  }, 8, ["wrapperClassName", "spinning"]);
}
var fA = /* @__PURE__ */ Or($ue, [["render", Fue]]);
const Pue = {
  class: "antv-s2-icon",
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg",
  width: "12.6",
  height: "12.6"
}, Nue = /* @__PURE__ */ we("path", {
  d: "M511.804 222.338c-57.117 0-105.737 20.061-145.86 60.184-40.122 40.123-60.184 88.569-60.184 145.337 0 56.769 20.062 105.214 60.185 145.337 40.122 40.123 88.742 60.185 145.859 60.185 57.116 0 105.736-20.062 145.859-60.185 40.123-40.123 60.184-88.568 60.184-145.337 0-56.768-20.061-105.214-60.184-145.337-40.123-40.123-88.743-60.184-145.86-60.184zm0 338.619c-36.729 0-68.007-12.925-93.835-38.774-25.827-25.85-38.752-57.127-38.773-93.834-.022-36.707 12.902-68.16 38.773-94.357 25.872-26.197 57.15-39.285 93.835-39.263 36.685.022 67.963 13.11 93.834 39.263 25.871 26.154 38.796 57.606 38.774 94.357-.022 36.75-12.946 68.028-38.774 93.834-25.828 25.806-57.106 38.73-93.834 38.774zm366.165-295.766c-21.084-42.168-50.327-79.223-87.73-111.165-37.404-31.941-79.898-57.105-127.484-75.491C614.472 60.845 564.155 52 511.804 52c-52.352 0-103.006 8.845-151.963 26.535-46.911 18.364-89.069 43.528-126.472 75.491-37.403 31.964-66.647 69.019-87.731 111.165C123.879 308.71 113 353.923 113 400.835c0 65.95 15.982 132.924 47.945 200.92 26.524 56.441 63.58 112.198 111.165 167.27 62.556 73.435 134.632 138.71 216.227 195.827 6.81 4.765 14.459 7.148 22.945 7.148 8.485 0 16.47-2.383 23.956-7.148 81.595-57.79 153.67-123.067 216.227-195.828 47.608-55.767 84.663-111.524 111.165-167.27 31.963-67.995 47.945-134.969 47.945-200.919 0-46.912-10.88-92.126-32.638-135.644h.032zm-40.797 136.656c0 55.07-13.6 111.513-40.798 169.326-23.129 49.631-56.452 99.948-99.97 150.95-52.351 61.208-113.885 117.65-184.6 169.326-70.716-51.676-132.25-108.118-184.6-169.326-42.844-51.002-76.167-101.319-99.971-150.95-27.198-57.791-40.797-114.57-40.797-170.338 0-36.032 8.159-70.716 24.478-104.05 16.994-32.638 40.45-61.882 70.368-87.73 30.592-26.525 65.276-47.26 104.05-62.209 40.797-14.97 82.954-22.455 126.472-22.455 43.517 0 85.675 7.485 126.472 22.455 38.752 14.97 73.436 35.706 104.05 62.208 30.593 25.85 54.048 55.093 70.367 87.731 16.32 34.009 24.479 69.03 24.479 105.062z",
  fill: "currentColor"
}, null, -1), Hue = [
  Nue
];
function zue(e, r) {
  return fe(), Ke("svg", Pue, [...Hue]);
}
var Wue = { render: zue };
const kue = {
  class: "antv-s2-icon",
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg",
  width: "12.6",
  height: "12.6"
}, Gue = /* @__PURE__ */ we("path", {
  d: "M86.016 805.888H0l143.872-529.92h79.36l144.896 529.92h-91.136l-29.696-109.056H115.2S85.504 805.888 86.016 805.888zM225.28 613.376 181.248 455.68 138.24 613.376h87.04zM519.168 430.08c24.576-16.384 47.616-25.088 69.12-25.088 30.72 0 58.368 14.848 81.92 44.032 24.064 29.184 35.328 72.192 35.328 128.512 0 44.032-7.168 83.456-22.528 118.272-14.848 34.816-35.328 62.976-60.416 83.456-26.112 20.992-57.856 31.232-95.232 31.232-15.36-.512-31.232-1.536-46.592-3.584-4.096-.512-8.704-1.024-12.8-1.536h-66.56V256h81.92v206.336c11.264-12.8 23.04-23.552 35.84-32.256zM483.84 587.264v135.168c13.824 3.072 26.112 4.608 37.376 4.608 27.648 0 50.176-11.776 69.12-36.352 19.456-25.088 28.672-59.392 28.672-104.96 0-32.256-5.12-55.296-14.848-70.144-9.216-13.824-18.432-19.968-28.672-19.968-12.288 0-27.136 7.68-44.544 24.064-16.896 16.896-32.768 39.424-47.104 67.584zm529.92 207.36c-36.864 14.336-71.68 20.992-104.96 20.992-32.768.512-64.512-9.216-91.648-27.136-27.136-18.432-48.64-44.032-62.464-73.728-14.848-30.72-22.528-65.536-22.528-104.448 0-58.88 16.896-108.032 51.2-146.944 33.792-38.912 75.264-58.88 123.392-58.88 34.304 0 70.144 7.168 108.032 21.504l10.24 4.096v95.232l-20.992-10.752c-34.816-17.92-65.536-26.624-92.16-26.624-16.896 0-32.768 4.608-47.104 13.824-13.824 8.704-25.088 23.04-32.768 42.496-8.192 19.968-12.288 41.472-12.288 63.488 0 28.672 7.68 55.808 24.064 82.432 14.848 24.576 37.888 36.352 71.168 36.352 10.752 0 21.504-1.024 31.744-2.56 9.728-1.536 29.696-8.192 58.88-18.944l19.456-7.68v92.672l-11.264 4.608z",
  fill: "currentColor"
}, null, -1), Uue = [
  Gue
];
function Yue(e, r) {
  return fe(), Ke("svg", kue, [...Uue]);
}
var Xue = { render: Yue };
const Vue = {
  class: "antv-s2-icon",
  viewBox: "0 0 1024 1024",
  xmlns: "http://www.w3.org/2000/svg",
  width: "12.6",
  height: "12.6"
}, que = /* @__PURE__ */ we("path", {
  d: "M950.016 898.016 744 693.024q88-107.008 88-244.992 0-159.008-112.512-271.488T448 64.032 176.512 176.544 64 448.032 176.512 719.52 448 832.032q138.016 0 244.992-88l206.016 206.016q10.016 10.016 24.992 10.016t26.016-10.016q10.016-11.008 10.016-26.016t-10.016-26.016zM568.992 736Q512 760 448 760t-120.992-24q-56-24-99.488-67.488t-66.496-99.488q-24.992-56.992-24.992-120.992t24.992-120.992q23.008-56 66.496-99.488t99.488-67.488q56.992-24 120.992-24t120.992 24q56 24 99.488 67.488t67.488 99.488q24 56.992 24 120.992t-24 120.992q-24 56-67.488 99.488T568.992 736z",
  fill: "currentColor"
}, null, -1), Kue = [
  que
];
function jue(e, r) {
  return fe(), Ke("svg", Vue, [...Kue]);
}
var Zue = { render: jue };
const Que = Lr({
  name: "DrillDown",
  props: Mue(),
  emits: Bue(),
  methods: {},
  components: {
    Button: o5,
    Input: a5,
    Empty: l5,
    Menu: zf,
    MenuItem: s5,
    LocationIcon: Wue,
    TextIcon: Xue,
    CalendarIcon: Zue
  },
  setup(e) {
    const {
      dataSet: r,
      disabledFields: t,
      getDrillFields: n,
      setDrillFields: i,
      className: o
    } = e, l = Un(r.map((v) => (v.disabled = !!(t && t.includes(v.value)), v))), s = Un([]);
    return {
      options: l,
      handleSearch: (v) => {
        const { value: g } = v.target;
        if (!g)
          l.value = [...r];
        else {
          const y = new RegExp(g, "gi"), C = r.filter((_) => y.test(_.name));
          l.value = [...C];
        }
      },
      handleSelect: (v) => {
        const g = v == null ? void 0 : v.selectedKeys;
        s.value = g, n && n(g), i && i(g);
      },
      handleClear: (v) => {
        v.stopPropagation(), s.value = [], n && n([]), i && i([]);
      },
      className: o,
      selected: s,
      isEmpty: Ui,
      DRILL_DOWN_PRE_CLASS: lre
    };
  }
});
function Jue(e, r, t, n, i, o) {
  const a = qe("Button"), l = qe("Input"), s = qe("Empty"), f = qe("text-icon"), h = qe("calendar-icon"), d = qe("location-icon"), v = qe("MenuItem"), g = qe("Menu");
  return fe(), Ke("div", {
    class: je([e.DRILL_DOWN_PRE_CLASS, e.className])
  }, [
    we("header", {
      class: je(`${e.DRILL_DOWN_PRE_CLASS}-header`)
    }, [
      we("div", null, Qe(e.titleText), 1),
      He(a, {
        type: "link",
        onClick: e.handleClear
      }, {
        default: $t(() => [
          _n(Qe(e.clearButtonText), 1)
        ]),
        _: 1
      }, 8, ["onClick"])
    ], 2),
    He(l, {
      class: je(`${e.DRILL_DOWN_PRE_CLASS}-search`),
      placeholder: e.searchText,
      onChange: e.handleSearch,
      onPressEnter: e.handleSearch,
      allowClear: !0
    }, null, 8, ["class", "placeholder", "onChange", "onPressEnter"]),
    e.isEmpty(e.options) ? (fe(), mt(s, {
      key: 0,
      imageStyle: { height: "64px" },
      class: je(`${e.DRILL_DOWN_PRE_CLASS}-empty`)
    }, null, 8, ["class"])) : xr("", !0),
    He(g, {
      class: "`${DRILL_DOWN_PRE_CLASS}-menu`",
      selectedKeys: e.selected,
      "onUpdate:selectedKeys": r[0] || (r[0] = (y) => e.selected = y),
      onSelect: e.handleSelect
    }, {
      default: $t(() => [
        (fe(!0), Ke(Hr, null, Wi(e.options, (y) => (fe(), mt(v, {
          key: y.value,
          disabled: y.disabled,
          class: je(`${e.DRILL_DOWN_PRE_CLASS}-menu-item`)
        }, {
          icon: $t(() => [
            y.type === "text" ? (fe(), mt(f, { key: 0 })) : xr("", !0),
            y.type === "date" ? (fe(), mt(h, { key: 1 })) : xr("", !0),
            y.type === "location" ? (fe(), mt(d, { key: 2 })) : xr("", !0)
          ]),
          default: $t(() => [
            _n(" " + Qe(y == null ? void 0 : y.name), 1)
          ]),
          _: 2
        }, 1032, ["disabled", "class"]))), 128))
      ]),
      _: 1
    }, 8, ["selectedKeys", "onSelect"])
  ], 2);
}
var efe = /* @__PURE__ */ Or(Que, [["render", Jue], ["__scopeId", "data-v-3a294982"]]);
const tfe = Lr({
  name: "PivotSheet",
  props: uA(),
  emits: [],
  setup(e, r) {
    const t = a1(r.expose), { options: n } = WC(e), { dataCfg: i, partDrillDown: o } = WC(e), a = Un([]), l = (h) => {
      var d, v, g, y, C, _;
      const w = (d = t == null ? void 0 : t.value) == null ? void 0 : d.instance;
      a.value = h, w == null || w.hideTooltip(), Ui(h) ? w == null || w.clearDrillDownData((v = w == null ? void 0 : w.store.get("drillDownNode")) == null ? void 0 : v.id) : Use({
        rows: (y = (g = i.value) == null ? void 0 : g.fields.rows) != null ? y : [],
        drillFields: h,
        fetchData: (C = o.value) == null ? void 0 : C.fetchData,
        drillItemsNum: (_ = o.value) == null ? void 0 : _.drillItemsNum,
        spreadsheet: w
      });
    }, s = (h) => {
      var d, v;
      const { event: g, disabledFields: y } = h;
      if (g) {
        const C = (d = t == null ? void 0 : t.value) == null ? void 0 : d.instance, _ = He(efe, {
          ...(v = o.value) == null ? void 0 : v.drillConfig,
          setDrillFields: l,
          drillFields: a.value,
          disabledFields: y
        });
        C == null || C.showTooltip({
          position: {
            x: g.clientX,
            y: g.clientY
          },
          event: g,
          content: _
        });
      }
    }, f = Mo(
      () => Gse(
        n.value,
        o.value,
        (h) => s(h)
      )
    );
    return {
      s2Ref: t,
      options: f
    };
  },
  components: {
    BaseSheet: fA
  }
});
function rfe(e, r, t, n, i, o) {
  const a = qe("BaseSheet");
  return fe(), mt(a, jx(e.$props, {
    ref: "s2Ref",
    options: e.options
  }), null, 16, ["options"]);
}
var Ax = /* @__PURE__ */ Or(tfe, [["render", rfe]]);
const nfe = Lr({
  name: "TableSheet",
  props: [],
  emits: [],
  setup(e, r) {
    return { s2Ref: a1(r.expose) };
  },
  components: {
    BaseSheet: fA
  }
});
function ife(e, r, t, n, i, o) {
  const a = qe("BaseSheet");
  return fe(), mt(a, { ref: "s2Ref" }, null, 512);
}
var Rx = /* @__PURE__ */ Or(nfe, [["render", ife]]);
const ofe = Lr({
  name: "Sheet",
  props: [],
  emits: [],
  setup(e, r) {
    const t = a1(r.expose), n = Mo(() => {
      switch (r.attrs.sheetType) {
        case "table":
          return Rx;
        default:
          return Ax;
      }
    });
    return { s2Ref: t, sheetType: n };
  },
  components: {
    PivotSheet: Ax,
    TableSheet: Rx
  }
});
function afe(e, r, t, n, i, o) {
  return fe(), mt(Q3(e.sheetType), { ref: "s2Ref" }, null, 512);
}
var lfe = /* @__PURE__ */ Or(ofe, [["render", afe]]), ns = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, wc = { exports: {} };
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
wc.exports;
(function(e, r) {
  (function() {
    var t, n = "4.17.21", i = 200, o = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", a = "Expected a function", l = "Invalid `variable` option passed into `_.template`", s = "__lodash_hash_undefined__", f = 500, h = "__lodash_placeholder__", d = 1, v = 2, g = 4, y = 1, C = 2, _ = 1, w = 2, x = 4, S = 8, T = 16, R = 32, B = 64, $ = 128, N = 256, z = 512, V = 30, X = "...", Z = 800, ne = 16, se = 1, q = 2, ee = 3, Oe = 1 / 0, me = 9007199254740991, _e = 17976931348623157e292, ke = NaN, Ee = 4294967295, Ze = Ee - 1, ft = Ee >>> 1, Fe = [
      ["ary", $],
      ["bind", _],
      ["bindKey", w],
      ["curry", S],
      ["curryRight", T],
      ["flip", z],
      ["partial", R],
      ["partialRight", B],
      ["rearg", N]
    ], Ge = "[object Arguments]", ot = "[object Array]", nr = "[object AsyncFunction]", vr = "[object Boolean]", Kt = "[object Date]", io = "[object DOMException]", ri = "[object Error]", oo = "[object Function]", et = "[object GeneratorFunction]", ct = "[object Map]", pt = "[object Number]", Ir = "[object Null]", Yr = "[object Object]", yu = "[object Promise]", yh = "[object Proxy]", ko = "[object RegExp]", Xr = "[object Set]", Mn = "[object String]", ni = "[object Symbol]", Dl = "[object Undefined]", $l = "[object WeakMap]", yA = "[object WeakSet]", Fl = "[object ArrayBuffer]", Pa = "[object DataView]", Ch = "[object Float32Array]", mh = "[object Float64Array]", _h = "[object Int8Array]", wh = "[object Int16Array]", xh = "[object Int32Array]", Sh = "[object Uint8Array]", bh = "[object Uint8ClampedArray]", Th = "[object Uint16Array]", Eh = "[object Uint32Array]", CA = /\b__p \+= '';/g, mA = /\b(__p \+=) '' \+/g, _A = /(__e\(.*?\)|\b__t\)) \+\n'';/g, h1 = /&(?:amp|lt|gt|quot|#39);/g, d1 = /[&<>"']/g, wA = RegExp(h1.source), xA = RegExp(d1.source), SA = /<%-([\s\S]+?)%>/g, bA = /<%([\s\S]+?)%>/g, v1 = /<%=([\s\S]+?)%>/g, TA = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, EA = /^\w*$/, LA = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, Lh = /[\\^$.*+?()[\]{}|]/g, AA = RegExp(Lh.source), Ah = /^\s+/, RA = /\s/, OA = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, IA = /\{\n\/\* \[wrapped with (.+)\] \*/, MA = /,? & /, BA = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, DA = /[()=,{}\[\]\/\s]/, $A = /\\(\\)?/g, FA = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, p1 = /\w*$/, PA = /^[-+]0x[0-9a-f]+$/i, NA = /^0b[01]+$/i, HA = /^\[object .+?Constructor\]$/, zA = /^0o[0-7]+$/i, WA = /^(?:0|[1-9]\d*)$/, kA = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, Cu = /($^)/, GA = /['\n\r\u2028\u2029\\]/g, mu = "\\ud800-\\udfff", UA = "\\u0300-\\u036f", YA = "\\ufe20-\\ufe2f", XA = "\\u20d0-\\u20ff", g1 = UA + YA + XA, y1 = "\\u2700-\\u27bf", C1 = "a-z\\xdf-\\xf6\\xf8-\\xff", VA = "\\xac\\xb1\\xd7\\xf7", qA = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", KA = "\\u2000-\\u206f", jA = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", m1 = "A-Z\\xc0-\\xd6\\xd8-\\xde", _1 = "\\ufe0e\\ufe0f", w1 = VA + qA + KA + jA, Rh = "['’]", ZA = "[" + mu + "]", x1 = "[" + w1 + "]", _u = "[" + g1 + "]", S1 = "\\d+", QA = "[" + y1 + "]", b1 = "[" + C1 + "]", T1 = "[^" + mu + w1 + S1 + y1 + C1 + m1 + "]", Oh = "\\ud83c[\\udffb-\\udfff]", JA = "(?:" + _u + "|" + Oh + ")", E1 = "[^" + mu + "]", Ih = "(?:\\ud83c[\\udde6-\\uddff]){2}", Mh = "[\\ud800-\\udbff][\\udc00-\\udfff]", Na = "[" + m1 + "]", L1 = "\\u200d", A1 = "(?:" + b1 + "|" + T1 + ")", eR = "(?:" + Na + "|" + T1 + ")", R1 = "(?:" + Rh + "(?:d|ll|m|re|s|t|ve))?", O1 = "(?:" + Rh + "(?:D|LL|M|RE|S|T|VE))?", I1 = JA + "?", M1 = "[" + _1 + "]?", tR = "(?:" + L1 + "(?:" + [E1, Ih, Mh].join("|") + ")" + M1 + I1 + ")*", rR = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", nR = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", B1 = M1 + I1 + tR, iR = "(?:" + [QA, Ih, Mh].join("|") + ")" + B1, oR = "(?:" + [E1 + _u + "?", _u, Ih, Mh, ZA].join("|") + ")", aR = RegExp(Rh, "g"), lR = RegExp(_u, "g"), Bh = RegExp(Oh + "(?=" + Oh + ")|" + oR + B1, "g"), sR = RegExp([
      Na + "?" + b1 + "+" + R1 + "(?=" + [x1, Na, "$"].join("|") + ")",
      eR + "+" + O1 + "(?=" + [x1, Na + A1, "$"].join("|") + ")",
      Na + "?" + A1 + "+" + R1,
      Na + "+" + O1,
      nR,
      rR,
      S1,
      iR
    ].join("|"), "g"), uR = RegExp("[" + L1 + mu + g1 + _1 + "]"), fR = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, cR = [
      "Array",
      "Buffer",
      "DataView",
      "Date",
      "Error",
      "Float32Array",
      "Float64Array",
      "Function",
      "Int8Array",
      "Int16Array",
      "Int32Array",
      "Map",
      "Math",
      "Object",
      "Promise",
      "RegExp",
      "Set",
      "String",
      "Symbol",
      "TypeError",
      "Uint8Array",
      "Uint8ClampedArray",
      "Uint16Array",
      "Uint32Array",
      "WeakMap",
      "_",
      "clearTimeout",
      "isFinite",
      "parseInt",
      "setTimeout"
    ], hR = -1, _t = {};
    _t[Ch] = _t[mh] = _t[_h] = _t[wh] = _t[xh] = _t[Sh] = _t[bh] = _t[Th] = _t[Eh] = !0, _t[Ge] = _t[ot] = _t[Fl] = _t[vr] = _t[Pa] = _t[Kt] = _t[ri] = _t[oo] = _t[ct] = _t[pt] = _t[Yr] = _t[ko] = _t[Xr] = _t[Mn] = _t[$l] = !1;
    var gt = {};
    gt[Ge] = gt[ot] = gt[Fl] = gt[Pa] = gt[vr] = gt[Kt] = gt[Ch] = gt[mh] = gt[_h] = gt[wh] = gt[xh] = gt[ct] = gt[pt] = gt[Yr] = gt[ko] = gt[Xr] = gt[Mn] = gt[ni] = gt[Sh] = gt[bh] = gt[Th] = gt[Eh] = !0, gt[ri] = gt[oo] = gt[$l] = !1;
    var dR = {
      // Latin-1 Supplement block.
      À: "A",
      Á: "A",
      Â: "A",
      Ã: "A",
      Ä: "A",
      Å: "A",
      à: "a",
      á: "a",
      â: "a",
      ã: "a",
      ä: "a",
      å: "a",
      Ç: "C",
      ç: "c",
      Ð: "D",
      ð: "d",
      È: "E",
      É: "E",
      Ê: "E",
      Ë: "E",
      è: "e",
      é: "e",
      ê: "e",
      ë: "e",
      Ì: "I",
      Í: "I",
      Î: "I",
      Ï: "I",
      ì: "i",
      í: "i",
      î: "i",
      ï: "i",
      Ñ: "N",
      ñ: "n",
      Ò: "O",
      Ó: "O",
      Ô: "O",
      Õ: "O",
      Ö: "O",
      Ø: "O",
      ò: "o",
      ó: "o",
      ô: "o",
      õ: "o",
      ö: "o",
      ø: "o",
      Ù: "U",
      Ú: "U",
      Û: "U",
      Ü: "U",
      ù: "u",
      ú: "u",
      û: "u",
      ü: "u",
      Ý: "Y",
      ý: "y",
      ÿ: "y",
      Æ: "Ae",
      æ: "ae",
      Þ: "Th",
      þ: "th",
      ß: "ss",
      // Latin Extended-A block.
      Ā: "A",
      Ă: "A",
      Ą: "A",
      ā: "a",
      ă: "a",
      ą: "a",
      Ć: "C",
      Ĉ: "C",
      Ċ: "C",
      Č: "C",
      ć: "c",
      ĉ: "c",
      ċ: "c",
      č: "c",
      Ď: "D",
      Đ: "D",
      ď: "d",
      đ: "d",
      Ē: "E",
      Ĕ: "E",
      Ė: "E",
      Ę: "E",
      Ě: "E",
      ē: "e",
      ĕ: "e",
      ė: "e",
      ę: "e",
      ě: "e",
      Ĝ: "G",
      Ğ: "G",
      Ġ: "G",
      Ģ: "G",
      ĝ: "g",
      ğ: "g",
      ġ: "g",
      ģ: "g",
      Ĥ: "H",
      Ħ: "H",
      ĥ: "h",
      ħ: "h",
      Ĩ: "I",
      Ī: "I",
      Ĭ: "I",
      Į: "I",
      İ: "I",
      ĩ: "i",
      ī: "i",
      ĭ: "i",
      į: "i",
      ı: "i",
      Ĵ: "J",
      ĵ: "j",
      Ķ: "K",
      ķ: "k",
      ĸ: "k",
      Ĺ: "L",
      Ļ: "L",
      Ľ: "L",
      Ŀ: "L",
      Ł: "L",
      ĺ: "l",
      ļ: "l",
      ľ: "l",
      ŀ: "l",
      ł: "l",
      Ń: "N",
      Ņ: "N",
      Ň: "N",
      Ŋ: "N",
      ń: "n",
      ņ: "n",
      ň: "n",
      ŋ: "n",
      Ō: "O",
      Ŏ: "O",
      Ő: "O",
      ō: "o",
      ŏ: "o",
      ő: "o",
      Ŕ: "R",
      Ŗ: "R",
      Ř: "R",
      ŕ: "r",
      ŗ: "r",
      ř: "r",
      Ś: "S",
      Ŝ: "S",
      Ş: "S",
      Š: "S",
      ś: "s",
      ŝ: "s",
      ş: "s",
      š: "s",
      Ţ: "T",
      Ť: "T",
      Ŧ: "T",
      ţ: "t",
      ť: "t",
      ŧ: "t",
      Ũ: "U",
      Ū: "U",
      Ŭ: "U",
      Ů: "U",
      Ű: "U",
      Ų: "U",
      ũ: "u",
      ū: "u",
      ŭ: "u",
      ů: "u",
      ű: "u",
      ų: "u",
      Ŵ: "W",
      ŵ: "w",
      Ŷ: "Y",
      ŷ: "y",
      Ÿ: "Y",
      Ź: "Z",
      Ż: "Z",
      Ž: "Z",
      ź: "z",
      ż: "z",
      ž: "z",
      Ĳ: "IJ",
      ĳ: "ij",
      Œ: "Oe",
      œ: "oe",
      ŉ: "'n",
      ſ: "s"
    }, vR = {
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': "&quot;",
      "'": "&#39;"
    }, pR = {
      "&amp;": "&",
      "&lt;": "<",
      "&gt;": ">",
      "&quot;": '"',
      "&#39;": "'"
    }, gR = {
      "\\": "\\",
      "'": "'",
      "\n": "n",
      "\r": "r",
      "\u2028": "u2028",
      "\u2029": "u2029"
    }, yR = parseFloat, CR = parseInt, D1 = typeof ns == "object" && ns && ns.Object === Object && ns, mR = typeof self == "object" && self && self.Object === Object && self, jt = D1 || mR || Function("return this")(), Dh = r && !r.nodeType && r, Go = Dh && !0 && e && !e.nodeType && e, $1 = Go && Go.exports === Dh, $h = $1 && D1.process, fn = function() {
      try {
        var F = Go && Go.require && Go.require("util").types;
        return F || $h && $h.binding && $h.binding("util");
      } catch {
      }
    }(), F1 = fn && fn.isArrayBuffer, P1 = fn && fn.isDate, N1 = fn && fn.isMap, H1 = fn && fn.isRegExp, z1 = fn && fn.isSet, W1 = fn && fn.isTypedArray;
    function Vr(F, k, H) {
      switch (H.length) {
        case 0:
          return F.call(k);
        case 1:
          return F.call(k, H[0]);
        case 2:
          return F.call(k, H[0], H[1]);
        case 3:
          return F.call(k, H[0], H[1], H[2]);
      }
      return F.apply(k, H);
    }
    function _R(F, k, H, ie) {
      for (var Ie = -1, tt = F == null ? 0 : F.length; ++Ie < tt; ) {
        var Ht = F[Ie];
        k(ie, Ht, H(Ht), F);
      }
      return ie;
    }
    function cn(F, k) {
      for (var H = -1, ie = F == null ? 0 : F.length; ++H < ie && k(F[H], H, F) !== !1; )
        ;
      return F;
    }
    function wR(F, k) {
      for (var H = F == null ? 0 : F.length; H-- && k(F[H], H, F) !== !1; )
        ;
      return F;
    }
    function k1(F, k) {
      for (var H = -1, ie = F == null ? 0 : F.length; ++H < ie; )
        if (!k(F[H], H, F))
          return !1;
      return !0;
    }
    function ao(F, k) {
      for (var H = -1, ie = F == null ? 0 : F.length, Ie = 0, tt = []; ++H < ie; ) {
        var Ht = F[H];
        k(Ht, H, F) && (tt[Ie++] = Ht);
      }
      return tt;
    }
    function wu(F, k) {
      var H = F == null ? 0 : F.length;
      return !!H && Ha(F, k, 0) > -1;
    }
    function Fh(F, k, H) {
      for (var ie = -1, Ie = F == null ? 0 : F.length; ++ie < Ie; )
        if (H(k, F[ie]))
          return !0;
      return !1;
    }
    function St(F, k) {
      for (var H = -1, ie = F == null ? 0 : F.length, Ie = Array(ie); ++H < ie; )
        Ie[H] = k(F[H], H, F);
      return Ie;
    }
    function lo(F, k) {
      for (var H = -1, ie = k.length, Ie = F.length; ++H < ie; )
        F[Ie + H] = k[H];
      return F;
    }
    function Ph(F, k, H, ie) {
      var Ie = -1, tt = F == null ? 0 : F.length;
      for (ie && tt && (H = F[++Ie]); ++Ie < tt; )
        H = k(H, F[Ie], Ie, F);
      return H;
    }
    function xR(F, k, H, ie) {
      var Ie = F == null ? 0 : F.length;
      for (ie && Ie && (H = F[--Ie]); Ie--; )
        H = k(H, F[Ie], Ie, F);
      return H;
    }
    function Nh(F, k) {
      for (var H = -1, ie = F == null ? 0 : F.length; ++H < ie; )
        if (k(F[H], H, F))
          return !0;
      return !1;
    }
    var SR = Hh("length");
    function bR(F) {
      return F.split("");
    }
    function TR(F) {
      return F.match(BA) || [];
    }
    function G1(F, k, H) {
      var ie;
      return H(F, function(Ie, tt, Ht) {
        if (k(Ie, tt, Ht))
          return ie = tt, !1;
      }), ie;
    }
    function xu(F, k, H, ie) {
      for (var Ie = F.length, tt = H + (ie ? 1 : -1); ie ? tt-- : ++tt < Ie; )
        if (k(F[tt], tt, F))
          return tt;
      return -1;
    }
    function Ha(F, k, H) {
      return k === k ? PR(F, k, H) : xu(F, U1, H);
    }
    function ER(F, k, H, ie) {
      for (var Ie = H - 1, tt = F.length; ++Ie < tt; )
        if (ie(F[Ie], k))
          return Ie;
      return -1;
    }
    function U1(F) {
      return F !== F;
    }
    function Y1(F, k) {
      var H = F == null ? 0 : F.length;
      return H ? Wh(F, k) / H : ke;
    }
    function Hh(F) {
      return function(k) {
        return k == null ? t : k[F];
      };
    }
    function zh(F) {
      return function(k) {
        return F == null ? t : F[k];
      };
    }
    function X1(F, k, H, ie, Ie) {
      return Ie(F, function(tt, Ht, dt) {
        H = ie ? (ie = !1, tt) : k(H, tt, Ht, dt);
      }), H;
    }
    function LR(F, k) {
      var H = F.length;
      for (F.sort(k); H--; )
        F[H] = F[H].value;
      return F;
    }
    function Wh(F, k) {
      for (var H, ie = -1, Ie = F.length; ++ie < Ie; ) {
        var tt = k(F[ie]);
        tt !== t && (H = H === t ? tt : H + tt);
      }
      return H;
    }
    function kh(F, k) {
      for (var H = -1, ie = Array(F); ++H < F; )
        ie[H] = k(H);
      return ie;
    }
    function AR(F, k) {
      return St(k, function(H) {
        return [H, F[H]];
      });
    }
    function V1(F) {
      return F && F.slice(0, Z1(F) + 1).replace(Ah, "");
    }
    function qr(F) {
      return function(k) {
        return F(k);
      };
    }
    function Gh(F, k) {
      return St(k, function(H) {
        return F[H];
      });
    }
    function Pl(F, k) {
      return F.has(k);
    }
    function q1(F, k) {
      for (var H = -1, ie = F.length; ++H < ie && Ha(k, F[H], 0) > -1; )
        ;
      return H;
    }
    function K1(F, k) {
      for (var H = F.length; H-- && Ha(k, F[H], 0) > -1; )
        ;
      return H;
    }
    function RR(F, k) {
      for (var H = F.length, ie = 0; H--; )
        F[H] === k && ++ie;
      return ie;
    }
    var OR = zh(dR), IR = zh(vR);
    function MR(F) {
      return "\\" + gR[F];
    }
    function BR(F, k) {
      return F == null ? t : F[k];
    }
    function za(F) {
      return uR.test(F);
    }
    function DR(F) {
      return fR.test(F);
    }
    function $R(F) {
      for (var k, H = []; !(k = F.next()).done; )
        H.push(k.value);
      return H;
    }
    function Uh(F) {
      var k = -1, H = Array(F.size);
      return F.forEach(function(ie, Ie) {
        H[++k] = [Ie, ie];
      }), H;
    }
    function j1(F, k) {
      return function(H) {
        return F(k(H));
      };
    }
    function so(F, k) {
      for (var H = -1, ie = F.length, Ie = 0, tt = []; ++H < ie; ) {
        var Ht = F[H];
        (Ht === k || Ht === h) && (F[H] = h, tt[Ie++] = H);
      }
      return tt;
    }
    function Su(F) {
      var k = -1, H = Array(F.size);
      return F.forEach(function(ie) {
        H[++k] = ie;
      }), H;
    }
    function FR(F) {
      var k = -1, H = Array(F.size);
      return F.forEach(function(ie) {
        H[++k] = [ie, ie];
      }), H;
    }
    function PR(F, k, H) {
      for (var ie = H - 1, Ie = F.length; ++ie < Ie; )
        if (F[ie] === k)
          return ie;
      return -1;
    }
    function NR(F, k, H) {
      for (var ie = H + 1; ie--; )
        if (F[ie] === k)
          return ie;
      return ie;
    }
    function Wa(F) {
      return za(F) ? zR(F) : SR(F);
    }
    function Bn(F) {
      return za(F) ? WR(F) : bR(F);
    }
    function Z1(F) {
      for (var k = F.length; k-- && RA.test(F.charAt(k)); )
        ;
      return k;
    }
    var HR = zh(pR);
    function zR(F) {
      for (var k = Bh.lastIndex = 0; Bh.test(F); )
        ++k;
      return k;
    }
    function WR(F) {
      return F.match(Bh) || [];
    }
    function kR(F) {
      return F.match(sR) || [];
    }
    var GR = function F(k) {
      k = k == null ? jt : ka.defaults(jt.Object(), k, ka.pick(jt, cR));
      var H = k.Array, ie = k.Date, Ie = k.Error, tt = k.Function, Ht = k.Math, dt = k.Object, Yh = k.RegExp, UR = k.String, hn = k.TypeError, bu = H.prototype, YR = tt.prototype, Ga = dt.prototype, Tu = k["__core-js_shared__"], Eu = YR.toString, st = Ga.hasOwnProperty, XR = 0, Q1 = function() {
        var u = /[^.]+$/.exec(Tu && Tu.keys && Tu.keys.IE_PROTO || "");
        return u ? "Symbol(src)_1." + u : "";
      }(), Lu = Ga.toString, VR = Eu.call(dt), qR = jt._, KR = Yh(
        "^" + Eu.call(st).replace(Lh, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
      ), Au = $1 ? k.Buffer : t, uo = k.Symbol, Ru = k.Uint8Array, J1 = Au ? Au.allocUnsafe : t, Ou = j1(dt.getPrototypeOf, dt), ey = dt.create, ty = Ga.propertyIsEnumerable, Iu = bu.splice, ry = uo ? uo.isConcatSpreadable : t, Nl = uo ? uo.iterator : t, Uo = uo ? uo.toStringTag : t, Mu = function() {
        try {
          var u = Ko(dt, "defineProperty");
          return u({}, "", {}), u;
        } catch {
        }
      }(), jR = k.clearTimeout !== jt.clearTimeout && k.clearTimeout, ZR = ie && ie.now !== jt.Date.now && ie.now, QR = k.setTimeout !== jt.setTimeout && k.setTimeout, Bu = Ht.ceil, Du = Ht.floor, Xh = dt.getOwnPropertySymbols, JR = Au ? Au.isBuffer : t, ny = k.isFinite, eO = bu.join, tO = j1(dt.keys, dt), zt = Ht.max, ir = Ht.min, rO = ie.now, nO = k.parseInt, iy = Ht.random, iO = bu.reverse, Vh = Ko(k, "DataView"), Hl = Ko(k, "Map"), qh = Ko(k, "Promise"), Ua = Ko(k, "Set"), zl = Ko(k, "WeakMap"), Wl = Ko(dt, "create"), $u = zl && new zl(), Ya = {}, oO = jo(Vh), aO = jo(Hl), lO = jo(qh), sO = jo(Ua), uO = jo(zl), Fu = uo ? uo.prototype : t, kl = Fu ? Fu.valueOf : t, oy = Fu ? Fu.toString : t;
      function E(u) {
        if (Ot(u) && !Me(u) && !(u instanceof Ue)) {
          if (u instanceof dn)
            return u;
          if (st.call(u, "__wrapped__"))
            return aC(u);
        }
        return new dn(u);
      }
      var Xa = /* @__PURE__ */ function() {
        function u() {
        }
        return function(c) {
          if (!At(c))
            return {};
          if (ey)
            return ey(c);
          u.prototype = c;
          var p = new u();
          return u.prototype = t, p;
        };
      }();
      function Pu() {
      }
      function dn(u, c) {
        this.__wrapped__ = u, this.__actions__ = [], this.__chain__ = !!c, this.__index__ = 0, this.__values__ = t;
      }
      E.templateSettings = {
        /**
         * Used to detect `data` property values to be HTML-escaped.
         *
         * @memberOf _.templateSettings
         * @type {RegExp}
         */
        escape: SA,
        /**
         * Used to detect code to be evaluated.
         *
         * @memberOf _.templateSettings
         * @type {RegExp}
         */
        evaluate: bA,
        /**
         * Used to detect `data` property values to inject.
         *
         * @memberOf _.templateSettings
         * @type {RegExp}
         */
        interpolate: v1,
        /**
         * Used to reference the data object in the template text.
         *
         * @memberOf _.templateSettings
         * @type {string}
         */
        variable: "",
        /**
         * Used to import variables into the compiled template.
         *
         * @memberOf _.templateSettings
         * @type {Object}
         */
        imports: {
          /**
           * A reference to the `lodash` function.
           *
           * @memberOf _.templateSettings.imports
           * @type {Function}
           */
          _: E
        }
      }, E.prototype = Pu.prototype, E.prototype.constructor = E, dn.prototype = Xa(Pu.prototype), dn.prototype.constructor = dn;
      function Ue(u) {
        this.__wrapped__ = u, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = Ee, this.__views__ = [];
      }
      function fO() {
        var u = new Ue(this.__wrapped__);
        return u.__actions__ = Mr(this.__actions__), u.__dir__ = this.__dir__, u.__filtered__ = this.__filtered__, u.__iteratees__ = Mr(this.__iteratees__), u.__takeCount__ = this.__takeCount__, u.__views__ = Mr(this.__views__), u;
      }
      function cO() {
        if (this.__filtered__) {
          var u = new Ue(this);
          u.__dir__ = -1, u.__filtered__ = !0;
        } else
          u = this.clone(), u.__dir__ *= -1;
        return u;
      }
      function hO() {
        var u = this.__wrapped__.value(), c = this.__dir__, p = Me(u), m = c < 0, b = p ? u.length : 0, A = bI(0, b, this.__views__), O = A.start, D = A.end, P = D - O, G = m ? D : O - 1, U = this.__iteratees__, K = U.length, re = 0, ue = ir(P, this.__takeCount__);
        if (!p || !m && b == P && ue == P)
          return Ry(u, this.__actions__);
        var ye = [];
        e:
          for (; P-- && re < ue; ) {
            G += c;
            for (var $e = -1, Ce = u[G]; ++$e < K; ) {
              var ze = U[$e], Xe = ze.iteratee, Zr = ze.type, yr = Xe(Ce);
              if (Zr == q)
                Ce = yr;
              else if (!yr) {
                if (Zr == se)
                  continue e;
                break e;
              }
            }
            ye[re++] = Ce;
          }
        return ye;
      }
      Ue.prototype = Xa(Pu.prototype), Ue.prototype.constructor = Ue;
      function Yo(u) {
        var c = -1, p = u == null ? 0 : u.length;
        for (this.clear(); ++c < p; ) {
          var m = u[c];
          this.set(m[0], m[1]);
        }
      }
      function dO() {
        this.__data__ = Wl ? Wl(null) : {}, this.size = 0;
      }
      function vO(u) {
        var c = this.has(u) && delete this.__data__[u];
        return this.size -= c ? 1 : 0, c;
      }
      function pO(u) {
        var c = this.__data__;
        if (Wl) {
          var p = c[u];
          return p === s ? t : p;
        }
        return st.call(c, u) ? c[u] : t;
      }
      function gO(u) {
        var c = this.__data__;
        return Wl ? c[u] !== t : st.call(c, u);
      }
      function yO(u, c) {
        var p = this.__data__;
        return this.size += this.has(u) ? 0 : 1, p[u] = Wl && c === t ? s : c, this;
      }
      Yo.prototype.clear = dO, Yo.prototype.delete = vO, Yo.prototype.get = pO, Yo.prototype.has = gO, Yo.prototype.set = yO;
      function Ei(u) {
        var c = -1, p = u == null ? 0 : u.length;
        for (this.clear(); ++c < p; ) {
          var m = u[c];
          this.set(m[0], m[1]);
        }
      }
      function CO() {
        this.__data__ = [], this.size = 0;
      }
      function mO(u) {
        var c = this.__data__, p = Nu(c, u);
        if (p < 0)
          return !1;
        var m = c.length - 1;
        return p == m ? c.pop() : Iu.call(c, p, 1), --this.size, !0;
      }
      function _O(u) {
        var c = this.__data__, p = Nu(c, u);
        return p < 0 ? t : c[p][1];
      }
      function wO(u) {
        return Nu(this.__data__, u) > -1;
      }
      function xO(u, c) {
        var p = this.__data__, m = Nu(p, u);
        return m < 0 ? (++this.size, p.push([u, c])) : p[m][1] = c, this;
      }
      Ei.prototype.clear = CO, Ei.prototype.delete = mO, Ei.prototype.get = _O, Ei.prototype.has = wO, Ei.prototype.set = xO;
      function Li(u) {
        var c = -1, p = u == null ? 0 : u.length;
        for (this.clear(); ++c < p; ) {
          var m = u[c];
          this.set(m[0], m[1]);
        }
      }
      function SO() {
        this.size = 0, this.__data__ = {
          hash: new Yo(),
          map: new (Hl || Ei)(),
          string: new Yo()
        };
      }
      function bO(u) {
        var c = ju(this, u).delete(u);
        return this.size -= c ? 1 : 0, c;
      }
      function TO(u) {
        return ju(this, u).get(u);
      }
      function EO(u) {
        return ju(this, u).has(u);
      }
      function LO(u, c) {
        var p = ju(this, u), m = p.size;
        return p.set(u, c), this.size += p.size == m ? 0 : 1, this;
      }
      Li.prototype.clear = SO, Li.prototype.delete = bO, Li.prototype.get = TO, Li.prototype.has = EO, Li.prototype.set = LO;
      function Xo(u) {
        var c = -1, p = u == null ? 0 : u.length;
        for (this.__data__ = new Li(); ++c < p; )
          this.add(u[c]);
      }
      function AO(u) {
        return this.__data__.set(u, s), this;
      }
      function RO(u) {
        return this.__data__.has(u);
      }
      Xo.prototype.add = Xo.prototype.push = AO, Xo.prototype.has = RO;
      function Dn(u) {
        var c = this.__data__ = new Ei(u);
        this.size = c.size;
      }
      function OO() {
        this.__data__ = new Ei(), this.size = 0;
      }
      function IO(u) {
        var c = this.__data__, p = c.delete(u);
        return this.size = c.size, p;
      }
      function MO(u) {
        return this.__data__.get(u);
      }
      function BO(u) {
        return this.__data__.has(u);
      }
      function DO(u, c) {
        var p = this.__data__;
        if (p instanceof Ei) {
          var m = p.__data__;
          if (!Hl || m.length < i - 1)
            return m.push([u, c]), this.size = ++p.size, this;
          p = this.__data__ = new Li(m);
        }
        return p.set(u, c), this.size = p.size, this;
      }
      Dn.prototype.clear = OO, Dn.prototype.delete = IO, Dn.prototype.get = MO, Dn.prototype.has = BO, Dn.prototype.set = DO;
      function ay(u, c) {
        var p = Me(u), m = !p && Zo(u), b = !p && !m && po(u), A = !p && !m && !b && ja(u), O = p || m || b || A, D = O ? kh(u.length, UR) : [], P = D.length;
        for (var G in u)
          (c || st.call(u, G)) && !(O && // Safari 9 has enumerable `arguments.length` in strict mode.
          (G == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
          b && (G == "offset" || G == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
          A && (G == "buffer" || G == "byteLength" || G == "byteOffset") || // Skip index properties.
          Ii(G, P))) && D.push(G);
        return D;
      }
      function ly(u) {
        var c = u.length;
        return c ? u[od(0, c - 1)] : t;
      }
      function $O(u, c) {
        return Zu(Mr(u), Vo(c, 0, u.length));
      }
      function FO(u) {
        return Zu(Mr(u));
      }
      function Kh(u, c, p) {
        (p !== t && !$n(u[c], p) || p === t && !(c in u)) && Ai(u, c, p);
      }
      function Gl(u, c, p) {
        var m = u[c];
        (!(st.call(u, c) && $n(m, p)) || p === t && !(c in u)) && Ai(u, c, p);
      }
      function Nu(u, c) {
        for (var p = u.length; p--; )
          if ($n(u[p][0], c))
            return p;
        return -1;
      }
      function PO(u, c, p, m) {
        return fo(u, function(b, A, O) {
          c(m, b, p(b), O);
        }), m;
      }
      function sy(u, c) {
        return u && oi(c, Ut(c), u);
      }
      function NO(u, c) {
        return u && oi(c, Dr(c), u);
      }
      function Ai(u, c, p) {
        c == "__proto__" && Mu ? Mu(u, c, {
          configurable: !0,
          enumerable: !0,
          value: p,
          writable: !0
        }) : u[c] = p;
      }
      function jh(u, c) {
        for (var p = -1, m = c.length, b = H(m), A = u == null; ++p < m; )
          b[p] = A ? t : Od(u, c[p]);
        return b;
      }
      function Vo(u, c, p) {
        return u === u && (p !== t && (u = u <= p ? u : p), c !== t && (u = u >= c ? u : c)), u;
      }
      function vn(u, c, p, m, b, A) {
        var O, D = c & d, P = c & v, G = c & g;
        if (p && (O = b ? p(u, m, b, A) : p(u)), O !== t)
          return O;
        if (!At(u))
          return u;
        var U = Me(u);
        if (U) {
          if (O = EI(u), !D)
            return Mr(u, O);
        } else {
          var K = or(u), re = K == oo || K == et;
          if (po(u))
            return My(u, D);
          if (K == Yr || K == Ge || re && !b) {
            if (O = P || re ? {} : Zy(u), !D)
              return P ? pI(u, NO(O, u)) : vI(u, sy(O, u));
          } else {
            if (!gt[K])
              return b ? u : {};
            O = LI(u, K, D);
          }
        }
        A || (A = new Dn());
        var ue = A.get(u);
        if (ue)
          return ue;
        A.set(u, O), EC(u) ? u.forEach(function(Ce) {
          O.add(vn(Ce, c, p, Ce, u, A));
        }) : bC(u) && u.forEach(function(Ce, ze) {
          O.set(ze, vn(Ce, c, p, ze, u, A));
        });
        var ye = G ? P ? gd : pd : P ? Dr : Ut, $e = U ? t : ye(u);
        return cn($e || u, function(Ce, ze) {
          $e && (ze = Ce, Ce = u[ze]), Gl(O, ze, vn(Ce, c, p, ze, u, A));
        }), O;
      }
      function HO(u) {
        var c = Ut(u);
        return function(p) {
          return uy(p, u, c);
        };
      }
      function uy(u, c, p) {
        var m = p.length;
        if (u == null)
          return !m;
        for (u = dt(u); m--; ) {
          var b = p[m], A = c[b], O = u[b];
          if (O === t && !(b in u) || !A(O))
            return !1;
        }
        return !0;
      }
      function fy(u, c, p) {
        if (typeof u != "function")
          throw new hn(a);
        return jl(function() {
          u.apply(t, p);
        }, c);
      }
      function Ul(u, c, p, m) {
        var b = -1, A = wu, O = !0, D = u.length, P = [], G = c.length;
        if (!D)
          return P;
        p && (c = St(c, qr(p))), m ? (A = Fh, O = !1) : c.length >= i && (A = Pl, O = !1, c = new Xo(c));
        e:
          for (; ++b < D; ) {
            var U = u[b], K = p == null ? U : p(U);
            if (U = m || U !== 0 ? U : 0, O && K === K) {
              for (var re = G; re--; )
                if (c[re] === K)
                  continue e;
              P.push(U);
            } else A(c, K, m) || P.push(U);
          }
        return P;
      }
      var fo = Py(ii), cy = Py(Qh, !0);
      function zO(u, c) {
        var p = !0;
        return fo(u, function(m, b, A) {
          return p = !!c(m, b, A), p;
        }), p;
      }
      function Hu(u, c, p) {
        for (var m = -1, b = u.length; ++m < b; ) {
          var A = u[m], O = c(A);
          if (O != null && (D === t ? O === O && !jr(O) : p(O, D)))
            var D = O, P = A;
        }
        return P;
      }
      function WO(u, c, p, m) {
        var b = u.length;
        for (p = De(p), p < 0 && (p = -p > b ? 0 : b + p), m = m === t || m > b ? b : De(m), m < 0 && (m += b), m = p > m ? 0 : AC(m); p < m; )
          u[p++] = c;
        return u;
      }
      function hy(u, c) {
        var p = [];
        return fo(u, function(m, b, A) {
          c(m, b, A) && p.push(m);
        }), p;
      }
      function Zt(u, c, p, m, b) {
        var A = -1, O = u.length;
        for (p || (p = RI), b || (b = []); ++A < O; ) {
          var D = u[A];
          c > 0 && p(D) ? c > 1 ? Zt(D, c - 1, p, m, b) : lo(b, D) : m || (b[b.length] = D);
        }
        return b;
      }
      var Zh = Ny(), dy = Ny(!0);
      function ii(u, c) {
        return u && Zh(u, c, Ut);
      }
      function Qh(u, c) {
        return u && dy(u, c, Ut);
      }
      function zu(u, c) {
        return ao(c, function(p) {
          return Mi(u[p]);
        });
      }
      function qo(u, c) {
        c = ho(c, u);
        for (var p = 0, m = c.length; u != null && p < m; )
          u = u[ai(c[p++])];
        return p && p == m ? u : t;
      }
      function vy(u, c, p) {
        var m = c(u);
        return Me(u) ? m : lo(m, p(u));
      }
      function pr(u) {
        return u == null ? u === t ? Dl : Ir : Uo && Uo in dt(u) ? SI(u) : FI(u);
      }
      function Jh(u, c) {
        return u > c;
      }
      function kO(u, c) {
        return u != null && st.call(u, c);
      }
      function GO(u, c) {
        return u != null && c in dt(u);
      }
      function UO(u, c, p) {
        return u >= ir(c, p) && u < zt(c, p);
      }
      function ed(u, c, p) {
        for (var m = p ? Fh : wu, b = u[0].length, A = u.length, O = A, D = H(A), P = 1 / 0, G = []; O--; ) {
          var U = u[O];
          O && c && (U = St(U, qr(c))), P = ir(U.length, P), D[O] = !p && (c || b >= 120 && U.length >= 120) ? new Xo(O && U) : t;
        }
        U = u[0];
        var K = -1, re = D[0];
        e:
          for (; ++K < b && G.length < P; ) {
            var ue = U[K], ye = c ? c(ue) : ue;
            if (ue = p || ue !== 0 ? ue : 0, !(re ? Pl(re, ye) : m(G, ye, p))) {
              for (O = A; --O; ) {
                var $e = D[O];
                if (!($e ? Pl($e, ye) : m(u[O], ye, p)))
                  continue e;
              }
              re && re.push(ye), G.push(ue);
            }
          }
        return G;
      }
      function YO(u, c, p, m) {
        return ii(u, function(b, A, O) {
          c(m, p(b), A, O);
        }), m;
      }
      function Yl(u, c, p) {
        c = ho(c, u), u = tC(u, c);
        var m = u == null ? u : u[ai(gn(c))];
        return m == null ? t : Vr(m, u, p);
      }
      function py(u) {
        return Ot(u) && pr(u) == Ge;
      }
      function XO(u) {
        return Ot(u) && pr(u) == Fl;
      }
      function VO(u) {
        return Ot(u) && pr(u) == Kt;
      }
      function Xl(u, c, p, m, b) {
        return u === c ? !0 : u == null || c == null || !Ot(u) && !Ot(c) ? u !== u && c !== c : qO(u, c, p, m, Xl, b);
      }
      function qO(u, c, p, m, b, A) {
        var O = Me(u), D = Me(c), P = O ? ot : or(u), G = D ? ot : or(c);
        P = P == Ge ? Yr : P, G = G == Ge ? Yr : G;
        var U = P == Yr, K = G == Yr, re = P == G;
        if (re && po(u)) {
          if (!po(c))
            return !1;
          O = !0, U = !1;
        }
        if (re && !U)
          return A || (A = new Dn()), O || ja(u) ? qy(u, c, p, m, b, A) : wI(u, c, P, p, m, b, A);
        if (!(p & y)) {
          var ue = U && st.call(u, "__wrapped__"), ye = K && st.call(c, "__wrapped__");
          if (ue || ye) {
            var $e = ue ? u.value() : u, Ce = ye ? c.value() : c;
            return A || (A = new Dn()), b($e, Ce, p, m, A);
          }
        }
        return re ? (A || (A = new Dn()), xI(u, c, p, m, b, A)) : !1;
      }
      function KO(u) {
        return Ot(u) && or(u) == ct;
      }
      function td(u, c, p, m) {
        var b = p.length, A = b, O = !m;
        if (u == null)
          return !A;
        for (u = dt(u); b--; ) {
          var D = p[b];
          if (O && D[2] ? D[1] !== u[D[0]] : !(D[0] in u))
            return !1;
        }
        for (; ++b < A; ) {
          D = p[b];
          var P = D[0], G = u[P], U = D[1];
          if (O && D[2]) {
            if (G === t && !(P in u))
              return !1;
          } else {
            var K = new Dn();
            if (m)
              var re = m(G, U, P, u, c, K);
            if (!(re === t ? Xl(U, G, y | C, m, K) : re))
              return !1;
          }
        }
        return !0;
      }
      function gy(u) {
        if (!At(u) || II(u))
          return !1;
        var c = Mi(u) ? KR : HA;
        return c.test(jo(u));
      }
      function jO(u) {
        return Ot(u) && pr(u) == ko;
      }
      function ZO(u) {
        return Ot(u) && or(u) == Xr;
      }
      function QO(u) {
        return Ot(u) && nf(u.length) && !!_t[pr(u)];
      }
      function yy(u) {
        return typeof u == "function" ? u : u == null ? $r : typeof u == "object" ? Me(u) ? _y(u[0], u[1]) : my(u) : HC(u);
      }
      function rd(u) {
        if (!Kl(u))
          return tO(u);
        var c = [];
        for (var p in dt(u))
          st.call(u, p) && p != "constructor" && c.push(p);
        return c;
      }
      function JO(u) {
        if (!At(u))
          return $I(u);
        var c = Kl(u), p = [];
        for (var m in u)
          m == "constructor" && (c || !st.call(u, m)) || p.push(m);
        return p;
      }
      function nd(u, c) {
        return u < c;
      }
      function Cy(u, c) {
        var p = -1, m = Br(u) ? H(u.length) : [];
        return fo(u, function(b, A, O) {
          m[++p] = c(b, A, O);
        }), m;
      }
      function my(u) {
        var c = Cd(u);
        return c.length == 1 && c[0][2] ? Jy(c[0][0], c[0][1]) : function(p) {
          return p === u || td(p, u, c);
        };
      }
      function _y(u, c) {
        return _d(u) && Qy(c) ? Jy(ai(u), c) : function(p) {
          var m = Od(p, u);
          return m === t && m === c ? Id(p, u) : Xl(c, m, y | C);
        };
      }
      function Wu(u, c, p, m, b) {
        u !== c && Zh(c, function(A, O) {
          if (b || (b = new Dn()), At(A))
            eI(u, c, O, p, Wu, m, b);
          else {
            var D = m ? m(xd(u, O), A, O + "", u, c, b) : t;
            D === t && (D = A), Kh(u, O, D);
          }
        }, Dr);
      }
      function eI(u, c, p, m, b, A, O) {
        var D = xd(u, p), P = xd(c, p), G = O.get(P);
        if (G) {
          Kh(u, p, G);
          return;
        }
        var U = A ? A(D, P, p + "", u, c, O) : t, K = U === t;
        if (K) {
          var re = Me(P), ue = !re && po(P), ye = !re && !ue && ja(P);
          U = P, re || ue || ye ? Me(D) ? U = D : Bt(D) ? U = Mr(D) : ue ? (K = !1, U = My(P, !0)) : ye ? (K = !1, U = By(P, !0)) : U = [] : Zl(P) || Zo(P) ? (U = D, Zo(D) ? U = RC(D) : (!At(D) || Mi(D)) && (U = Zy(P))) : K = !1;
        }
        K && (O.set(P, U), b(U, P, m, A, O), O.delete(P)), Kh(u, p, U);
      }
      function wy(u, c) {
        var p = u.length;
        if (p)
          return c += c < 0 ? p : 0, Ii(c, p) ? u[c] : t;
      }
      function xy(u, c, p) {
        c.length ? c = St(c, function(A) {
          return Me(A) ? function(O) {
            return qo(O, A.length === 1 ? A[0] : A);
          } : A;
        }) : c = [$r];
        var m = -1;
        c = St(c, qr(ve()));
        var b = Cy(u, function(A, O, D) {
          var P = St(c, function(G) {
            return G(A);
          });
          return { criteria: P, index: ++m, value: A };
        });
        return LR(b, function(A, O) {
          return dI(A, O, p);
        });
      }
      function tI(u, c) {
        return Sy(u, c, function(p, m) {
          return Id(u, m);
        });
      }
      function Sy(u, c, p) {
        for (var m = -1, b = c.length, A = {}; ++m < b; ) {
          var O = c[m], D = qo(u, O);
          p(D, O) && Vl(A, ho(O, u), D);
        }
        return A;
      }
      function rI(u) {
        return function(c) {
          return qo(c, u);
        };
      }
      function id(u, c, p, m) {
        var b = m ? ER : Ha, A = -1, O = c.length, D = u;
        for (u === c && (c = Mr(c)), p && (D = St(u, qr(p))); ++A < O; )
          for (var P = 0, G = c[A], U = p ? p(G) : G; (P = b(D, U, P, m)) > -1; )
            D !== u && Iu.call(D, P, 1), Iu.call(u, P, 1);
        return u;
      }
      function by(u, c) {
        for (var p = u ? c.length : 0, m = p - 1; p--; ) {
          var b = c[p];
          if (p == m || b !== A) {
            var A = b;
            Ii(b) ? Iu.call(u, b, 1) : sd(u, b);
          }
        }
        return u;
      }
      function od(u, c) {
        return u + Du(iy() * (c - u + 1));
      }
      function nI(u, c, p, m) {
        for (var b = -1, A = zt(Bu((c - u) / (p || 1)), 0), O = H(A); A--; )
          O[m ? A : ++b] = u, u += p;
        return O;
      }
      function ad(u, c) {
        var p = "";
        if (!u || c < 1 || c > me)
          return p;
        do
          c % 2 && (p += u), c = Du(c / 2), c && (u += u);
        while (c);
        return p;
      }
      function Pe(u, c) {
        return Sd(eC(u, c, $r), u + "");
      }
      function iI(u) {
        return ly(Za(u));
      }
      function oI(u, c) {
        var p = Za(u);
        return Zu(p, Vo(c, 0, p.length));
      }
      function Vl(u, c, p, m) {
        if (!At(u))
          return u;
        c = ho(c, u);
        for (var b = -1, A = c.length, O = A - 1, D = u; D != null && ++b < A; ) {
          var P = ai(c[b]), G = p;
          if (P === "__proto__" || P === "constructor" || P === "prototype")
            return u;
          if (b != O) {
            var U = D[P];
            G = m ? m(U, P, D) : t, G === t && (G = At(U) ? U : Ii(c[b + 1]) ? [] : {});
          }
          Gl(D, P, G), D = D[P];
        }
        return u;
      }
      var Ty = $u ? function(u, c) {
        return $u.set(u, c), u;
      } : $r, aI = Mu ? function(u, c) {
        return Mu(u, "toString", {
          configurable: !0,
          enumerable: !1,
          value: Bd(c),
          writable: !0
        });
      } : $r;
      function lI(u) {
        return Zu(Za(u));
      }
      function pn(u, c, p) {
        var m = -1, b = u.length;
        c < 0 && (c = -c > b ? 0 : b + c), p = p > b ? b : p, p < 0 && (p += b), b = c > p ? 0 : p - c >>> 0, c >>>= 0;
        for (var A = H(b); ++m < b; )
          A[m] = u[m + c];
        return A;
      }
      function sI(u, c) {
        var p;
        return fo(u, function(m, b, A) {
          return p = c(m, b, A), !p;
        }), !!p;
      }
      function ku(u, c, p) {
        var m = 0, b = u == null ? m : u.length;
        if (typeof c == "number" && c === c && b <= ft) {
          for (; m < b; ) {
            var A = m + b >>> 1, O = u[A];
            O !== null && !jr(O) && (p ? O <= c : O < c) ? m = A + 1 : b = A;
          }
          return b;
        }
        return ld(u, c, $r, p);
      }
      function ld(u, c, p, m) {
        var b = 0, A = u == null ? 0 : u.length;
        if (A === 0)
          return 0;
        c = p(c);
        for (var O = c !== c, D = c === null, P = jr(c), G = c === t; b < A; ) {
          var U = Du((b + A) / 2), K = p(u[U]), re = K !== t, ue = K === null, ye = K === K, $e = jr(K);
          if (O)
            var Ce = m || ye;
          else G ? Ce = ye && (m || re) : D ? Ce = ye && re && (m || !ue) : P ? Ce = ye && re && !ue && (m || !$e) : ue || $e ? Ce = !1 : Ce = m ? K <= c : K < c;
          Ce ? b = U + 1 : A = U;
        }
        return ir(A, Ze);
      }
      function Ey(u, c) {
        for (var p = -1, m = u.length, b = 0, A = []; ++p < m; ) {
          var O = u[p], D = c ? c(O) : O;
          if (!p || !$n(D, P)) {
            var P = D;
            A[b++] = O === 0 ? 0 : O;
          }
        }
        return A;
      }
      function Ly(u) {
        return typeof u == "number" ? u : jr(u) ? ke : +u;
      }
      function Kr(u) {
        if (typeof u == "string")
          return u;
        if (Me(u))
          return St(u, Kr) + "";
        if (jr(u))
          return oy ? oy.call(u) : "";
        var c = u + "";
        return c == "0" && 1 / u == -Oe ? "-0" : c;
      }
      function co(u, c, p) {
        var m = -1, b = wu, A = u.length, O = !0, D = [], P = D;
        if (p)
          O = !1, b = Fh;
        else if (A >= i) {
          var G = c ? null : mI(u);
          if (G)
            return Su(G);
          O = !1, b = Pl, P = new Xo();
        } else
          P = c ? [] : D;
        e:
          for (; ++m < A; ) {
            var U = u[m], K = c ? c(U) : U;
            if (U = p || U !== 0 ? U : 0, O && K === K) {
              for (var re = P.length; re--; )
                if (P[re] === K)
                  continue e;
              c && P.push(K), D.push(U);
            } else b(P, K, p) || (P !== D && P.push(K), D.push(U));
          }
        return D;
      }
      function sd(u, c) {
        return c = ho(c, u), u = tC(u, c), u == null || delete u[ai(gn(c))];
      }
      function Ay(u, c, p, m) {
        return Vl(u, c, p(qo(u, c)), m);
      }
      function Gu(u, c, p, m) {
        for (var b = u.length, A = m ? b : -1; (m ? A-- : ++A < b) && c(u[A], A, u); )
          ;
        return p ? pn(u, m ? 0 : A, m ? A + 1 : b) : pn(u, m ? A + 1 : 0, m ? b : A);
      }
      function Ry(u, c) {
        var p = u;
        return p instanceof Ue && (p = p.value()), Ph(c, function(m, b) {
          return b.func.apply(b.thisArg, lo([m], b.args));
        }, p);
      }
      function ud(u, c, p) {
        var m = u.length;
        if (m < 2)
          return m ? co(u[0]) : [];
        for (var b = -1, A = H(m); ++b < m; )
          for (var O = u[b], D = -1; ++D < m; )
            D != b && (A[b] = Ul(A[b] || O, u[D], c, p));
        return co(Zt(A, 1), c, p);
      }
      function Oy(u, c, p) {
        for (var m = -1, b = u.length, A = c.length, O = {}; ++m < b; ) {
          var D = m < A ? c[m] : t;
          p(O, u[m], D);
        }
        return O;
      }
      function fd(u) {
        return Bt(u) ? u : [];
      }
      function cd(u) {
        return typeof u == "function" ? u : $r;
      }
      function ho(u, c) {
        return Me(u) ? u : _d(u, c) ? [u] : oC(at(u));
      }
      var uI = Pe;
      function vo(u, c, p) {
        var m = u.length;
        return p = p === t ? m : p, !c && p >= m ? u : pn(u, c, p);
      }
      var Iy = jR || function(u) {
        return jt.clearTimeout(u);
      };
      function My(u, c) {
        if (c)
          return u.slice();
        var p = u.length, m = J1 ? J1(p) : new u.constructor(p);
        return u.copy(m), m;
      }
      function hd(u) {
        var c = new u.constructor(u.byteLength);
        return new Ru(c).set(new Ru(u)), c;
      }
      function fI(u, c) {
        var p = c ? hd(u.buffer) : u.buffer;
        return new u.constructor(p, u.byteOffset, u.byteLength);
      }
      function cI(u) {
        var c = new u.constructor(u.source, p1.exec(u));
        return c.lastIndex = u.lastIndex, c;
      }
      function hI(u) {
        return kl ? dt(kl.call(u)) : {};
      }
      function By(u, c) {
        var p = c ? hd(u.buffer) : u.buffer;
        return new u.constructor(p, u.byteOffset, u.length);
      }
      function Dy(u, c) {
        if (u !== c) {
          var p = u !== t, m = u === null, b = u === u, A = jr(u), O = c !== t, D = c === null, P = c === c, G = jr(c);
          if (!D && !G && !A && u > c || A && O && P && !D && !G || m && O && P || !p && P || !b)
            return 1;
          if (!m && !A && !G && u < c || G && p && b && !m && !A || D && p && b || !O && b || !P)
            return -1;
        }
        return 0;
      }
      function dI(u, c, p) {
        for (var m = -1, b = u.criteria, A = c.criteria, O = b.length, D = p.length; ++m < O; ) {
          var P = Dy(b[m], A[m]);
          if (P) {
            if (m >= D)
              return P;
            var G = p[m];
            return P * (G == "desc" ? -1 : 1);
          }
        }
        return u.index - c.index;
      }
      function $y(u, c, p, m) {
        for (var b = -1, A = u.length, O = p.length, D = -1, P = c.length, G = zt(A - O, 0), U = H(P + G), K = !m; ++D < P; )
          U[D] = c[D];
        for (; ++b < O; )
          (K || b < A) && (U[p[b]] = u[b]);
        for (; G--; )
          U[D++] = u[b++];
        return U;
      }
      function Fy(u, c, p, m) {
        for (var b = -1, A = u.length, O = -1, D = p.length, P = -1, G = c.length, U = zt(A - D, 0), K = H(U + G), re = !m; ++b < U; )
          K[b] = u[b];
        for (var ue = b; ++P < G; )
          K[ue + P] = c[P];
        for (; ++O < D; )
          (re || b < A) && (K[ue + p[O]] = u[b++]);
        return K;
      }
      function Mr(u, c) {
        var p = -1, m = u.length;
        for (c || (c = H(m)); ++p < m; )
          c[p] = u[p];
        return c;
      }
      function oi(u, c, p, m) {
        var b = !p;
        p || (p = {});
        for (var A = -1, O = c.length; ++A < O; ) {
          var D = c[A], P = m ? m(p[D], u[D], D, p, u) : t;
          P === t && (P = u[D]), b ? Ai(p, D, P) : Gl(p, D, P);
        }
        return p;
      }
      function vI(u, c) {
        return oi(u, md(u), c);
      }
      function pI(u, c) {
        return oi(u, Ky(u), c);
      }
      function Uu(u, c) {
        return function(p, m) {
          var b = Me(p) ? _R : PO, A = c ? c() : {};
          return b(p, u, ve(m, 2), A);
        };
      }
      function Va(u) {
        return Pe(function(c, p) {
          var m = -1, b = p.length, A = b > 1 ? p[b - 1] : t, O = b > 2 ? p[2] : t;
          for (A = u.length > 3 && typeof A == "function" ? (b--, A) : t, O && gr(p[0], p[1], O) && (A = b < 3 ? t : A, b = 1), c = dt(c); ++m < b; ) {
            var D = p[m];
            D && u(c, D, m, A);
          }
          return c;
        });
      }
      function Py(u, c) {
        return function(p, m) {
          if (p == null)
            return p;
          if (!Br(p))
            return u(p, m);
          for (var b = p.length, A = c ? b : -1, O = dt(p); (c ? A-- : ++A < b) && m(O[A], A, O) !== !1; )
            ;
          return p;
        };
      }
      function Ny(u) {
        return function(c, p, m) {
          for (var b = -1, A = dt(c), O = m(c), D = O.length; D--; ) {
            var P = O[u ? D : ++b];
            if (p(A[P], P, A) === !1)
              break;
          }
          return c;
        };
      }
      function gI(u, c, p) {
        var m = c & _, b = ql(u);
        function A() {
          var O = this && this !== jt && this instanceof A ? b : u;
          return O.apply(m ? p : this, arguments);
        }
        return A;
      }
      function Hy(u) {
        return function(c) {
          c = at(c);
          var p = za(c) ? Bn(c) : t, m = p ? p[0] : c.charAt(0), b = p ? vo(p, 1).join("") : c.slice(1);
          return m[u]() + b;
        };
      }
      function qa(u) {
        return function(c) {
          return Ph(PC(FC(c).replace(aR, "")), u, "");
        };
      }
      function ql(u) {
        return function() {
          var c = arguments;
          switch (c.length) {
            case 0:
              return new u();
            case 1:
              return new u(c[0]);
            case 2:
              return new u(c[0], c[1]);
            case 3:
              return new u(c[0], c[1], c[2]);
            case 4:
              return new u(c[0], c[1], c[2], c[3]);
            case 5:
              return new u(c[0], c[1], c[2], c[3], c[4]);
            case 6:
              return new u(c[0], c[1], c[2], c[3], c[4], c[5]);
            case 7:
              return new u(c[0], c[1], c[2], c[3], c[4], c[5], c[6]);
          }
          var p = Xa(u.prototype), m = u.apply(p, c);
          return At(m) ? m : p;
        };
      }
      function yI(u, c, p) {
        var m = ql(u);
        function b() {
          for (var A = arguments.length, O = H(A), D = A, P = Ka(b); D--; )
            O[D] = arguments[D];
          var G = A < 3 && O[0] !== P && O[A - 1] !== P ? [] : so(O, P);
          if (A -= G.length, A < p)
            return Uy(
              u,
              c,
              Yu,
              b.placeholder,
              t,
              O,
              G,
              t,
              t,
              p - A
            );
          var U = this && this !== jt && this instanceof b ? m : u;
          return Vr(U, this, O);
        }
        return b;
      }
      function zy(u) {
        return function(c, p, m) {
          var b = dt(c);
          if (!Br(c)) {
            var A = ve(p, 3);
            c = Ut(c), p = function(D) {
              return A(b[D], D, b);
            };
          }
          var O = u(c, p, m);
          return O > -1 ? b[A ? c[O] : O] : t;
        };
      }
      function Wy(u) {
        return Oi(function(c) {
          var p = c.length, m = p, b = dn.prototype.thru;
          for (u && c.reverse(); m--; ) {
            var A = c[m];
            if (typeof A != "function")
              throw new hn(a);
            if (b && !O && Ku(A) == "wrapper")
              var O = new dn([], !0);
          }
          for (m = O ? m : p; ++m < p; ) {
            A = c[m];
            var D = Ku(A), P = D == "wrapper" ? yd(A) : t;
            P && wd(P[0]) && P[1] == ($ | S | R | N) && !P[4].length && P[9] == 1 ? O = O[Ku(P[0])].apply(O, P[3]) : O = A.length == 1 && wd(A) ? O[D]() : O.thru(A);
          }
          return function() {
            var G = arguments, U = G[0];
            if (O && G.length == 1 && Me(U))
              return O.plant(U).value();
            for (var K = 0, re = p ? c[K].apply(this, G) : U; ++K < p; )
              re = c[K].call(this, re);
            return re;
          };
        });
      }
      function Yu(u, c, p, m, b, A, O, D, P, G) {
        var U = c & $, K = c & _, re = c & w, ue = c & (S | T), ye = c & z, $e = re ? t : ql(u);
        function Ce() {
          for (var ze = arguments.length, Xe = H(ze), Zr = ze; Zr--; )
            Xe[Zr] = arguments[Zr];
          if (ue)
            var yr = Ka(Ce), Qr = RR(Xe, yr);
          if (m && (Xe = $y(Xe, m, b, ue)), A && (Xe = Fy(Xe, A, O, ue)), ze -= Qr, ue && ze < G) {
            var Dt = so(Xe, yr);
            return Uy(
              u,
              c,
              Yu,
              Ce.placeholder,
              p,
              Xe,
              Dt,
              D,
              P,
              G - ze
            );
          }
          var Fn = K ? p : this, Di = re ? Fn[u] : u;
          return ze = Xe.length, D ? Xe = PI(Xe, D) : ye && ze > 1 && Xe.reverse(), U && P < ze && (Xe.length = P), this && this !== jt && this instanceof Ce && (Di = $e || ql(Di)), Di.apply(Fn, Xe);
        }
        return Ce;
      }
      function ky(u, c) {
        return function(p, m) {
          return YO(p, u, c(m), {});
        };
      }
      function Xu(u, c) {
        return function(p, m) {
          var b;
          if (p === t && m === t)
            return c;
          if (p !== t && (b = p), m !== t) {
            if (b === t)
              return m;
            typeof p == "string" || typeof m == "string" ? (p = Kr(p), m = Kr(m)) : (p = Ly(p), m = Ly(m)), b = u(p, m);
          }
          return b;
        };
      }
      function dd(u) {
        return Oi(function(c) {
          return c = St(c, qr(ve())), Pe(function(p) {
            var m = this;
            return u(c, function(b) {
              return Vr(b, m, p);
            });
          });
        });
      }
      function Vu(u, c) {
        c = c === t ? " " : Kr(c);
        var p = c.length;
        if (p < 2)
          return p ? ad(c, u) : c;
        var m = ad(c, Bu(u / Wa(c)));
        return za(c) ? vo(Bn(m), 0, u).join("") : m.slice(0, u);
      }
      function CI(u, c, p, m) {
        var b = c & _, A = ql(u);
        function O() {
          for (var D = -1, P = arguments.length, G = -1, U = m.length, K = H(U + P), re = this && this !== jt && this instanceof O ? A : u; ++G < U; )
            K[G] = m[G];
          for (; P--; )
            K[G++] = arguments[++D];
          return Vr(re, b ? p : this, K);
        }
        return O;
      }
      function Gy(u) {
        return function(c, p, m) {
          return m && typeof m != "number" && gr(c, p, m) && (p = m = t), c = Bi(c), p === t ? (p = c, c = 0) : p = Bi(p), m = m === t ? c < p ? 1 : -1 : Bi(m), nI(c, p, m, u);
        };
      }
      function qu(u) {
        return function(c, p) {
          return typeof c == "string" && typeof p == "string" || (c = yn(c), p = yn(p)), u(c, p);
        };
      }
      function Uy(u, c, p, m, b, A, O, D, P, G) {
        var U = c & S, K = U ? O : t, re = U ? t : O, ue = U ? A : t, ye = U ? t : A;
        c |= U ? R : B, c &= ~(U ? B : R), c & x || (c &= ~(_ | w));
        var $e = [
          u,
          c,
          b,
          ue,
          K,
          ye,
          re,
          D,
          P,
          G
        ], Ce = p.apply(t, $e);
        return wd(u) && rC(Ce, $e), Ce.placeholder = m, nC(Ce, u, c);
      }
      function vd(u) {
        var c = Ht[u];
        return function(p, m) {
          if (p = yn(p), m = m == null ? 0 : ir(De(m), 292), m && ny(p)) {
            var b = (at(p) + "e").split("e"), A = c(b[0] + "e" + (+b[1] + m));
            return b = (at(A) + "e").split("e"), +(b[0] + "e" + (+b[1] - m));
          }
          return c(p);
        };
      }
      var mI = Ua && 1 / Su(new Ua([, -0]))[1] == Oe ? function(u) {
        return new Ua(u);
      } : Fd;
      function Yy(u) {
        return function(c) {
          var p = or(c);
          return p == ct ? Uh(c) : p == Xr ? FR(c) : AR(c, u(c));
        };
      }
      function Ri(u, c, p, m, b, A, O, D) {
        var P = c & w;
        if (!P && typeof u != "function")
          throw new hn(a);
        var G = m ? m.length : 0;
        if (G || (c &= ~(R | B), m = b = t), O = O === t ? O : zt(De(O), 0), D = D === t ? D : De(D), G -= b ? b.length : 0, c & B) {
          var U = m, K = b;
          m = b = t;
        }
        var re = P ? t : yd(u), ue = [
          u,
          c,
          p,
          m,
          b,
          U,
          K,
          A,
          O,
          D
        ];
        if (re && DI(ue, re), u = ue[0], c = ue[1], p = ue[2], m = ue[3], b = ue[4], D = ue[9] = ue[9] === t ? P ? 0 : u.length : zt(ue[9] - G, 0), !D && c & (S | T) && (c &= ~(S | T)), !c || c == _)
          var ye = gI(u, c, p);
        else c == S || c == T ? ye = yI(u, c, D) : (c == R || c == (_ | R)) && !b.length ? ye = CI(u, c, p, m) : ye = Yu.apply(t, ue);
        var $e = re ? Ty : rC;
        return nC($e(ye, ue), u, c);
      }
      function Xy(u, c, p, m) {
        return u === t || $n(u, Ga[p]) && !st.call(m, p) ? c : u;
      }
      function Vy(u, c, p, m, b, A) {
        return At(u) && At(c) && (A.set(c, u), Wu(u, c, t, Vy, A), A.delete(c)), u;
      }
      function _I(u) {
        return Zl(u) ? t : u;
      }
      function qy(u, c, p, m, b, A) {
        var O = p & y, D = u.length, P = c.length;
        if (D != P && !(O && P > D))
          return !1;
        var G = A.get(u), U = A.get(c);
        if (G && U)
          return G == c && U == u;
        var K = -1, re = !0, ue = p & C ? new Xo() : t;
        for (A.set(u, c), A.set(c, u); ++K < D; ) {
          var ye = u[K], $e = c[K];
          if (m)
            var Ce = O ? m($e, ye, K, c, u, A) : m(ye, $e, K, u, c, A);
          if (Ce !== t) {
            if (Ce)
              continue;
            re = !1;
            break;
          }
          if (ue) {
            if (!Nh(c, function(ze, Xe) {
              if (!Pl(ue, Xe) && (ye === ze || b(ye, ze, p, m, A)))
                return ue.push(Xe);
            })) {
              re = !1;
              break;
            }
          } else if (!(ye === $e || b(ye, $e, p, m, A))) {
            re = !1;
            break;
          }
        }
        return A.delete(u), A.delete(c), re;
      }
      function wI(u, c, p, m, b, A, O) {
        switch (p) {
          case Pa:
            if (u.byteLength != c.byteLength || u.byteOffset != c.byteOffset)
              return !1;
            u = u.buffer, c = c.buffer;
          case Fl:
            return !(u.byteLength != c.byteLength || !A(new Ru(u), new Ru(c)));
          case vr:
          case Kt:
          case pt:
            return $n(+u, +c);
          case ri:
            return u.name == c.name && u.message == c.message;
          case ko:
          case Mn:
            return u == c + "";
          case ct:
            var D = Uh;
          case Xr:
            var P = m & y;
            if (D || (D = Su), u.size != c.size && !P)
              return !1;
            var G = O.get(u);
            if (G)
              return G == c;
            m |= C, O.set(u, c);
            var U = qy(D(u), D(c), m, b, A, O);
            return O.delete(u), U;
          case ni:
            if (kl)
              return kl.call(u) == kl.call(c);
        }
        return !1;
      }
      function xI(u, c, p, m, b, A) {
        var O = p & y, D = pd(u), P = D.length, G = pd(c), U = G.length;
        if (P != U && !O)
          return !1;
        for (var K = P; K--; ) {
          var re = D[K];
          if (!(O ? re in c : st.call(c, re)))
            return !1;
        }
        var ue = A.get(u), ye = A.get(c);
        if (ue && ye)
          return ue == c && ye == u;
        var $e = !0;
        A.set(u, c), A.set(c, u);
        for (var Ce = O; ++K < P; ) {
          re = D[K];
          var ze = u[re], Xe = c[re];
          if (m)
            var Zr = O ? m(Xe, ze, re, c, u, A) : m(ze, Xe, re, u, c, A);
          if (!(Zr === t ? ze === Xe || b(ze, Xe, p, m, A) : Zr)) {
            $e = !1;
            break;
          }
          Ce || (Ce = re == "constructor");
        }
        if ($e && !Ce) {
          var yr = u.constructor, Qr = c.constructor;
          yr != Qr && "constructor" in u && "constructor" in c && !(typeof yr == "function" && yr instanceof yr && typeof Qr == "function" && Qr instanceof Qr) && ($e = !1);
        }
        return A.delete(u), A.delete(c), $e;
      }
      function Oi(u) {
        return Sd(eC(u, t, uC), u + "");
      }
      function pd(u) {
        return vy(u, Ut, md);
      }
      function gd(u) {
        return vy(u, Dr, Ky);
      }
      var yd = $u ? function(u) {
        return $u.get(u);
      } : Fd;
      function Ku(u) {
        for (var c = u.name + "", p = Ya[c], m = st.call(Ya, c) ? p.length : 0; m--; ) {
          var b = p[m], A = b.func;
          if (A == null || A == u)
            return b.name;
        }
        return c;
      }
      function Ka(u) {
        var c = st.call(E, "placeholder") ? E : u;
        return c.placeholder;
      }
      function ve() {
        var u = E.iteratee || Dd;
        return u = u === Dd ? yy : u, arguments.length ? u(arguments[0], arguments[1]) : u;
      }
      function ju(u, c) {
        var p = u.__data__;
        return OI(c) ? p[typeof c == "string" ? "string" : "hash"] : p.map;
      }
      function Cd(u) {
        for (var c = Ut(u), p = c.length; p--; ) {
          var m = c[p], b = u[m];
          c[p] = [m, b, Qy(b)];
        }
        return c;
      }
      function Ko(u, c) {
        var p = BR(u, c);
        return gy(p) ? p : t;
      }
      function SI(u) {
        var c = st.call(u, Uo), p = u[Uo];
        try {
          u[Uo] = t;
          var m = !0;
        } catch {
        }
        var b = Lu.call(u);
        return m && (c ? u[Uo] = p : delete u[Uo]), b;
      }
      var md = Xh ? function(u) {
        return u == null ? [] : (u = dt(u), ao(Xh(u), function(c) {
          return ty.call(u, c);
        }));
      } : Pd, Ky = Xh ? function(u) {
        for (var c = []; u; )
          lo(c, md(u)), u = Ou(u);
        return c;
      } : Pd, or = pr;
      (Vh && or(new Vh(new ArrayBuffer(1))) != Pa || Hl && or(new Hl()) != ct || qh && or(qh.resolve()) != yu || Ua && or(new Ua()) != Xr || zl && or(new zl()) != $l) && (or = function(u) {
        var c = pr(u), p = c == Yr ? u.constructor : t, m = p ? jo(p) : "";
        if (m)
          switch (m) {
            case oO:
              return Pa;
            case aO:
              return ct;
            case lO:
              return yu;
            case sO:
              return Xr;
            case uO:
              return $l;
          }
        return c;
      });
      function bI(u, c, p) {
        for (var m = -1, b = p.length; ++m < b; ) {
          var A = p[m], O = A.size;
          switch (A.type) {
            case "drop":
              u += O;
              break;
            case "dropRight":
              c -= O;
              break;
            case "take":
              c = ir(c, u + O);
              break;
            case "takeRight":
              u = zt(u, c - O);
              break;
          }
        }
        return { start: u, end: c };
      }
      function TI(u) {
        var c = u.match(IA);
        return c ? c[1].split(MA) : [];
      }
      function jy(u, c, p) {
        c = ho(c, u);
        for (var m = -1, b = c.length, A = !1; ++m < b; ) {
          var O = ai(c[m]);
          if (!(A = u != null && p(u, O)))
            break;
          u = u[O];
        }
        return A || ++m != b ? A : (b = u == null ? 0 : u.length, !!b && nf(b) && Ii(O, b) && (Me(u) || Zo(u)));
      }
      function EI(u) {
        var c = u.length, p = new u.constructor(c);
        return c && typeof u[0] == "string" && st.call(u, "index") && (p.index = u.index, p.input = u.input), p;
      }
      function Zy(u) {
        return typeof u.constructor == "function" && !Kl(u) ? Xa(Ou(u)) : {};
      }
      function LI(u, c, p) {
        var m = u.constructor;
        switch (c) {
          case Fl:
            return hd(u);
          case vr:
          case Kt:
            return new m(+u);
          case Pa:
            return fI(u, p);
          case Ch:
          case mh:
          case _h:
          case wh:
          case xh:
          case Sh:
          case bh:
          case Th:
          case Eh:
            return By(u, p);
          case ct:
            return new m();
          case pt:
          case Mn:
            return new m(u);
          case ko:
            return cI(u);
          case Xr:
            return new m();
          case ni:
            return hI(u);
        }
      }
      function AI(u, c) {
        var p = c.length;
        if (!p)
          return u;
        var m = p - 1;
        return c[m] = (p > 1 ? "& " : "") + c[m], c = c.join(p > 2 ? ", " : " "), u.replace(OA, `{
/* [wrapped with ` + c + `] */
`);
      }
      function RI(u) {
        return Me(u) || Zo(u) || !!(ry && u && u[ry]);
      }
      function Ii(u, c) {
        var p = typeof u;
        return c = c ?? me, !!c && (p == "number" || p != "symbol" && WA.test(u)) && u > -1 && u % 1 == 0 && u < c;
      }
      function gr(u, c, p) {
        if (!At(p))
          return !1;
        var m = typeof c;
        return (m == "number" ? Br(p) && Ii(c, p.length) : m == "string" && c in p) ? $n(p[c], u) : !1;
      }
      function _d(u, c) {
        if (Me(u))
          return !1;
        var p = typeof u;
        return p == "number" || p == "symbol" || p == "boolean" || u == null || jr(u) ? !0 : EA.test(u) || !TA.test(u) || c != null && u in dt(c);
      }
      function OI(u) {
        var c = typeof u;
        return c == "string" || c == "number" || c == "symbol" || c == "boolean" ? u !== "__proto__" : u === null;
      }
      function wd(u) {
        var c = Ku(u), p = E[c];
        if (typeof p != "function" || !(c in Ue.prototype))
          return !1;
        if (u === p)
          return !0;
        var m = yd(p);
        return !!m && u === m[0];
      }
      function II(u) {
        return !!Q1 && Q1 in u;
      }
      var MI = Tu ? Mi : Nd;
      function Kl(u) {
        var c = u && u.constructor, p = typeof c == "function" && c.prototype || Ga;
        return u === p;
      }
      function Qy(u) {
        return u === u && !At(u);
      }
      function Jy(u, c) {
        return function(p) {
          return p == null ? !1 : p[u] === c && (c !== t || u in dt(p));
        };
      }
      function BI(u) {
        var c = tf(u, function(m) {
          return p.size === f && p.clear(), m;
        }), p = c.cache;
        return c;
      }
      function DI(u, c) {
        var p = u[1], m = c[1], b = p | m, A = b < (_ | w | $), O = m == $ && p == S || m == $ && p == N && u[7].length <= c[8] || m == ($ | N) && c[7].length <= c[8] && p == S;
        if (!(A || O))
          return u;
        m & _ && (u[2] = c[2], b |= p & _ ? 0 : x);
        var D = c[3];
        if (D) {
          var P = u[3];
          u[3] = P ? $y(P, D, c[4]) : D, u[4] = P ? so(u[3], h) : c[4];
        }
        return D = c[5], D && (P = u[5], u[5] = P ? Fy(P, D, c[6]) : D, u[6] = P ? so(u[5], h) : c[6]), D = c[7], D && (u[7] = D), m & $ && (u[8] = u[8] == null ? c[8] : ir(u[8], c[8])), u[9] == null && (u[9] = c[9]), u[0] = c[0], u[1] = b, u;
      }
      function $I(u) {
        var c = [];
        if (u != null)
          for (var p in dt(u))
            c.push(p);
        return c;
      }
      function FI(u) {
        return Lu.call(u);
      }
      function eC(u, c, p) {
        return c = zt(c === t ? u.length - 1 : c, 0), function() {
          for (var m = arguments, b = -1, A = zt(m.length - c, 0), O = H(A); ++b < A; )
            O[b] = m[c + b];
          b = -1;
          for (var D = H(c + 1); ++b < c; )
            D[b] = m[b];
          return D[c] = p(O), Vr(u, this, D);
        };
      }
      function tC(u, c) {
        return c.length < 2 ? u : qo(u, pn(c, 0, -1));
      }
      function PI(u, c) {
        for (var p = u.length, m = ir(c.length, p), b = Mr(u); m--; ) {
          var A = c[m];
          u[m] = Ii(A, p) ? b[A] : t;
        }
        return u;
      }
      function xd(u, c) {
        if (!(c === "constructor" && typeof u[c] == "function") && c != "__proto__")
          return u[c];
      }
      var rC = iC(Ty), jl = QR || function(u, c) {
        return jt.setTimeout(u, c);
      }, Sd = iC(aI);
      function nC(u, c, p) {
        var m = c + "";
        return Sd(u, AI(m, NI(TI(m), p)));
      }
      function iC(u) {
        var c = 0, p = 0;
        return function() {
          var m = rO(), b = ne - (m - p);
          if (p = m, b > 0) {
            if (++c >= Z)
              return arguments[0];
          } else
            c = 0;
          return u.apply(t, arguments);
        };
      }
      function Zu(u, c) {
        var p = -1, m = u.length, b = m - 1;
        for (c = c === t ? m : c; ++p < c; ) {
          var A = od(p, b), O = u[A];
          u[A] = u[p], u[p] = O;
        }
        return u.length = c, u;
      }
      var oC = BI(function(u) {
        var c = [];
        return u.charCodeAt(0) === 46 && c.push(""), u.replace(LA, function(p, m, b, A) {
          c.push(b ? A.replace($A, "$1") : m || p);
        }), c;
      });
      function ai(u) {
        if (typeof u == "string" || jr(u))
          return u;
        var c = u + "";
        return c == "0" && 1 / u == -Oe ? "-0" : c;
      }
      function jo(u) {
        if (u != null) {
          try {
            return Eu.call(u);
          } catch {
          }
          try {
            return u + "";
          } catch {
          }
        }
        return "";
      }
      function NI(u, c) {
        return cn(Fe, function(p) {
          var m = "_." + p[0];
          c & p[1] && !wu(u, m) && u.push(m);
        }), u.sort();
      }
      function aC(u) {
        if (u instanceof Ue)
          return u.clone();
        var c = new dn(u.__wrapped__, u.__chain__);
        return c.__actions__ = Mr(u.__actions__), c.__index__ = u.__index__, c.__values__ = u.__values__, c;
      }
      function HI(u, c, p) {
        (p ? gr(u, c, p) : c === t) ? c = 1 : c = zt(De(c), 0);
        var m = u == null ? 0 : u.length;
        if (!m || c < 1)
          return [];
        for (var b = 0, A = 0, O = H(Bu(m / c)); b < m; )
          O[A++] = pn(u, b, b += c);
        return O;
      }
      function zI(u) {
        for (var c = -1, p = u == null ? 0 : u.length, m = 0, b = []; ++c < p; ) {
          var A = u[c];
          A && (b[m++] = A);
        }
        return b;
      }
      function WI() {
        var u = arguments.length;
        if (!u)
          return [];
        for (var c = H(u - 1), p = arguments[0], m = u; m--; )
          c[m - 1] = arguments[m];
        return lo(Me(p) ? Mr(p) : [p], Zt(c, 1));
      }
      var kI = Pe(function(u, c) {
        return Bt(u) ? Ul(u, Zt(c, 1, Bt, !0)) : [];
      }), GI = Pe(function(u, c) {
        var p = gn(c);
        return Bt(p) && (p = t), Bt(u) ? Ul(u, Zt(c, 1, Bt, !0), ve(p, 2)) : [];
      }), UI = Pe(function(u, c) {
        var p = gn(c);
        return Bt(p) && (p = t), Bt(u) ? Ul(u, Zt(c, 1, Bt, !0), t, p) : [];
      });
      function YI(u, c, p) {
        var m = u == null ? 0 : u.length;
        return m ? (c = p || c === t ? 1 : De(c), pn(u, c < 0 ? 0 : c, m)) : [];
      }
      function XI(u, c, p) {
        var m = u == null ? 0 : u.length;
        return m ? (c = p || c === t ? 1 : De(c), c = m - c, pn(u, 0, c < 0 ? 0 : c)) : [];
      }
      function VI(u, c) {
        return u && u.length ? Gu(u, ve(c, 3), !0, !0) : [];
      }
      function qI(u, c) {
        return u && u.length ? Gu(u, ve(c, 3), !0) : [];
      }
      function KI(u, c, p, m) {
        var b = u == null ? 0 : u.length;
        return b ? (p && typeof p != "number" && gr(u, c, p) && (p = 0, m = b), WO(u, c, p, m)) : [];
      }
      function lC(u, c, p) {
        var m = u == null ? 0 : u.length;
        if (!m)
          return -1;
        var b = p == null ? 0 : De(p);
        return b < 0 && (b = zt(m + b, 0)), xu(u, ve(c, 3), b);
      }
      function sC(u, c, p) {
        var m = u == null ? 0 : u.length;
        if (!m)
          return -1;
        var b = m - 1;
        return p !== t && (b = De(p), b = p < 0 ? zt(m + b, 0) : ir(b, m - 1)), xu(u, ve(c, 3), b, !0);
      }
      function uC(u) {
        var c = u == null ? 0 : u.length;
        return c ? Zt(u, 1) : [];
      }
      function jI(u) {
        var c = u == null ? 0 : u.length;
        return c ? Zt(u, Oe) : [];
      }
      function ZI(u, c) {
        var p = u == null ? 0 : u.length;
        return p ? (c = c === t ? 1 : De(c), Zt(u, c)) : [];
      }
      function QI(u) {
        for (var c = -1, p = u == null ? 0 : u.length, m = {}; ++c < p; ) {
          var b = u[c];
          m[b[0]] = b[1];
        }
        return m;
      }
      function fC(u) {
        return u && u.length ? u[0] : t;
      }
      function JI(u, c, p) {
        var m = u == null ? 0 : u.length;
        if (!m)
          return -1;
        var b = p == null ? 0 : De(p);
        return b < 0 && (b = zt(m + b, 0)), Ha(u, c, b);
      }
      function eM(u) {
        var c = u == null ? 0 : u.length;
        return c ? pn(u, 0, -1) : [];
      }
      var tM = Pe(function(u) {
        var c = St(u, fd);
        return c.length && c[0] === u[0] ? ed(c) : [];
      }), rM = Pe(function(u) {
        var c = gn(u), p = St(u, fd);
        return c === gn(p) ? c = t : p.pop(), p.length && p[0] === u[0] ? ed(p, ve(c, 2)) : [];
      }), nM = Pe(function(u) {
        var c = gn(u), p = St(u, fd);
        return c = typeof c == "function" ? c : t, c && p.pop(), p.length && p[0] === u[0] ? ed(p, t, c) : [];
      });
      function iM(u, c) {
        return u == null ? "" : eO.call(u, c);
      }
      function gn(u) {
        var c = u == null ? 0 : u.length;
        return c ? u[c - 1] : t;
      }
      function oM(u, c, p) {
        var m = u == null ? 0 : u.length;
        if (!m)
          return -1;
        var b = m;
        return p !== t && (b = De(p), b = b < 0 ? zt(m + b, 0) : ir(b, m - 1)), c === c ? NR(u, c, b) : xu(u, U1, b, !0);
      }
      function aM(u, c) {
        return u && u.length ? wy(u, De(c)) : t;
      }
      var lM = Pe(cC);
      function cC(u, c) {
        return u && u.length && c && c.length ? id(u, c) : u;
      }
      function sM(u, c, p) {
        return u && u.length && c && c.length ? id(u, c, ve(p, 2)) : u;
      }
      function uM(u, c, p) {
        return u && u.length && c && c.length ? id(u, c, t, p) : u;
      }
      var fM = Oi(function(u, c) {
        var p = u == null ? 0 : u.length, m = jh(u, c);
        return by(u, St(c, function(b) {
          return Ii(b, p) ? +b : b;
        }).sort(Dy)), m;
      });
      function cM(u, c) {
        var p = [];
        if (!(u && u.length))
          return p;
        var m = -1, b = [], A = u.length;
        for (c = ve(c, 3); ++m < A; ) {
          var O = u[m];
          c(O, m, u) && (p.push(O), b.push(m));
        }
        return by(u, b), p;
      }
      function bd(u) {
        return u == null ? u : iO.call(u);
      }
      function hM(u, c, p) {
        var m = u == null ? 0 : u.length;
        return m ? (p && typeof p != "number" && gr(u, c, p) ? (c = 0, p = m) : (c = c == null ? 0 : De(c), p = p === t ? m : De(p)), pn(u, c, p)) : [];
      }
      function dM(u, c) {
        return ku(u, c);
      }
      function vM(u, c, p) {
        return ld(u, c, ve(p, 2));
      }
      function pM(u, c) {
        var p = u == null ? 0 : u.length;
        if (p) {
          var m = ku(u, c);
          if (m < p && $n(u[m], c))
            return m;
        }
        return -1;
      }
      function gM(u, c) {
        return ku(u, c, !0);
      }
      function yM(u, c, p) {
        return ld(u, c, ve(p, 2), !0);
      }
      function CM(u, c) {
        var p = u == null ? 0 : u.length;
        if (p) {
          var m = ku(u, c, !0) - 1;
          if ($n(u[m], c))
            return m;
        }
        return -1;
      }
      function mM(u) {
        return u && u.length ? Ey(u) : [];
      }
      function _M(u, c) {
        return u && u.length ? Ey(u, ve(c, 2)) : [];
      }
      function wM(u) {
        var c = u == null ? 0 : u.length;
        return c ? pn(u, 1, c) : [];
      }
      function xM(u, c, p) {
        return u && u.length ? (c = p || c === t ? 1 : De(c), pn(u, 0, c < 0 ? 0 : c)) : [];
      }
      function SM(u, c, p) {
        var m = u == null ? 0 : u.length;
        return m ? (c = p || c === t ? 1 : De(c), c = m - c, pn(u, c < 0 ? 0 : c, m)) : [];
      }
      function bM(u, c) {
        return u && u.length ? Gu(u, ve(c, 3), !1, !0) : [];
      }
      function TM(u, c) {
        return u && u.length ? Gu(u, ve(c, 3)) : [];
      }
      var EM = Pe(function(u) {
        return co(Zt(u, 1, Bt, !0));
      }), LM = Pe(function(u) {
        var c = gn(u);
        return Bt(c) && (c = t), co(Zt(u, 1, Bt, !0), ve(c, 2));
      }), AM = Pe(function(u) {
        var c = gn(u);
        return c = typeof c == "function" ? c : t, co(Zt(u, 1, Bt, !0), t, c);
      });
      function RM(u) {
        return u && u.length ? co(u) : [];
      }
      function OM(u, c) {
        return u && u.length ? co(u, ve(c, 2)) : [];
      }
      function IM(u, c) {
        return c = typeof c == "function" ? c : t, u && u.length ? co(u, t, c) : [];
      }
      function Td(u) {
        if (!(u && u.length))
          return [];
        var c = 0;
        return u = ao(u, function(p) {
          if (Bt(p))
            return c = zt(p.length, c), !0;
        }), kh(c, function(p) {
          return St(u, Hh(p));
        });
      }
      function hC(u, c) {
        if (!(u && u.length))
          return [];
        var p = Td(u);
        return c == null ? p : St(p, function(m) {
          return Vr(c, t, m);
        });
      }
      var MM = Pe(function(u, c) {
        return Bt(u) ? Ul(u, c) : [];
      }), BM = Pe(function(u) {
        return ud(ao(u, Bt));
      }), DM = Pe(function(u) {
        var c = gn(u);
        return Bt(c) && (c = t), ud(ao(u, Bt), ve(c, 2));
      }), $M = Pe(function(u) {
        var c = gn(u);
        return c = typeof c == "function" ? c : t, ud(ao(u, Bt), t, c);
      }), FM = Pe(Td);
      function PM(u, c) {
        return Oy(u || [], c || [], Gl);
      }
      function NM(u, c) {
        return Oy(u || [], c || [], Vl);
      }
      var HM = Pe(function(u) {
        var c = u.length, p = c > 1 ? u[c - 1] : t;
        return p = typeof p == "function" ? (u.pop(), p) : t, hC(u, p);
      });
      function dC(u) {
        var c = E(u);
        return c.__chain__ = !0, c;
      }
      function zM(u, c) {
        return c(u), u;
      }
      function Qu(u, c) {
        return c(u);
      }
      var WM = Oi(function(u) {
        var c = u.length, p = c ? u[0] : 0, m = this.__wrapped__, b = function(A) {
          return jh(A, u);
        };
        return c > 1 || this.__actions__.length || !(m instanceof Ue) || !Ii(p) ? this.thru(b) : (m = m.slice(p, +p + (c ? 1 : 0)), m.__actions__.push({
          func: Qu,
          args: [b],
          thisArg: t
        }), new dn(m, this.__chain__).thru(function(A) {
          return c && !A.length && A.push(t), A;
        }));
      });
      function kM() {
        return dC(this);
      }
      function GM() {
        return new dn(this.value(), this.__chain__);
      }
      function UM() {
        this.__values__ === t && (this.__values__ = LC(this.value()));
        var u = this.__index__ >= this.__values__.length, c = u ? t : this.__values__[this.__index__++];
        return { done: u, value: c };
      }
      function YM() {
        return this;
      }
      function XM(u) {
        for (var c, p = this; p instanceof Pu; ) {
          var m = aC(p);
          m.__index__ = 0, m.__values__ = t, c ? b.__wrapped__ = m : c = m;
          var b = m;
          p = p.__wrapped__;
        }
        return b.__wrapped__ = u, c;
      }
      function VM() {
        var u = this.__wrapped__;
        if (u instanceof Ue) {
          var c = u;
          return this.__actions__.length && (c = new Ue(this)), c = c.reverse(), c.__actions__.push({
            func: Qu,
            args: [bd],
            thisArg: t
          }), new dn(c, this.__chain__);
        }
        return this.thru(bd);
      }
      function qM() {
        return Ry(this.__wrapped__, this.__actions__);
      }
      var KM = Uu(function(u, c, p) {
        st.call(u, p) ? ++u[p] : Ai(u, p, 1);
      });
      function jM(u, c, p) {
        var m = Me(u) ? k1 : zO;
        return p && gr(u, c, p) && (c = t), m(u, ve(c, 3));
      }
      function ZM(u, c) {
        var p = Me(u) ? ao : hy;
        return p(u, ve(c, 3));
      }
      var QM = zy(lC), JM = zy(sC);
      function e6(u, c) {
        return Zt(Ju(u, c), 1);
      }
      function t6(u, c) {
        return Zt(Ju(u, c), Oe);
      }
      function r6(u, c, p) {
        return p = p === t ? 1 : De(p), Zt(Ju(u, c), p);
      }
      function vC(u, c) {
        var p = Me(u) ? cn : fo;
        return p(u, ve(c, 3));
      }
      function pC(u, c) {
        var p = Me(u) ? wR : cy;
        return p(u, ve(c, 3));
      }
      var n6 = Uu(function(u, c, p) {
        st.call(u, p) ? u[p].push(c) : Ai(u, p, [c]);
      });
      function i6(u, c, p, m) {
        u = Br(u) ? u : Za(u), p = p && !m ? De(p) : 0;
        var b = u.length;
        return p < 0 && (p = zt(b + p, 0)), of(u) ? p <= b && u.indexOf(c, p) > -1 : !!b && Ha(u, c, p) > -1;
      }
      var o6 = Pe(function(u, c, p) {
        var m = -1, b = typeof c == "function", A = Br(u) ? H(u.length) : [];
        return fo(u, function(O) {
          A[++m] = b ? Vr(c, O, p) : Yl(O, c, p);
        }), A;
      }), a6 = Uu(function(u, c, p) {
        Ai(u, p, c);
      });
      function Ju(u, c) {
        var p = Me(u) ? St : Cy;
        return p(u, ve(c, 3));
      }
      function l6(u, c, p, m) {
        return u == null ? [] : (Me(c) || (c = c == null ? [] : [c]), p = m ? t : p, Me(p) || (p = p == null ? [] : [p]), xy(u, c, p));
      }
      var s6 = Uu(function(u, c, p) {
        u[p ? 0 : 1].push(c);
      }, function() {
        return [[], []];
      });
      function u6(u, c, p) {
        var m = Me(u) ? Ph : X1, b = arguments.length < 3;
        return m(u, ve(c, 4), p, b, fo);
      }
      function f6(u, c, p) {
        var m = Me(u) ? xR : X1, b = arguments.length < 3;
        return m(u, ve(c, 4), p, b, cy);
      }
      function c6(u, c) {
        var p = Me(u) ? ao : hy;
        return p(u, rf(ve(c, 3)));
      }
      function h6(u) {
        var c = Me(u) ? ly : iI;
        return c(u);
      }
      function d6(u, c, p) {
        (p ? gr(u, c, p) : c === t) ? c = 1 : c = De(c);
        var m = Me(u) ? $O : oI;
        return m(u, c);
      }
      function v6(u) {
        var c = Me(u) ? FO : lI;
        return c(u);
      }
      function p6(u) {
        if (u == null)
          return 0;
        if (Br(u))
          return of(u) ? Wa(u) : u.length;
        var c = or(u);
        return c == ct || c == Xr ? u.size : rd(u).length;
      }
      function g6(u, c, p) {
        var m = Me(u) ? Nh : sI;
        return p && gr(u, c, p) && (c = t), m(u, ve(c, 3));
      }
      var y6 = Pe(function(u, c) {
        if (u == null)
          return [];
        var p = c.length;
        return p > 1 && gr(u, c[0], c[1]) ? c = [] : p > 2 && gr(c[0], c[1], c[2]) && (c = [c[0]]), xy(u, Zt(c, 1), []);
      }), ef = ZR || function() {
        return jt.Date.now();
      };
      function C6(u, c) {
        if (typeof c != "function")
          throw new hn(a);
        return u = De(u), function() {
          if (--u < 1)
            return c.apply(this, arguments);
        };
      }
      function gC(u, c, p) {
        return c = p ? t : c, c = u && c == null ? u.length : c, Ri(u, $, t, t, t, t, c);
      }
      function yC(u, c) {
        var p;
        if (typeof c != "function")
          throw new hn(a);
        return u = De(u), function() {
          return --u > 0 && (p = c.apply(this, arguments)), u <= 1 && (c = t), p;
        };
      }
      var Ed = Pe(function(u, c, p) {
        var m = _;
        if (p.length) {
          var b = so(p, Ka(Ed));
          m |= R;
        }
        return Ri(u, m, c, p, b);
      }), CC = Pe(function(u, c, p) {
        var m = _ | w;
        if (p.length) {
          var b = so(p, Ka(CC));
          m |= R;
        }
        return Ri(c, m, u, p, b);
      });
      function mC(u, c, p) {
        c = p ? t : c;
        var m = Ri(u, S, t, t, t, t, t, c);
        return m.placeholder = mC.placeholder, m;
      }
      function _C(u, c, p) {
        c = p ? t : c;
        var m = Ri(u, T, t, t, t, t, t, c);
        return m.placeholder = _C.placeholder, m;
      }
      function wC(u, c, p) {
        var m, b, A, O, D, P, G = 0, U = !1, K = !1, re = !0;
        if (typeof u != "function")
          throw new hn(a);
        c = yn(c) || 0, At(p) && (U = !!p.leading, K = "maxWait" in p, A = K ? zt(yn(p.maxWait) || 0, c) : A, re = "trailing" in p ? !!p.trailing : re);
        function ue(Dt) {
          var Fn = m, Di = b;
          return m = b = t, G = Dt, O = u.apply(Di, Fn), O;
        }
        function ye(Dt) {
          return G = Dt, D = jl(ze, c), U ? ue(Dt) : O;
        }
        function $e(Dt) {
          var Fn = Dt - P, Di = Dt - G, zC = c - Fn;
          return K ? ir(zC, A - Di) : zC;
        }
        function Ce(Dt) {
          var Fn = Dt - P, Di = Dt - G;
          return P === t || Fn >= c || Fn < 0 || K && Di >= A;
        }
        function ze() {
          var Dt = ef();
          if (Ce(Dt))
            return Xe(Dt);
          D = jl(ze, $e(Dt));
        }
        function Xe(Dt) {
          return D = t, re && m ? ue(Dt) : (m = b = t, O);
        }
        function Zr() {
          D !== t && Iy(D), G = 0, m = P = b = D = t;
        }
        function yr() {
          return D === t ? O : Xe(ef());
        }
        function Qr() {
          var Dt = ef(), Fn = Ce(Dt);
          if (m = arguments, b = this, P = Dt, Fn) {
            if (D === t)
              return ye(P);
            if (K)
              return Iy(D), D = jl(ze, c), ue(P);
          }
          return D === t && (D = jl(ze, c)), O;
        }
        return Qr.cancel = Zr, Qr.flush = yr, Qr;
      }
      var m6 = Pe(function(u, c) {
        return fy(u, 1, c);
      }), _6 = Pe(function(u, c, p) {
        return fy(u, yn(c) || 0, p);
      });
      function w6(u) {
        return Ri(u, z);
      }
      function tf(u, c) {
        if (typeof u != "function" || c != null && typeof c != "function")
          throw new hn(a);
        var p = function() {
          var m = arguments, b = c ? c.apply(this, m) : m[0], A = p.cache;
          if (A.has(b))
            return A.get(b);
          var O = u.apply(this, m);
          return p.cache = A.set(b, O) || A, O;
        };
        return p.cache = new (tf.Cache || Li)(), p;
      }
      tf.Cache = Li;
      function rf(u) {
        if (typeof u != "function")
          throw new hn(a);
        return function() {
          var c = arguments;
          switch (c.length) {
            case 0:
              return !u.call(this);
            case 1:
              return !u.call(this, c[0]);
            case 2:
              return !u.call(this, c[0], c[1]);
            case 3:
              return !u.call(this, c[0], c[1], c[2]);
          }
          return !u.apply(this, c);
        };
      }
      function x6(u) {
        return yC(2, u);
      }
      var S6 = uI(function(u, c) {
        c = c.length == 1 && Me(c[0]) ? St(c[0], qr(ve())) : St(Zt(c, 1), qr(ve()));
        var p = c.length;
        return Pe(function(m) {
          for (var b = -1, A = ir(m.length, p); ++b < A; )
            m[b] = c[b].call(this, m[b]);
          return Vr(u, this, m);
        });
      }), Ld = Pe(function(u, c) {
        var p = so(c, Ka(Ld));
        return Ri(u, R, t, c, p);
      }), xC = Pe(function(u, c) {
        var p = so(c, Ka(xC));
        return Ri(u, B, t, c, p);
      }), b6 = Oi(function(u, c) {
        return Ri(u, N, t, t, t, c);
      });
      function T6(u, c) {
        if (typeof u != "function")
          throw new hn(a);
        return c = c === t ? c : De(c), Pe(u, c);
      }
      function E6(u, c) {
        if (typeof u != "function")
          throw new hn(a);
        return c = c == null ? 0 : zt(De(c), 0), Pe(function(p) {
          var m = p[c], b = vo(p, 0, c);
          return m && lo(b, m), Vr(u, this, b);
        });
      }
      function L6(u, c, p) {
        var m = !0, b = !0;
        if (typeof u != "function")
          throw new hn(a);
        return At(p) && (m = "leading" in p ? !!p.leading : m, b = "trailing" in p ? !!p.trailing : b), wC(u, c, {
          leading: m,
          maxWait: c,
          trailing: b
        });
      }
      function A6(u) {
        return gC(u, 1);
      }
      function R6(u, c) {
        return Ld(cd(c), u);
      }
      function O6() {
        if (!arguments.length)
          return [];
        var u = arguments[0];
        return Me(u) ? u : [u];
      }
      function I6(u) {
        return vn(u, g);
      }
      function M6(u, c) {
        return c = typeof c == "function" ? c : t, vn(u, g, c);
      }
      function B6(u) {
        return vn(u, d | g);
      }
      function D6(u, c) {
        return c = typeof c == "function" ? c : t, vn(u, d | g, c);
      }
      function $6(u, c) {
        return c == null || uy(u, c, Ut(c));
      }
      function $n(u, c) {
        return u === c || u !== u && c !== c;
      }
      var F6 = qu(Jh), P6 = qu(function(u, c) {
        return u >= c;
      }), Zo = py(/* @__PURE__ */ function() {
        return arguments;
      }()) ? py : function(u) {
        return Ot(u) && st.call(u, "callee") && !ty.call(u, "callee");
      }, Me = H.isArray, N6 = F1 ? qr(F1) : XO;
      function Br(u) {
        return u != null && nf(u.length) && !Mi(u);
      }
      function Bt(u) {
        return Ot(u) && Br(u);
      }
      function H6(u) {
        return u === !0 || u === !1 || Ot(u) && pr(u) == vr;
      }
      var po = JR || Nd, z6 = P1 ? qr(P1) : VO;
      function W6(u) {
        return Ot(u) && u.nodeType === 1 && !Zl(u);
      }
      function k6(u) {
        if (u == null)
          return !0;
        if (Br(u) && (Me(u) || typeof u == "string" || typeof u.splice == "function" || po(u) || ja(u) || Zo(u)))
          return !u.length;
        var c = or(u);
        if (c == ct || c == Xr)
          return !u.size;
        if (Kl(u))
          return !rd(u).length;
        for (var p in u)
          if (st.call(u, p))
            return !1;
        return !0;
      }
      function G6(u, c) {
        return Xl(u, c);
      }
      function U6(u, c, p) {
        p = typeof p == "function" ? p : t;
        var m = p ? p(u, c) : t;
        return m === t ? Xl(u, c, t, p) : !!m;
      }
      function Ad(u) {
        if (!Ot(u))
          return !1;
        var c = pr(u);
        return c == ri || c == io || typeof u.message == "string" && typeof u.name == "string" && !Zl(u);
      }
      function Y6(u) {
        return typeof u == "number" && ny(u);
      }
      function Mi(u) {
        if (!At(u))
          return !1;
        var c = pr(u);
        return c == oo || c == et || c == nr || c == yh;
      }
      function SC(u) {
        return typeof u == "number" && u == De(u);
      }
      function nf(u) {
        return typeof u == "number" && u > -1 && u % 1 == 0 && u <= me;
      }
      function At(u) {
        var c = typeof u;
        return u != null && (c == "object" || c == "function");
      }
      function Ot(u) {
        return u != null && typeof u == "object";
      }
      var bC = N1 ? qr(N1) : KO;
      function X6(u, c) {
        return u === c || td(u, c, Cd(c));
      }
      function V6(u, c, p) {
        return p = typeof p == "function" ? p : t, td(u, c, Cd(c), p);
      }
      function q6(u) {
        return TC(u) && u != +u;
      }
      function K6(u) {
        if (MI(u))
          throw new Ie(o);
        return gy(u);
      }
      function j6(u) {
        return u === null;
      }
      function Z6(u) {
        return u == null;
      }
      function TC(u) {
        return typeof u == "number" || Ot(u) && pr(u) == pt;
      }
      function Zl(u) {
        if (!Ot(u) || pr(u) != Yr)
          return !1;
        var c = Ou(u);
        if (c === null)
          return !0;
        var p = st.call(c, "constructor") && c.constructor;
        return typeof p == "function" && p instanceof p && Eu.call(p) == VR;
      }
      var Rd = H1 ? qr(H1) : jO;
      function Q6(u) {
        return SC(u) && u >= -me && u <= me;
      }
      var EC = z1 ? qr(z1) : ZO;
      function of(u) {
        return typeof u == "string" || !Me(u) && Ot(u) && pr(u) == Mn;
      }
      function jr(u) {
        return typeof u == "symbol" || Ot(u) && pr(u) == ni;
      }
      var ja = W1 ? qr(W1) : QO;
      function J6(u) {
        return u === t;
      }
      function e8(u) {
        return Ot(u) && or(u) == $l;
      }
      function t8(u) {
        return Ot(u) && pr(u) == yA;
      }
      var r8 = qu(nd), n8 = qu(function(u, c) {
        return u <= c;
      });
      function LC(u) {
        if (!u)
          return [];
        if (Br(u))
          return of(u) ? Bn(u) : Mr(u);
        if (Nl && u[Nl])
          return $R(u[Nl]());
        var c = or(u), p = c == ct ? Uh : c == Xr ? Su : Za;
        return p(u);
      }
      function Bi(u) {
        if (!u)
          return u === 0 ? u : 0;
        if (u = yn(u), u === Oe || u === -Oe) {
          var c = u < 0 ? -1 : 1;
          return c * _e;
        }
        return u === u ? u : 0;
      }
      function De(u) {
        var c = Bi(u), p = c % 1;
        return c === c ? p ? c - p : c : 0;
      }
      function AC(u) {
        return u ? Vo(De(u), 0, Ee) : 0;
      }
      function yn(u) {
        if (typeof u == "number")
          return u;
        if (jr(u))
          return ke;
        if (At(u)) {
          var c = typeof u.valueOf == "function" ? u.valueOf() : u;
          u = At(c) ? c + "" : c;
        }
        if (typeof u != "string")
          return u === 0 ? u : +u;
        u = V1(u);
        var p = NA.test(u);
        return p || zA.test(u) ? CR(u.slice(2), p ? 2 : 8) : PA.test(u) ? ke : +u;
      }
      function RC(u) {
        return oi(u, Dr(u));
      }
      function i8(u) {
        return u ? Vo(De(u), -me, me) : u === 0 ? u : 0;
      }
      function at(u) {
        return u == null ? "" : Kr(u);
      }
      var o8 = Va(function(u, c) {
        if (Kl(c) || Br(c)) {
          oi(c, Ut(c), u);
          return;
        }
        for (var p in c)
          st.call(c, p) && Gl(u, p, c[p]);
      }), OC = Va(function(u, c) {
        oi(c, Dr(c), u);
      }), af = Va(function(u, c, p, m) {
        oi(c, Dr(c), u, m);
      }), a8 = Va(function(u, c, p, m) {
        oi(c, Ut(c), u, m);
      }), l8 = Oi(jh);
      function s8(u, c) {
        var p = Xa(u);
        return c == null ? p : sy(p, c);
      }
      var u8 = Pe(function(u, c) {
        u = dt(u);
        var p = -1, m = c.length, b = m > 2 ? c[2] : t;
        for (b && gr(c[0], c[1], b) && (m = 1); ++p < m; )
          for (var A = c[p], O = Dr(A), D = -1, P = O.length; ++D < P; ) {
            var G = O[D], U = u[G];
            (U === t || $n(U, Ga[G]) && !st.call(u, G)) && (u[G] = A[G]);
          }
        return u;
      }), f8 = Pe(function(u) {
        return u.push(t, Vy), Vr(IC, t, u);
      });
      function c8(u, c) {
        return G1(u, ve(c, 3), ii);
      }
      function h8(u, c) {
        return G1(u, ve(c, 3), Qh);
      }
      function d8(u, c) {
        return u == null ? u : Zh(u, ve(c, 3), Dr);
      }
      function v8(u, c) {
        return u == null ? u : dy(u, ve(c, 3), Dr);
      }
      function p8(u, c) {
        return u && ii(u, ve(c, 3));
      }
      function g8(u, c) {
        return u && Qh(u, ve(c, 3));
      }
      function y8(u) {
        return u == null ? [] : zu(u, Ut(u));
      }
      function C8(u) {
        return u == null ? [] : zu(u, Dr(u));
      }
      function Od(u, c, p) {
        var m = u == null ? t : qo(u, c);
        return m === t ? p : m;
      }
      function m8(u, c) {
        return u != null && jy(u, c, kO);
      }
      function Id(u, c) {
        return u != null && jy(u, c, GO);
      }
      var _8 = ky(function(u, c, p) {
        c != null && typeof c.toString != "function" && (c = Lu.call(c)), u[c] = p;
      }, Bd($r)), w8 = ky(function(u, c, p) {
        c != null && typeof c.toString != "function" && (c = Lu.call(c)), st.call(u, c) ? u[c].push(p) : u[c] = [p];
      }, ve), x8 = Pe(Yl);
      function Ut(u) {
        return Br(u) ? ay(u) : rd(u);
      }
      function Dr(u) {
        return Br(u) ? ay(u, !0) : JO(u);
      }
      function S8(u, c) {
        var p = {};
        return c = ve(c, 3), ii(u, function(m, b, A) {
          Ai(p, c(m, b, A), m);
        }), p;
      }
      function b8(u, c) {
        var p = {};
        return c = ve(c, 3), ii(u, function(m, b, A) {
          Ai(p, b, c(m, b, A));
        }), p;
      }
      var T8 = Va(function(u, c, p) {
        Wu(u, c, p);
      }), IC = Va(function(u, c, p, m) {
        Wu(u, c, p, m);
      }), E8 = Oi(function(u, c) {
        var p = {};
        if (u == null)
          return p;
        var m = !1;
        c = St(c, function(A) {
          return A = ho(A, u), m || (m = A.length > 1), A;
        }), oi(u, gd(u), p), m && (p = vn(p, d | v | g, _I));
        for (var b = c.length; b--; )
          sd(p, c[b]);
        return p;
      });
      function L8(u, c) {
        return MC(u, rf(ve(c)));
      }
      var A8 = Oi(function(u, c) {
        return u == null ? {} : tI(u, c);
      });
      function MC(u, c) {
        if (u == null)
          return {};
        var p = St(gd(u), function(m) {
          return [m];
        });
        return c = ve(c), Sy(u, p, function(m, b) {
          return c(m, b[0]);
        });
      }
      function R8(u, c, p) {
        c = ho(c, u);
        var m = -1, b = c.length;
        for (b || (b = 1, u = t); ++m < b; ) {
          var A = u == null ? t : u[ai(c[m])];
          A === t && (m = b, A = p), u = Mi(A) ? A.call(u) : A;
        }
        return u;
      }
      function O8(u, c, p) {
        return u == null ? u : Vl(u, c, p);
      }
      function I8(u, c, p, m) {
        return m = typeof m == "function" ? m : t, u == null ? u : Vl(u, c, p, m);
      }
      var BC = Yy(Ut), DC = Yy(Dr);
      function M8(u, c, p) {
        var m = Me(u), b = m || po(u) || ja(u);
        if (c = ve(c, 4), p == null) {
          var A = u && u.constructor;
          b ? p = m ? new A() : [] : At(u) ? p = Mi(A) ? Xa(Ou(u)) : {} : p = {};
        }
        return (b ? cn : ii)(u, function(O, D, P) {
          return c(p, O, D, P);
        }), p;
      }
      function B8(u, c) {
        return u == null ? !0 : sd(u, c);
      }
      function D8(u, c, p) {
        return u == null ? u : Ay(u, c, cd(p));
      }
      function $8(u, c, p, m) {
        return m = typeof m == "function" ? m : t, u == null ? u : Ay(u, c, cd(p), m);
      }
      function Za(u) {
        return u == null ? [] : Gh(u, Ut(u));
      }
      function F8(u) {
        return u == null ? [] : Gh(u, Dr(u));
      }
      function P8(u, c, p) {
        return p === t && (p = c, c = t), p !== t && (p = yn(p), p = p === p ? p : 0), c !== t && (c = yn(c), c = c === c ? c : 0), Vo(yn(u), c, p);
      }
      function N8(u, c, p) {
        return c = Bi(c), p === t ? (p = c, c = 0) : p = Bi(p), u = yn(u), UO(u, c, p);
      }
      function H8(u, c, p) {
        if (p && typeof p != "boolean" && gr(u, c, p) && (c = p = t), p === t && (typeof c == "boolean" ? (p = c, c = t) : typeof u == "boolean" && (p = u, u = t)), u === t && c === t ? (u = 0, c = 1) : (u = Bi(u), c === t ? (c = u, u = 0) : c = Bi(c)), u > c) {
          var m = u;
          u = c, c = m;
        }
        if (p || u % 1 || c % 1) {
          var b = iy();
          return ir(u + b * (c - u + yR("1e-" + ((b + "").length - 1))), c);
        }
        return od(u, c);
      }
      var z8 = qa(function(u, c, p) {
        return c = c.toLowerCase(), u + (p ? $C(c) : c);
      });
      function $C(u) {
        return Md(at(u).toLowerCase());
      }
      function FC(u) {
        return u = at(u), u && u.replace(kA, OR).replace(lR, "");
      }
      function W8(u, c, p) {
        u = at(u), c = Kr(c);
        var m = u.length;
        p = p === t ? m : Vo(De(p), 0, m);
        var b = p;
        return p -= c.length, p >= 0 && u.slice(p, b) == c;
      }
      function k8(u) {
        return u = at(u), u && xA.test(u) ? u.replace(d1, IR) : u;
      }
      function G8(u) {
        return u = at(u), u && AA.test(u) ? u.replace(Lh, "\\$&") : u;
      }
      var U8 = qa(function(u, c, p) {
        return u + (p ? "-" : "") + c.toLowerCase();
      }), Y8 = qa(function(u, c, p) {
        return u + (p ? " " : "") + c.toLowerCase();
      }), X8 = Hy("toLowerCase");
      function V8(u, c, p) {
        u = at(u), c = De(c);
        var m = c ? Wa(u) : 0;
        if (!c || m >= c)
          return u;
        var b = (c - m) / 2;
        return Vu(Du(b), p) + u + Vu(Bu(b), p);
      }
      function q8(u, c, p) {
        u = at(u), c = De(c);
        var m = c ? Wa(u) : 0;
        return c && m < c ? u + Vu(c - m, p) : u;
      }
      function K8(u, c, p) {
        u = at(u), c = De(c);
        var m = c ? Wa(u) : 0;
        return c && m < c ? Vu(c - m, p) + u : u;
      }
      function j8(u, c, p) {
        return p || c == null ? c = 0 : c && (c = +c), nO(at(u).replace(Ah, ""), c || 0);
      }
      function Z8(u, c, p) {
        return (p ? gr(u, c, p) : c === t) ? c = 1 : c = De(c), ad(at(u), c);
      }
      function Q8() {
        var u = arguments, c = at(u[0]);
        return u.length < 3 ? c : c.replace(u[1], u[2]);
      }
      var J8 = qa(function(u, c, p) {
        return u + (p ? "_" : "") + c.toLowerCase();
      });
      function e3(u, c, p) {
        return p && typeof p != "number" && gr(u, c, p) && (c = p = t), p = p === t ? Ee : p >>> 0, p ? (u = at(u), u && (typeof c == "string" || c != null && !Rd(c)) && (c = Kr(c), !c && za(u)) ? vo(Bn(u), 0, p) : u.split(c, p)) : [];
      }
      var t3 = qa(function(u, c, p) {
        return u + (p ? " " : "") + Md(c);
      });
      function r3(u, c, p) {
        return u = at(u), p = p == null ? 0 : Vo(De(p), 0, u.length), c = Kr(c), u.slice(p, p + c.length) == c;
      }
      function n3(u, c, p) {
        var m = E.templateSettings;
        p && gr(u, c, p) && (c = t), u = at(u), c = af({}, c, m, Xy);
        var b = af({}, c.imports, m.imports, Xy), A = Ut(b), O = Gh(b, A), D, P, G = 0, U = c.interpolate || Cu, K = "__p += '", re = Yh(
          (c.escape || Cu).source + "|" + U.source + "|" + (U === v1 ? FA : Cu).source + "|" + (c.evaluate || Cu).source + "|$",
          "g"
        ), ue = "//# sourceURL=" + (st.call(c, "sourceURL") ? (c.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++hR + "]") + `
`;
        u.replace(re, function(Ce, ze, Xe, Zr, yr, Qr) {
          return Xe || (Xe = Zr), K += u.slice(G, Qr).replace(GA, MR), ze && (D = !0, K += `' +
__e(` + ze + `) +
'`), yr && (P = !0, K += `';
` + yr + `;
__p += '`), Xe && (K += `' +
((__t = (` + Xe + `)) == null ? '' : __t) +
'`), G = Qr + Ce.length, Ce;
        }), K += `';
`;
        var ye = st.call(c, "variable") && c.variable;
        if (!ye)
          K = `with (obj) {
` + K + `
}
`;
        else if (DA.test(ye))
          throw new Ie(l);
        K = (P ? K.replace(CA, "") : K).replace(mA, "$1").replace(_A, "$1;"), K = "function(" + (ye || "obj") + `) {
` + (ye ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (D ? ", __e = _.escape" : "") + (P ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + K + `return __p
}`;
        var $e = NC(function() {
          return tt(A, ue + "return " + K).apply(t, O);
        });
        if ($e.source = K, Ad($e))
          throw $e;
        return $e;
      }
      function i3(u) {
        return at(u).toLowerCase();
      }
      function o3(u) {
        return at(u).toUpperCase();
      }
      function a3(u, c, p) {
        if (u = at(u), u && (p || c === t))
          return V1(u);
        if (!u || !(c = Kr(c)))
          return u;
        var m = Bn(u), b = Bn(c), A = q1(m, b), O = K1(m, b) + 1;
        return vo(m, A, O).join("");
      }
      function l3(u, c, p) {
        if (u = at(u), u && (p || c === t))
          return u.slice(0, Z1(u) + 1);
        if (!u || !(c = Kr(c)))
          return u;
        var m = Bn(u), b = K1(m, Bn(c)) + 1;
        return vo(m, 0, b).join("");
      }
      function s3(u, c, p) {
        if (u = at(u), u && (p || c === t))
          return u.replace(Ah, "");
        if (!u || !(c = Kr(c)))
          return u;
        var m = Bn(u), b = q1(m, Bn(c));
        return vo(m, b).join("");
      }
      function u3(u, c) {
        var p = V, m = X;
        if (At(c)) {
          var b = "separator" in c ? c.separator : b;
          p = "length" in c ? De(c.length) : p, m = "omission" in c ? Kr(c.omission) : m;
        }
        u = at(u);
        var A = u.length;
        if (za(u)) {
          var O = Bn(u);
          A = O.length;
        }
        if (p >= A)
          return u;
        var D = p - Wa(m);
        if (D < 1)
          return m;
        var P = O ? vo(O, 0, D).join("") : u.slice(0, D);
        if (b === t)
          return P + m;
        if (O && (D += P.length - D), Rd(b)) {
          if (u.slice(D).search(b)) {
            var G, U = P;
            for (b.global || (b = Yh(b.source, at(p1.exec(b)) + "g")), b.lastIndex = 0; G = b.exec(U); )
              var K = G.index;
            P = P.slice(0, K === t ? D : K);
          }
        } else if (u.indexOf(Kr(b), D) != D) {
          var re = P.lastIndexOf(b);
          re > -1 && (P = P.slice(0, re));
        }
        return P + m;
      }
      function f3(u) {
        return u = at(u), u && wA.test(u) ? u.replace(h1, HR) : u;
      }
      var c3 = qa(function(u, c, p) {
        return u + (p ? " " : "") + c.toUpperCase();
      }), Md = Hy("toUpperCase");
      function PC(u, c, p) {
        return u = at(u), c = p ? t : c, c === t ? DR(u) ? kR(u) : TR(u) : u.match(c) || [];
      }
      var NC = Pe(function(u, c) {
        try {
          return Vr(u, t, c);
        } catch (p) {
          return Ad(p) ? p : new Ie(p);
        }
      }), h3 = Oi(function(u, c) {
        return cn(c, function(p) {
          p = ai(p), Ai(u, p, Ed(u[p], u));
        }), u;
      });
      function d3(u) {
        var c = u == null ? 0 : u.length, p = ve();
        return u = c ? St(u, function(m) {
          if (typeof m[1] != "function")
            throw new hn(a);
          return [p(m[0]), m[1]];
        }) : [], Pe(function(m) {
          for (var b = -1; ++b < c; ) {
            var A = u[b];
            if (Vr(A[0], this, m))
              return Vr(A[1], this, m);
          }
        });
      }
      function v3(u) {
        return HO(vn(u, d));
      }
      function Bd(u) {
        return function() {
          return u;
        };
      }
      function p3(u, c) {
        return u == null || u !== u ? c : u;
      }
      var g3 = Wy(), y3 = Wy(!0);
      function $r(u) {
        return u;
      }
      function Dd(u) {
        return yy(typeof u == "function" ? u : vn(u, d));
      }
      function C3(u) {
        return my(vn(u, d));
      }
      function m3(u, c) {
        return _y(u, vn(c, d));
      }
      var _3 = Pe(function(u, c) {
        return function(p) {
          return Yl(p, u, c);
        };
      }), w3 = Pe(function(u, c) {
        return function(p) {
          return Yl(u, p, c);
        };
      });
      function $d(u, c, p) {
        var m = Ut(c), b = zu(c, m);
        p == null && !(At(c) && (b.length || !m.length)) && (p = c, c = u, u = this, b = zu(c, Ut(c)));
        var A = !(At(p) && "chain" in p) || !!p.chain, O = Mi(u);
        return cn(b, function(D) {
          var P = c[D];
          u[D] = P, O && (u.prototype[D] = function() {
            var G = this.__chain__;
            if (A || G) {
              var U = u(this.__wrapped__), K = U.__actions__ = Mr(this.__actions__);
              return K.push({ func: P, args: arguments, thisArg: u }), U.__chain__ = G, U;
            }
            return P.apply(u, lo([this.value()], arguments));
          });
        }), u;
      }
      function x3() {
        return jt._ === this && (jt._ = qR), this;
      }
      function Fd() {
      }
      function S3(u) {
        return u = De(u), Pe(function(c) {
          return wy(c, u);
        });
      }
      var b3 = dd(St), T3 = dd(k1), E3 = dd(Nh);
      function HC(u) {
        return _d(u) ? Hh(ai(u)) : rI(u);
      }
      function L3(u) {
        return function(c) {
          return u == null ? t : qo(u, c);
        };
      }
      var A3 = Gy(), R3 = Gy(!0);
      function Pd() {
        return [];
      }
      function Nd() {
        return !1;
      }
      function O3() {
        return {};
      }
      function I3() {
        return "";
      }
      function M3() {
        return !0;
      }
      function B3(u, c) {
        if (u = De(u), u < 1 || u > me)
          return [];
        var p = Ee, m = ir(u, Ee);
        c = ve(c), u -= Ee;
        for (var b = kh(m, c); ++p < u; )
          c(p);
        return b;
      }
      function D3(u) {
        return Me(u) ? St(u, ai) : jr(u) ? [u] : Mr(oC(at(u)));
      }
      function $3(u) {
        var c = ++XR;
        return at(u) + c;
      }
      var F3 = Xu(function(u, c) {
        return u + c;
      }, 0), P3 = vd("ceil"), N3 = Xu(function(u, c) {
        return u / c;
      }, 1), H3 = vd("floor");
      function z3(u) {
        return u && u.length ? Hu(u, $r, Jh) : t;
      }
      function W3(u, c) {
        return u && u.length ? Hu(u, ve(c, 2), Jh) : t;
      }
      function k3(u) {
        return Y1(u, $r);
      }
      function G3(u, c) {
        return Y1(u, ve(c, 2));
      }
      function U3(u) {
        return u && u.length ? Hu(u, $r, nd) : t;
      }
      function Y3(u, c) {
        return u && u.length ? Hu(u, ve(c, 2), nd) : t;
      }
      var X3 = Xu(function(u, c) {
        return u * c;
      }, 1), V3 = vd("round"), q3 = Xu(function(u, c) {
        return u - c;
      }, 0);
      function K3(u) {
        return u && u.length ? Wh(u, $r) : 0;
      }
      function j3(u, c) {
        return u && u.length ? Wh(u, ve(c, 2)) : 0;
      }
      return E.after = C6, E.ary = gC, E.assign = o8, E.assignIn = OC, E.assignInWith = af, E.assignWith = a8, E.at = l8, E.before = yC, E.bind = Ed, E.bindAll = h3, E.bindKey = CC, E.castArray = O6, E.chain = dC, E.chunk = HI, E.compact = zI, E.concat = WI, E.cond = d3, E.conforms = v3, E.constant = Bd, E.countBy = KM, E.create = s8, E.curry = mC, E.curryRight = _C, E.debounce = wC, E.defaults = u8, E.defaultsDeep = f8, E.defer = m6, E.delay = _6, E.difference = kI, E.differenceBy = GI, E.differenceWith = UI, E.drop = YI, E.dropRight = XI, E.dropRightWhile = VI, E.dropWhile = qI, E.fill = KI, E.filter = ZM, E.flatMap = e6, E.flatMapDeep = t6, E.flatMapDepth = r6, E.flatten = uC, E.flattenDeep = jI, E.flattenDepth = ZI, E.flip = w6, E.flow = g3, E.flowRight = y3, E.fromPairs = QI, E.functions = y8, E.functionsIn = C8, E.groupBy = n6, E.initial = eM, E.intersection = tM, E.intersectionBy = rM, E.intersectionWith = nM, E.invert = _8, E.invertBy = w8, E.invokeMap = o6, E.iteratee = Dd, E.keyBy = a6, E.keys = Ut, E.keysIn = Dr, E.map = Ju, E.mapKeys = S8, E.mapValues = b8, E.matches = C3, E.matchesProperty = m3, E.memoize = tf, E.merge = T8, E.mergeWith = IC, E.method = _3, E.methodOf = w3, E.mixin = $d, E.negate = rf, E.nthArg = S3, E.omit = E8, E.omitBy = L8, E.once = x6, E.orderBy = l6, E.over = b3, E.overArgs = S6, E.overEvery = T3, E.overSome = E3, E.partial = Ld, E.partialRight = xC, E.partition = s6, E.pick = A8, E.pickBy = MC, E.property = HC, E.propertyOf = L3, E.pull = lM, E.pullAll = cC, E.pullAllBy = sM, E.pullAllWith = uM, E.pullAt = fM, E.range = A3, E.rangeRight = R3, E.rearg = b6, E.reject = c6, E.remove = cM, E.rest = T6, E.reverse = bd, E.sampleSize = d6, E.set = O8, E.setWith = I8, E.shuffle = v6, E.slice = hM, E.sortBy = y6, E.sortedUniq = mM, E.sortedUniqBy = _M, E.split = e3, E.spread = E6, E.tail = wM, E.take = xM, E.takeRight = SM, E.takeRightWhile = bM, E.takeWhile = TM, E.tap = zM, E.throttle = L6, E.thru = Qu, E.toArray = LC, E.toPairs = BC, E.toPairsIn = DC, E.toPath = D3, E.toPlainObject = RC, E.transform = M8, E.unary = A6, E.union = EM, E.unionBy = LM, E.unionWith = AM, E.uniq = RM, E.uniqBy = OM, E.uniqWith = IM, E.unset = B8, E.unzip = Td, E.unzipWith = hC, E.update = D8, E.updateWith = $8, E.values = Za, E.valuesIn = F8, E.without = MM, E.words = PC, E.wrap = R6, E.xor = BM, E.xorBy = DM, E.xorWith = $M, E.zip = FM, E.zipObject = PM, E.zipObjectDeep = NM, E.zipWith = HM, E.entries = BC, E.entriesIn = DC, E.extend = OC, E.extendWith = af, $d(E, E), E.add = F3, E.attempt = NC, E.camelCase = z8, E.capitalize = $C, E.ceil = P3, E.clamp = P8, E.clone = I6, E.cloneDeep = B6, E.cloneDeepWith = D6, E.cloneWith = M6, E.conformsTo = $6, E.deburr = FC, E.defaultTo = p3, E.divide = N3, E.endsWith = W8, E.eq = $n, E.escape = k8, E.escapeRegExp = G8, E.every = jM, E.find = QM, E.findIndex = lC, E.findKey = c8, E.findLast = JM, E.findLastIndex = sC, E.findLastKey = h8, E.floor = H3, E.forEach = vC, E.forEachRight = pC, E.forIn = d8, E.forInRight = v8, E.forOwn = p8, E.forOwnRight = g8, E.get = Od, E.gt = F6, E.gte = P6, E.has = m8, E.hasIn = Id, E.head = fC, E.identity = $r, E.includes = i6, E.indexOf = JI, E.inRange = N8, E.invoke = x8, E.isArguments = Zo, E.isArray = Me, E.isArrayBuffer = N6, E.isArrayLike = Br, E.isArrayLikeObject = Bt, E.isBoolean = H6, E.isBuffer = po, E.isDate = z6, E.isElement = W6, E.isEmpty = k6, E.isEqual = G6, E.isEqualWith = U6, E.isError = Ad, E.isFinite = Y6, E.isFunction = Mi, E.isInteger = SC, E.isLength = nf, E.isMap = bC, E.isMatch = X6, E.isMatchWith = V6, E.isNaN = q6, E.isNative = K6, E.isNil = Z6, E.isNull = j6, E.isNumber = TC, E.isObject = At, E.isObjectLike = Ot, E.isPlainObject = Zl, E.isRegExp = Rd, E.isSafeInteger = Q6, E.isSet = EC, E.isString = of, E.isSymbol = jr, E.isTypedArray = ja, E.isUndefined = J6, E.isWeakMap = e8, E.isWeakSet = t8, E.join = iM, E.kebabCase = U8, E.last = gn, E.lastIndexOf = oM, E.lowerCase = Y8, E.lowerFirst = X8, E.lt = r8, E.lte = n8, E.max = z3, E.maxBy = W3, E.mean = k3, E.meanBy = G3, E.min = U3, E.minBy = Y3, E.stubArray = Pd, E.stubFalse = Nd, E.stubObject = O3, E.stubString = I3, E.stubTrue = M3, E.multiply = X3, E.nth = aM, E.noConflict = x3, E.noop = Fd, E.now = ef, E.pad = V8, E.padEnd = q8, E.padStart = K8, E.parseInt = j8, E.random = H8, E.reduce = u6, E.reduceRight = f6, E.repeat = Z8, E.replace = Q8, E.result = R8, E.round = V3, E.runInContext = F, E.sample = h6, E.size = p6, E.snakeCase = J8, E.some = g6, E.sortedIndex = dM, E.sortedIndexBy = vM, E.sortedIndexOf = pM, E.sortedLastIndex = gM, E.sortedLastIndexBy = yM, E.sortedLastIndexOf = CM, E.startCase = t3, E.startsWith = r3, E.subtract = q3, E.sum = K3, E.sumBy = j3, E.template = n3, E.times = B3, E.toFinite = Bi, E.toInteger = De, E.toLength = AC, E.toLower = i3, E.toNumber = yn, E.toSafeInteger = i8, E.toString = at, E.toUpper = o3, E.trim = a3, E.trimEnd = l3, E.trimStart = s3, E.truncate = u3, E.unescape = f3, E.uniqueId = $3, E.upperCase = c3, E.upperFirst = Md, E.each = vC, E.eachRight = pC, E.first = fC, $d(E, function() {
        var u = {};
        return ii(E, function(c, p) {
          st.call(E.prototype, p) || (u[p] = c);
        }), u;
      }(), { chain: !1 }), E.VERSION = n, cn(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(u) {
        E[u].placeholder = E;
      }), cn(["drop", "take"], function(u, c) {
        Ue.prototype[u] = function(p) {
          p = p === t ? 1 : zt(De(p), 0);
          var m = this.__filtered__ && !c ? new Ue(this) : this.clone();
          return m.__filtered__ ? m.__takeCount__ = ir(p, m.__takeCount__) : m.__views__.push({
            size: ir(p, Ee),
            type: u + (m.__dir__ < 0 ? "Right" : "")
          }), m;
        }, Ue.prototype[u + "Right"] = function(p) {
          return this.reverse()[u](p).reverse();
        };
      }), cn(["filter", "map", "takeWhile"], function(u, c) {
        var p = c + 1, m = p == se || p == ee;
        Ue.prototype[u] = function(b) {
          var A = this.clone();
          return A.__iteratees__.push({
            iteratee: ve(b, 3),
            type: p
          }), A.__filtered__ = A.__filtered__ || m, A;
        };
      }), cn(["head", "last"], function(u, c) {
        var p = "take" + (c ? "Right" : "");
        Ue.prototype[u] = function() {
          return this[p](1).value()[0];
        };
      }), cn(["initial", "tail"], function(u, c) {
        var p = "drop" + (c ? "" : "Right");
        Ue.prototype[u] = function() {
          return this.__filtered__ ? new Ue(this) : this[p](1);
        };
      }), Ue.prototype.compact = function() {
        return this.filter($r);
      }, Ue.prototype.find = function(u) {
        return this.filter(u).head();
      }, Ue.prototype.findLast = function(u) {
        return this.reverse().find(u);
      }, Ue.prototype.invokeMap = Pe(function(u, c) {
        return typeof u == "function" ? new Ue(this) : this.map(function(p) {
          return Yl(p, u, c);
        });
      }), Ue.prototype.reject = function(u) {
        return this.filter(rf(ve(u)));
      }, Ue.prototype.slice = function(u, c) {
        u = De(u);
        var p = this;
        return p.__filtered__ && (u > 0 || c < 0) ? new Ue(p) : (u < 0 ? p = p.takeRight(-u) : u && (p = p.drop(u)), c !== t && (c = De(c), p = c < 0 ? p.dropRight(-c) : p.take(c - u)), p);
      }, Ue.prototype.takeRightWhile = function(u) {
        return this.reverse().takeWhile(u).reverse();
      }, Ue.prototype.toArray = function() {
        return this.take(Ee);
      }, ii(Ue.prototype, function(u, c) {
        var p = /^(?:filter|find|map|reject)|While$/.test(c), m = /^(?:head|last)$/.test(c), b = E[m ? "take" + (c == "last" ? "Right" : "") : c], A = m || /^find/.test(c);
        b && (E.prototype[c] = function() {
          var O = this.__wrapped__, D = m ? [1] : arguments, P = O instanceof Ue, G = D[0], U = P || Me(O), K = function(ze) {
            var Xe = b.apply(E, lo([ze], D));
            return m && re ? Xe[0] : Xe;
          };
          U && p && typeof G == "function" && G.length != 1 && (P = U = !1);
          var re = this.__chain__, ue = !!this.__actions__.length, ye = A && !re, $e = P && !ue;
          if (!A && U) {
            O = $e ? O : new Ue(this);
            var Ce = u.apply(O, D);
            return Ce.__actions__.push({ func: Qu, args: [K], thisArg: t }), new dn(Ce, re);
          }
          return ye && $e ? u.apply(this, D) : (Ce = this.thru(K), ye ? m ? Ce.value()[0] : Ce.value() : Ce);
        });
      }), cn(["pop", "push", "shift", "sort", "splice", "unshift"], function(u) {
        var c = bu[u], p = /^(?:push|sort|unshift)$/.test(u) ? "tap" : "thru", m = /^(?:pop|shift)$/.test(u);
        E.prototype[u] = function() {
          var b = arguments;
          if (m && !this.__chain__) {
            var A = this.value();
            return c.apply(Me(A) ? A : [], b);
          }
          return this[p](function(O) {
            return c.apply(Me(O) ? O : [], b);
          });
        };
      }), ii(Ue.prototype, function(u, c) {
        var p = E[c];
        if (p) {
          var m = p.name + "";
          st.call(Ya, m) || (Ya[m] = []), Ya[m].push({ name: c, func: p });
        }
      }), Ya[Yu(t, w).name] = [{
        name: "wrapper",
        func: t
      }], Ue.prototype.clone = fO, Ue.prototype.reverse = cO, Ue.prototype.value = hO, E.prototype.at = WM, E.prototype.chain = kM, E.prototype.commit = GM, E.prototype.next = UM, E.prototype.plant = XM, E.prototype.reverse = VM, E.prototype.toJSON = E.prototype.valueOf = E.prototype.value = qM, E.prototype.first = E.prototype.head, Nl && (E.prototype[Nl] = YM), E;
    }, ka = GR();
    Go ? ((Go.exports = ka)._ = ka, Dh._ = ka) : jt._ = ka;
  }).call(ns);
})(wc, wc.exports);
var ea = wc.exports;
const Ox = {
  props: {
    sheetType: {
      type: String,
      default: "pivot"
    },
    data: {
      type: Object,
      default: () => ({
        fields: {
          rows: [],
          columns: [],
          values: [],
          valueInCols: !0
        },
        data: [],
        rowSubTotalsDimensions: [],
        colSubTotalsDimensions: []
      })
    },
    toolsOptions: {
      type: Object,
      default: () => ({
        rowGrandTotals: !0,
        rowSubTotals: !0,
        columnGrandTotals: !0,
        columnSubTotals: !0
      })
    }
  },
  setup(e, { expose: r }) {
    const t = e, n = {
      width: !0,
      height: "100%",
      getContainer: () => document.getElementById("containerId")
    }, i = Un({
      theme: {
        cell: {
          subtotal: {
            backgroundColor: "#f0f0f0",
            color: "#000"
          },
          total: {
            backgroundColor: "#d9d9d9",
            color: "#000"
          }
        },
        background: {
          color: "#fff"
        },
        colCell: {
          cell: {
            crossBackgroundColor: "#F6F6F7",
            backgroundColor: "#F6F6F7"
          },
          subtotal: {
            backgroundColor: "#f0f0f0",
            color: "#000"
          },
          total: {
            backgroundColor: "#d9d9d9",
            color: "#000"
          }
        },
        cornerCell: {
          cell: {
            crossBackgroundColor: "#F6F6F7",
            backgroundColor: "#F6F6F7"
          }
        },
        dataCell: {
          cell: {
            crossBackgroundColor: "#fff",
            backgroundColor: "#fff"
          }
        },
        rowCell: {
          //行头
          cell: {
            crossBackgroundColor: "#fff",
            backgroundColor: "#fff"
          }
        }
      },
      name: "gray"
    }), o = (h, d) => {
      if (h[Ae] === "reworkRate") {
        const v = d.reduce((y, C) => y + C.reworkQty, 0), g = d.reduce((y, C) => y + C.quantity, 0);
        return v / g * 100;
      } else
        return d.reduce((g, y) => g + y[y[Ae]], 0);
    }, a = Kx({
      style: {
        hierarchyCollapse: !1,
        layoutWidthType: "compact"
      },
      tooltip: {
        operation: {
          trend: !0,
          hiddenColumns: !0,
          sort: !0,
          onClick: (...h) => {
          }
        }
      },
      totals: {
        row: {
          showGrandTotals: t.toolsOptions.rowGrandTotals,
          showSubTotals: t.toolsOptions.rowSubTotals,
          reverseLayout: !0,
          reverseSubLayout: !0,
          totalsGroupDimensions: t.data.rowTotalsGroupDimensions,
          subTotalsDimensions: t.data.rowSubTotalsDimensions,
          calcTotals: {
            calcFunc: o
          },
          calcSubTotals: {
            calcFunc: o
          }
          //自定义
        },
        col: {
          showGrandTotals: t.toolsOptions.columnGrandTotals,
          showSubTotals: t.toolsOptions.columnSubTotals,
          reverseLayout: !0,
          reverseSubLayout: !0,
          totalsGroupDimensions: t.data.colTotalsGroupDimensions,
          subTotalsDimensions: t.data.colSubTotalsDimensions,
          calcTotals: {
            calcFunc: o
          },
          calcSubTotals: {
            calcFunc: o
          }
        }
      }
    }), l = jp(), s = Mo(() => {
      if (t.sheetType === "pivot")
        return t.data;
      {
        const h = {
          columns: ea.concat(
            [],
            t.data.fields.rows || [],
            t.data.fields.columns || [],
            t.data.fields.values || []
          )
        };
        return {
          ...t.data,
          fields: h
        };
      }
    }), f = (h) => {
      const d = DQ(l.value.instance, ",", !0);
      bQ(d, h ?? "jack");
    };
    return si(
      () => t.toolsOptions,
      (h) => {
        h && (l.value.instance.setOptions({
          totals: {
            row: {
              showGrandTotals: t.toolsOptions.rowGrandTotals,
              showSubTotals: t.toolsOptions.rowSubTotals,
              subTotalsDimensions: t.data.rowSubTotalsDimensions
              //自定义
            },
            col: {
              showGrandTotals: t.toolsOptions.columnGrandTotals,
              showSubTotals: t.toolsOptions.columnSubTotals,
              subTotalsDimensions: t.data.colSubTotalsDimensions
            }
          }
        }), l.value.instance.render());
      },
      { deep: !0 }
    ), r({ exportFunc: f, s2: l }), (h, d) => (fe(), mt(ra(lfe), {
      ref: (v, g) => {
        g.s2 = v, Qx(l) && (l.value = v);
      },
      sheetType: t.sheetType,
      dataCfg: ra(s),
      options: ra(a),
      themeCfg: i.value,
      adaptive: n
    }, null, 8, ["sheetType", "dataCfg", "options", "themeCfg"]));
  }
};
function Tn(e, r) {
  sfe(e) && (e = "100%");
  var t = ufe(e);
  return e = r === 360 ? e : Math.min(r, Math.max(0, parseFloat(e))), t && (e = parseInt(String(e * r), 10) / 100), Math.abs(e - r) < 1e-6 ? 1 : (r === 360 ? e = (e < 0 ? e % r + r : e % r) / parseFloat(String(r)) : e = e % r / parseFloat(String(r)), e);
}
function sfe(e) {
  return typeof e == "string" && e.indexOf(".") !== -1 && parseFloat(e) === 1;
}
function ufe(e) {
  return typeof e == "string" && e.indexOf("%") !== -1;
}
function ffe(e) {
  return e = parseFloat(e), (isNaN(e) || e < 0 || e > 1) && (e = 1), e;
}
function Lf(e) {
  return e <= 1 ? "".concat(Number(e) * 100, "%") : e;
}
function pv(e) {
  return e.length === 1 ? "0" + e : String(e);
}
function cfe(e, r, t) {
  return {
    r: Tn(e, 255) * 255,
    g: Tn(r, 255) * 255,
    b: Tn(t, 255) * 255
  };
}
function gv(e, r, t) {
  return t < 0 && (t += 1), t > 1 && (t -= 1), t < 1 / 6 ? e + (r - e) * (6 * t) : t < 1 / 2 ? r : t < 2 / 3 ? e + (r - e) * (2 / 3 - t) * 6 : e;
}
function hfe(e, r, t) {
  var n, i, o;
  if (e = Tn(e, 360), r = Tn(r, 100), t = Tn(t, 100), r === 0)
    i = t, o = t, n = t;
  else {
    var a = t < 0.5 ? t * (1 + r) : t + r - t * r, l = 2 * t - a;
    n = gv(l, a, e + 1 / 3), i = gv(l, a, e), o = gv(l, a, e - 1 / 3);
  }
  return { r: n * 255, g: i * 255, b: o * 255 };
}
function dfe(e, r, t) {
  e = Tn(e, 255), r = Tn(r, 255), t = Tn(t, 255);
  var n = Math.max(e, r, t), i = Math.min(e, r, t), o = 0, a = n, l = n - i, s = n === 0 ? 0 : l / n;
  if (n === i)
    o = 0;
  else {
    switch (n) {
      case e:
        o = (r - t) / l + (r < t ? 6 : 0);
        break;
      case r:
        o = (t - e) / l + 2;
        break;
      case t:
        o = (e - r) / l + 4;
        break;
    }
    o /= 6;
  }
  return { h: o, s, v: a };
}
function vfe(e, r, t) {
  e = Tn(e, 360) * 6, r = Tn(r, 100), t = Tn(t, 100);
  var n = Math.floor(e), i = e - n, o = t * (1 - r), a = t * (1 - i * r), l = t * (1 - (1 - i) * r), s = n % 6, f = [t, a, o, o, l, t][s], h = [l, t, t, a, o, o][s], d = [o, o, l, t, t, a][s];
  return { r: f * 255, g: h * 255, b: d * 255 };
}
function pfe(e, r, t, n) {
  var i = [
    pv(Math.round(e).toString(16)),
    pv(Math.round(r).toString(16)),
    pv(Math.round(t).toString(16))
  ];
  return i.join("");
}
function Ix(e) {
  return en(e) / 255;
}
function en(e) {
  return parseInt(e, 16);
}
var Mx = {
  aliceblue: "#f0f8ff",
  antiquewhite: "#faebd7",
  aqua: "#00ffff",
  aquamarine: "#7fffd4",
  azure: "#f0ffff",
  beige: "#f5f5dc",
  bisque: "#ffe4c4",
  black: "#000000",
  blanchedalmond: "#ffebcd",
  blue: "#0000ff",
  blueviolet: "#8a2be2",
  brown: "#a52a2a",
  burlywood: "#deb887",
  cadetblue: "#5f9ea0",
  chartreuse: "#7fff00",
  chocolate: "#d2691e",
  coral: "#ff7f50",
  cornflowerblue: "#6495ed",
  cornsilk: "#fff8dc",
  crimson: "#dc143c",
  cyan: "#00ffff",
  darkblue: "#00008b",
  darkcyan: "#008b8b",
  darkgoldenrod: "#b8860b",
  darkgray: "#a9a9a9",
  darkgreen: "#006400",
  darkgrey: "#a9a9a9",
  darkkhaki: "#bdb76b",
  darkmagenta: "#8b008b",
  darkolivegreen: "#556b2f",
  darkorange: "#ff8c00",
  darkorchid: "#9932cc",
  darkred: "#8b0000",
  darksalmon: "#e9967a",
  darkseagreen: "#8fbc8f",
  darkslateblue: "#483d8b",
  darkslategray: "#2f4f4f",
  darkslategrey: "#2f4f4f",
  darkturquoise: "#00ced1",
  darkviolet: "#9400d3",
  deeppink: "#ff1493",
  deepskyblue: "#00bfff",
  dimgray: "#696969",
  dimgrey: "#696969",
  dodgerblue: "#1e90ff",
  firebrick: "#b22222",
  floralwhite: "#fffaf0",
  forestgreen: "#228b22",
  fuchsia: "#ff00ff",
  gainsboro: "#dcdcdc",
  ghostwhite: "#f8f8ff",
  goldenrod: "#daa520",
  gold: "#ffd700",
  gray: "#808080",
  green: "#008000",
  greenyellow: "#adff2f",
  grey: "#808080",
  honeydew: "#f0fff0",
  hotpink: "#ff69b4",
  indianred: "#cd5c5c",
  indigo: "#4b0082",
  ivory: "#fffff0",
  khaki: "#f0e68c",
  lavenderblush: "#fff0f5",
  lavender: "#e6e6fa",
  lawngreen: "#7cfc00",
  lemonchiffon: "#fffacd",
  lightblue: "#add8e6",
  lightcoral: "#f08080",
  lightcyan: "#e0ffff",
  lightgoldenrodyellow: "#fafad2",
  lightgray: "#d3d3d3",
  lightgreen: "#90ee90",
  lightgrey: "#d3d3d3",
  lightpink: "#ffb6c1",
  lightsalmon: "#ffa07a",
  lightseagreen: "#20b2aa",
  lightskyblue: "#87cefa",
  lightslategray: "#778899",
  lightslategrey: "#778899",
  lightsteelblue: "#b0c4de",
  lightyellow: "#ffffe0",
  lime: "#00ff00",
  limegreen: "#32cd32",
  linen: "#faf0e6",
  magenta: "#ff00ff",
  maroon: "#800000",
  mediumaquamarine: "#66cdaa",
  mediumblue: "#0000cd",
  mediumorchid: "#ba55d3",
  mediumpurple: "#9370db",
  mediumseagreen: "#3cb371",
  mediumslateblue: "#7b68ee",
  mediumspringgreen: "#00fa9a",
  mediumturquoise: "#48d1cc",
  mediumvioletred: "#c71585",
  midnightblue: "#191970",
  mintcream: "#f5fffa",
  mistyrose: "#ffe4e1",
  moccasin: "#ffe4b5",
  navajowhite: "#ffdead",
  navy: "#000080",
  oldlace: "#fdf5e6",
  olive: "#808000",
  olivedrab: "#6b8e23",
  orange: "#ffa500",
  orangered: "#ff4500",
  orchid: "#da70d6",
  palegoldenrod: "#eee8aa",
  palegreen: "#98fb98",
  paleturquoise: "#afeeee",
  palevioletred: "#db7093",
  papayawhip: "#ffefd5",
  peachpuff: "#ffdab9",
  peru: "#cd853f",
  pink: "#ffc0cb",
  plum: "#dda0dd",
  powderblue: "#b0e0e6",
  purple: "#800080",
  rebeccapurple: "#663399",
  red: "#ff0000",
  rosybrown: "#bc8f8f",
  royalblue: "#4169e1",
  saddlebrown: "#8b4513",
  salmon: "#fa8072",
  sandybrown: "#f4a460",
  seagreen: "#2e8b57",
  seashell: "#fff5ee",
  sienna: "#a0522d",
  silver: "#c0c0c0",
  skyblue: "#87ceeb",
  slateblue: "#6a5acd",
  slategray: "#708090",
  slategrey: "#708090",
  snow: "#fffafa",
  springgreen: "#00ff7f",
  steelblue: "#4682b4",
  tan: "#d2b48c",
  teal: "#008080",
  thistle: "#d8bfd8",
  tomato: "#ff6347",
  turquoise: "#40e0d0",
  violet: "#ee82ee",
  wheat: "#f5deb3",
  white: "#ffffff",
  whitesmoke: "#f5f5f5",
  yellow: "#ffff00",
  yellowgreen: "#9acd32"
};
function is(e) {
  var r = { r: 0, g: 0, b: 0 }, t = 1, n = null, i = null, o = null, a = !1, l = !1;
  return typeof e == "string" && (e = Cfe(e)), typeof e == "object" && (Pi(e.r) && Pi(e.g) && Pi(e.b) ? (r = cfe(e.r, e.g, e.b), a = !0, l = String(e.r).substr(-1) === "%" ? "prgb" : "rgb") : Pi(e.h) && Pi(e.s) && Pi(e.v) ? (n = Lf(e.s), i = Lf(e.v), r = vfe(e.h, n, i), a = !0, l = "hsv") : Pi(e.h) && Pi(e.s) && Pi(e.l) && (n = Lf(e.s), o = Lf(e.l), r = hfe(e.h, n, o), a = !0, l = "hsl"), Object.prototype.hasOwnProperty.call(e, "a") && (t = e.a)), t = ffe(t), {
    ok: a,
    format: e.format || l,
    r: Math.min(255, Math.max(r.r, 0)),
    g: Math.min(255, Math.max(r.g, 0)),
    b: Math.min(255, Math.max(r.b, 0)),
    a: t
  };
}
var gfe = "[-\\+]?\\d+%?", yfe = "[-\\+]?\\d*\\.\\d+%?", xo = "(?:".concat(yfe, ")|(?:").concat(gfe, ")"), yv = "[\\s|\\(]+(".concat(xo, ")[,|\\s]+(").concat(xo, ")[,|\\s]+(").concat(xo, ")\\s*\\)?"), Cv = "[\\s|\\(]+(".concat(xo, ")[,|\\s]+(").concat(xo, ")[,|\\s]+(").concat(xo, ")[,|\\s]+(").concat(xo, ")\\s*\\)?"), Hn = {
  CSS_UNIT: new RegExp(xo),
  rgb: new RegExp("rgb" + yv),
  rgba: new RegExp("rgba" + Cv),
  hsl: new RegExp("hsl" + yv),
  hsla: new RegExp("hsla" + Cv),
  hsv: new RegExp("hsv" + yv),
  hsva: new RegExp("hsva" + Cv),
  hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
  hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
  hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
  hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
};
function Cfe(e) {
  if (e = e.trim().toLowerCase(), e.length === 0)
    return !1;
  var r = !1;
  if (Mx[e])
    e = Mx[e], r = !0;
  else if (e === "transparent")
    return { r: 0, g: 0, b: 0, a: 0, format: "name" };
  var t = Hn.rgb.exec(e);
  return t ? { r: t[1], g: t[2], b: t[3] } : (t = Hn.rgba.exec(e), t ? { r: t[1], g: t[2], b: t[3], a: t[4] } : (t = Hn.hsl.exec(e), t ? { h: t[1], s: t[2], l: t[3] } : (t = Hn.hsla.exec(e), t ? { h: t[1], s: t[2], l: t[3], a: t[4] } : (t = Hn.hsv.exec(e), t ? { h: t[1], s: t[2], v: t[3] } : (t = Hn.hsva.exec(e), t ? { h: t[1], s: t[2], v: t[3], a: t[4] } : (t = Hn.hex8.exec(e), t ? {
    r: en(t[1]),
    g: en(t[2]),
    b: en(t[3]),
    a: Ix(t[4]),
    format: r ? "name" : "hex8"
  } : (t = Hn.hex6.exec(e), t ? {
    r: en(t[1]),
    g: en(t[2]),
    b: en(t[3]),
    format: r ? "name" : "hex"
  } : (t = Hn.hex4.exec(e), t ? {
    r: en(t[1] + t[1]),
    g: en(t[2] + t[2]),
    b: en(t[3] + t[3]),
    a: Ix(t[4] + t[4]),
    format: r ? "name" : "hex8"
  } : (t = Hn.hex3.exec(e), t ? {
    r: en(t[1] + t[1]),
    g: en(t[2] + t[2]),
    b: en(t[3] + t[3]),
    format: r ? "name" : "hex"
  } : !1)))))))));
}
function Pi(e) {
  return !!Hn.CSS_UNIT.exec(String(e));
}
var Af = 2, Bx = 0.16, mfe = 0.05, _fe = 0.05, wfe = 0.15, cA = 5, hA = 4, xfe = [{
  index: 7,
  opacity: 0.15
}, {
  index: 6,
  opacity: 0.25
}, {
  index: 5,
  opacity: 0.3
}, {
  index: 5,
  opacity: 0.45
}, {
  index: 5,
  opacity: 0.65
}, {
  index: 5,
  opacity: 0.85
}, {
  index: 4,
  opacity: 0.9
}, {
  index: 3,
  opacity: 0.95
}, {
  index: 2,
  opacity: 0.97
}, {
  index: 1,
  opacity: 0.98
}];
function Dx(e) {
  var r = e.r, t = e.g, n = e.b, i = dfe(r, t, n);
  return {
    h: i.h * 360,
    s: i.s,
    v: i.v
  };
}
function Rf(e) {
  var r = e.r, t = e.g, n = e.b;
  return "#".concat(pfe(r, t, n));
}
function Sfe(e, r, t) {
  var n = t / 100, i = {
    r: (r.r - e.r) * n + e.r,
    g: (r.g - e.g) * n + e.g,
    b: (r.b - e.b) * n + e.b
  };
  return i;
}
function $x(e, r, t) {
  var n;
  return Math.round(e.h) >= 60 && Math.round(e.h) <= 240 ? n = t ? Math.round(e.h) - Af * r : Math.round(e.h) + Af * r : n = t ? Math.round(e.h) + Af * r : Math.round(e.h) - Af * r, n < 0 ? n += 360 : n >= 360 && (n -= 360), n;
}
function Fx(e, r, t) {
  if (e.h === 0 && e.s === 0)
    return e.s;
  var n;
  return t ? n = e.s - Bx * r : r === hA ? n = e.s + Bx : n = e.s + mfe * r, n > 1 && (n = 1), t && r === cA && n > 0.1 && (n = 0.1), n < 0.06 && (n = 0.06), Number(n.toFixed(2));
}
function Px(e, r, t) {
  var n;
  return t ? n = e.v + _fe * r : n = e.v - wfe * r, n > 1 && (n = 1), Number(n.toFixed(2));
}
function Vp(e) {
  for (var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, t = [], n = is(e), i = cA; i > 0; i -= 1) {
    var o = Dx(n), a = Rf(is({
      h: $x(o, i, !0),
      s: Fx(o, i, !0),
      v: Px(o, i, !0)
    }));
    t.push(a);
  }
  t.push(Rf(n));
  for (var l = 1; l <= hA; l += 1) {
    var s = Dx(n), f = Rf(is({
      h: $x(s, l),
      s: Fx(s, l),
      v: Px(s, l)
    }));
    t.push(f);
  }
  return r.theme === "dark" ? xfe.map(function(h) {
    var d = h.index, v = h.opacity, g = Rf(Sfe(is(r.backgroundColor || "#141414"), is(t[d]), v * 100));
    return g;
  }) : t;
}
var mv = {
  red: "#F5222D",
  volcano: "#FA541C",
  orange: "#FA8C16",
  gold: "#FAAD14",
  yellow: "#FADB14",
  lime: "#A0D911",
  green: "#52C41A",
  cyan: "#13C2C2",
  blue: "#1890FF",
  geekblue: "#2F54EB",
  purple: "#722ED1",
  magenta: "#EB2F96",
  grey: "#666666"
}, _v = {}, wv = {};
Object.keys(mv).forEach(function(e) {
  _v[e] = Vp(mv[e]), _v[e].primary = _v[e][5], wv[e] = Vp(mv[e], {
    theme: "dark",
    backgroundColor: "#141414"
  }), wv[e].primary = wv[e][5];
});
var Nx = [], os = [], bfe = "insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";
function Tfe() {
  var e = document.createElement("style");
  return e.setAttribute("type", "text/css"), e;
}
function Efe(e, r) {
  if (r = r || {}, e === void 0)
    throw new Error(bfe);
  var t = r.prepend === !0 ? "prepend" : "append", n = r.container !== void 0 ? r.container : document.querySelector("head"), i = Nx.indexOf(n);
  i === -1 && (i = Nx.push(n) - 1, os[i] = {});
  var o;
  return os[i] !== void 0 && os[i][t] !== void 0 ? o = os[i][t] : (o = os[i][t] = Tfe(), t === "prepend" ? n.insertBefore(o, n.childNodes[0]) : n.appendChild(o)), e.charCodeAt(0) === 65279 && (e = e.substr(1, e.length)), o.styleSheet ? o.styleSheet.cssText += e : o.textContent += e, o;
}
function Hx(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = arguments[r] != null ? Object(arguments[r]) : {}, n = Object.keys(t);
    typeof Object.getOwnPropertySymbols == "function" && (n = n.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    }))), n.forEach(function(i) {
      Lfe(e, i, t[i]);
    });
  }
  return e;
}
function Lfe(e, r, t) {
  return r in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e;
}
function Afe(e, r) {
  process.env.NODE_ENV !== "production" && !e && console !== void 0 && console.error("Warning: ".concat(r));
}
function Rfe(e, r) {
  Afe(e, "[@ant-design/icons-vue] ".concat(r));
}
function zx(e) {
  return typeof e == "object" && typeof e.name == "string" && typeof e.theme == "string" && (typeof e.icon == "object" || typeof e.icon == "function");
}
function qp(e, r, t) {
  return t ? kC(e.tag, Hx({
    key: r
  }, t, e.attrs), (e.children || []).map(function(n, i) {
    return qp(n, "".concat(r, "-").concat(e.tag, "-").concat(i));
  })) : kC(e.tag, Hx({
    key: r
  }, e.attrs), (e.children || []).map(function(n, i) {
    return qp(n, "".concat(r, "-").concat(e.tag, "-").concat(i));
  }));
}
function dA(e) {
  return Vp(e)[0];
}
function vA(e) {
  return e ? Array.isArray(e) ? e : [e] : [];
}
var Ofe = `
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`, Wx = !1, Ife = function() {
  var r = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Ofe;
  J3(function() {
    Wx || (typeof window < "u" && window.document && window.document.documentElement && Efe(r, {
      prepend: !0
    }), Wx = !0);
  });
}, Mfe = ["icon", "primaryColor", "secondaryColor"];
function Bfe(e, r) {
  if (e == null) return {};
  var t = Dfe(e, r), n, i;
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    for (i = 0; i < o.length; i++)
      n = o[i], !(r.indexOf(n) >= 0) && Object.prototype.propertyIsEnumerable.call(e, n) && (t[n] = e[n]);
  }
  return t;
}
function Dfe(e, r) {
  if (e == null) return {};
  var t = {}, n = Object.keys(e), i, o;
  for (o = 0; o < n.length; o++)
    i = n[o], !(r.indexOf(i) >= 0) && (t[i] = e[i]);
  return t;
}
function Hf(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = arguments[r] != null ? Object(arguments[r]) : {}, n = Object.keys(t);
    typeof Object.getOwnPropertySymbols == "function" && (n = n.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    }))), n.forEach(function(i) {
      $fe(e, i, t[i]);
    });
  }
  return e;
}
function $fe(e, r, t) {
  return r in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e;
}
var _s = {
  primaryColor: "#333",
  secondaryColor: "#E6E6E6",
  calculated: !1
};
function Ffe(e) {
  var r = e.primaryColor, t = e.secondaryColor;
  _s.primaryColor = r, _s.secondaryColor = t || dA(r), _s.calculated = !!t;
}
function Pfe() {
  return Hf({}, _s);
}
var zo = function(r, t) {
  var n = Hf({}, r, t.attrs), i = n.icon, o = n.primaryColor, a = n.secondaryColor, l = Bfe(n, Mfe), s = _s;
  if (o && (s = {
    primaryColor: o,
    secondaryColor: a || dA(o)
  }), Ife(), Rfe(zx(i), "icon should be icon definiton, but got ".concat(i)), !zx(i))
    return null;
  var f = i;
  return f && typeof f.icon == "function" && (f = Hf({}, f, {
    icon: f.icon(s.primaryColor, s.secondaryColor)
  })), qp(f.icon, "svg-".concat(f.name), Hf({}, l, {
    "data-icon": f.name,
    width: "1em",
    height: "1em",
    fill: "currentColor",
    "aria-hidden": "true"
  }));
};
zo.props = {
  icon: Object,
  primaryColor: String,
  secondaryColor: String,
  focusable: String
};
zo.inheritAttrs = !1;
zo.displayName = "IconBase";
zo.getTwoToneColors = Pfe;
zo.setTwoToneColors = Ffe;
function Nfe(e, r) {
  return kfe(e) || Wfe(e, r) || zfe(e, r) || Hfe();
}
function Hfe() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function zfe(e, r) {
  if (e) {
    if (typeof e == "string") return kx(e, r);
    var t = Object.prototype.toString.call(e).slice(8, -1);
    if (t === "Object" && e.constructor && (t = e.constructor.name), t === "Map" || t === "Set") return Array.from(e);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)) return kx(e, r);
  }
}
function kx(e, r) {
  (r == null || r > e.length) && (r = e.length);
  for (var t = 0, n = new Array(r); t < r; t++)
    n[t] = e[t];
  return n;
}
function Wfe(e, r) {
  var t = e == null ? null : typeof Symbol < "u" && e[Symbol.iterator] || e["@@iterator"];
  if (t != null) {
    var n = [], i = !0, o = !1, a, l;
    try {
      for (t = t.call(e); !(i = (a = t.next()).done) && (n.push(a.value), !(r && n.length === r)); i = !0)
        ;
    } catch (s) {
      o = !0, l = s;
    } finally {
      try {
        !i && t.return != null && t.return();
      } finally {
        if (o) throw l;
      }
    }
    return n;
  }
}
function kfe(e) {
  if (Array.isArray(e)) return e;
}
function pA(e) {
  var r = vA(e), t = Nfe(r, 2), n = t[0], i = t[1];
  return zo.setTwoToneColors({
    primaryColor: n,
    secondaryColor: i
  });
}
function Gfe() {
  var e = zo.getTwoToneColors();
  return e.calculated ? [e.primaryColor, e.secondaryColor] : e.primaryColor;
}
var Ufe = ["class", "icon", "spin", "rotate", "tabindex", "twoToneColor", "onClick"];
function Yfe(e, r) {
  return Kfe(e) || qfe(e, r) || Vfe(e, r) || Xfe();
}
function Xfe() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function Vfe(e, r) {
  if (e) {
    if (typeof e == "string") return Gx(e, r);
    var t = Object.prototype.toString.call(e).slice(8, -1);
    if (t === "Object" && e.constructor && (t = e.constructor.name), t === "Map" || t === "Set") return Array.from(e);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)) return Gx(e, r);
  }
}
function Gx(e, r) {
  (r == null || r > e.length) && (r = e.length);
  for (var t = 0, n = new Array(r); t < r; t++)
    n[t] = e[t];
  return n;
}
function qfe(e, r) {
  var t = e == null ? null : typeof Symbol < "u" && e[Symbol.iterator] || e["@@iterator"];
  if (t != null) {
    var n = [], i = !0, o = !1, a, l;
    try {
      for (t = t.call(e); !(i = (a = t.next()).done) && (n.push(a.value), !(r && n.length === r)); i = !0)
        ;
    } catch (s) {
      o = !0, l = s;
    } finally {
      try {
        !i && t.return != null && t.return();
      } finally {
        if (o) throw l;
      }
    }
    return n;
  }
}
function Kfe(e) {
  if (Array.isArray(e)) return e;
}
function Ux(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = arguments[r] != null ? Object(arguments[r]) : {}, n = Object.keys(t);
    typeof Object.getOwnPropertySymbols == "function" && (n = n.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    }))), n.forEach(function(i) {
      Kp(e, i, t[i]);
    });
  }
  return e;
}
function Kp(e, r, t) {
  return r in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e;
}
function jfe(e, r) {
  if (e == null) return {};
  var t = Zfe(e, r), n, i;
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    for (i = 0; i < o.length; i++)
      n = o[i], !(r.indexOf(n) >= 0) && Object.prototype.propertyIsEnumerable.call(e, n) && (t[n] = e[n]);
  }
  return t;
}
function Zfe(e, r) {
  if (e == null) return {};
  var t = {}, n = Object.keys(e), i, o;
  for (o = 0; o < n.length; o++)
    i = n[o], !(r.indexOf(i) >= 0) && (t[i] = e[i]);
  return t;
}
pA("#1890ff");
var Wo = function(r, t) {
  var n, i = Ux({}, r, t.attrs), o = i.class, a = i.icon, l = i.spin, s = i.rotate, f = i.tabindex, h = i.twoToneColor, d = i.onClick, v = jfe(i, Ufe), g = (n = {
    anticon: !0
  }, Kp(n, "anticon-".concat(a.name), !!a.name), Kp(n, o, o), n), y = l === "" || l || a.name === "loading" ? "anticon-spin" : "", C = f;
  C === void 0 && d && (C = -1, v.tabindex = C);
  var _ = s ? {
    msTransform: "rotate(".concat(s, "deg)"),
    transform: "rotate(".concat(s, "deg)")
  } : void 0, w = vA(h), x = Yfe(w, 2), S = x[0], T = x[1];
  return He("span", Ux({
    role: "img",
    "aria-label": a.name
  }, v, {
    onClick: d,
    class: g
  }), [He(zo, {
    class: y,
    icon: a,
    primaryColor: S,
    secondaryColor: T,
    style: _
  }, null)]);
};
Wo.props = {
  spin: Boolean,
  rotate: Number,
  icon: Object,
  twoToneColor: String
};
Wo.displayName = "AntdIcon";
Wo.inheritAttrs = !1;
Wo.getTwoToneColor = Gfe;
Wo.setTwoToneColor = pA;
var Qfe = { icon: { tag: "svg", attrs: { viewBox: "64 64 896 896", focusable: "false" }, children: [{ tag: "path", attrs: { d: "M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z" } }] }, name: "double-left", theme: "outlined" };
function Yx(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = arguments[r] != null ? Object(arguments[r]) : {}, n = Object.keys(t);
    typeof Object.getOwnPropertySymbols == "function" && (n = n.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    }))), n.forEach(function(i) {
      Jfe(e, i, t[i]);
    });
  }
  return e;
}
function Jfe(e, r, t) {
  return r in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e;
}
var l1 = function(r, t) {
  var n = Yx({}, r, t.attrs);
  return He(Wo, Yx({}, n, {
    icon: Qfe
  }), null);
};
l1.displayName = "DoubleLeftOutlined";
l1.inheritAttrs = !1;
var ece = { icon: { tag: "svg", attrs: { viewBox: "64 64 896 896", focusable: "false" }, children: [{ tag: "path", attrs: { d: "M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z" } }] }, name: "double-right", theme: "outlined" };
function Xx(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = arguments[r] != null ? Object(arguments[r]) : {}, n = Object.keys(t);
    typeof Object.getOwnPropertySymbols == "function" && (n = n.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    }))), n.forEach(function(i) {
      tce(e, i, t[i]);
    });
  }
  return e;
}
function tce(e, r, t) {
  return r in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e;
}
var s1 = function(r, t) {
  var n = Xx({}, r, t.attrs);
  return He(Wo, Xx({}, n, {
    icon: ece
  }), null);
};
s1.displayName = "DoubleRightOutlined";
s1.inheritAttrs = !1;
var rce = { icon: { tag: "svg", attrs: { viewBox: "64 64 896 896", focusable: "false" }, children: [{ tag: "path", attrs: { d: "M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z" } }] }, name: "holder", theme: "outlined" };
function Vx(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = arguments[r] != null ? Object(arguments[r]) : {}, n = Object.keys(t);
    typeof Object.getOwnPropertySymbols == "function" && (n = n.concat(Object.getOwnPropertySymbols(t).filter(function(i) {
      return Object.getOwnPropertyDescriptor(t, i).enumerable;
    }))), n.forEach(function(i) {
      nce(e, i, t[i]);
    });
  }
  return e;
}
function nce(e, r, t) {
  return r in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e;
}
var u1 = function(r, t) {
  var n = Vx({}, r, t.attrs);
  return He(Wo, Vx({}, n, {
    icon: rce
  }), null);
};
u1.displayName = "HolderOutlined";
u1.inheritAttrs = !1;
const gA = (e, r) => {
  const t = e.__vccOpts || e;
  for (const [n, i] of r)
    t[n] = i;
  return t;
}, ice = { class: "mr-15 w-13 inline-block" }, oce = { class: "mover custom-table-mover" }, ace = {
  props: {
    columnList: {
      type: Array,
      required: !0
    }
  },
  emits: ["update:columnList"],
  setup(e, { emit: r }) {
    const t = e, n = Mo({
      get() {
        return t.columnList;
      },
      set(a) {
        r("update:columnList", a);
      }
    }), i = () => {
    }, o = () => {
    };
    return (a, l) => (fe(), mt(ra(v5), {
      modelValue: ra(n),
      "onUpdate:modelValue": l[0] || (l[0] = (s) => Qx(n) ? n.value = s : null),
      chosenClass: "custom-table-chosen",
      ghostClass: "custom-table-ghost",
      handle: ".mover",
      filter: ".forbid",
      forceFallback: !0,
      "item-key": "index",
      onEnd: i,
      move: o
    }, {
      item: $t(({ element: s, index: f }) => [
        (fe(), Ke("div", {
          key: f,
          style: { "min-width": "200px", "line-height": "28px" },
          class: je(s.fixed ? "forbid" : "")
        }, [
          we("span", ice, [
            we("span", oce, [
              He(ra(u1))
            ])
          ]),
          He(ra(u5), {
            checked: s.selected,
            "onUpdate:checked": (h) => s.selected = h,
            onChange: i,
            style: { width: "calc(100% - 30px)" }
          }, {
            default: $t(() => [
              _n(Qe(s.label), 1)
            ]),
            _: 2
          }, 1032, ["checked", "onUpdate:checked"])
        ], 2))
      ]),
      _: 1
    }, 8, ["modelValue"]));
  }
}, lce = /* @__PURE__ */ gA(ace, [["__scopeId", "data-v-3732092e"]]), sce = {
  name: "pivot-sheet",
  props: {
    i18n: {
      type: Object,
      default: () => ({})
    },
    baseData: {
      type: Object,
      default: () => ({
        queryOption: {
          rows: [],
          columns: [],
          values: []
        },
        ...Ox.defaultProps
      })
    }
  },
  data() {
    return {
      foldList: [!1, !1, !1, !1],
      queryOption: {
        rows: [],
        columns: [],
        values: []
      },
      sheetType: "pivot",
      tooltipOption: {
        rowGrandTotals: !1,
        rowSubTotals: !1,
        columnGrandTotals: !1,
        columnSubTotals: !1
      },
      dataCfg: {
        fields: {
          rows: [],
          columns: [],
          values: [],
          valueInCols: !0
        },
        data: [],
        totalData: []
      }
    };
  },
  components: {
    SheetDraggable: lce,
    MySheetComponent: Ox,
    DoubleRightOutlined: s1,
    DoubleLeftOutlined: l1,
    Switch: f5,
    RadioGroup: c5,
    Radio: h5,
    RadioButton: d5
  },
  watch: {
    baseData: {
      handler(e, r) {
        const { queryOption: t, ...n } = e, { rows: i, columns: o, values: a, valueInCols: l } = this.getFields(t);
        this.dataCfg.fields.rows.length <= 0 || this.dataCfg.fields.columns.length <= 0 || this.dataCfg.fields.values.length <= 0 ? (this.queryOption = t, this.dataCfg = {
          fields: {
            rows: i,
            columns: o,
            values: a,
            valueInCols: l
          },
          ...n
        }) : (this.dataCfg.data = n.data, this.dataCfg.totalData = []);
      }
    },
    queryOption: {
      handler(e, r) {
        var t = this.getFields(Of(e));
        const n = this.groupAndSum(
          this.dataCfg.data,
          [...t.rows, ...t.columns],
          t.values
        );
        this.dataCfg.totalData = n, this.dataCfg.fields = t;
      },
      deep: !0
    }
  },
  methods: {
    groupAndSum(e, r, t) {
      const n = ea.groupBy(
        e,
        (o) => r.map((a) => o[a]).join("|")
      ), i = ea.mapValues(n, (o) => {
        const a = o[0], l = {};
        return r.forEach((s) => {
          l[s] = a[s];
        }), t.forEach((s) => {
          l[s] = ea.sumBy(o, s);
        }), l;
      });
      return Object.values(i);
    },
    handleExportData(e = "透视图") {
      this.$refs.sheetComp.exportFunc(e);
    },
    handleFold(e) {
      this.foldList[e] = !this.foldList[e];
    },
    getFields(e) {
      const r = ea.filter((e == null ? void 0 : e.rows) ?? [], (i) => i.selected).map(
        (i) => i.value
      ), t = ea.filter(
        (e == null ? void 0 : e.columns) ?? [],
        (i) => i.selected
      ).map((i) => i.value), n = ea.filter(
        (e == null ? void 0 : e.values) ?? [],
        (i) => i.selected
      ).map((i) => i.value);
      return {
        rows: r,
        columns: t,
        values: n,
        valueInCols: (e == null ? void 0 : e.valueInCols) ?? this.dataCfg.fields.valueInCols
      };
    }
  },
  created() {
    console.log("=============this.i18n======================="), console.log(this.i18n.locale), console.log("===================================="), this.i18n.locale !== "zh_CN" && _j("en_US");
  }
}, f1 = (e) => (e5("data-v-0b87709c"), e = e(), t5(), e), uce = { class: "custom-table" }, fce = { class: "sheet" }, cce = { class: "sheet-value-label" }, hce = /* @__PURE__ */ f1(() => /* @__PURE__ */ we("div", { class: "sheet-value-hr" }, null, -1)), dce = { class: "mt-10" }, vce = { class: "sheet-value-label" }, pce = /* @__PURE__ */ f1(() => /* @__PURE__ */ we("div", { class: "sheet-value-hr" }, null, -1)), gce = { class: "mt-10" }, yce = { class: "sheet-value-label" }, Cce = /* @__PURE__ */ f1(() => /* @__PURE__ */ we("div", { class: "sheet-value-hr" }, null, -1)), mce = { style: { "font-weight": "400", color: "#606266" } }, _ce = { class: "sheet-box" }, wce = { class: "sheet-box-folded-btn" }, xce = { class: "sheet-tools-top" }, Sce = { class: "sheet-tools-top-right" }, bce = { class: "sheet-tools-top-item" }, Tce = { class: "sheet-tools-top-item" }, Ece = { class: "sheet-tools-top-item" }, Lce = { class: "sheet-tools-top-item" }, Ace = {
  id: "containerId",
  class: "sheet-box-h"
};
function Rce(e, r, t, n, i, o) {
  var y, C, _, w, x;
  const a = qe("DoubleRightOutlined"), l = qe("sheet-draggable"), s = qe("Radio"), f = qe("RadioGroup"), h = qe("DoubleLeftOutlined"), d = qe("Radio-button"), v = qe("Switch"), g = qe("mySheetComponent");
  return fe(), Ke("div", uce, [
    Zx(e.$slots, "operate", { data: o.handleExportData }, void 0, !0),
    we("div", fce, [
      we("div", {
        class: je(["sheet-value", [{ "sheet-value-folded": (y = i.foldList) == null ? void 0 : y[3] }]])
      }, [
        we("div", null, [
          we("div", null, [
            we("div", cce, [
              _n(Qe(e.$t("yourOutfit")) + " ", 1),
              hce,
              He(a, {
                onClick: r[0] || (r[0] = (S) => o.handleFold(0))
              })
            ]),
            we("div", {
              class: je([
                "sheet-value-draggable",
                { "sheet-value-draggable-folded": (C = i.foldList) == null ? void 0 : C[0] }
              ])
            }, [
              He(l, {
                columnList: i.queryOption.rows,
                "onUpdate:columnList": r[1] || (r[1] = (S) => i.queryOption.rows = S),
                group: "select",
                animation: "300"
              }, null, 8, ["columnList"])
            ], 2)
          ]),
          we("div", dce, [
            we("div", vce, [
              _n(Qe(e.$t("columnHead")) + " ", 1),
              pce,
              He(a, {
                onClick: r[2] || (r[2] = (S) => o.handleFold(1))
              })
            ]),
            we("div", {
              class: je([
                "sheet-value-draggable",
                { "sheet-value-draggable-folded": (_ = i.foldList) == null ? void 0 : _[1] }
              ])
            }, [
              He(l, {
                columnList: i.queryOption.columns,
                "onUpdate:columnList": r[3] || (r[3] = (S) => i.queryOption.columns = S),
                group: "select",
                animation: "300"
              }, null, 8, ["columnList"])
            ], 2)
          ]),
          we("div", gce, [
            we("div", yce, [
              _n(Qe(e.$t("numericalValue")) + " ", 1),
              Cce,
              He(a, {
                onClick: r[4] || (r[4] = (S) => o.handleFold(2))
              })
            ]),
            we("div", {
              class: je([
                "sheet-value-draggable",
                { "sheet-value-draggable-folded": (w = i.foldList) == null ? void 0 : w[2] }
              ])
            }, [
              we("div", mce, [
                _n(Qe(e.$t("put")) + " ", 1),
                He(f, {
                  value: i.dataCfg.fields.valueInCols,
                  "onUpdate:value": r[5] || (r[5] = (S) => i.dataCfg.fields.valueInCols = S),
                  style: {
                    marginLeft: "8px",
                    marginBottom: "10px",
                    color: "#606266"
                  }
                }, {
                  default: $t(() => [
                    He(s, { value: !0 }, {
                      default: $t(() => [
                        _n(Qe(e.$t("yourOutfit")), 1)
                      ]),
                      _: 1
                    }),
                    He(s, { value: !1 }, {
                      default: $t(() => [
                        _n(Qe(e.$t("columnHead")), 1)
                      ]),
                      _: 1
                    })
                  ]),
                  _: 1
                }, 8, ["value"])
              ]),
              He(l, {
                columnList: i.queryOption.values,
                "onUpdate:columnList": r[6] || (r[6] = (S) => i.queryOption.values = S)
              }, null, 8, ["columnList"])
            ], 2)
          ])
        ])
      ], 2),
      we("div", _ce, [
        we("div", wce, [
          (x = i.foldList) != null && x[3] ? (fe(), mt(a, {
            key: 1,
            onClick: r[8] || (r[8] = (S) => o.handleFold(3))
          })) : (fe(), mt(h, {
            key: 0,
            onClick: r[7] || (r[7] = (S) => o.handleFold(3))
          }))
        ]),
        we("div", xce, [
          He(f, {
            value: i.sheetType,
            "onUpdate:value": r[9] || (r[9] = (S) => i.sheetType = S),
            style: { marginBottom: "8px" }
          }, {
            default: $t(() => [
              He(d, { value: "pivot" }, {
                default: $t(() => [
                  _n(Qe(e.$t("perspectiveView")), 1)
                ]),
                _: 1
              }),
              He(d, { value: "table" }, {
                default: $t(() => [
                  _n(Qe(e.$t("detailedDiagram")), 1)
                ]),
                _: 1
              })
            ]),
            _: 1
          }, 8, ["value"]),
          we("div", Sce, [
            we("div", bce, [
              we("span", null, Qe(e.$t("listTheNotes")), 1),
              He(v, {
                checked: i.tooltipOption.columnSubTotals,
                "onUpdate:checked": r[10] || (r[10] = (S) => i.tooltipOption.columnSubTotals = S)
              }, null, 8, ["checked"])
            ]),
            we("div", Tce, [
              we("span", null, Qe(e.$t("columnSummary")), 1),
              He(v, {
                checked: i.tooltipOption.columnGrandTotals,
                "onUpdate:checked": r[11] || (r[11] = (S) => i.tooltipOption.columnGrandTotals = S)
              }, null, 8, ["checked"])
            ]),
            we("div", Ece, [
              we("span", null, Qe(e.$t("xingxiaoji")), 1),
              He(v, {
                checked: i.tooltipOption.rowSubTotals,
                "onUpdate:checked": r[12] || (r[12] = (S) => i.tooltipOption.rowSubTotals = S)
              }, null, 8, ["checked"])
            ]),
            we("div", Lce, [
              we("span", null, Qe(e.$t("summary")), 1),
              He(v, {
                checked: i.tooltipOption.rowGrandTotals,
                "onUpdate:checked": r[13] || (r[13] = (S) => i.tooltipOption.rowGrandTotals = S)
              }, null, 8, ["checked"])
            ])
          ])
        ]),
        we("div", Ace, [
          He(g, {
            data: i.dataCfg,
            sheetType: i.sheetType,
            toolsOptions: i.tooltipOption,
            ref: "sheetComp"
          }, null, 8, ["data", "sheetType", "toolsOptions"])
        ])
      ])
    ])
  ]);
}
const c1 = /* @__PURE__ */ gA(sce, [["render", Rce], ["__scopeId", "data-v-0b87709c"]]);
c1.install = (e) => (e.component(Sheet.name, Sheet), e);
const Oce = [c1], Dce = {
  install(e) {
    Oce.forEach((r) => {
      e.component(r.name, c1);
    });
  }
};
export {
  c1 as PivotSheet,
  Dce as default
};
